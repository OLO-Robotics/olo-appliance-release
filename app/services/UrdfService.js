const a8_0x396c78=a8_0x191b;function a8_0x57bf(){const _0x2fe9b6=['base64','log','4686100vefSPV','[URDF\x20REWRITE]\x20Failed\x20to\x20rewrite\x20mesh\x20URIs\x20in\x20URDF:','text/xml','928818lCUnrY','stringify','getAttribute','2121904aOSdDd','[URDF]\x20Failed\x20to\x20process\x20robot_description\x20message:','.obj','processMessage','/robot_description','isMeshFile','[MESH]\x20Successfully\x20served\x20mesh:\x20','[URDF\x20PARAM]\x20Fetching\x20URDF\x20from\x20parameter:\x20','9BQFRsZ','ros2\x20pkg\x20prefix\x20','setApplianceBaseUrl','mesh','[URDF\x20REWRITE]\x20Rewrote\x20','constructor','slice','5fwjiWv','urdf_param_data','String\x20value\x20is:\x20','match','toLowerCase','1440424deRffG','308723SajNiA','substring','filename','parseFromString','.ply','message','startsWith','6658620IQwZoo','ros2\x20param\x20get\x20','some','meshExtensions','join','path','error','/ros/mesh?uri=','string','uri','handleUrdfParamRequest','toString','search','applianceBaseUrl','rewriteMeshUris','28RsJVLh','send','Mesh\x20file\x20not\x20found:\x20','package://','param_name','replace','endsWith','[URDF\x20REWRITE]\x20No\x20mesh\x20references\x20found\x20in\x20URDF','utf8','(((.+)+)+)+$','apply','1736592jQJdZr','trim','APPLIANCE_BASE_URL','serializeToString','\x20from\x20','length','msg','mesh_data','request_id','exports','handleMessage','child_process','get_urdf_param','data','\x20mesh\x20references\x20in\x20URDF','handleMeshRequest'];a8_0x57bf=function(){return _0x2fe9b6;};return a8_0x57bf();}(function(_0x5ad0f1,_0x5124b2){const _0x234c43=a8_0x191b,_0x37c036=_0x5ad0f1();while(!![]){try{const _0x4bf0fb=parseInt(_0x234c43(0xee))/0x1+-parseInt(_0x234c43(0xc1))/0x2+parseInt(_0x234c43(0xd6))/0x3+parseInt(_0x234c43(0xed))/0x4+-parseInt(_0x234c43(0xe8))/0x5*(-parseInt(_0x234c43(0xf5))/0x6)+parseInt(_0x234c43(0xb6))/0x7*(-parseInt(_0x234c43(0xd9))/0x8)+parseInt(_0x234c43(0xe1))/0x9*(parseInt(_0x234c43(0xd3))/0xa);if(_0x4bf0fb===_0x5124b2)break;else _0x37c036['push'](_0x37c036['shift']());}catch(_0x3da644){_0x37c036['push'](_0x37c036['shift']());}}}(a8_0x57bf,0x9936f));function a8_0x191b(_0x1443ba,_0x51dd1d){const _0x47c5e2=a8_0x57bf();return a8_0x191b=function(_0x2908e5,_0x2cdebf){_0x2908e5=_0x2908e5-0xae;let _0x57bf4e=_0x47c5e2[_0x2908e5];return _0x57bf4e;},a8_0x191b(_0x1443ba,_0x51dd1d);}const a8_0x2cdebf=(function(){let _0x2a534a=!![];return function(_0x26af53,_0x1c3e60){const _0x2b1efd=_0x2a534a?function(){const _0x5f1a50=a8_0x191b;if(_0x1c3e60){const _0x409a1d=_0x1c3e60[_0x5f1a50(0xc0)](_0x26af53,arguments);return _0x1c3e60=null,_0x409a1d;}}:function(){};return _0x2a534a=![],_0x2b1efd;};}()),a8_0x2908e5=a8_0x2cdebf(this,function(){const _0x70a0f=a8_0x191b;return a8_0x2908e5[_0x70a0f(0xb2)]()[_0x70a0f(0xb3)](_0x70a0f(0xbf))[_0x70a0f(0xb2)]()[_0x70a0f(0xe6)](a8_0x2908e5)['search'](_0x70a0f(0xbf));});a8_0x2908e5();const {DOMParser,XMLSerializer}=require('xmldom'),{execSync}=require(a8_0x396c78(0xcc)),fs=require('fs'),path=require(a8_0x396c78(0xfa));class UrdfService{constructor(){const _0x5ec362=a8_0x396c78;this[_0x5ec362(0xb4)]=process['env'][_0x5ec362(0xc3)]||'',this[_0x5ec362(0xf8)]=['.stl','.dae',_0x5ec362(0xdb),_0x5ec362(0xf2),'.mesh'];}[a8_0x396c78(0xb5)](_0xe3100b){const _0x35e3ec=a8_0x396c78;try{const _0xeeb111=new DOMParser(),_0x2ce996=_0xeeb111[_0x35e3ec(0xf1)](_0xe3100b,_0x35e3ec(0xd5));let _0x82ca28=0x0,_0x55453b=0x0;const _0x52155b=_0x2ce996['getElementsByTagName'](_0x35e3ec(0xe4));for(let _0x48dbef=0x0;_0x48dbef<_0x52155b[_0x35e3ec(0xc6)];_0x48dbef++){const _0x3a4597=_0x52155b[_0x48dbef],_0x5e4414=_0x3a4597[_0x35e3ec(0xd8)](_0x35e3ec(0xf0)),_0xd65ac=this[_0x35e3ec(0xf8)][_0x35e3ec(0xf7)](_0x1dec07=>_0x5e4414&&_0x5e4414[_0x35e3ec(0xec)]()[_0x35e3ec(0xbc)](_0x1dec07));if(_0x5e4414&&_0x5e4414[_0x35e3ec(0xf4)](_0x35e3ec(0xb9))&&_0xd65ac){_0x82ca28++;const _0x7dbcc8=this[_0x35e3ec(0xb4)]+_0x35e3ec(0xae)+encodeURIComponent(_0x5e4414);_0x3a4597['setAttribute'](_0x35e3ec(0xf0),_0x7dbcc8),_0x55453b++,console[_0x35e3ec(0xd2)]('[URDF\x20REWRITE]\x20Rewrote\x20mesh\x20URI:\x20'+_0x5e4414+'\x20->\x20'+_0x7dbcc8);}}_0x82ca28>0x0?console[_0x35e3ec(0xd2)](_0x35e3ec(0xe5)+_0x55453b+'\x20of\x20'+_0x82ca28+_0x35e3ec(0xcf)):console['log'](_0x35e3ec(0xbd));const _0x1b5f48=new XMLSerializer();return _0x1b5f48[_0x35e3ec(0xc4)](_0x2ce996);}catch(_0x568338){return console[_0x35e3ec(0xfb)](_0x35e3ec(0xd4),_0x568338),_0xe3100b;}}[a8_0x396c78(0xdc)](_0x490491,_0x5918ff){const _0x3d569a=a8_0x396c78;if(_0x5918ff===_0x3d569a(0xdd)&&_0x490491[_0x3d569a(0xc7)]&&_0x490491[_0x3d569a(0xc7)][_0x3d569a(0xce)])try{const _0x19cce6=_0x490491[_0x3d569a(0xc7)]['data'],_0x515579=this[_0x3d569a(0xb5)](_0x19cce6);if(_0x515579!==_0x19cce6){const _0x2e2214={..._0x490491};return _0x2e2214[_0x3d569a(0xc7)]={..._0x490491[_0x3d569a(0xc7)]},_0x2e2214[_0x3d569a(0xc7)][_0x3d569a(0xce)]=_0x515579,_0x2e2214;}}catch(_0x1feaf1){console['error'](_0x3d569a(0xda),_0x1feaf1);}return null;}[a8_0x396c78(0xb1)](_0x147b27,_0x50be10){const _0x279406=a8_0x396c78;if(_0x147b27['op']===_0x279406(0xcd)&&typeof _0x147b27[_0x279406(0xba)]===_0x279406(0xaf)&&_0x147b27[_0x279406(0xc9)])try{console['log'](_0x279406(0xe0)+_0x147b27[_0x279406(0xba)]);const _0x1ea632=execSync(_0x279406(0xf6)+_0x147b27[_0x279406(0xba)],{'encoding':_0x279406(0xbe)})[_0x279406(0xc2)]();let _0x297381=_0x1ea632;_0x1ea632[_0x279406(0xf4)](_0x279406(0xea))&&(_0x297381=_0x1ea632[_0x279406(0xef)](_0x279406(0xea)[_0x279406(0xc6)]()));_0x297381[_0x279406(0xf4)]('\x22')&&_0x297381[_0x279406(0xbc)]('\x22')&&(_0x297381=_0x297381[_0x279406(0xe7)](0x1,-0x1));_0x297381=_0x297381['replace'](/\\n/g,'\x0a')[_0x279406(0xbb)](/\\"/g,'\x22');const _0x23d635={'op':_0x279406(0xe9),'request_id':_0x147b27[_0x279406(0xc9)],'data':_0x297381};return _0x50be10[_0x279406(0xb7)](JSON[_0x279406(0xd7)](_0x23d635)),console[_0x279406(0xd2)]('[URDF\x20PARAM]\x20Successfully\x20served\x20URDF\x20parameter:\x20'+_0x147b27[_0x279406(0xba)]),!![];}catch(_0x21a622){console[_0x279406(0xfb)]('[URDF\x20PARAM]\x20Error\x20fetching\x20URDF\x20parameter:',_0x21a622);const _0x4d0dd4={'op':'urdf_param_data','request_id':_0x147b27[_0x279406(0xc9)],'error':_0x21a622[_0x279406(0xf3)]};return _0x50be10[_0x279406(0xb7)](JSON[_0x279406(0xd7)](_0x4d0dd4)),!![];}return![];}[a8_0x396c78(0xd0)](_0x4384a6,_0x6793e5){const _0x5c4777=a8_0x396c78;if(_0x4384a6['op']==='get_mesh'&&typeof _0x4384a6['uri']===_0x5c4777(0xaf)&&_0x4384a6[_0x5c4777(0xc9)])try{const _0x2f4733=_0x4384a6[_0x5c4777(0xb0)][_0x5c4777(0xeb)](/^package:\/\/([^\/]+)\/(.+)$/);if(_0x2f4733){const _0x4fb25a=_0x2f4733[0x1],_0x514142=_0x2f4733[0x2],_0x525f55=execSync(_0x5c4777(0xe2)+_0x4fb25a,{'encoding':'utf8'})[_0x5c4777(0xc2)](),_0x1b8147=path[_0x5c4777(0xf9)](_0x525f55,'share',_0x4fb25a,_0x514142);if(!fs['existsSync'](_0x1b8147))throw new Error(_0x5c4777(0xb8)+_0x1b8147);const _0x213aa7=fs['readFileSync'](_0x1b8147),_0x5309a0={'op':_0x5c4777(0xc8),'request_id':_0x4384a6['request_id'],'data':_0x213aa7[_0x5c4777(0xb2)](_0x5c4777(0xd1))};return _0x6793e5['send'](JSON[_0x5c4777(0xd7)](_0x5309a0)),console[_0x5c4777(0xd2)](_0x5c4777(0xdf)+_0x4384a6['uri']+_0x5c4777(0xc5)+_0x1b8147),!![];}}catch(_0x4aae92){console[_0x5c4777(0xfb)]('[MESH]\x20Error\x20serving\x20mesh:',_0x4aae92);const _0x43c0c1={'op':_0x5c4777(0xc8),'request_id':_0x4384a6[_0x5c4777(0xc9)],'error':_0x4aae92[_0x5c4777(0xf3)]};return _0x6793e5[_0x5c4777(0xb7)](JSON[_0x5c4777(0xd7)](_0x43c0c1)),!![];}return![];}[a8_0x396c78(0xcb)](_0x275abc,_0x15cf8d){const _0x2d7d74=a8_0x396c78;if(this[_0x2d7d74(0xb1)](_0x275abc,_0x15cf8d))return!![];if(this[_0x2d7d74(0xd0)](_0x275abc,_0x15cf8d))return!![];return![];}['getSupportedMeshExtensions'](){return[...this['meshExtensions']];}[a8_0x396c78(0xde)](_0x1e830c){const _0x2a4c34=a8_0x396c78;if(!_0x1e830c)return![];return this[_0x2a4c34(0xf8)][_0x2a4c34(0xf7)](_0x638814=>_0x1e830c[_0x2a4c34(0xec)]()[_0x2a4c34(0xbc)](_0x638814));}[a8_0x396c78(0xe3)](_0x184bf0){const _0x1e0c64=a8_0x396c78;this[_0x1e0c64(0xb4)]=_0x184bf0||'';}}module[a8_0x396c78(0xca)]=new UrdfService();