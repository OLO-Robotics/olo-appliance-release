const a5_0x2a758c=a5_0x1955;(function(_0x90fb75,_0x365f7c){const _0x2e26cc=a5_0x1955,_0x1a418f=_0x90fb75();while(!![]){try{const _0x4e25f3=parseInt(_0x2e26cc(0x1ec))/0x1*(parseInt(_0x2e26cc(0x1e9))/0x2)+-parseInt(_0x2e26cc(0x1e6))/0x3+-parseInt(_0x2e26cc(0x1e2))/0x4+-parseInt(_0x2e26cc(0x1f4))/0x5+parseInt(_0x2e26cc(0x1f2))/0x6*(-parseInt(_0x2e26cc(0x204))/0x7)+-parseInt(_0x2e26cc(0x1f8))/0x8+parseInt(_0x2e26cc(0x1d7))/0x9;if(_0x4e25f3===_0x365f7c)break;else _0x1a418f['push'](_0x1a418f['shift']());}catch(_0x3e77cd){_0x1a418f['push'](_0x1a418f['shift']());}}}(a5_0x4f02,0x4dcca));const a5_0x3752e4=(function(){let _0x15e1d5=!![];return function(_0x5f1a1a,_0x426c25){const _0x864c76=_0x15e1d5?function(){if(_0x426c25){const _0xf063b9=_0x426c25['apply'](_0x5f1a1a,arguments);return _0x426c25=null,_0xf063b9;}}:function(){};return _0x15e1d5=![],_0x864c76;};}()),a5_0x1836cf=a5_0x3752e4(this,function(){const _0x1a3880=a5_0x1955;return a5_0x1836cf[_0x1a3880(0x1db)]()['search']('(((.+)+)+)+$')[_0x1a3880(0x1db)]()[_0x1a3880(0x1f7)](a5_0x1836cf)[_0x1a3880(0x1dc)](_0x1a3880(0x1d3));});a5_0x1836cf();function a5_0x4f02(){const _0x138b4b=['21753954GDkFIq','exports','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','now','toString','search','GET','hostname','initialize','http','error','2012180RjrzNE','setTimeout','cacheExpiry','log','926289MdBMWh','getFallbackIceServers','destroy','16ZLrEKA','https:','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','10814PpMmgw','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','stun:stun.l.google.com:19302','./auth','[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','32838ibPhqX','data','2635585LZcKLQ','pathname','iceServers','constructor','2783872JMoDFa','/webrtc/turn-credentials','login','port','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','parse','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','serverUrl','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','fetchCredentials','637Qeiomo','warn','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','credentialsCache','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','getIceServers','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','(((.+)+)+)+$','end','stun:stun1.l.google.com:19302','getCredentials'];a5_0x4f02=function(){return _0x138b4b;};return a5_0x4f02();}const https=require('https'),http=require(a5_0x2a758c(0x1e0)),authService=require(a5_0x2a758c(0x1ef));class ApplianceTurnCredentialsService{constructor(){const _0x11cd3f=a5_0x2a758c;this['credentialsCache']=null,this['cacheExpiry']=0x0,this['cacheDuration']=0xe10*0x3e8,this[_0x11cd3f(0x201)]=null;}[a5_0x2a758c(0x1df)](_0x162d5d){const _0x2a7a0a=a5_0x2a758c;this[_0x2a7a0a(0x201)]=_0x162d5d,console['log'](_0x2a7a0a(0x1fc),_0x162d5d);}async[a5_0x2a758c(0x203)](){const _0x530b01=a5_0x2a758c;if(!this[_0x530b01(0x201)])return console[_0x530b01(0x1e1)](_0x530b01(0x1fe)),this[_0x530b01(0x1e7)]();if(!authService['isAuthenticated']()){console['log'](_0x530b01(0x200));const _0x5e89c4=await authService[_0x530b01(0x1fa)]();if(!_0x5e89c4)return console[_0x530b01(0x1e1)](_0x530b01(0x1d0)),this[_0x530b01(0x1e7)]();}try{console[_0x530b01(0x1e5)](_0x530b01(0x1f0));const _0x5c4e57=new URL(_0x530b01(0x1f9),this[_0x530b01(0x201)]),_0x5e9d44=_0x5c4e57['protocol']===_0x530b01(0x1ea),_0x83f6c3=_0x5e9d44?https:http,_0x51b02d=authService['getToken']();if(!_0x51b02d)return console[_0x530b01(0x1e1)](_0x530b01(0x206)),this[_0x530b01(0x1e7)]();return new Promise((_0x530a8b,_0x2379a0)=>{const _0xe655dd=_0x530b01,_0x67e013={'hostname':_0x5c4e57[_0xe655dd(0x1de)],'port':_0x5c4e57[_0xe655dd(0x1fb)]||(_0x5e9d44?0x1bb:0x50),'path':_0x5c4e57[_0xe655dd(0x1f5)],'method':_0xe655dd(0x1dd),'headers':{'User-Agent':'OLO-Appliance/1.0','Authorization':'Bearer\x20'+_0x51b02d}},_0x52ee7d=_0x83f6c3['request'](_0x67e013,_0x42e4b6=>{const _0x135f80=_0xe655dd;let _0x246156='';_0x42e4b6['on'](_0x135f80(0x1f3),_0x50d53e=>{_0x246156+=_0x50d53e;}),_0x42e4b6['on'](_0x135f80(0x1d4),()=>{const _0x104e38=_0x135f80;try{const _0x10fcc7=JSON[_0x104e38(0x1fd)](_0x246156);_0x10fcc7[_0x104e38(0x1f6)]?(console[_0x104e38(0x1e5)](_0x104e38(0x1ed)),_0x530a8b(_0x10fcc7[_0x104e38(0x1f6)])):(console[_0x104e38(0x205)](_0x104e38(0x1d2)),_0x530a8b(this['getFallbackIceServers']()));}catch(_0x2fe5a2){console[_0x104e38(0x1e1)](_0x104e38(0x1d9),_0x2fe5a2),_0x530a8b(this[_0x104e38(0x1e7)]());}});});_0x52ee7d['on'](_0xe655dd(0x1e1),_0x12ef5b=>{const _0x3786a8=_0xe655dd;console[_0x3786a8(0x1e1)]('[Appliance\x20TURN\x20Service]\x20Request\x20error:',_0x12ef5b),_0x530a8b(this[_0x3786a8(0x1e7)]());}),_0x52ee7d[_0xe655dd(0x1e3)](0x2710,()=>{const _0x3327b2=_0xe655dd;console[_0x3327b2(0x1e1)](_0x3327b2(0x1eb)),_0x52ee7d[_0x3327b2(0x1e8)](),_0x530a8b(this['getFallbackIceServers']());}),_0x52ee7d['end']();});}catch(_0x294df6){return console[_0x530b01(0x1e1)](_0x530b01(0x1ff),_0x294df6),this[_0x530b01(0x1e7)]();}}async[a5_0x2a758c(0x1d6)](){const _0x31a85d=a5_0x2a758c,_0x248051=Date[_0x31a85d(0x1da)]();if(this[_0x31a85d(0x207)]&&_0x248051<this['cacheExpiry'])return console[_0x31a85d(0x1e5)](_0x31a85d(0x1f1)),this['credentialsCache'];const _0x1469fb=await this['fetchCredentials']();return this[_0x31a85d(0x207)]=_0x1469fb,this[_0x31a85d(0x1e4)]=_0x248051+this['cacheDuration'],console['log']('[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials'),_0x1469fb;}async[a5_0x2a758c(0x1d1)](){const _0x5e5676=a5_0x2a758c;return await this[_0x5e5676(0x1d6)]();}[a5_0x2a758c(0x1e7)](){const _0x322648=a5_0x2a758c;return console[_0x322648(0x1e5)]('[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers'),[{'urls':_0x322648(0x1ee)},{'urls':_0x322648(0x1d5)}];}['clearCache'](){const _0x5cc47c=a5_0x2a758c;this['credentialsCache']=null,this[_0x5cc47c(0x1e4)]=0x0,console['log'](_0x5cc47c(0x202));}}function a5_0x1955(_0x1f2ccd,_0x5d1ab6){const _0x5c888a=a5_0x4f02();return a5_0x1955=function(_0x1836cf,_0x3752e4){_0x1836cf=_0x1836cf-0x1d0;let _0x4f02de=_0x5c888a[_0x1836cf];return _0x4f02de;},a5_0x1955(_0x1f2ccd,_0x5d1ab6);}module[a5_0x2a758c(0x1d8)]=new ApplianceTurnCredentialsService();