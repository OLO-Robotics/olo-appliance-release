const a5_0x488abd=a5_0x5a8a;(function(_0x5854af,_0x366607){const _0x558702=a5_0x5a8a,_0x36d685=_0x5854af();while(!![]){try{const _0x1e6a16=-parseInt(_0x558702(0x170))/0x1+-parseInt(_0x558702(0x180))/0x2*(parseInt(_0x558702(0x193))/0x3)+parseInt(_0x558702(0x174))/0x4*(parseInt(_0x558702(0x191))/0x5)+parseInt(_0x558702(0x179))/0x6+parseInt(_0x558702(0x172))/0x7+-parseInt(_0x558702(0x165))/0x8*(-parseInt(_0x558702(0x184))/0x9)+parseInt(_0x558702(0x188))/0xa;if(_0x1e6a16===_0x366607)break;else _0x36d685['push'](_0x36d685['shift']());}catch(_0x2f0183){_0x36d685['push'](_0x36d685['shift']());}}}(a5_0x52b2,0x9b8ed));const a5_0xdd985e=(function(){let _0x56c29f=!![];return function(_0x31937d,_0x191153){const _0x5f3060=_0x56c29f?function(){const _0x3f72c0=a5_0x5a8a;if(_0x191153){const _0x3aa1d4=_0x191153[_0x3f72c0(0x176)](_0x31937d,arguments);return _0x191153=null,_0x3aa1d4;}}:function(){};return _0x56c29f=![],_0x5f3060;};}()),a5_0x3b7bc3=a5_0xdd985e(this,function(){const _0x325e47=a5_0x5a8a;return a5_0x3b7bc3[_0x325e47(0x185)]()[_0x325e47(0x15e)](_0x325e47(0x16b))[_0x325e47(0x185)]()['constructor'](a5_0x3b7bc3)['search'](_0x325e47(0x16b));});function a5_0x52b2(){const _0x11933d=['3985149HQChGK','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','44azboSC','warn','apply','stun:stun.l.google.com:19302','http','4929204ZBoOZX','log','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','hostname','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','Bearer\x20','14408hUKLoC','[Appliance\x20TURN\x20Service]\x20Request\x20error:','end','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','1332yILfuA','toString','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','setTimeout','6785050PusZli','cacheExpiry','fetchCredentials','getFallbackIceServers','[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','error','data','52795LfavYt','cacheDuration','339UplkJo','clearCache','search','credentialsCache','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','getIceServers','./auth','getCredentials','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','25064kdjhYB','OLO-Appliance/1.0','serverUrl','/webrtc/turn-credentials','iceServers','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','(((.+)+)+)+$','GET','https:','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','isAuthenticated','1197962IIuaff','initialize'];a5_0x52b2=function(){return _0x11933d;};return a5_0x52b2();}a5_0x3b7bc3();const https=require('https'),http=require(a5_0x488abd(0x178)),authService=require(a5_0x488abd(0x162));function a5_0x5a8a(_0xd15d5d,_0x5e222a){const _0x32f8a4=a5_0x52b2();return a5_0x5a8a=function(_0x3b7bc3,_0xdd985e){_0x3b7bc3=_0x3b7bc3-0x15d;let _0x52b2df=_0x32f8a4[_0x3b7bc3];return _0x52b2df;},a5_0x5a8a(_0xd15d5d,_0x5e222a);}class ApplianceTurnCredentialsService{constructor(){const _0x24f1d8=a5_0x488abd;this[_0x24f1d8(0x15f)]=null,this[_0x24f1d8(0x189)]=0x0,this[_0x24f1d8(0x192)]=0xe10*0x3e8,this[_0x24f1d8(0x167)]=null;}[a5_0x488abd(0x171)](_0x2199c3){const _0x517bbd=a5_0x488abd;this[_0x517bbd(0x167)]=_0x2199c3,console[_0x517bbd(0x17a)](_0x517bbd(0x18d),_0x2199c3);}async[a5_0x488abd(0x18a)](){const _0x1187ac=a5_0x488abd;if(!this[_0x1187ac(0x167)])return console[_0x1187ac(0x18f)](_0x1187ac(0x16a)),this[_0x1187ac(0x18b)]();if(!authService[_0x1187ac(0x16f)]()){console[_0x1187ac(0x17a)](_0x1187ac(0x17c));const _0x2c4e67=await authService['login']();if(!_0x2c4e67)return console['error'](_0x1187ac(0x18e)),this[_0x1187ac(0x18b)]();}try{console[_0x1187ac(0x17a)](_0x1187ac(0x18c));const _0x32ec11=new URL(_0x1187ac(0x168),this[_0x1187ac(0x167)]),_0x841033=_0x32ec11['protocol']===_0x1187ac(0x16d),_0x38a9ce=_0x841033?https:http,_0x3868dd=authService['getToken']();if(!_0x3868dd)return console['error'](_0x1187ac(0x183)),this['getFallbackIceServers']();return new Promise((_0x587625,_0x3b68c8)=>{const _0x26d585=_0x1187ac,_0x5dc60a={'hostname':_0x32ec11[_0x26d585(0x17d)],'port':_0x32ec11['port']||(_0x841033?0x1bb:0x50),'path':_0x32ec11['pathname'],'method':_0x26d585(0x16c),'headers':{'User-Agent':_0x26d585(0x166),'Authorization':_0x26d585(0x17f)+_0x3868dd}},_0x596bfb=_0x38a9ce['request'](_0x5dc60a,_0x28427d=>{const _0xcfcfc8=_0x26d585;let _0x12ce13='';_0x28427d['on'](_0xcfcfc8(0x190),_0x5ad2fa=>{_0x12ce13+=_0x5ad2fa;}),_0x28427d['on'](_0xcfcfc8(0x182),()=>{const _0x5499d9=_0xcfcfc8;try{const _0x53e0cd=JSON['parse'](_0x12ce13);_0x53e0cd[_0x5499d9(0x169)]?(console[_0x5499d9(0x17a)](_0x5499d9(0x173)),_0x587625(_0x53e0cd[_0x5499d9(0x169)])):(console[_0x5499d9(0x175)](_0x5499d9(0x160)),_0x587625(this[_0x5499d9(0x18b)]()));}catch(_0xd67ac6){console[_0x5499d9(0x18f)](_0x5499d9(0x17e),_0xd67ac6),_0x587625(this[_0x5499d9(0x18b)]());}});});_0x596bfb['on'](_0x26d585(0x18f),_0x3f0a1c=>{const _0x4bd711=_0x26d585;console[_0x4bd711(0x18f)](_0x4bd711(0x181),_0x3f0a1c),_0x587625(this[_0x4bd711(0x18b)]());}),_0x596bfb[_0x26d585(0x187)](0x2710,()=>{const _0x51dfca=_0x26d585;console[_0x51dfca(0x18f)](_0x51dfca(0x17b)),_0x596bfb['destroy'](),_0x587625(this[_0x51dfca(0x18b)]());}),_0x596bfb[_0x26d585(0x182)]();});}catch(_0x3686b6){return console['error'](_0x1187ac(0x164),_0x3686b6),this[_0x1187ac(0x18b)]();}}async[a5_0x488abd(0x163)](){const _0x9c6b1e=a5_0x488abd,_0x3ac28c=Date['now']();if(this[_0x9c6b1e(0x15f)]&&_0x3ac28c<this['cacheExpiry'])return console[_0x9c6b1e(0x17a)]('[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials'),this[_0x9c6b1e(0x15f)];const _0x36990b=await this[_0x9c6b1e(0x18a)]();return this[_0x9c6b1e(0x15f)]=_0x36990b,this['cacheExpiry']=_0x3ac28c+this[_0x9c6b1e(0x192)],console[_0x9c6b1e(0x17a)](_0x9c6b1e(0x16e)),_0x36990b;}async[a5_0x488abd(0x161)](){const _0x4d44f2=a5_0x488abd;return await this[_0x4d44f2(0x163)]();}[a5_0x488abd(0x18b)](){const _0x3ee283=a5_0x488abd;return console[_0x3ee283(0x17a)]('[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers'),[{'urls':_0x3ee283(0x177)},{'urls':'stun:stun1.l.google.com:19302'}];}[a5_0x488abd(0x15d)](){const _0x3735c2=a5_0x488abd;this['credentialsCache']=null,this[_0x3735c2(0x189)]=0x0,console[_0x3735c2(0x17a)](_0x3735c2(0x186));}}module['exports']=new ApplianceTurnCredentialsService();