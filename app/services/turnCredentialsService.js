const a5_0x5978e8=a5_0x59e2;(function(_0x4fb1e3,_0x19f447){const _0x218e65=a5_0x59e2,_0x800376=_0x4fb1e3();while(!![]){try{const _0x549c3b=-parseInt(_0x218e65(0x20e))/0x1+parseInt(_0x218e65(0x1ed))/0x2+parseInt(_0x218e65(0x1ee))/0x3*(parseInt(_0x218e65(0x222))/0x4)+-parseInt(_0x218e65(0x221))/0x5+parseInt(_0x218e65(0x1f7))/0x6*(parseInt(_0x218e65(0x1f4))/0x7)+parseInt(_0x218e65(0x218))/0x8*(parseInt(_0x218e65(0x20c))/0x9)+parseInt(_0x218e65(0x20d))/0xa*(parseInt(_0x218e65(0x1fc))/0xb);if(_0x549c3b===_0x19f447)break;else _0x800376['push'](_0x800376['shift']());}catch(_0x2ea58b){_0x800376['push'](_0x800376['shift']());}}}(a5_0x3812,0xa5426));const a5_0x5aba9b=(function(){let _0x3999a0=!![];return function(_0x7098d4,_0x2fccf6){const _0x4c3cb0=_0x3999a0?function(){const _0x39ff4f=a5_0x59e2;if(_0x2fccf6){const _0x1e6bab=_0x2fccf6[_0x39ff4f(0x1fa)](_0x7098d4,arguments);return _0x2fccf6=null,_0x1e6bab;}}:function(){};return _0x3999a0=![],_0x4c3cb0;};}()),a5_0x2549ea=a5_0x5aba9b(this,function(){const _0x560178=a5_0x59e2;return a5_0x2549ea[_0x560178(0x1ec)]()[_0x560178(0x212)](_0x560178(0x214))['toString']()[_0x560178(0x204)](a5_0x2549ea)[_0x560178(0x212)]('(((.+)+)+)+$');});a5_0x2549ea();function a5_0x3812(){const _0x2cd645=['OLO-Appliance/1.0','destroy','24BWhobw','warn','end','clearCache','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','http','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','getIceServers','initialize','5227550VFYjLd','52OdNbmW','getCredentials','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','pathname','port','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','error','stun:stun.l.google.com:19302','[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...','toString','903652AVVEON','78834HOPCqP','credentialsCache','hostname','getFallbackIceServers','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','getToken','3563BZqwKL','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','6234pneezU','GET','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','apply','protocol','220somvJU','cacheDuration','exports','Bearer\x20','https:','cacheExpiry','fetchCredentials','./auth','constructor','log','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','now','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','login','request','1837782UOIiAa','556570AEXbfZ','1325613OBnXAt','data','[Appliance\x20TURN\x20Service]\x20Request\x20error:','isAuthenticated','search','serverUrl','(((.+)+)+)+$','iceServers'];a5_0x3812=function(){return _0x2cd645;};return a5_0x3812();}const https=require('https'),http=require(a5_0x5978e8(0x21d)),authService=require(a5_0x5978e8(0x203));function a5_0x59e2(_0x3b5618,_0x1ef706){const _0x51918a=a5_0x3812();return a5_0x59e2=function(_0x2549ea,_0x5aba9b){_0x2549ea=_0x2549ea-0x1e8;let _0x381259=_0x51918a[_0x2549ea];return _0x381259;},a5_0x59e2(_0x3b5618,_0x1ef706);}class ApplianceTurnCredentialsService{constructor(){const _0x25bf85=a5_0x5978e8;this[_0x25bf85(0x1ef)]=null,this[_0x25bf85(0x201)]=0x0,this[_0x25bf85(0x1fd)]=0xe10*0x3e8,this[_0x25bf85(0x213)]=null;}[a5_0x5978e8(0x220)](_0xcdb763){const _0x1b3eb7=a5_0x5978e8;this[_0x1b3eb7(0x213)]=_0xcdb763,console[_0x1b3eb7(0x205)](_0x1b3eb7(0x227),_0xcdb763);}async[a5_0x5978e8(0x202)](){const _0x32dbff=a5_0x5978e8;if(!this[_0x32dbff(0x213)])return console[_0x32dbff(0x1e9)](_0x32dbff(0x1f2)),this['getFallbackIceServers']();if(!authService[_0x32dbff(0x211)]()){console[_0x32dbff(0x205)](_0x32dbff(0x1f6));const _0x27474a=await authService[_0x32dbff(0x20a)]();if(!_0x27474a)return console[_0x32dbff(0x1e9)](_0x32dbff(0x1f5)),this[_0x32dbff(0x1f1)]();}try{console['log'](_0x32dbff(0x1eb));const _0x2b9bd5=new URL('/webrtc/turn-credentials',this['serverUrl']),_0x34784e=_0x2b9bd5[_0x32dbff(0x1fb)]===_0x32dbff(0x200),_0x296b48=_0x34784e?https:http,_0x3b4472=authService[_0x32dbff(0x1f3)]();if(!_0x3b4472)return console[_0x32dbff(0x1e9)]('[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available'),this[_0x32dbff(0x1f1)]();return new Promise((_0x36c0f5,_0x2f895b)=>{const _0x2df0f0=_0x32dbff,_0x44d373={'hostname':_0x2b9bd5[_0x2df0f0(0x1f0)],'port':_0x2b9bd5[_0x2df0f0(0x226)]||(_0x34784e?0x1bb:0x50),'path':_0x2b9bd5[_0x2df0f0(0x225)],'method':_0x2df0f0(0x1f8),'headers':{'User-Agent':_0x2df0f0(0x216),'Authorization':_0x2df0f0(0x1ff)+_0x3b4472}},_0x4a12ad=_0x296b48[_0x2df0f0(0x20b)](_0x44d373,_0x5586a7=>{const _0x2b5543=_0x2df0f0;let _0x1a2dda='';_0x5586a7['on'](_0x2b5543(0x20f),_0x2fc5c4=>{_0x1a2dda+=_0x2fc5c4;}),_0x5586a7['on'](_0x2b5543(0x21a),()=>{const _0x176724=_0x2b5543;try{const _0x3ab520=JSON['parse'](_0x1a2dda);_0x3ab520['iceServers']?(console[_0x176724(0x205)](_0x176724(0x1f9)),_0x36c0f5(_0x3ab520[_0x176724(0x215)])):(console[_0x176724(0x219)](_0x176724(0x208)),_0x36c0f5(this[_0x176724(0x1f1)]()));}catch(_0x5547ae){console[_0x176724(0x1e9)](_0x176724(0x206),_0x5547ae),_0x36c0f5(this['getFallbackIceServers']());}});});_0x4a12ad['on'](_0x2df0f0(0x1e9),_0xbecc8b=>{const _0x5e4077=_0x2df0f0;console[_0x5e4077(0x1e9)](_0x5e4077(0x210),_0xbecc8b),_0x36c0f5(this[_0x5e4077(0x1f1)]());}),_0x4a12ad['setTimeout'](0x2710,()=>{const _0x3df228=_0x2df0f0;console[_0x3df228(0x1e9)](_0x3df228(0x1e8)),_0x4a12ad[_0x3df228(0x217)](),_0x36c0f5(this[_0x3df228(0x1f1)]());}),_0x4a12ad[_0x2df0f0(0x21a)]();});}catch(_0x4a8e95){return console[_0x32dbff(0x1e9)]('[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:',_0x4a8e95),this['getFallbackIceServers']();}}async[a5_0x5978e8(0x223)](){const _0x233a09=a5_0x5978e8,_0x5d6516=Date[_0x233a09(0x207)]();if(this[_0x233a09(0x1ef)]&&_0x5d6516<this[_0x233a09(0x201)])return console['log'](_0x233a09(0x224)),this[_0x233a09(0x1ef)];const _0x367eaf=await this['fetchCredentials']();return this[_0x233a09(0x1ef)]=_0x367eaf,this[_0x233a09(0x201)]=_0x5d6516+this['cacheDuration'],console[_0x233a09(0x205)](_0x233a09(0x209)),_0x367eaf;}async[a5_0x5978e8(0x21f)](){const _0x17b1ec=a5_0x5978e8;return await this[_0x17b1ec(0x223)]();}[a5_0x5978e8(0x1f1)](){const _0x137adb=a5_0x5978e8;return console['log'](_0x137adb(0x21e)),[{'urls':_0x137adb(0x1ea)},{'urls':'stun:stun1.l.google.com:19302'}];}[a5_0x5978e8(0x21b)](){const _0x2b9e51=a5_0x5978e8;this['credentialsCache']=null,this[_0x2b9e51(0x201)]=0x0,console['log'](_0x2b9e51(0x21c));}}module[a5_0x5978e8(0x1fe)]=new ApplianceTurnCredentialsService();