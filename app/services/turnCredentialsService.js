const a5_0x3daf41=a5_0x2f58;function a5_0x1eca(){const _0x27aa73=['1YRVHuT','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','search','clearCache','toString','getCredentials','[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...','12887syRpau','destroy','port','parse','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','839828KvINbr','constructor','initialize','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','./auth','426rinFAB','protocol','getToken','5LVSTTS','1093878atOZMv','https:','pathname','credentialsCache','end','isAuthenticated','request','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','292768lAClnl','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','869577jQduaH','993720tNFqVN','getIceServers','serverUrl','hostname','getFallbackIceServers','log','exports','error','warn','(((.+)+)+)+$','login','http','/webrtc/turn-credentials','Bearer\x20','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','GET','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','iceServers','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','5291XvwMPb','setTimeout','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','fetchCredentials','4590ZXOAXz','stun:stun1.l.google.com:19302','stun:stun.l.google.com:19302','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','apply','cacheExpiry','data','now'];a5_0x1eca=function(){return _0x27aa73;};return a5_0x1eca();}(function(_0x201d99,_0x29268b){const _0xd52c82=a5_0x2f58,_0xfaa94c=_0x201d99();while(!![]){try{const _0x52553f=parseInt(_0xd52c82(0x153))/0x1*(parseInt(_0xd52c82(0x170))/0x2)+-parseInt(_0xd52c82(0x172))/0x3+-parseInt(_0xd52c82(0x15f))/0x4*(-parseInt(_0xd52c82(0x167))/0x5)+-parseInt(_0xd52c82(0x164))/0x6*(parseInt(_0xd52c82(0x15a))/0x7)+-parseInt(_0xd52c82(0x173))/0x8+parseInt(_0xd52c82(0x168))/0x9+parseInt(_0xd52c82(0x14b))/0xa*(parseInt(_0xd52c82(0x147))/0xb);if(_0x52553f===_0x29268b)break;else _0xfaa94c['push'](_0xfaa94c['shift']());}catch(_0x56db6a){_0xfaa94c['push'](_0xfaa94c['shift']());}}}(a5_0x1eca,0x25915));function a5_0x2f58(_0x5c3538,_0x201e10){const _0x321b77=a5_0x1eca();return a5_0x2f58=function(_0x8f330d,_0x21e6f4){_0x8f330d=_0x8f330d-0x13c;let _0x1eca1b=_0x321b77[_0x8f330d];return _0x1eca1b;},a5_0x2f58(_0x5c3538,_0x201e10);}const a5_0x21e6f4=(function(){let _0x3bf620=!![];return function(_0x150fbe,_0x211b2f){const _0x43e39a=_0x3bf620?function(){const _0x10ca29=a5_0x2f58;if(_0x211b2f){const _0x41a8d5=_0x211b2f[_0x10ca29(0x14f)](_0x150fbe,arguments);return _0x211b2f=null,_0x41a8d5;}}:function(){};return _0x3bf620=![],_0x43e39a;};}()),a5_0x8f330d=a5_0x21e6f4(this,function(){const _0x3ff1bd=a5_0x2f58;return a5_0x8f330d['toString']()[_0x3ff1bd(0x155)](_0x3ff1bd(0x13d))[_0x3ff1bd(0x157)]()[_0x3ff1bd(0x160)](a5_0x8f330d)[_0x3ff1bd(0x155)](_0x3ff1bd(0x13d));});a5_0x8f330d();const https=require('https'),http=require(a5_0x3daf41(0x13f)),authService=require(a5_0x3daf41(0x163));class ApplianceTurnCredentialsService{constructor(){const _0x425401=a5_0x3daf41;this['credentialsCache']=null,this[_0x425401(0x150)]=0x0,this['cacheDuration']=0xe10*0x3e8,this[_0x425401(0x175)]=null;}[a5_0x3daf41(0x161)](_0x17f410){const _0x110e12=a5_0x3daf41;this[_0x110e12(0x175)]=_0x17f410,console[_0x110e12(0x178)]('[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:',_0x17f410);}async[a5_0x3daf41(0x14a)](){const _0x1f4d1a=a5_0x3daf41;if(!this['serverUrl'])return console[_0x1f4d1a(0x17a)]('[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized'),this[_0x1f4d1a(0x177)]();if(!authService[_0x1f4d1a(0x16d)]()){console[_0x1f4d1a(0x178)]('[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...');const _0x24315e=await authService[_0x1f4d1a(0x13e)]();if(!_0x24315e)return console['error']('[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate'),this[_0x1f4d1a(0x177)]();}try{console[_0x1f4d1a(0x178)](_0x1f4d1a(0x159));const _0x3c6eae=new URL(_0x1f4d1a(0x140),this['serverUrl']),_0x1f32b1=_0x3c6eae[_0x1f4d1a(0x165)]===_0x1f4d1a(0x169),_0x17d09c=_0x1f32b1?https:http,_0x5b2c5a=authService[_0x1f4d1a(0x166)]();if(!_0x5b2c5a)return console[_0x1f4d1a(0x17a)](_0x1f4d1a(0x15e)),this[_0x1f4d1a(0x177)]();return new Promise((_0x3481b9,_0x33c222)=>{const _0x22463f=_0x1f4d1a,_0x43e36f={'hostname':_0x3c6eae[_0x22463f(0x176)],'port':_0x3c6eae[_0x22463f(0x15c)]||(_0x1f32b1?0x1bb:0x50),'path':_0x3c6eae[_0x22463f(0x16a)],'method':_0x22463f(0x143),'headers':{'User-Agent':'OLO-Appliance/1.0','Authorization':_0x22463f(0x141)+_0x5b2c5a}},_0x2dac41=_0x17d09c[_0x22463f(0x16e)](_0x43e36f,_0xb0a02f=>{const _0x515d57=_0x22463f;let _0x283d40='';_0xb0a02f['on'](_0x515d57(0x151),_0x324b6d=>{_0x283d40+=_0x324b6d;}),_0xb0a02f['on']('end',()=>{const _0x393413=_0x515d57;try{const _0x2b8411=JSON[_0x393413(0x15d)](_0x283d40);_0x2b8411['iceServers']?(console[_0x393413(0x178)](_0x393413(0x144)),_0x3481b9(_0x2b8411[_0x393413(0x145)])):(console[_0x393413(0x13c)](_0x393413(0x171)),_0x3481b9(this[_0x393413(0x177)]()));}catch(_0x16dcaf){console[_0x393413(0x17a)](_0x393413(0x146),_0x16dcaf),_0x3481b9(this[_0x393413(0x177)]());}});});_0x2dac41['on'](_0x22463f(0x17a),_0x313ad6=>{const _0x451f0f=_0x22463f;console['error']('[Appliance\x20TURN\x20Service]\x20Request\x20error:',_0x313ad6),_0x3481b9(this[_0x451f0f(0x177)]());}),_0x2dac41[_0x22463f(0x148)](0x2710,()=>{const _0x1cfde7=_0x22463f;console['error'](_0x1cfde7(0x149)),_0x2dac41[_0x1cfde7(0x15b)](),_0x3481b9(this[_0x1cfde7(0x177)]());}),_0x2dac41[_0x22463f(0x16c)]();});}catch(_0x4e907c){return console[_0x1f4d1a(0x17a)](_0x1f4d1a(0x14e),_0x4e907c),this[_0x1f4d1a(0x177)]();}}async[a5_0x3daf41(0x158)](){const _0x22ff52=a5_0x3daf41,_0x21384e=Date[_0x22ff52(0x152)]();if(this[_0x22ff52(0x16b)]&&_0x21384e<this['cacheExpiry'])return console[_0x22ff52(0x178)](_0x22ff52(0x142)),this['credentialsCache'];const _0x1be408=await this['fetchCredentials']();return this[_0x22ff52(0x16b)]=_0x1be408,this[_0x22ff52(0x150)]=_0x21384e+this['cacheDuration'],console[_0x22ff52(0x178)](_0x22ff52(0x16f)),_0x1be408;}async[a5_0x3daf41(0x174)](){const _0x294c8d=a5_0x3daf41;return await this[_0x294c8d(0x158)]();}[a5_0x3daf41(0x177)](){const _0x298064=a5_0x3daf41;return console[_0x298064(0x178)](_0x298064(0x162)),[{'urls':_0x298064(0x14d)},{'urls':_0x298064(0x14c)}];}[a5_0x3daf41(0x156)](){const _0x242d4b=a5_0x3daf41;this[_0x242d4b(0x16b)]=null,this[_0x242d4b(0x150)]=0x0,console[_0x242d4b(0x178)](_0x242d4b(0x154));}}module[a5_0x3daf41(0x179)]=new ApplianceTurnCredentialsService();