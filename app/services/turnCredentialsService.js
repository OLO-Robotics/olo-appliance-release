const a5_0x5ceeee=a5_0x49a3;(function(_0x5e2ff2,_0xa04a3c){const _0x2efee7=a5_0x49a3,_0x14ab05=_0x5e2ff2();while(!![]){try{const _0x252a02=-parseInt(_0x2efee7(0x1b7))/0x1*(-parseInt(_0x2efee7(0x1bb))/0x2)+-parseInt(_0x2efee7(0x1a8))/0x3+parseInt(_0x2efee7(0x1a7))/0x4+parseInt(_0x2efee7(0x1a4))/0x5*(-parseInt(_0x2efee7(0x1ab))/0x6)+-parseInt(_0x2efee7(0x1ae))/0x7+parseInt(_0x2efee7(0x1c3))/0x8*(-parseInt(_0x2efee7(0x1c0))/0x9)+parseInt(_0x2efee7(0x1bd))/0xa;if(_0x252a02===_0xa04a3c)break;else _0x14ab05['push'](_0x14ab05['shift']());}catch(_0x155cde){_0x14ab05['push'](_0x14ab05['shift']());}}}(a5_0x19c4,0x7bfad));function a5_0x49a3(_0x1b546b,_0x2e6e74){const _0x1ccc40=a5_0x19c4();return a5_0x49a3=function(_0x112c33,_0x3ec2e5){_0x112c33=_0x112c33-0x190;let _0x19c477=_0x1ccc40[_0x112c33];return _0x19c477;},a5_0x49a3(_0x1b546b,_0x2e6e74);}const a5_0x3ec2e5=(function(){let _0x43151a=!![];return function(_0x475d7b,_0x3c70a3){const _0x39dda1=_0x43151a?function(){if(_0x3c70a3){const _0x486ed4=_0x3c70a3['apply'](_0x475d7b,arguments);return _0x3c70a3=null,_0x486ed4;}}:function(){};return _0x43151a=![],_0x39dda1;};}()),a5_0x112c33=a5_0x3ec2e5(this,function(){const _0x537d11=a5_0x49a3;return a5_0x112c33['toString']()[_0x537d11(0x196)](_0x537d11(0x19b))[_0x537d11(0x19f)]()[_0x537d11(0x190)](a5_0x112c33)['search'](_0x537d11(0x19b));});a5_0x112c33();const https=require(a5_0x5ceeee(0x192)),http=require(a5_0x5ceeee(0x1b9)),authService=require('./auth');class ApplianceTurnCredentialsService{constructor(){const _0x3e161d=a5_0x5ceeee;this[_0x3e161d(0x1b1)]=null,this[_0x3e161d(0x1a6)]=0x0,this[_0x3e161d(0x1a0)]=0xe10*0x3e8,this[_0x3e161d(0x1b6)]=null;}['initialize'](_0xd4770e){const _0x3b1276=a5_0x5ceeee;this[_0x3b1276(0x1b6)]=_0xd4770e,console[_0x3b1276(0x1b5)](_0x3b1276(0x1ac),_0xd4770e);}async[a5_0x5ceeee(0x1aa)](){const _0x579685=a5_0x5ceeee;if(!this[_0x579685(0x1b6)])return console[_0x579685(0x19a)](_0x579685(0x1c4)),this[_0x579685(0x1b3)]();if(!authService[_0x579685(0x1a1)]()){console[_0x579685(0x1b5)](_0x579685(0x1ad));const _0x26f039=await authService[_0x579685(0x1b8)]();if(!_0x26f039)return console['error']('[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate'),this['getFallbackIceServers']();}try{console['log'](_0x579685(0x1b0));const _0x3c751c=new URL(_0x579685(0x1a2),this[_0x579685(0x1b6)]),_0x437b5d=_0x3c751c[_0x579685(0x1c2)]===_0x579685(0x1a9),_0x928e48=_0x437b5d?https:http,_0x5500f6=authService['getToken']();if(!_0x5500f6)return console['error'](_0x579685(0x1b2)),this['getFallbackIceServers']();return new Promise((_0x1c190f,_0xb89439)=>{const _0x5ca70b=_0x579685,_0x527beb={'hostname':_0x3c751c[_0x5ca70b(0x195)],'port':_0x3c751c[_0x5ca70b(0x1b4)]||(_0x437b5d?0x1bb:0x50),'path':_0x3c751c[_0x5ca70b(0x19e)],'method':_0x5ca70b(0x1bc),'headers':{'User-Agent':'OLO-Appliance/1.0','Authorization':_0x5ca70b(0x1c6)+_0x5500f6}},_0x2faf84=_0x928e48[_0x5ca70b(0x1be)](_0x527beb,_0x2c195e=>{const _0x2e41db=_0x5ca70b;let _0x9d574b='';_0x2c195e['on'](_0x2e41db(0x19d),_0x31be6b=>{_0x9d574b+=_0x31be6b;}),_0x2c195e['on'](_0x2e41db(0x1a3),()=>{const _0x19e0a7=_0x2e41db;try{const _0x1881a8=JSON[_0x19e0a7(0x191)](_0x9d574b);_0x1881a8['iceServers']?(console[_0x19e0a7(0x1b5)](_0x19e0a7(0x197)),_0x1c190f(_0x1881a8['iceServers'])):(console['warn'](_0x19e0a7(0x1a5)),_0x1c190f(this['getFallbackIceServers']()));}catch(_0x3124c8){console[_0x19e0a7(0x19a)](_0x19e0a7(0x1ba),_0x3124c8),_0x1c190f(this[_0x19e0a7(0x1b3)]());}});});_0x2faf84['on'](_0x5ca70b(0x19a),_0x2ada48=>{const _0x473216=_0x5ca70b;console[_0x473216(0x19a)]('[Appliance\x20TURN\x20Service]\x20Request\x20error:',_0x2ada48),_0x1c190f(this[_0x473216(0x1b3)]());}),_0x2faf84[_0x5ca70b(0x1c1)](0x2710,()=>{const _0x39e74c=_0x5ca70b;console[_0x39e74c(0x19a)]('[Appliance\x20TURN\x20Service]\x20Request\x20timeout'),_0x2faf84[_0x39e74c(0x1af)](),_0x1c190f(this[_0x39e74c(0x1b3)]());}),_0x2faf84[_0x5ca70b(0x1a3)]();});}catch(_0x1e608f){return console[_0x579685(0x19a)]('[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:',_0x1e608f),this[_0x579685(0x1b3)]();}}async[a5_0x5ceeee(0x1bf)](){const _0xf10c06=a5_0x5ceeee,_0x197172=Date[_0xf10c06(0x1c7)]();if(this[_0xf10c06(0x1b1)]&&_0x197172<this['cacheExpiry'])return console[_0xf10c06(0x1b5)](_0xf10c06(0x199)),this['credentialsCache'];const _0x2864bd=await this['fetchCredentials']();return this[_0xf10c06(0x1b1)]=_0x2864bd,this[_0xf10c06(0x1a6)]=_0x197172+this[_0xf10c06(0x1a0)],console[_0xf10c06(0x1b5)]('[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials'),_0x2864bd;}async[a5_0x5ceeee(0x194)](){const _0x534bdb=a5_0x5ceeee;return await this[_0x534bdb(0x1bf)]();}[a5_0x5ceeee(0x1b3)](){const _0x2ba1f7=a5_0x5ceeee;return console[_0x2ba1f7(0x1b5)](_0x2ba1f7(0x193)),[{'urls':'stun:stun.l.google.com:19302'},{'urls':_0x2ba1f7(0x19c)}];}[a5_0x5ceeee(0x198)](){const _0x599ae7=a5_0x5ceeee;this[_0x599ae7(0x1b1)]=null,this[_0x599ae7(0x1a6)]=0x0,console['log'](_0x599ae7(0x1c5));}}module['exports']=new ApplianceTurnCredentialsService();function a5_0x19c4(){const _0x513daa=['669852HULBBf','https:','fetchCredentials','2095266WQpQWG','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','4233992hDEzuh','destroy','[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...','credentialsCache','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','getFallbackIceServers','port','log','serverUrl','25UwZUHq','login','http','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','73090oAwYQk','GET','11316760jmIzIb','request','getCredentials','436329hXCbtY','setTimeout','protocol','104bBRclD','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','Bearer\x20','now','constructor','parse','https','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','getIceServers','hostname','search','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','clearCache','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','error','(((.+)+)+)+$','stun:stun1.l.google.com:19302','data','pathname','toString','cacheDuration','isAuthenticated','/webrtc/turn-credentials','end','5hicqVK','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','cacheExpiry','1080496ljawqy'];a5_0x19c4=function(){return _0x513daa;};return a5_0x19c4();}