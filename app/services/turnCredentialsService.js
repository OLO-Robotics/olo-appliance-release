const a5_0x49d37c=a5_0x29b3;(function(_0x4138fb,_0x29fca1){const _0x1411a7=a5_0x29b3,_0x13a726=_0x4138fb();while(!![]){try{const _0x2dc7cd=-parseInt(_0x1411a7(0x15a))/0x1+parseInt(_0x1411a7(0x15c))/0x2+parseInt(_0x1411a7(0x166))/0x3+parseInt(_0x1411a7(0x16b))/0x4+-parseInt(_0x1411a7(0x171))/0x5+-parseInt(_0x1411a7(0x154))/0x6+-parseInt(_0x1411a7(0x14e))/0x7;if(_0x2dc7cd===_0x29fca1)break;else _0x13a726['push'](_0x13a726['shift']());}catch(_0x308acd){_0x13a726['push'](_0x13a726['shift']());}}}(a5_0xeafe,0x1e82d));function a5_0xeafe(){const _0xa39dd9=['[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','setTimeout','stun:stun.l.google.com:19302','toString','/webrtc/turn-credentials','credentialsCache','error','getCredentials','exports','getIceServers','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','data','search','792820tpuqFv','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','pathname','iceServers','warn','cacheExpiry','258636fCScml','serverUrl','[Appliance\x20TURN\x20Service]\x20Request\x20error:','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','end','11144XQecbj','log','164908jdqzKz','./auth','Bearer\x20','GET','http','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','hostname','OLO-Appliance/1.0','constructor','594342sBgkic','request','now','fetchCredentials','isAuthenticated','289920flYkFu','apply','getToken','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','cacheDuration','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','302825cOEbCw','getFallbackIceServers','port'];a5_0xeafe=function(){return _0xa39dd9;};return a5_0xeafe();}function a5_0x29b3(_0x3af962,_0x5010ea){const _0x243f87=a5_0xeafe();return a5_0x29b3=function(_0x3f9ef6,_0x1e0a19){_0x3f9ef6=_0x3f9ef6-0x13e;let _0xeafe4=_0x243f87[_0x3f9ef6];return _0xeafe4;},a5_0x29b3(_0x3af962,_0x5010ea);}const a5_0x1e0a19=(function(){let _0x3d541d=!![];return function(_0x469fa9,_0x52a5da){const _0x43ebf7=_0x3d541d?function(){const _0x19df0d=a5_0x29b3;if(_0x52a5da){const _0x5c2328=_0x52a5da[_0x19df0d(0x16c)](_0x469fa9,arguments);return _0x52a5da=null,_0x5c2328;}}:function(){};return _0x3d541d=![],_0x43ebf7;};}()),a5_0x3f9ef6=a5_0x1e0a19(this,function(){const _0x1afebd=a5_0x29b3;return a5_0x3f9ef6[_0x1afebd(0x143)]()[_0x1afebd(0x14d)]('(((.+)+)+)+$')[_0x1afebd(0x143)]()[_0x1afebd(0x165)](a5_0x3f9ef6)[_0x1afebd(0x14d)]('(((.+)+)+)+$');});a5_0x3f9ef6();const https=require('https'),http=require(a5_0x49d37c(0x160)),authService=require(a5_0x49d37c(0x15d));class ApplianceTurnCredentialsService{constructor(){const _0x224e65=a5_0x49d37c;this[_0x224e65(0x145)]=null,this[_0x224e65(0x153)]=0x0,this[_0x224e65(0x16f)]=0xe10*0x3e8,this[_0x224e65(0x155)]=null;}['initialize'](_0x5bc191){const _0x2771c2=a5_0x49d37c;this[_0x2771c2(0x155)]=_0x5bc191,console[_0x2771c2(0x15b)]('[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:',_0x5bc191);}async[a5_0x49d37c(0x169)](){const _0x86cc6b=a5_0x49d37c;if(!this[_0x86cc6b(0x155)])return console['error'](_0x86cc6b(0x170)),this['getFallbackIceServers']();if(!authService[_0x86cc6b(0x16a)]()){console['log']('[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...');const _0x28fcdf=await authService['login']();if(!_0x28fcdf)return console[_0x86cc6b(0x146)](_0x86cc6b(0x162)),this[_0x86cc6b(0x13e)]();}try{console[_0x86cc6b(0x15b)]('[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...');const _0x2a053f=new URL(_0x86cc6b(0x144),this[_0x86cc6b(0x155)]),_0x29fe97=_0x2a053f['protocol']==='https:',_0x1a2540=_0x29fe97?https:http,_0x5aab9a=authService[_0x86cc6b(0x16d)]();if(!_0x5aab9a)return console['error'](_0x86cc6b(0x16e)),this[_0x86cc6b(0x13e)]();return new Promise((_0x2f3739,_0x215f9f)=>{const _0x3cd60b=_0x86cc6b,_0x5768df={'hostname':_0x2a053f[_0x3cd60b(0x163)],'port':_0x2a053f[_0x3cd60b(0x13f)]||(_0x29fe97?0x1bb:0x50),'path':_0x2a053f[_0x3cd60b(0x150)],'method':_0x3cd60b(0x15f),'headers':{'User-Agent':_0x3cd60b(0x164),'Authorization':_0x3cd60b(0x15e)+_0x5aab9a}},_0x37ca2d=_0x1a2540[_0x3cd60b(0x167)](_0x5768df,_0x259fbc=>{const _0x43e8c7=_0x3cd60b;let _0x51fe29='';_0x259fbc['on'](_0x43e8c7(0x14c),_0x3c0dfd=>{_0x51fe29+=_0x3c0dfd;}),_0x259fbc['on'](_0x43e8c7(0x159),()=>{const _0x28249e=_0x43e8c7;try{const _0x219586=JSON['parse'](_0x51fe29);_0x219586[_0x28249e(0x151)]?(console[_0x28249e(0x15b)]('[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server'),_0x2f3739(_0x219586['iceServers'])):(console[_0x28249e(0x152)](_0x28249e(0x14b)),_0x2f3739(this['getFallbackIceServers']()));}catch(_0x3b75d6){console['error'](_0x28249e(0x140),_0x3b75d6),_0x2f3739(this[_0x28249e(0x13e)]());}});});_0x37ca2d['on']('error',_0xca6fb3=>{const _0x160ca7=_0x3cd60b;console[_0x160ca7(0x146)](_0x160ca7(0x156),_0xca6fb3),_0x2f3739(this['getFallbackIceServers']());}),_0x37ca2d[_0x3cd60b(0x141)](0x2710,()=>{const _0x2b8579=_0x3cd60b;console[_0x2b8579(0x146)](_0x2b8579(0x14f)),_0x37ca2d['destroy'](),_0x2f3739(this[_0x2b8579(0x13e)]());}),_0x37ca2d[_0x3cd60b(0x159)]();});}catch(_0x484055){return console[_0x86cc6b(0x146)](_0x86cc6b(0x14a),_0x484055),this[_0x86cc6b(0x13e)]();}}async['getCredentials'](){const _0x5bfb95=a5_0x49d37c,_0x418c7c=Date[_0x5bfb95(0x168)]();if(this[_0x5bfb95(0x145)]&&_0x418c7c<this[_0x5bfb95(0x153)])return console[_0x5bfb95(0x15b)](_0x5bfb95(0x158)),this['credentialsCache'];const _0x32f54e=await this[_0x5bfb95(0x169)]();return this[_0x5bfb95(0x145)]=_0x32f54e,this['cacheExpiry']=_0x418c7c+this['cacheDuration'],console[_0x5bfb95(0x15b)]('[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials'),_0x32f54e;}async[a5_0x49d37c(0x149)](){const _0x2c5064=a5_0x49d37c;return await this[_0x2c5064(0x147)]();}[a5_0x49d37c(0x13e)](){const _0x18230b=a5_0x49d37c;return console['log'](_0x18230b(0x161)),[{'urls':_0x18230b(0x142)},{'urls':'stun:stun1.l.google.com:19302'}];}['clearCache'](){const _0x9549a8=a5_0x49d37c;this[_0x9549a8(0x145)]=null,this[_0x9549a8(0x153)]=0x0,console[_0x9549a8(0x15b)](_0x9549a8(0x157));}}module[a5_0x49d37c(0x148)]=new ApplianceTurnCredentialsService();