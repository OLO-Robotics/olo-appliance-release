const a5_0x1991c3=a5_0x33be;(function(_0x10e209,_0x2d1c34){const _0x23ceec=a5_0x33be,_0x3a8f11=_0x10e209();while(!![]){try{const _0x45be45=parseInt(_0x23ceec(0x1a0))/0x1*(-parseInt(_0x23ceec(0x194))/0x2)+parseInt(_0x23ceec(0x171))/0x3+-parseInt(_0x23ceec(0x16b))/0x4*(parseInt(_0x23ceec(0x17a))/0x5)+-parseInt(_0x23ceec(0x185))/0x6*(parseInt(_0x23ceec(0x18b))/0x7)+-parseInt(_0x23ceec(0x19c))/0x8+parseInt(_0x23ceec(0x189))/0x9+parseInt(_0x23ceec(0x19b))/0xa*(parseInt(_0x23ceec(0x195))/0xb);if(_0x45be45===_0x2d1c34)break;else _0x3a8f11['push'](_0x3a8f11['shift']());}catch(_0x1937c4){_0x3a8f11['push'](_0x3a8f11['shift']());}}}(a5_0x4f33,0xbfc93));const a5_0x3d7b7f=(function(){let _0x1ebeac=!![];return function(_0x54e4a9,_0x145588){const _0x2a29bc=_0x1ebeac?function(){const _0x4b7a36=a5_0x33be;if(_0x145588){const _0x1c9d78=_0x145588[_0x4b7a36(0x198)](_0x54e4a9,arguments);return _0x145588=null,_0x1c9d78;}}:function(){};return _0x1ebeac=![],_0x2a29bc;};}()),a5_0x50b4b0=a5_0x3d7b7f(this,function(){const _0x517047=a5_0x33be;return a5_0x50b4b0[_0x517047(0x18c)]()[_0x517047(0x176)](_0x517047(0x178))[_0x517047(0x18c)]()[_0x517047(0x165)](a5_0x50b4b0)[_0x517047(0x176)](_0x517047(0x178));});function a5_0x33be(_0x5da9a2,_0x24f53d){const _0x2277dd=a5_0x4f33();return a5_0x33be=function(_0x50b4b0,_0x3d7b7f){_0x50b4b0=_0x50b4b0-0x164;let _0x4f335b=_0x2277dd[_0x50b4b0];return _0x4f335b;},a5_0x33be(_0x5da9a2,_0x24f53d);}a5_0x50b4b0();function a5_0x4f33(){const _0x5f4a3a=['stun:stun.l.google.com:19302','(((.+)+)+)+$','getToken','43760DKwzEG','error','https','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','stun:stun1.l.google.com:19302','./auth','hostname','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','GET','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','918orGkgj','credentialsCache','[Appliance\x20TURN\x20Service]\x20Request\x20error:','/webrtc/turn-credentials','8255232DOIQPb','getCredentials','20601sxDJtz','toString','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','setTimeout','now','parse','https:','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','login','535406CgQwfx','731027hGOrpM','data','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','apply','destroy','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','290wEkvMI','8802184AXWDNJ','getFallbackIceServers','protocol','initialize','2sWcbCY','clearCache','cacheExpiry','http','cacheDuration','constructor','serverUrl','end','Bearer\x20','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','port','128EfmfHq','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','fetchCredentials','iceServers','getIceServers','exports','921228ZEwiIV','log','pathname','request','warn','search'];a5_0x4f33=function(){return _0x5f4a3a;};return a5_0x4f33();}const https=require(a5_0x1991c3(0x17c)),http=require(a5_0x1991c3(0x1a3)),authService=require(a5_0x1991c3(0x17f));class ApplianceTurnCredentialsService{constructor(){const _0x430c52=a5_0x1991c3;this['credentialsCache']=null,this['cacheExpiry']=0x0,this[_0x430c52(0x164)]=0xe10*0x3e8,this[_0x430c52(0x166)]=null;}[a5_0x1991c3(0x19f)](_0x226fd0){const _0x2db0a4=a5_0x1991c3;this[_0x2db0a4(0x166)]=_0x226fd0,console[_0x2db0a4(0x172)]('[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:',_0x226fd0);}async[a5_0x1991c3(0x16d)](){const _0x51088e=a5_0x1991c3;if(!this[_0x51088e(0x166)])return console[_0x51088e(0x17b)](_0x51088e(0x17d)),this['getFallbackIceServers']();if(!authService['isAuthenticated']()){console[_0x51088e(0x172)](_0x51088e(0x19a));const _0x116684=await authService[_0x51088e(0x193)]();if(!_0x116684)return console[_0x51088e(0x17b)](_0x51088e(0x182)),this[_0x51088e(0x19d)]();}try{console['log']('[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...');const _0x41c7d3=new URL(_0x51088e(0x188),this[_0x51088e(0x166)]),_0xb0d821=_0x41c7d3[_0x51088e(0x19e)]===_0x51088e(0x191),_0x3e7bf8=_0xb0d821?https:http,_0x3755f9=authService[_0x51088e(0x179)]();if(!_0x3755f9)return console[_0x51088e(0x17b)](_0x51088e(0x16c)),this[_0x51088e(0x19d)]();return new Promise((_0x4c6f71,_0xb969e6)=>{const _0x2c8ae8=_0x51088e,_0x3205e1={'hostname':_0x41c7d3[_0x2c8ae8(0x180)],'port':_0x41c7d3[_0x2c8ae8(0x16a)]||(_0xb0d821?0x1bb:0x50),'path':_0x41c7d3[_0x2c8ae8(0x173)],'method':_0x2c8ae8(0x183),'headers':{'User-Agent':'OLO-Appliance/1.0','Authorization':_0x2c8ae8(0x168)+_0x3755f9}},_0x3e6a28=_0x3e7bf8[_0x2c8ae8(0x174)](_0x3205e1,_0x4241a3=>{const _0x2a2ea9=_0x2c8ae8;let _0xcc0350='';_0x4241a3['on'](_0x2a2ea9(0x196),_0x3a4fb4=>{_0xcc0350+=_0x3a4fb4;}),_0x4241a3['on'](_0x2a2ea9(0x167),()=>{const _0x5b2751=_0x2a2ea9;try{const _0x3fbda9=JSON[_0x5b2751(0x190)](_0xcc0350);_0x3fbda9['iceServers']?(console[_0x5b2751(0x172)](_0x5b2751(0x181)),_0x4c6f71(_0x3fbda9[_0x5b2751(0x16e)])):(console[_0x5b2751(0x175)]('[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback'),_0x4c6f71(this[_0x5b2751(0x19d)]()));}catch(_0x47a64b){console[_0x5b2751(0x17b)](_0x5b2751(0x192),_0x47a64b),_0x4c6f71(this[_0x5b2751(0x19d)]());}});});_0x3e6a28['on'](_0x2c8ae8(0x17b),_0x199d07=>{const _0x43a142=_0x2c8ae8;console[_0x43a142(0x17b)](_0x43a142(0x187),_0x199d07),_0x4c6f71(this[_0x43a142(0x19d)]());}),_0x3e6a28[_0x2c8ae8(0x18e)](0x2710,()=>{const _0x2a2a01=_0x2c8ae8;console[_0x2a2a01(0x17b)]('[Appliance\x20TURN\x20Service]\x20Request\x20timeout'),_0x3e6a28[_0x2a2a01(0x199)](),_0x4c6f71(this[_0x2a2a01(0x19d)]());}),_0x3e6a28[_0x2c8ae8(0x167)]();});}catch(_0x10bba2){return console['error'](_0x51088e(0x184),_0x10bba2),this[_0x51088e(0x19d)]();}}async['getCredentials'](){const _0x2bb1a7=a5_0x1991c3,_0x4093ca=Date[_0x2bb1a7(0x18f)]();if(this['credentialsCache']&&_0x4093ca<this[_0x2bb1a7(0x1a2)])return console['log'](_0x2bb1a7(0x169)),this[_0x2bb1a7(0x186)];const _0x1b77d3=await this[_0x2bb1a7(0x16d)]();return this[_0x2bb1a7(0x186)]=_0x1b77d3,this[_0x2bb1a7(0x1a2)]=_0x4093ca+this['cacheDuration'],console[_0x2bb1a7(0x172)]('[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials'),_0x1b77d3;}async[a5_0x1991c3(0x16f)](){const _0x120531=a5_0x1991c3;return await this[_0x120531(0x18a)]();}[a5_0x1991c3(0x19d)](){const _0xb021fd=a5_0x1991c3;return console[_0xb021fd(0x172)](_0xb021fd(0x197)),[{'urls':_0xb021fd(0x177)},{'urls':_0xb021fd(0x17e)}];}[a5_0x1991c3(0x1a1)](){const _0x3f0263=a5_0x1991c3;this[_0x3f0263(0x186)]=null,this[_0x3f0263(0x1a2)]=0x0,console[_0x3f0263(0x172)](_0x3f0263(0x18d));}}module[a5_0x1991c3(0x170)]=new ApplianceTurnCredentialsService();