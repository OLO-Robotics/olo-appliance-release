const a5_0x43bf92=a5_0x5165;function a5_0x5165(_0x43584b,_0x12c59d){const _0x59b55a=a5_0x5c28();return a5_0x5165=function(_0x423b76,_0x203dc0){_0x423b76=_0x423b76-0x1ac;let _0x5c282f=_0x59b55a[_0x423b76];return _0x5c282f;},a5_0x5165(_0x43584b,_0x12c59d);}(function(_0xe9b98b,_0x11d77d){const _0x45c692=a5_0x5165,_0x138500=_0xe9b98b();while(!![]){try{const _0x59505f=-parseInt(_0x45c692(0x1ae))/0x1*(parseInt(_0x45c692(0x1df))/0x2)+parseInt(_0x45c692(0x1e2))/0x3*(parseInt(_0x45c692(0x1be))/0x4)+parseInt(_0x45c692(0x1e1))/0x5*(parseInt(_0x45c692(0x1b8))/0x6)+parseInt(_0x45c692(0x1d7))/0x7*(-parseInt(_0x45c692(0x1dd))/0x8)+parseInt(_0x45c692(0x1c9))/0x9*(-parseInt(_0x45c692(0x1b4))/0xa)+-parseInt(_0x45c692(0x1d4))/0xb*(-parseInt(_0x45c692(0x1ba))/0xc)+-parseInt(_0x45c692(0x1b3))/0xd*(-parseInt(_0x45c692(0x1b1))/0xe);if(_0x59505f===_0x11d77d)break;else _0x138500['push'](_0x138500['shift']());}catch(_0x250723){_0x138500['push'](_0x138500['shift']());}}}(a5_0x5c28,0x72ce5));const a5_0x203dc0=(function(){let _0x4acee5=!![];return function(_0xbb9654,_0x32a95e){const _0x277842=_0x4acee5?function(){if(_0x32a95e){const _0x38ad3c=_0x32a95e['apply'](_0xbb9654,arguments);return _0x32a95e=null,_0x38ad3c;}}:function(){};return _0x4acee5=![],_0x277842;};}()),a5_0x423b76=a5_0x203dc0(this,function(){const _0x3ef7ea=a5_0x5165;return a5_0x423b76['toString']()[_0x3ef7ea(0x1ac)]('(((.+)+)+)+$')['toString']()['constructor'](a5_0x423b76)[_0x3ef7ea(0x1ac)](_0x3ef7ea(0x1db));});function a5_0x5c28(){const _0x50c3b5=['stun:stun.l.google.com:19302','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','login','(((.+)+)+)+$','isAuthenticated','1438312FSYzhW','port','41266QhPSuv','cacheExpiry','410bRElpA','44259xzTlPz','/webrtc/turn-credentials','exports','getToken','search','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','39elntfD','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','453978XETgcl','Bearer\x20','663sSsZaL','140510jjjuSE','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','OLO-Appliance/1.0','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','14214IQaWOO','protocol','240OlzFMl','hostname','pathname','http','92kqTAzT','getFallbackIceServers','warn','log','end','setTimeout','cacheDuration','fetchCredentials','credentialsCache','getCredentials','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','414WxWBWo','stun:stun1.l.google.com:19302','error','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','https','iceServers','serverUrl','data','parse','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','249194MKbtAr','[Appliance\x20TURN\x20Service]\x20Request\x20error:','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','28jVoGQP'];a5_0x5c28=function(){return _0x50c3b5;};return a5_0x5c28();}a5_0x423b76();const https=require(a5_0x43bf92(0x1ce)),http=require(a5_0x43bf92(0x1bd)),authService=require('./auth');class ApplianceTurnCredentialsService{constructor(){const _0x226a97=a5_0x43bf92;this[_0x226a97(0x1c6)]=null,this[_0x226a97(0x1e0)]=0x0,this[_0x226a97(0x1c4)]=0xe10*0x3e8,this[_0x226a97(0x1d0)]=null;}['initialize'](_0x2cced8){const _0x5b8ced=a5_0x43bf92;this['serverUrl']=_0x2cced8,console[_0x5b8ced(0x1c1)](_0x5b8ced(0x1cd),_0x2cced8);}async[a5_0x43bf92(0x1c5)](){const _0x1d14fe=a5_0x43bf92;if(!this[_0x1d14fe(0x1d0)])return console['error'](_0x1d14fe(0x1cc)),this['getFallbackIceServers']();if(!authService[_0x1d14fe(0x1dc)]()){console['log'](_0x1d14fe(0x1ad));const _0x21312d=await authService[_0x1d14fe(0x1da)]();if(!_0x21312d)return console[_0x1d14fe(0x1cb)](_0x1d14fe(0x1b0)),this[_0x1d14fe(0x1bf)]();}try{console[_0x1d14fe(0x1c1)]('[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...');const _0x5129a7=new URL(_0x1d14fe(0x1e3),this[_0x1d14fe(0x1d0)]),_0x407ec4=_0x5129a7[_0x1d14fe(0x1b9)]==='https:',_0x4389c4=_0x407ec4?https:http,_0x3e2ca8=authService[_0x1d14fe(0x1e5)]();if(!_0x3e2ca8)return console[_0x1d14fe(0x1cb)]('[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available'),this[_0x1d14fe(0x1bf)]();return new Promise((_0x8a167b,_0x5c7ad)=>{const _0x4eda42=_0x1d14fe,_0x38370b={'hostname':_0x5129a7[_0x4eda42(0x1bb)],'port':_0x5129a7[_0x4eda42(0x1de)]||(_0x407ec4?0x1bb:0x50),'path':_0x5129a7[_0x4eda42(0x1bc)],'method':'GET','headers':{'User-Agent':_0x4eda42(0x1b6),'Authorization':_0x4eda42(0x1b2)+_0x3e2ca8}},_0x1baa37=_0x4389c4['request'](_0x38370b,_0x3b2dc4=>{const _0xcc2e8d=_0x4eda42;let _0x3f3211='';_0x3b2dc4['on'](_0xcc2e8d(0x1d1),_0x47ce64=>{_0x3f3211+=_0x47ce64;}),_0x3b2dc4['on']('end',()=>{const _0x4dd5cd=_0xcc2e8d;try{const _0x292dd4=JSON[_0x4dd5cd(0x1d2)](_0x3f3211);_0x292dd4[_0x4dd5cd(0x1cf)]?(console['log']('[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server'),_0x8a167b(_0x292dd4['iceServers'])):(console[_0x4dd5cd(0x1c0)]('[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback'),_0x8a167b(this[_0x4dd5cd(0x1bf)]()));}catch(_0x168c35){console[_0x4dd5cd(0x1cb)](_0x4dd5cd(0x1d3),_0x168c35),_0x8a167b(this[_0x4dd5cd(0x1bf)]());}});});_0x1baa37['on'](_0x4eda42(0x1cb),_0x50379d=>{const _0x185271=_0x4eda42;console['error'](_0x185271(0x1d5),_0x50379d),_0x8a167b(this[_0x185271(0x1bf)]());}),_0x1baa37[_0x4eda42(0x1c3)](0x2710,()=>{const _0x80e929=_0x4eda42;console[_0x80e929(0x1cb)](_0x80e929(0x1d6)),_0x1baa37['destroy'](),_0x8a167b(this[_0x80e929(0x1bf)]());}),_0x1baa37[_0x4eda42(0x1c2)]();});}catch(_0x3c18c6){return console[_0x1d14fe(0x1cb)](_0x1d14fe(0x1b7),_0x3c18c6),this[_0x1d14fe(0x1bf)]();}}async['getCredentials'](){const _0x8daab3=a5_0x43bf92,_0x5be968=Date['now']();if(this[_0x8daab3(0x1c6)]&&_0x5be968<this[_0x8daab3(0x1e0)])return console['log'](_0x8daab3(0x1af)),this[_0x8daab3(0x1c6)];const _0xca2ded=await this[_0x8daab3(0x1c5)]();return this[_0x8daab3(0x1c6)]=_0xca2ded,this['cacheExpiry']=_0x5be968+this[_0x8daab3(0x1c4)],console[_0x8daab3(0x1c1)](_0x8daab3(0x1c8)),_0xca2ded;}async['getIceServers'](){const _0x4fea14=a5_0x43bf92;return await this[_0x4fea14(0x1c7)]();}[a5_0x43bf92(0x1bf)](){const _0x52ce28=a5_0x43bf92;return console['log'](_0x52ce28(0x1b5)),[{'urls':_0x52ce28(0x1d8)},{'urls':_0x52ce28(0x1ca)}];}['clearCache'](){const _0x343a3d=a5_0x43bf92;this[_0x343a3d(0x1c6)]=null,this[_0x343a3d(0x1e0)]=0x0,console[_0x343a3d(0x1c1)](_0x343a3d(0x1d9));}}module[a5_0x43bf92(0x1e4)]=new ApplianceTurnCredentialsService();