function a7_0x1a86(){const _0x326e6f=['[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','initialize','destroy','serverUrl','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','getToken','https','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','cacheExpiry','446988JQZhEt','apply','cacheDuration','4447499TfxqVU','login','stun:stun.l.google.com:19302','GET','/webrtc/turn-credentials','now','data','http','(((.+)+)+)+$','4295075GtOvXz','request','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','credentialsCache','getFallbackIceServers','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','log','clearCache','getCredentials','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','1578224YiikeK','search','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','toString','protocol','943900rBvCTW','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','getIceServers','port','2589156qodCLF','isAuthenticated','1234143UOqBqs','end','parse','[Appliance\x20TURN\x20Service]\x20Request\x20error:','stun:stun1.l.google.com:19302','iceServers','setTimeout','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','3xMzezi','fetchCredentials','pathname','error','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','constructor'];a7_0x1a86=function(){return _0x326e6f;};return a7_0x1a86();}function a7_0x3613(_0x1f72f9,_0x5008cd){const _0x56e111=a7_0x1a86();return a7_0x3613=function(_0x4de0c4,_0x5c5975){_0x4de0c4=_0x4de0c4-0x1e3;let _0x1a8659=_0x56e111[_0x4de0c4];return _0x1a8659;},a7_0x3613(_0x1f72f9,_0x5008cd);}const a7_0x8a6e54=a7_0x3613;(function(_0x39aeba,_0x139662){const _0x5ea05d=a7_0x3613,_0x1f471c=_0x39aeba();while(!![]){try{const _0x18d6e5=parseInt(_0x5ea05d(0x1f8))/0x1*(parseInt(_0x5ea05d(0x207))/0x2)+-parseInt(_0x5ea05d(0x1ef))/0x3+parseInt(_0x5ea05d(0x1e9))/0x4+-parseInt(_0x5ea05d(0x213))/0x5+parseInt(_0x5ea05d(0x1ed))/0x6+parseInt(_0x5ea05d(0x20a))/0x7+-parseInt(_0x5ea05d(0x1e4))/0x8;if(_0x18d6e5===_0x139662)break;else _0x1f471c['push'](_0x1f471c['shift']());}catch(_0x1b4bdf){_0x1f471c['push'](_0x1f471c['shift']());}}}(a7_0x1a86,0x7b742));const a7_0x5c5975=(function(){let _0x52cb4d=!![];return function(_0x5d3b90,_0x481704){const _0x113509=_0x52cb4d?function(){const _0x5a9134=a7_0x3613;if(_0x481704){const _0x3deeae=_0x481704[_0x5a9134(0x208)](_0x5d3b90,arguments);return _0x481704=null,_0x3deeae;}}:function(){};return _0x52cb4d=![],_0x113509;};}()),a7_0x4de0c4=a7_0x5c5975(this,function(){const _0x760baf=a7_0x3613;return a7_0x4de0c4[_0x760baf(0x1e7)]()[_0x760baf(0x1e5)](_0x760baf(0x212))[_0x760baf(0x1e7)]()[_0x760baf(0x1fd)](a7_0x4de0c4)['search']('(((.+)+)+)+$');});a7_0x4de0c4();const https=require(a7_0x8a6e54(0x204)),http=require(a7_0x8a6e54(0x211)),authService=require('./auth');class ApplianceTurnCredentialsService{constructor(){const _0x2fe8a7=a7_0x8a6e54;this[_0x2fe8a7(0x216)]=null,this['cacheExpiry']=0x0,this[_0x2fe8a7(0x209)]=0xe10*0x3e8,this[_0x2fe8a7(0x201)]=null;}[a7_0x8a6e54(0x1ff)](_0x22ca76){const _0x50c29f=a7_0x8a6e54;this[_0x50c29f(0x201)]=_0x22ca76,console[_0x50c29f(0x219)](_0x50c29f(0x205),_0x22ca76);}async[a7_0x8a6e54(0x1f9)](){const _0x401dea=a7_0x8a6e54;if(!this['serverUrl'])return console[_0x401dea(0x1fb)](_0x401dea(0x218)),this[_0x401dea(0x217)]();if(!authService[_0x401dea(0x1ee)]()){console['log'](_0x401dea(0x1e6));const _0x5a8e31=await authService[_0x401dea(0x20b)]();if(!_0x5a8e31)return console[_0x401dea(0x1fb)]('[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate'),this[_0x401dea(0x217)]();}try{console[_0x401dea(0x219)]('[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...');const _0x2a0674=new URL(_0x401dea(0x20e),this[_0x401dea(0x201)]),_0x507929=_0x2a0674[_0x401dea(0x1e8)]==='https:',_0x20ca75=_0x507929?https:http,_0x4e6318=authService[_0x401dea(0x203)]();if(!_0x4e6318)return console[_0x401dea(0x1fb)](_0x401dea(0x1fc)),this[_0x401dea(0x217)]();return new Promise((_0x5b4bf2,_0x3ead13)=>{const _0x2278fd=_0x401dea,_0x1441d7={'hostname':_0x2a0674['hostname'],'port':_0x2a0674[_0x2278fd(0x1ec)]||(_0x507929?0x1bb:0x50),'path':_0x2a0674[_0x2278fd(0x1fa)],'method':_0x2278fd(0x20d),'headers':{'User-Agent':'OLO-Appliance/1.0','Authorization':'Bearer\x20'+_0x4e6318}},_0x321a23=_0x20ca75[_0x2278fd(0x214)](_0x1441d7,_0x315266=>{const _0x41feba=_0x2278fd;let _0x150f3e='';_0x315266['on'](_0x41feba(0x210),_0xe72d07=>{_0x150f3e+=_0xe72d07;}),_0x315266['on'](_0x41feba(0x1f0),()=>{const _0x5534f0=_0x41feba;try{const _0x41bb75=JSON[_0x5534f0(0x1f1)](_0x150f3e);_0x41bb75[_0x5534f0(0x1f4)]?(console[_0x5534f0(0x219)]('[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server'),_0x5b4bf2(_0x41bb75[_0x5534f0(0x1f4)])):(console['warn'](_0x5534f0(0x215)),_0x5b4bf2(this[_0x5534f0(0x217)]()));}catch(_0x7e587d){console[_0x5534f0(0x1fb)](_0x5534f0(0x1e3),_0x7e587d),_0x5b4bf2(this[_0x5534f0(0x217)]());}});});_0x321a23['on'](_0x2278fd(0x1fb),_0x36fb0f=>{const _0x2a3290=_0x2278fd;console[_0x2a3290(0x1fb)](_0x2a3290(0x1f2),_0x36fb0f),_0x5b4bf2(this[_0x2a3290(0x217)]());}),_0x321a23[_0x2278fd(0x1f5)](0x2710,()=>{const _0x2fb7e6=_0x2278fd;console['error'](_0x2fb7e6(0x1f6)),_0x321a23[_0x2fb7e6(0x200)](),_0x5b4bf2(this[_0x2fb7e6(0x217)]());}),_0x321a23[_0x2278fd(0x1f0)]();});}catch(_0x24df59){return console['error'](_0x401dea(0x1ea),_0x24df59),this[_0x401dea(0x217)]();}}async[a7_0x8a6e54(0x21b)](){const _0x499ee8=a7_0x8a6e54,_0xa3b59a=Date[_0x499ee8(0x20f)]();if(this[_0x499ee8(0x216)]&&_0xa3b59a<this[_0x499ee8(0x206)])return console[_0x499ee8(0x219)](_0x499ee8(0x1f7)),this[_0x499ee8(0x216)];const _0x2e7e6c=await this['fetchCredentials']();return this[_0x499ee8(0x216)]=_0x2e7e6c,this[_0x499ee8(0x206)]=_0xa3b59a+this[_0x499ee8(0x209)],console[_0x499ee8(0x219)]('[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials'),_0x2e7e6c;}async[a7_0x8a6e54(0x1eb)](){return await this['getCredentials']();}[a7_0x8a6e54(0x217)](){const _0x5a49e2=a7_0x8a6e54;return console[_0x5a49e2(0x219)](_0x5a49e2(0x202)),[{'urls':_0x5a49e2(0x20c)},{'urls':_0x5a49e2(0x1f3)}];}[a7_0x8a6e54(0x21a)](){const _0xb83453=a7_0x8a6e54;this[_0xb83453(0x216)]=null,this['cacheExpiry']=0x0,console[_0xb83453(0x219)](_0xb83453(0x1fe));}}module['exports']=new ApplianceTurnCredentialsService();