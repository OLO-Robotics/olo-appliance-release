const a5_0x7aa2b3=a5_0x2d50;(function(_0xdf9d51,_0x31c468){const _0x358fcd=a5_0x2d50,_0x170f61=_0xdf9d51();while(!![]){try{const _0x46ae99=-parseInt(_0x358fcd(0x175))/0x1*(-parseInt(_0x358fcd(0x182))/0x2)+parseInt(_0x358fcd(0x167))/0x3+parseInt(_0x358fcd(0x178))/0x4*(parseInt(_0x358fcd(0x169))/0x5)+-parseInt(_0x358fcd(0x16c))/0x6*(parseInt(_0x358fcd(0x17b))/0x7)+parseInt(_0x358fcd(0x159))/0x8*(-parseInt(_0x358fcd(0x155))/0x9)+parseInt(_0x358fcd(0x184))/0xa+-parseInt(_0x358fcd(0x160))/0xb;if(_0x46ae99===_0x31c468)break;else _0x170f61['push'](_0x170f61['shift']());}catch(_0x1942ad){_0x170f61['push'](_0x170f61['shift']());}}}(a5_0x2bde,0x88f70));const a5_0x5419d2=(function(){let _0x31d23b=!![];return function(_0x273a9e,_0x418dc2){const _0x28c4ef=_0x31d23b?function(){const _0x76aeff=a5_0x2d50;if(_0x418dc2){const _0x30aac0=_0x418dc2[_0x76aeff(0x17c)](_0x273a9e,arguments);return _0x418dc2=null,_0x30aac0;}}:function(){};return _0x31d23b=![],_0x28c4ef;};}()),a5_0x511329=a5_0x5419d2(this,function(){const _0x133b40=a5_0x2d50;return a5_0x511329['toString']()['search'](_0x133b40(0x168))[_0x133b40(0x18b)]()[_0x133b40(0x16a)](a5_0x511329)[_0x133b40(0x16b)](_0x133b40(0x168));});a5_0x511329();const https=require(a5_0x7aa2b3(0x15d)),http=require(a5_0x7aa2b3(0x18d)),authService=require(a5_0x7aa2b3(0x16f));class ApplianceTurnCredentialsService{constructor(){const _0x39f825=a5_0x7aa2b3;this['credentialsCache']=null,this[_0x39f825(0x189)]=0x0,this['cacheDuration']=0xe10*0x3e8,this[_0x39f825(0x188)]=null;}[a5_0x7aa2b3(0x157)](_0x557d0b){const _0x35309f=a5_0x7aa2b3;this[_0x35309f(0x188)]=_0x557d0b,console[_0x35309f(0x18e)](_0x35309f(0x158),_0x557d0b);}async[a5_0x7aa2b3(0x163)](){const _0xf58077=a5_0x7aa2b3;if(!this[_0xf58077(0x188)])return console[_0xf58077(0x177)](_0xf58077(0x186)),this[_0xf58077(0x17d)]();if(!authService[_0xf58077(0x16d)]()){console['log'](_0xf58077(0x15a));const _0x57a273=await authService[_0xf58077(0x170)]();if(!_0x57a273)return console[_0xf58077(0x177)](_0xf58077(0x161)),this['getFallbackIceServers']();}try{console[_0xf58077(0x18e)](_0xf58077(0x173));const _0x257af0=new URL('/webrtc/turn-credentials',this['serverUrl']),_0x19f3d3=_0x257af0[_0xf58077(0x164)]===_0xf58077(0x162),_0xd71f1c=_0x19f3d3?https:http,_0x5ccff6=authService['getToken']();if(!_0x5ccff6)return console[_0xf58077(0x177)](_0xf58077(0x185)),this[_0xf58077(0x17d)]();return new Promise((_0xf1a95b,_0x4c1bd5)=>{const _0x1f8bf2=_0xf58077,_0x32a79b={'hostname':_0x257af0[_0x1f8bf2(0x181)],'port':_0x257af0['port']||(_0x19f3d3?0x1bb:0x50),'path':_0x257af0[_0x1f8bf2(0x17e)],'method':'GET','headers':{'User-Agent':'OLO-Appliance/1.0','Authorization':_0x1f8bf2(0x187)+_0x5ccff6}},_0x396742=_0xd71f1c[_0x1f8bf2(0x165)](_0x32a79b,_0x29a058=>{const _0x4dd9a2=_0x1f8bf2;let _0xf6e4f7='';_0x29a058['on'](_0x4dd9a2(0x156),_0x1d4fdd=>{_0xf6e4f7+=_0x1d4fdd;}),_0x29a058['on'](_0x4dd9a2(0x16e),()=>{const _0x5520d6=_0x4dd9a2;try{const _0x39579c=JSON['parse'](_0xf6e4f7);_0x39579c[_0x5520d6(0x180)]?(console['log']('[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server'),_0xf1a95b(_0x39579c[_0x5520d6(0x180)])):(console['warn'](_0x5520d6(0x176)),_0xf1a95b(this[_0x5520d6(0x17d)]()));}catch(_0x4ee5e9){console[_0x5520d6(0x177)](_0x5520d6(0x171),_0x4ee5e9),_0xf1a95b(this[_0x5520d6(0x17d)]());}});});_0x396742['on'](_0x1f8bf2(0x177),_0x54b8ba=>{const _0x47dde1=_0x1f8bf2;console[_0x47dde1(0x177)](_0x47dde1(0x18a),_0x54b8ba),_0xf1a95b(this[_0x47dde1(0x17d)]());}),_0x396742[_0x1f8bf2(0x17a)](0x2710,()=>{const _0x4e25a5=_0x1f8bf2;console['error'](_0x4e25a5(0x154)),_0x396742['destroy'](),_0xf1a95b(this[_0x4e25a5(0x17d)]());}),_0x396742['end']();});}catch(_0xfb83cd){return console['error'](_0xf58077(0x172),_0xfb83cd),this[_0xf58077(0x17d)]();}}async['getCredentials'](){const _0x15a600=a5_0x7aa2b3,_0x536487=Date['now']();if(this['credentialsCache']&&_0x536487<this[_0x15a600(0x189)])return console[_0x15a600(0x18e)](_0x15a600(0x18c)),this['credentialsCache'];const _0x572210=await this[_0x15a600(0x163)]();return this['credentialsCache']=_0x572210,this[_0x15a600(0x189)]=_0x536487+this[_0x15a600(0x15e)],console['log'](_0x15a600(0x174)),_0x572210;}async[a5_0x7aa2b3(0x15b)](){const _0x139aa3=a5_0x7aa2b3;return await this[_0x139aa3(0x179)]();}['getFallbackIceServers'](){const _0x689476=a5_0x7aa2b3;return console['log'](_0x689476(0x166)),[{'urls':_0x689476(0x17f)},{'urls':_0x689476(0x15f)}];}[a5_0x7aa2b3(0x183)](){const _0x58a19e=a5_0x7aa2b3;this['credentialsCache']=null,this[_0x58a19e(0x189)]=0x0,console[_0x58a19e(0x18e)]('[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared');}}function a5_0x2bde(){const _0x52ee5c=['[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','8uXhXqk','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','getIceServers','exports','https','cacheDuration','stun:stun1.l.google.com:19302','8188290UfhuuZ','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','https:','fetchCredentials','protocol','request','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','1817433TQwKQd','(((.+)+)+)+$','1851215llYqxe','constructor','search','4566IYYQmX','isAuthenticated','end','./auth','login','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','1082tJkXZU','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','error','4WQetxd','getCredentials','setTimeout','1631DYEqZq','apply','getFallbackIceServers','pathname','stun:stun.l.google.com:19302','iceServers','hostname','1686SwMdkv','clearCache','853000Plunii','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','Bearer\x20','serverUrl','cacheExpiry','[Appliance\x20TURN\x20Service]\x20Request\x20error:','toString','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','http','log','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','4416921xBJqKi','data','initialize'];a5_0x2bde=function(){return _0x52ee5c;};return a5_0x2bde();}function a5_0x2d50(_0x16c2c9,_0x29be71){const _0x22189f=a5_0x2bde();return a5_0x2d50=function(_0x511329,_0x5419d2){_0x511329=_0x511329-0x154;let _0x2bde6e=_0x22189f[_0x511329];return _0x2bde6e;},a5_0x2d50(_0x16c2c9,_0x29be71);}module[a5_0x7aa2b3(0x15c)]=new ApplianceTurnCredentialsService();