const a5_0x6f6b01=a5_0x4145;function a5_0x4298(){const _0x15013a=['stun:stun1.l.google.com:19302','Bearer\x20','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','data','getFallbackIceServers','request','login','setTimeout','fetchCredentials','iceServers','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','hostname','search','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','3769893xPxfjk','toString','OLO-Appliance/1.0','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','end','protocol','5446930zUYEsz','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','cacheExpiry','373780HhHiAA','apply','cacheDuration','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','312263QbKapp','66myRGeP','warn','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','credentialsCache','626qmKeXg','getToken','error','168lOwCas','/webrtc/turn-credentials','clearCache','getIceServers','isAuthenticated','219802IibbWT','port','42qqJwbd','getCredentials','(((.+)+)+)+$','[Appliance\x20TURN\x20Service]\x20Request\x20error:','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','now','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','destroy','GET','./auth','log','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','serverUrl','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','8VhQSJP','284168JVVRde','pathname','778zEteqd'];a5_0x4298=function(){return _0x15013a;};return a5_0x4298();}(function(_0x35bdee,_0x1619de){const _0x50ec3e=a5_0x4145,_0x39ad81=_0x35bdee();while(!![]){try{const _0x10a9ac=parseInt(_0x50ec3e(0x11b))/0x1*(parseInt(_0x50ec3e(0x100))/0x2)+-parseInt(_0x50ec3e(0x10a))/0x3*(-parseInt(_0x50ec3e(0x119))/0x4)+parseInt(_0x50ec3e(0xf7))/0x5*(parseInt(_0x50ec3e(0xfc))/0x6)+-parseInt(_0x50ec3e(0xfb))/0x7+parseInt(_0x50ec3e(0x118))/0x8*(-parseInt(_0x50ec3e(0x12b))/0x9)+-parseInt(_0x50ec3e(0x131))/0xa+-parseInt(_0x50ec3e(0x108))/0xb*(parseInt(_0x50ec3e(0x103))/0xc);if(_0x10a9ac===_0x1619de)break;else _0x39ad81['push'](_0x39ad81['shift']());}catch(_0x52eb4b){_0x39ad81['push'](_0x39ad81['shift']());}}}(a5_0x4298,0xbc98b));const a5_0x3c382c=(function(){let _0x532272=!![];return function(_0x468119,_0x225383){const _0x957d3d=_0x532272?function(){const _0x5f2ab6=a5_0x4145;if(_0x225383){const _0x359f3d=_0x225383[_0x5f2ab6(0xf8)](_0x468119,arguments);return _0x225383=null,_0x359f3d;}}:function(){};return _0x532272=![],_0x957d3d;};}()),a5_0x16e46d=a5_0x3c382c(this,function(){const _0x26ebd1=a5_0x4145;return a5_0x16e46d['toString']()[_0x26ebd1(0x128)](_0x26ebd1(0x10c))[_0x26ebd1(0x12c)]()['constructor'](a5_0x16e46d)[_0x26ebd1(0x128)](_0x26ebd1(0x10c));});a5_0x16e46d();function a5_0x4145(_0x2a2263,_0x158556){const _0x161c34=a5_0x4298();return a5_0x4145=function(_0x16e46d,_0x3c382c){_0x16e46d=_0x16e46d-0xf6;let _0x42982e=_0x161c34[_0x16e46d];return _0x42982e;},a5_0x4145(_0x2a2263,_0x158556);}const https=require('https'),http=require('http'),authService=require(a5_0x6f6b01(0x113));class ApplianceTurnCredentialsService{constructor(){const _0x25787d=a5_0x6f6b01;this[_0x25787d(0xff)]=null,this[_0x25787d(0xf6)]=0x0,this[_0x25787d(0xf9)]=0xe10*0x3e8,this[_0x25787d(0x116)]=null;}['initialize'](_0x40460c){const _0xc490ac=a5_0x6f6b01;this['serverUrl']=_0x40460c,console[_0xc490ac(0x114)](_0xc490ac(0x117),_0x40460c);}async[a5_0x6f6b01(0x124)](){const _0x188981=a5_0x6f6b01;if(!this[_0x188981(0x116)])return console[_0x188981(0x102)](_0x188981(0x129)),this['getFallbackIceServers']();if(!authService[_0x188981(0x107)]()){console[_0x188981(0x114)]('[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...');const _0x2b5094=await authService[_0x188981(0x122)]();if(!_0x2b5094)return console[_0x188981(0x102)]('[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate'),this['getFallbackIceServers']();}try{console[_0x188981(0x114)]('[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...');const _0x213d08=new URL(_0x188981(0x104),this[_0x188981(0x116)]),_0x59db60=_0x213d08[_0x188981(0x130)]==='https:',_0x3f6310=_0x59db60?https:http,_0x1a6b5e=authService[_0x188981(0x101)]();if(!_0x1a6b5e)return console['error'](_0x188981(0x12a)),this['getFallbackIceServers']();return new Promise((_0x256a7b,_0x25ebf9)=>{const _0x49967d=_0x188981,_0x6da704={'hostname':_0x213d08[_0x49967d(0x127)],'port':_0x213d08[_0x49967d(0x109)]||(_0x59db60?0x1bb:0x50),'path':_0x213d08[_0x49967d(0x11a)],'method':_0x49967d(0x112),'headers':{'User-Agent':_0x49967d(0x12d),'Authorization':_0x49967d(0x11d)+_0x1a6b5e}},_0x3a1172=_0x3f6310[_0x49967d(0x121)](_0x6da704,_0x250b8c=>{const _0xbb112c=_0x49967d;let _0x1d23a0='';_0x250b8c['on'](_0xbb112c(0x11f),_0x570bc1=>{_0x1d23a0+=_0x570bc1;}),_0x250b8c['on'](_0xbb112c(0x12f),()=>{const _0x45912d=_0xbb112c;try{const _0x4a67c0=JSON['parse'](_0x1d23a0);_0x4a67c0[_0x45912d(0x125)]?(console[_0x45912d(0x114)](_0x45912d(0x115)),_0x256a7b(_0x4a67c0['iceServers'])):(console[_0x45912d(0xfd)](_0x45912d(0x10e)),_0x256a7b(this[_0x45912d(0x120)]()));}catch(_0x5b9be1){console['error'](_0x45912d(0xfe),_0x5b9be1),_0x256a7b(this[_0x45912d(0x120)]());}});});_0x3a1172['on']('error',_0x3435ee=>{const _0x479e7a=_0x49967d;console[_0x479e7a(0x102)](_0x479e7a(0x10d),_0x3435ee),_0x256a7b(this[_0x479e7a(0x120)]());}),_0x3a1172[_0x49967d(0x123)](0x2710,()=>{const _0x2ef86d=_0x49967d;console['error'](_0x2ef86d(0x126)),_0x3a1172[_0x2ef86d(0x111)](),_0x256a7b(this[_0x2ef86d(0x120)]());}),_0x3a1172[_0x49967d(0x12f)]();});}catch(_0x328a6f){return console[_0x188981(0x102)](_0x188981(0x110),_0x328a6f),this[_0x188981(0x120)]();}}async['getCredentials'](){const _0x2385a7=a5_0x6f6b01,_0x4b593b=Date[_0x2385a7(0x10f)]();if(this[_0x2385a7(0xff)]&&_0x4b593b<this[_0x2385a7(0xf6)])return console[_0x2385a7(0x114)](_0x2385a7(0x11e)),this[_0x2385a7(0xff)];const _0x4caf59=await this['fetchCredentials']();return this[_0x2385a7(0xff)]=_0x4caf59,this['cacheExpiry']=_0x4b593b+this['cacheDuration'],console['log'](_0x2385a7(0xfa)),_0x4caf59;}async[a5_0x6f6b01(0x106)](){const _0x17183c=a5_0x6f6b01;return await this[_0x17183c(0x10b)]();}[a5_0x6f6b01(0x120)](){const _0xa4f05d=a5_0x6f6b01;return console[_0xa4f05d(0x114)](_0xa4f05d(0x132)),[{'urls':'stun:stun.l.google.com:19302'},{'urls':_0xa4f05d(0x11c)}];}[a5_0x6f6b01(0x105)](){const _0x2e983a=a5_0x6f6b01;this[_0x2e983a(0xff)]=null,this[_0x2e983a(0xf6)]=0x0,console[_0x2e983a(0x114)](_0x2e983a(0x12e));}}module['exports']=new ApplianceTurnCredentialsService();