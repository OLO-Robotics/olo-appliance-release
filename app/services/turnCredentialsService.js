const a7_0x58afdb=a7_0x3959;(function(_0x5d0bec,_0x518ed6){const _0x346cdc=a7_0x3959,_0x23de9a=_0x5d0bec();while(!![]){try{const _0x421b0b=parseInt(_0x346cdc(0xee))/0x1+-parseInt(_0x346cdc(0xe3))/0x2+parseInt(_0x346cdc(0x102))/0x3+-parseInt(_0x346cdc(0xe1))/0x4+parseInt(_0x346cdc(0xfd))/0x5*(parseInt(_0x346cdc(0x107))/0x6)+parseInt(_0x346cdc(0x101))/0x7+-parseInt(_0x346cdc(0xea))/0x8;if(_0x421b0b===_0x518ed6)break;else _0x23de9a['push'](_0x23de9a['shift']());}catch(_0x49170d){_0x23de9a['push'](_0x23de9a['shift']());}}}(a7_0x4ca3,0x1c48a));function a7_0x3959(_0x122a2e,_0x2c569b){const _0x56660c=a7_0x4ca3();return a7_0x3959=function(_0x13e62c,_0x5c665e){_0x13e62c=_0x13e62c-0xdb;let _0x4ca3b2=_0x56660c[_0x13e62c];return _0x4ca3b2;},a7_0x3959(_0x122a2e,_0x2c569b);}const a7_0x5c665e=(function(){let _0x115421=!![];return function(_0x394402,_0x2c7e5d){const _0x1974c5=_0x115421?function(){const _0x451111=a7_0x3959;if(_0x2c7e5d){const _0x4a761=_0x2c7e5d[_0x451111(0xf1)](_0x394402,arguments);return _0x2c7e5d=null,_0x4a761;}}:function(){};return _0x115421=![],_0x1974c5;};}()),a7_0x13e62c=a7_0x5c665e(this,function(){const _0x2332c5=a7_0x3959;return a7_0x13e62c[_0x2332c5(0xed)]()[_0x2332c5(0xf5)]('(((.+)+)+)+$')[_0x2332c5(0xed)]()[_0x2332c5(0xf7)](a7_0x13e62c)['search']('(((.+)+)+)+$');});function a7_0x4ca3(){const _0x1da023=['[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','cacheDuration','exports','256488slUhte','/webrtc/turn-credentials','398562dbZAva','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','iceServers','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','getFallbackIceServers','credentialsCache','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','877376NVrOBK','hostname','destroy','toString','49277pTBBNg','error','Bearer\x20','apply','GET','getIceServers','port','search','log','constructor','data','login','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','getToken','fetchCredentials','313265gxGsue','./auth','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','protocol','1442343vhlFpf','512838AfFmCD','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','serverUrl','request','end','6jvKXwg','stun:stun.l.google.com:19302','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','isAuthenticated','cacheExpiry','https','getCredentials','http','parse','pathname','[Appliance\x20TURN\x20Service]\x20Request\x20error:'];a7_0x4ca3=function(){return _0x1da023;};return a7_0x4ca3();}a7_0x13e62c();const https=require(a7_0x58afdb(0x10c)),http=require(a7_0x58afdb(0x10e)),authService=require(a7_0x58afdb(0xfe));class ApplianceTurnCredentialsService{constructor(){const _0x5893ee=a7_0x58afdb;this['credentialsCache']=null,this[_0x5893ee(0x10b)]=0x0,this[_0x5893ee(0xdf)]=0xe10*0x3e8,this[_0x5893ee(0x104)]=null;}['initialize'](_0x4a567a){const _0x4ac860=a7_0x58afdb;this[_0x4ac860(0x104)]=_0x4a567a,console[_0x4ac860(0xf6)](_0x4ac860(0xde),_0x4a567a);}async['fetchCredentials'](){const _0x1d2a77=a7_0x58afdb;if(!this[_0x1d2a77(0x104)])return console[_0x1d2a77(0xef)]('[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized'),this[_0x1d2a77(0xe7)]();if(!authService[_0x1d2a77(0x10a)]()){console[_0x1d2a77(0xf6)](_0x1d2a77(0xe6));const _0xa21240=await authService[_0x1d2a77(0xf9)]();if(!_0xa21240)return console['error']('[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate'),this[_0x1d2a77(0xe7)]();}try{console[_0x1d2a77(0xf6)]('[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...');const _0x3b9135=new URL(_0x1d2a77(0xe2),this[_0x1d2a77(0x104)]),_0x24e470=_0x3b9135[_0x1d2a77(0x100)]==='https:',_0x514ce6=_0x24e470?https:http,_0x3d7a12=authService[_0x1d2a77(0xfb)]();if(!_0x3d7a12)return console['error'](_0x1d2a77(0xe4)),this[_0x1d2a77(0xe7)]();return new Promise((_0x405988,_0x3d51f3)=>{const _0x2e2f56=_0x1d2a77,_0x1ea39b={'hostname':_0x3b9135[_0x2e2f56(0xeb)],'port':_0x3b9135[_0x2e2f56(0xf4)]||(_0x24e470?0x1bb:0x50),'path':_0x3b9135[_0x2e2f56(0xdc)],'method':_0x2e2f56(0xf2),'headers':{'User-Agent':'OLO-Appliance/1.0','Authorization':_0x2e2f56(0xf0)+_0x3d7a12}},_0xbcd3e0=_0x514ce6[_0x2e2f56(0x105)](_0x1ea39b,_0x515bbd=>{const _0x7f2b16=_0x2e2f56;let _0x4ddd8e='';_0x515bbd['on'](_0x7f2b16(0xf8),_0x111287=>{_0x4ddd8e+=_0x111287;}),_0x515bbd['on'](_0x7f2b16(0x106),()=>{const _0x102de0=_0x7f2b16;try{const _0x14d81d=JSON[_0x102de0(0xdb)](_0x4ddd8e);_0x14d81d[_0x102de0(0xe5)]?(console[_0x102de0(0xf6)]('[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server'),_0x405988(_0x14d81d['iceServers'])):(console['warn'](_0x102de0(0x103)),_0x405988(this[_0x102de0(0xe7)]()));}catch(_0x28d3cf){console[_0x102de0(0xef)]('[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:',_0x28d3cf),_0x405988(this[_0x102de0(0xe7)]());}});});_0xbcd3e0['on'](_0x2e2f56(0xef),_0x434579=>{const _0x41250f=_0x2e2f56;console[_0x41250f(0xef)](_0x41250f(0xdd),_0x434579),_0x405988(this[_0x41250f(0xe7)]());}),_0xbcd3e0['setTimeout'](0x2710,()=>{const _0x30b3e9=_0x2e2f56;console[_0x30b3e9(0xef)](_0x30b3e9(0x109)),_0xbcd3e0[_0x30b3e9(0xec)](),_0x405988(this[_0x30b3e9(0xe7)]());}),_0xbcd3e0['end']();});}catch(_0x16ffd8){return console[_0x1d2a77(0xef)]('[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:',_0x16ffd8),this[_0x1d2a77(0xe7)]();}}async['getCredentials'](){const _0x56740c=a7_0x58afdb,_0x7a24ef=Date['now']();if(this[_0x56740c(0xe8)]&&_0x7a24ef<this[_0x56740c(0x10b)])return console['log']('[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials'),this['credentialsCache'];const _0x16cbb7=await this[_0x56740c(0xfc)]();return this[_0x56740c(0xe8)]=_0x16cbb7,this[_0x56740c(0x10b)]=_0x7a24ef+this[_0x56740c(0xdf)],console[_0x56740c(0xf6)](_0x56740c(0xe9)),_0x16cbb7;}async[a7_0x58afdb(0xf3)](){const _0x5b0ce7=a7_0x58afdb;return await this[_0x5b0ce7(0x10d)]();}[a7_0x58afdb(0xe7)](){const _0x29c778=a7_0x58afdb;return console[_0x29c778(0xf6)](_0x29c778(0xff)),[{'urls':_0x29c778(0x108)},{'urls':'stun:stun1.l.google.com:19302'}];}['clearCache'](){const _0x1d95c8=a7_0x58afdb;this[_0x1d95c8(0xe8)]=null,this[_0x1d95c8(0x10b)]=0x0,console[_0x1d95c8(0xf6)](_0x1d95c8(0xfa));}}module[a7_0x58afdb(0xe0)]=new ApplianceTurnCredentialsService();