function a5_0x5374(){const _0x4f8210=['/rosbridge?type=appliance&token=','sample','processMessage','service','call_service','Disconnected\x20from\x20server\x20(','constructor','stopAllSessions','urdfService','Registration\x20token\x20not\x20found.\x20Please\x20register\x20this\x20appliance\x20first.','421088BslSoh','estimatedSize','/robot_description','Topic\x20discovery\x20failed:','serverWs','forward','webrtcService','reason','close','connectToRosbridgeWebRTC','Failed\x20to\x20connect\x20to\x20ROSBridge\x20(WebRTC):','rosbridge','error','ROSBridge\x20(WebRTC)\x20connection\x20error:','catch','3114816aQthyF','discoverTopics','OPEN','Ros','exports','1071426awUOKC','service_response','warn','http','1888296vlQpOE','4510AoTzaa','types','map','readyState','rosbridgeWebRTCWs','280yrkwcd','410823Cbxket','Server\x20connection\x20error:','wsEndpoint','CLOSED','robotId','Disconnected\x20from\x20ROSBridge\x20(WebRTC),\x20attempting\x20to\x20reconnect...','message','toString','handleMessage','apply','Disconnected\x20from\x20ROSBridge\x20(main),\x20attempting\x20to\x20reconnect...','action','send','parse','webrtc_skip','getConnectionStatus','handleServerMessage','connectToRosbridge','rosbridgeWs','values','Failed\x20to\x20connect\x20to\x20ROSBridge\x20(main):','strategy','connection','registrationToken','authService','topicManager','roslib','10212wPgYSt','),\x20attempting\x20to\x20reconnect...','Connected\x20to\x20ROSBridge\x20(WebRTC)','config','topics','Failed\x20to\x20connect\x20to\x20server:','log','(((.+)+)+)+$','[TopicManager]\x20Enhancing\x20topics\x20response\x20with\x20throttling\x20metadata','type','[TopicManager]\x20Enhanced\x20topics\x20response\x20sent\x20to\x20client','open','samplingRate','[ROSBridge]\x20Failed\x20to\x20parse\x20message\x20for\x20topic\x20management:','Connected\x20to\x20server','stringify','topic','9025212KGBehO','initialize','connectToServer'];a5_0x5374=function(){return _0x4f8210;};return a5_0x5374();}const a5_0x2bfde7=a5_0x83c1;function a5_0x83c1(_0x43e999,_0x73550d){const _0x38309c=a5_0x5374();return a5_0x83c1=function(_0x131589,_0x21f997){_0x131589=_0x131589-0x1e6;let _0x537484=_0x38309c[_0x131589];return _0x537484;},a5_0x83c1(_0x43e999,_0x73550d);}(function(_0x45d09f,_0x15b08b){const _0x19ffc2=a5_0x83c1,_0x535094=_0x45d09f();while(!![]){try{const _0x48c9f8=-parseInt(_0x19ffc2(0x225))/0x1+-parseInt(_0x19ffc2(0x23d))/0x2+-parseInt(_0x19ffc2(0x239))/0x3+parseInt(_0x19ffc2(0x234))/0x4+parseInt(_0x19ffc2(0x1e6))/0x5*(parseInt(_0x19ffc2(0x207))/0x6)+-parseInt(_0x19ffc2(0x218))/0x7+parseInt(_0x19ffc2(0x1eb))/0x8*(parseInt(_0x19ffc2(0x1ec))/0x9);if(_0x48c9f8===_0x15b08b)break;else _0x535094['push'](_0x535094['shift']());}catch(_0x18f78a){_0x535094['push'](_0x535094['shift']());}}}(a5_0x5374,0xdbb13));const a5_0x21f997=(function(){let _0x111429=!![];return function(_0x46733a,_0x24d2b4){const _0xf1735f=_0x111429?function(){const _0x33498b=a5_0x83c1;if(_0x24d2b4){const _0x569c29=_0x24d2b4[_0x33498b(0x1f5)](_0x46733a,arguments);return _0x24d2b4=null,_0x569c29;}}:function(){};return _0x111429=![],_0xf1735f;};}()),a5_0x131589=a5_0x21f997(this,function(){const _0x121409=a5_0x83c1;return a5_0x131589[_0x121409(0x1f3)]()['search'](_0x121409(0x20e))[_0x121409(0x1f3)]()[_0x121409(0x221)](a5_0x131589)['search'](_0x121409(0x20e));});a5_0x131589();const WebSocket=require('ws'),ROSLIB=require(a5_0x2bfde7(0x206));class ReverseProxyService{constructor(_0x22a349,_0x533a99,_0xe980d,_0x42143f,_0x603d0){const _0x4ec330=a5_0x2bfde7;this[_0x4ec330(0x20a)]=_0x22a349,this[_0x4ec330(0x204)]=_0x533a99,this[_0x4ec330(0x22b)]=_0xe980d,this[_0x4ec330(0x205)]=_0x42143f,this[_0x4ec330(0x223)]=_0x603d0,this[_0x4ec330(0x229)]=null,this[_0x4ec330(0x1fe)]=null,this['rosbridgeWebRTCWs']=null,this[_0x4ec330(0x203)]=null,this['robotId']=null;}[a5_0x2bfde7(0x219)](_0x59579c,_0x99c42c){const _0x51054a=a5_0x2bfde7;this[_0x51054a(0x1f0)]=_0x59579c,this[_0x51054a(0x203)]=_0x99c42c;}[a5_0x2bfde7(0x1fd)](){const _0x25f356=a5_0x2bfde7;try{this[_0x25f356(0x1fe)]=new WebSocket(this[_0x25f356(0x20a)]['rosbridge']['wsEndpoint']),this[_0x25f356(0x1fe)]['on'](_0x25f356(0x212),()=>{const _0x3ceb1b=_0x25f356;console[_0x3ceb1b(0x20d)]('Connected\x20to\x20ROSBridge\x20(main)');const _0xc0e981=new ROSLIB[(_0x3ceb1b(0x237))]({'url':this[_0x3ceb1b(0x20a)][_0x3ceb1b(0x230)][_0x3ceb1b(0x1ee)]});_0xc0e981['on'](_0x3ceb1b(0x202),()=>{setTimeout(()=>{const _0x11f7ac=a5_0x83c1;this['topicManager'][_0x11f7ac(0x235)](_0xc0e981)[_0x11f7ac(0x233)](_0x2c5028=>{const _0x4a0767=_0x11f7ac;console[_0x4a0767(0x231)](_0x4a0767(0x228),_0x2c5028);});},0x3e8);}),this['connectToRosbridgeWebRTC']();}),this[_0x25f356(0x1fe)]['on'](_0x25f356(0x1f2),_0x3bc926=>{this['handleRosbridgeMessage'](_0x3bc926);}),this['rosbridgeWs']['on'](_0x25f356(0x22d),()=>{const _0x328b78=_0x25f356;console[_0x328b78(0x20d)](_0x328b78(0x1f6)),this['webrtcService'][_0x328b78(0x222)](),setTimeout(()=>this[_0x328b78(0x1fd)](),0x1388);}),this[_0x25f356(0x1fe)]['on']('error',_0x2cb92e=>{const _0x809664=_0x25f356;console[_0x809664(0x231)]('ROSBridge\x20(main)\x20connection\x20error:',_0x2cb92e);});}catch(_0x3a4020){console[_0x25f356(0x231)](_0x25f356(0x200),_0x3a4020),setTimeout(()=>this[_0x25f356(0x1fd)](),0x1388);}}[a5_0x2bfde7(0x22e)](){const _0x3dc6c3=a5_0x2bfde7;try{this[_0x3dc6c3(0x1ea)]=new WebSocket(this[_0x3dc6c3(0x20a)]['rosbridge'][_0x3dc6c3(0x1ee)]),this[_0x3dc6c3(0x1ea)]['on'](_0x3dc6c3(0x212),()=>{const _0x209633=_0x3dc6c3;console[_0x209633(0x20d)](_0x209633(0x209)),this[_0x209633(0x22b)][_0x209633(0x219)](this[_0x209633(0x1ea)],this[_0x209633(0x229)]);}),this[_0x3dc6c3(0x1ea)]['on']('message',_0x392345=>{}),this['rosbridgeWebRTCWs']['on']('close',()=>{const _0x1cb1c4=_0x3dc6c3;console['log'](_0x1cb1c4(0x1f1)),this[_0x1cb1c4(0x22b)][_0x1cb1c4(0x222)](),setTimeout(()=>this[_0x1cb1c4(0x22e)](),0x1388);}),this[_0x3dc6c3(0x1ea)]['on'](_0x3dc6c3(0x231),_0x4f296d=>{const _0x54bd8f=_0x3dc6c3;console[_0x54bd8f(0x231)](_0x54bd8f(0x232),_0x4f296d);});}catch(_0x394ec8){console[_0x3dc6c3(0x231)](_0x3dc6c3(0x22f),_0x394ec8),setTimeout(()=>this[_0x3dc6c3(0x22e)](),0x1388);}}[a5_0x2bfde7(0x21a)](){const _0x306dbc=a5_0x2bfde7;try{if(!this[_0x306dbc(0x203)])throw new Error(_0x306dbc(0x224));const _0x31dbd5=this[_0x306dbc(0x20a)]['serverUrl']['replace'](_0x306dbc(0x23c),'ws')+_0x306dbc(0x21b)+this[_0x306dbc(0x203)];this[_0x306dbc(0x229)]=new WebSocket(_0x31dbd5),this[_0x306dbc(0x229)]['on'](_0x306dbc(0x212),()=>{const _0x11755a=_0x306dbc;console[_0x11755a(0x20d)](_0x11755a(0x215)),this[_0x11755a(0x1ea)]&&this[_0x11755a(0x1ea)]['readyState']===WebSocket['OPEN']&&this[_0x11755a(0x22b)][_0x11755a(0x219)](this[_0x11755a(0x1ea)],this[_0x11755a(0x229)]);}),this[_0x306dbc(0x229)]['on'](_0x306dbc(0x1f2),_0x2cf4cc=>{const _0x58d212=_0x306dbc;this[_0x58d212(0x1fc)](_0x2cf4cc);}),this['serverWs']['on']('close',(_0x260ede,_0x78bc3a)=>{const _0x38efc0=_0x306dbc;console[_0x38efc0(0x20d)](_0x38efc0(0x220)+_0x260ede+':\x20'+_0x78bc3a+_0x38efc0(0x208)),this['webrtcService']['stopAllSessions'](),setTimeout(()=>this[_0x38efc0(0x21a)](),0x1388);}),this[_0x306dbc(0x229)]['on'](_0x306dbc(0x231),_0x435b9d=>{const _0x317fc4=_0x306dbc;console[_0x317fc4(0x231)](_0x317fc4(0x1ed),_0x435b9d);});}catch(_0x2744d5){console[_0x306dbc(0x231)](_0x306dbc(0x20c),_0x2744d5),setTimeout(()=>this[_0x306dbc(0x21a)](),0x1388);}}['handleRosbridgeMessage'](_0x94ebef){const _0x2b3d44=a5_0x2bfde7;if(this[_0x2b3d44(0x229)]&&this[_0x2b3d44(0x229)][_0x2b3d44(0x1e9)]===WebSocket[_0x2b3d44(0x236)]){let _0x323f3f=_0x94ebef[_0x2b3d44(0x1f3)]();try{let _0x4af35d=JSON['parse'](_0x323f3f);if(_0x4af35d['op']==='publish'&&_0x4af35d['topic']){const _0x42a7e3=this[_0x2b3d44(0x205)][_0x2b3d44(0x1f4)](_0x4af35d);switch(_0x42a7e3[_0x2b3d44(0x1f7)]){case'sample_skip':return;case _0x2b3d44(0x1fa):return;case _0x2b3d44(0x22a):default:_0x323f3f=JSON[_0x2b3d44(0x216)](_0x42a7e3[_0x2b3d44(0x1f2)]);break;}}if((_0x4af35d['op']===_0x2b3d44(0x23a)||_0x4af35d['op']===_0x2b3d44(0x21f))&&(_0x4af35d[_0x2b3d44(0x21e)]==='/rosapi/topics'||_0x4af35d[_0x2b3d44(0x1ff)]&&_0x4af35d['values'][_0x2b3d44(0x20b)])){console[_0x2b3d44(0x20d)](_0x2b3d44(0x20f));const _0x379cd1=_0x4af35d[_0x2b3d44(0x1ff)]?.[_0x2b3d44(0x20b)]||[],_0x3c0e44=_0x4af35d[_0x2b3d44(0x1ff)]?.[_0x2b3d44(0x1e7)]||[],_0xaaf566=_0x379cd1['map']((_0x340f55,_0x35ac87)=>{const _0x13ad3f=_0x2b3d44,_0x378d96=this[_0x13ad3f(0x205)]['getTopicStrategy'](_0x340f55);return{'name':_0x340f55,'type':_0x3c0e44[_0x35ac87]||'unknown','throttling':_0x378d96?{'isThrottled':_0x378d96['strategy']===_0x13ad3f(0x21c),'strategy':_0x378d96[_0x13ad3f(0x201)],'samplingRate':_0x378d96[_0x13ad3f(0x213)],'reason':_0x378d96[_0x13ad3f(0x22c)],'estimatedSize':_0x378d96[_0x13ad3f(0x226)]}:null};});_0x4af35d[_0x2b3d44(0x1ff)]={'topics':_0xaaf566[_0x2b3d44(0x1e8)](_0x228445=>_0x228445['name']),'types':_0xaaf566[_0x2b3d44(0x1e8)](_0x251b21=>_0x251b21[_0x2b3d44(0x210)]),'throttling':_0xaaf566[_0x2b3d44(0x1e8)](_0xdd5cc2=>_0xdd5cc2['throttling'])},_0x323f3f=JSON[_0x2b3d44(0x216)](_0x4af35d),console['log'](_0x2b3d44(0x211));}if(_0x4af35d['op']==='publish'&&_0x4af35d[_0x2b3d44(0x217)]===_0x2b3d44(0x227)){const _0x9fee11=this[_0x2b3d44(0x223)][_0x2b3d44(0x21d)](_0x4af35d,_0x4af35d[_0x2b3d44(0x217)]);_0x9fee11&&(_0x4af35d=_0x9fee11,_0x323f3f=JSON[_0x2b3d44(0x216)](_0x4af35d));}}catch(_0x37a5a7){console[_0x2b3d44(0x23b)](_0x2b3d44(0x214),_0x37a5a7['message']);}this[_0x2b3d44(0x229)][_0x2b3d44(0x1f8)](_0x323f3f);}}[a5_0x2bfde7(0x1fc)](_0x288285){const _0x56f66e=a5_0x2bfde7;if(this[_0x56f66e(0x1fe)]&&this['rosbridgeWs']['readyState']===WebSocket[_0x56f66e(0x236)]){let _0x1fdebd=_0x288285[_0x56f66e(0x1f3)]();try{const _0x1cb110=JSON[_0x56f66e(0x1f9)](_0x1fdebd);if(this[_0x56f66e(0x22b)][_0x56f66e(0x1f4)](_0x1cb110))return;if(this[_0x56f66e(0x223)]['handleMessage'](_0x1cb110,this['serverWs']))return;this[_0x56f66e(0x1fe)][_0x56f66e(0x1f8)](_0x1fdebd);}catch(_0x1b0067){this[_0x56f66e(0x1fe)][_0x56f66e(0x1f8)](_0x1fdebd);}}}[a5_0x2bfde7(0x1fb)](){const _0x5be3b0=a5_0x2bfde7;return{'server':this[_0x5be3b0(0x229)]?this[_0x5be3b0(0x229)][_0x5be3b0(0x1e9)]:WebSocket[_0x5be3b0(0x1ef)],'rosbridge':this[_0x5be3b0(0x1fe)]?this[_0x5be3b0(0x1fe)]['readyState']:WebSocket[_0x5be3b0(0x1ef)],'rosbridgeWebRTC':this[_0x5be3b0(0x1ea)]?this[_0x5be3b0(0x1ea)][_0x5be3b0(0x1e9)]:WebSocket['CLOSED']};}['closeAllConnections'](){const _0x3b5f19=a5_0x2bfde7;this[_0x3b5f19(0x229)]&&this['serverWs'][_0x3b5f19(0x22d)](),this[_0x3b5f19(0x1fe)]&&this[_0x3b5f19(0x1fe)][_0x3b5f19(0x22d)](),this['rosbridgeWebRTCWs']&&this[_0x3b5f19(0x1ea)][_0x3b5f19(0x22d)]();}}module[a5_0x2bfde7(0x238)]=ReverseProxyService;