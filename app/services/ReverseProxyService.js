const a5_0x382182=a5_0x2d27;(function(_0xfd0ddb,_0xf8b78d){const _0x232d2=a5_0x2d27,_0x2e8b37=_0xfd0ddb();while(!![]){try{const _0x5782a0=-parseInt(_0x232d2(0x123))/0x1+parseInt(_0x232d2(0x104))/0x2+-parseInt(_0x232d2(0x150))/0x3+-parseInt(_0x232d2(0x117))/0x4*(-parseInt(_0x232d2(0x143))/0x5)+parseInt(_0x232d2(0x131))/0x6+parseInt(_0x232d2(0x101))/0x7*(parseInt(_0x232d2(0x10e))/0x8)+-parseInt(_0x232d2(0x129))/0x9*(parseInt(_0x232d2(0x132))/0xa);if(_0x5782a0===_0xf8b78d)break;else _0x2e8b37['push'](_0x2e8b37['shift']());}catch(_0x3b7380){_0x2e8b37['push'](_0x2e8b37['shift']());}}}(a5_0x252b,0x892ba));function a5_0x252b(){const _0x982f78=['search','8035432gIbRjx','wsEndpoint','types','webrtc_skip','OPEN','config','toString','getConnectionStatus','call_service','1743428FSdzdJ','unknown','type','map','log','[ROSBridge]\x20Failed\x20to\x20parse\x20message\x20for\x20topic\x20management:','connection','/rosapi/topics','samplingRate','values','forward','connectToRosbridgeWebRTC','115495qKZazW','readyState','/rosbridge?type=appliance&token=','robotId','handleServerMessage','topic','9lZuswX','connectToServer','connectToRosbridge','publish','warn','message','Connected\x20to\x20ROSBridge\x20(main)','close','547830YZZaZh','5976940wQtsLf','action','service','stringify','registrationToken','rosbridgeWebRTCWs','urdfService','serverWs','ROSBridge\x20(WebRTC)\x20connection\x20error:','send','apply','exports','authService','catch','throttling','serverUrl','sample_skip','10AlXehM','initialize','(((.+)+)+)+$','error','closeAllConnections','estimatedSize','Server\x20connection\x20error:','strategy','sample','topicManager','processMessage','topics','/robot_description','2577969lAeMYm','http','parse','CLOSED','Registration\x20token\x20not\x20found.\x20Please\x20register\x20this\x20appliance\x20first.','[TopicManager]\x20Enhanced\x20topics\x20response\x20sent\x20to\x20client','7tjtiiK','Failed\x20to\x20connect\x20to\x20server:','webrtcService','333828yumepd','open','Disconnected\x20from\x20server\x20(','stopAllSessions','rosbridge','handleRosbridgeMessage','Disconnected\x20from\x20ROSBridge\x20(main),\x20attempting\x20to\x20reconnect...','handleMessage','rosbridgeWs'];a5_0x252b=function(){return _0x982f78;};return a5_0x252b();}const a5_0x48a73d=(function(){let _0xefb6a8=!![];return function(_0x14faa7,_0x442265){const _0xd220d5=_0xefb6a8?function(){const _0x53a0cc=a5_0x2d27;if(_0x442265){const _0xf83a1b=_0x442265[_0x53a0cc(0x13c)](_0x14faa7,arguments);return _0x442265=null,_0xf83a1b;}}:function(){};return _0xefb6a8=![],_0xd220d5;};}()),a5_0x46f931=a5_0x48a73d(this,function(){const _0x3275d0=a5_0x2d27;return a5_0x46f931[_0x3275d0(0x114)]()['search']('(((.+)+)+)+$')[_0x3275d0(0x114)]()['constructor'](a5_0x46f931)[_0x3275d0(0x10d)](_0x3275d0(0x145));});a5_0x46f931();const WebSocket=require('ws'),ROSLIB=require('roslib');function a5_0x2d27(_0x44bb53,_0xaaf1b1){const _0x49b6f8=a5_0x252b();return a5_0x2d27=function(_0x46f931,_0x48a73d){_0x46f931=_0x46f931-0xff;let _0x252b46=_0x49b6f8[_0x46f931];return _0x252b46;},a5_0x2d27(_0x44bb53,_0xaaf1b1);}class ReverseProxyService{constructor(_0x24cb92,_0x2092fc,_0x5f02ee,_0x5edf48,_0x4261c6){const _0x2299f5=a5_0x2d27;this[_0x2299f5(0x113)]=_0x24cb92,this[_0x2299f5(0x13e)]=_0x2092fc,this['webrtcService']=_0x5f02ee,this[_0x2299f5(0x14c)]=_0x5edf48,this[_0x2299f5(0x138)]=_0x4261c6,this['serverWs']=null,this[_0x2299f5(0x10c)]=null,this[_0x2299f5(0x137)]=null,this[_0x2299f5(0x136)]=null,this[_0x2299f5(0x126)]=null;}[a5_0x382182(0x144)](_0x3c70e9,_0x3abd66){const _0x2ff14c=a5_0x382182;this[_0x2ff14c(0x126)]=_0x3c70e9,this['registrationToken']=_0x3abd66;}[a5_0x382182(0x12b)](){const _0x2ad607=a5_0x382182;try{this['rosbridgeWs']=new WebSocket(this['config'][_0x2ad607(0x108)][_0x2ad607(0x10f)]),this[_0x2ad607(0x10c)]['on'](_0x2ad607(0x105),()=>{const _0x128cd7=_0x2ad607;console[_0x128cd7(0x11b)](_0x128cd7(0x12f));const _0x523df4=new ROSLIB['Ros']({'url':this[_0x128cd7(0x113)][_0x128cd7(0x108)][_0x128cd7(0x10f)]});_0x523df4['on'](_0x128cd7(0x11d),()=>{setTimeout(()=>{const _0x8062a8=a5_0x2d27;this[_0x8062a8(0x14c)]['discoverTopics'](_0x523df4)[_0x8062a8(0x13f)](_0x25255a=>{const _0x6d8484=_0x8062a8;console[_0x6d8484(0x146)]('Topic\x20discovery\x20failed:',_0x25255a);});},0x3e8);}),this[_0x128cd7(0x122)]();}),this['rosbridgeWs']['on'](_0x2ad607(0x12e),_0x89a9d1=>{const _0x405cc8=_0x2ad607;this[_0x405cc8(0x109)](_0x89a9d1);}),this[_0x2ad607(0x10c)]['on'](_0x2ad607(0x130),()=>{const _0x1e3568=_0x2ad607;console[_0x1e3568(0x11b)](_0x1e3568(0x10a)),this[_0x1e3568(0x103)]['stopAllSessions'](),setTimeout(()=>this['connectToRosbridge'](),0x1388);}),this['rosbridgeWs']['on'](_0x2ad607(0x146),_0x3a502a=>{const _0x31a949=_0x2ad607;console[_0x31a949(0x146)]('ROSBridge\x20(main)\x20connection\x20error:',_0x3a502a);});}catch(_0x4374fb){console[_0x2ad607(0x146)]('Failed\x20to\x20connect\x20to\x20ROSBridge\x20(main):',_0x4374fb),setTimeout(()=>this[_0x2ad607(0x12b)](),0x1388);}}[a5_0x382182(0x122)](){const _0x5dade2=a5_0x382182;try{this[_0x5dade2(0x137)]=new WebSocket(this[_0x5dade2(0x113)]['rosbridge'][_0x5dade2(0x10f)]),this[_0x5dade2(0x137)]['on'](_0x5dade2(0x105),()=>{const _0x28392a=_0x5dade2;console[_0x28392a(0x11b)]('Connected\x20to\x20ROSBridge\x20(WebRTC)'),this[_0x28392a(0x103)][_0x28392a(0x144)](this[_0x28392a(0x137)],this[_0x28392a(0x139)]);}),this[_0x5dade2(0x137)]['on'](_0x5dade2(0x12e),_0x2f1045=>{}),this[_0x5dade2(0x137)]['on'](_0x5dade2(0x130),()=>{const _0x4478a3=_0x5dade2;console['log']('Disconnected\x20from\x20ROSBridge\x20(WebRTC),\x20attempting\x20to\x20reconnect...'),this[_0x4478a3(0x103)][_0x4478a3(0x107)](),setTimeout(()=>this['connectToRosbridgeWebRTC'](),0x1388);}),this[_0x5dade2(0x137)]['on']('error',_0x31a74d=>{const _0x151dbd=_0x5dade2;console[_0x151dbd(0x146)](_0x151dbd(0x13a),_0x31a74d);});}catch(_0x129849){console[_0x5dade2(0x146)]('Failed\x20to\x20connect\x20to\x20ROSBridge\x20(WebRTC):',_0x129849),setTimeout(()=>this['connectToRosbridgeWebRTC'](),0x1388);}}[a5_0x382182(0x12a)](){const _0xb1e704=a5_0x382182;try{if(!this[_0xb1e704(0x136)])throw new Error(_0xb1e704(0xff));const _0x42d2d9=this['config'][_0xb1e704(0x141)]['replace'](_0xb1e704(0x151),'ws')+_0xb1e704(0x125)+this[_0xb1e704(0x136)];this['serverWs']=new WebSocket(_0x42d2d9),this[_0xb1e704(0x139)]['on'](_0xb1e704(0x105),()=>{const _0x344007=_0xb1e704;console[_0x344007(0x11b)]('Connected\x20to\x20server'),this[_0x344007(0x137)]&&this['rosbridgeWebRTCWs'][_0x344007(0x124)]===WebSocket[_0x344007(0x112)]&&this['webrtcService'][_0x344007(0x144)](this[_0x344007(0x137)],this[_0x344007(0x139)]);}),this[_0xb1e704(0x139)]['on'](_0xb1e704(0x12e),_0x23d141=>{this['handleServerMessage'](_0x23d141);}),this[_0xb1e704(0x139)]['on'](_0xb1e704(0x130),(_0x233bb0,_0x4ea5e6)=>{const _0x25713d=_0xb1e704;console[_0x25713d(0x11b)](_0x25713d(0x106)+_0x233bb0+':\x20'+_0x4ea5e6+'),\x20attempting\x20to\x20reconnect...'),this[_0x25713d(0x103)][_0x25713d(0x107)](),setTimeout(()=>this[_0x25713d(0x12a)](),0x1388);}),this[_0xb1e704(0x139)]['on'](_0xb1e704(0x146),_0x131f89=>{const _0x5d2c6c=_0xb1e704;console[_0x5d2c6c(0x146)](_0x5d2c6c(0x149),_0x131f89);});}catch(_0x3dc89a){console['error'](_0xb1e704(0x102),_0x3dc89a),setTimeout(()=>this[_0xb1e704(0x12a)](),0x1388);}}[a5_0x382182(0x109)](_0x3be2ea){const _0x5cabd1=a5_0x382182;if(this[_0x5cabd1(0x139)]&&this[_0x5cabd1(0x139)][_0x5cabd1(0x124)]===WebSocket[_0x5cabd1(0x112)]){let _0x1ea6a0=_0x3be2ea['toString']();try{let _0x1eac08=JSON['parse'](_0x1ea6a0);if(_0x1eac08['op']==='publish'&&_0x1eac08[_0x5cabd1(0x128)]){const _0x56aeca=this[_0x5cabd1(0x14c)][_0x5cabd1(0x10b)](_0x1eac08);switch(_0x56aeca[_0x5cabd1(0x133)]){case _0x5cabd1(0x142):return;case _0x5cabd1(0x111):return;case _0x5cabd1(0x121):default:_0x1ea6a0=JSON[_0x5cabd1(0x135)](_0x56aeca[_0x5cabd1(0x12e)]);break;}}if((_0x1eac08['op']==='service_response'||_0x1eac08['op']===_0x5cabd1(0x116))&&(_0x1eac08[_0x5cabd1(0x134)]===_0x5cabd1(0x11e)||_0x1eac08[_0x5cabd1(0x120)]&&_0x1eac08['values'][_0x5cabd1(0x14e)])){console[_0x5cabd1(0x11b)]('[TopicManager]\x20Enhancing\x20topics\x20response\x20with\x20throttling\x20metadata');const _0xc8e571=_0x1eac08['values']?.[_0x5cabd1(0x14e)]||[],_0x57a9b=_0x1eac08[_0x5cabd1(0x120)]?.[_0x5cabd1(0x110)]||[],_0x1e29b3=_0xc8e571[_0x5cabd1(0x11a)]((_0x187372,_0x4c8c49)=>{const _0x5221b4=_0x5cabd1,_0x4e407b=this['topicManager']['getTopicStrategy'](_0x187372);return{'name':_0x187372,'type':_0x57a9b[_0x4c8c49]||_0x5221b4(0x118),'throttling':_0x4e407b?{'isThrottled':_0x4e407b[_0x5221b4(0x14a)]===_0x5221b4(0x14b),'strategy':_0x4e407b[_0x5221b4(0x14a)],'samplingRate':_0x4e407b[_0x5221b4(0x11f)],'reason':_0x4e407b['reason'],'estimatedSize':_0x4e407b[_0x5221b4(0x148)]}:null};});_0x1eac08[_0x5cabd1(0x120)]={'topics':_0x1e29b3[_0x5cabd1(0x11a)](_0x364e00=>_0x364e00['name']),'types':_0x1e29b3[_0x5cabd1(0x11a)](_0x1a1da5=>_0x1a1da5[_0x5cabd1(0x119)]),'throttling':_0x1e29b3[_0x5cabd1(0x11a)](_0x4f6f8f=>_0x4f6f8f[_0x5cabd1(0x140)])},_0x1ea6a0=JSON['stringify'](_0x1eac08),console[_0x5cabd1(0x11b)](_0x5cabd1(0x100));}if(_0x1eac08['op']===_0x5cabd1(0x12c)&&_0x1eac08['topic']===_0x5cabd1(0x14f)){const _0x226c57=this[_0x5cabd1(0x138)][_0x5cabd1(0x14d)](_0x1eac08,_0x1eac08[_0x5cabd1(0x128)]);_0x226c57&&(_0x1eac08=_0x226c57,_0x1ea6a0=JSON[_0x5cabd1(0x135)](_0x1eac08));}}catch(_0x5cf887){console[_0x5cabd1(0x12d)](_0x5cabd1(0x11c),_0x5cf887[_0x5cabd1(0x12e)]);}this[_0x5cabd1(0x139)][_0x5cabd1(0x13b)](_0x1ea6a0);}}[a5_0x382182(0x127)](_0x65ba23){const _0x220f0e=a5_0x382182;if(this[_0x220f0e(0x10c)]&&this[_0x220f0e(0x10c)][_0x220f0e(0x124)]===WebSocket[_0x220f0e(0x112)]){let _0xb8120f=_0x65ba23[_0x220f0e(0x114)]();try{const _0x45897b=JSON[_0x220f0e(0x152)](_0xb8120f);if(this[_0x220f0e(0x103)][_0x220f0e(0x10b)](_0x45897b))return;if(this[_0x220f0e(0x138)][_0x220f0e(0x10b)](_0x45897b,this[_0x220f0e(0x139)]))return;this[_0x220f0e(0x10c)][_0x220f0e(0x13b)](_0xb8120f);}catch(_0x5bb3b9){this['rosbridgeWs'][_0x220f0e(0x13b)](_0xb8120f);}}}[a5_0x382182(0x115)](){const _0x4b2f15=a5_0x382182;return{'server':this[_0x4b2f15(0x139)]?this[_0x4b2f15(0x139)][_0x4b2f15(0x124)]:WebSocket['CLOSED'],'rosbridge':this['rosbridgeWs']?this[_0x4b2f15(0x10c)][_0x4b2f15(0x124)]:WebSocket[_0x4b2f15(0x153)],'rosbridgeWebRTC':this[_0x4b2f15(0x137)]?this[_0x4b2f15(0x137)][_0x4b2f15(0x124)]:WebSocket[_0x4b2f15(0x153)]};}[a5_0x382182(0x147)](){const _0x59e980=a5_0x382182;this[_0x59e980(0x139)]&&this[_0x59e980(0x139)][_0x59e980(0x130)](),this['rosbridgeWs']&&this[_0x59e980(0x10c)][_0x59e980(0x130)](),this[_0x59e980(0x137)]&&this['rosbridgeWebRTCWs'][_0x59e980(0x130)]();}}module[a5_0x382182(0x13d)]=ReverseProxyService;