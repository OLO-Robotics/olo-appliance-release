const a5_0x42c189=a5_0x4705;(function(_0xab2db1,_0x486e40){const _0x2d3710=a5_0x4705,_0x1330fd=_0xab2db1();while(!![]){try{const _0x315077=parseInt(_0x2d3710(0xfd))/0x1+parseInt(_0x2d3710(0xbc))/0x2+parseInt(_0x2d3710(0x103))/0x3+-parseInt(_0x2d3710(0xc8))/0x4+parseInt(_0x2d3710(0xdb))/0x5+-parseInt(_0x2d3710(0xb6))/0x6*(parseInt(_0x2d3710(0xed))/0x7)+-parseInt(_0x2d3710(0xd3))/0x8*(parseInt(_0x2d3710(0xeb))/0x9);if(_0x315077===_0x486e40)break;else _0x1330fd['push'](_0x1330fd['shift']());}catch(_0x1c7fdb){_0x1330fd['push'](_0x1330fd['shift']());}}}(a5_0x4acc,0xbaca8));const a5_0x1c0c31=(function(){let _0x14524c=!![];return function(_0xcfb65c,_0xb97f33){const _0x45e5ab=_0x14524c?function(){const _0x36531f=a5_0x4705;if(_0xb97f33){const _0x491f17=_0xb97f33[_0x36531f(0xcb)](_0xcfb65c,arguments);return _0xb97f33=null,_0x491f17;}}:function(){};return _0x14524c=![],_0x45e5ab;};}()),a5_0x32fa44=a5_0x1c0c31(this,function(){const _0x3ce72f=a5_0x4705;return a5_0x32fa44[_0x3ce72f(0xdf)]()['search'](_0x3ce72f(0xf5))[_0x3ce72f(0xdf)]()[_0x3ce72f(0xc6)](a5_0x32fa44)['search'](_0x3ce72f(0xf5));});function a5_0x4acc(){const _0x21dcb0=['topics','2719320PSuOLB','warn','samplingRate','forward','close','values','http','handleRosbridgeMessage','5613555eEZRAZ','type','service_response','serverUrl','toString','CLOSED','webrtcService','stopAllSessions','urdfService','throttling','Failed\x20to\x20connect\x20to\x20server:','processMessage','Ros','estimatedSize','OPEN','Connected\x20to\x20server','9oUnuCS','Topic\x20discovery\x20failed:','743862iVIkjD','ROSBridge\x20(main)\x20connection\x20error:','Failed\x20to\x20connect\x20to\x20ROSBridge\x20(main):','log','topic','Connected\x20to\x20ROSBridge\x20(WebRTC)','sample','reason','(((.+)+)+)+$','connectToRosbridge','serverWs','Server\x20connection\x20error:','/rosbridge?type=appliance&token=','initialize','registrationToken','action','114196JGDHIV','error','Disconnected\x20from\x20server\x20(','/rosapi/topics','send','/robot_description','4583364LmtjBK','),\x20attempting\x20to\x20reconnect...','rosbridgeWs','name','[TopicManager]\x20Enhanced\x20topics\x20response\x20sent\x20to\x20client','topicManager','Disconnected\x20from\x20ROSBridge\x20(main),\x20attempting\x20to\x20reconnect...','exports','types','robotId','open','54oXRggj','rosbridgeWebRTCWs','unknown','catch','ROSBridge\x20(WebRTC)\x20connection\x20error:','[TopicManager]\x20Enhancing\x20topics\x20response\x20with\x20throttling\x20metadata','484032lyVXwa','service','Failed\x20to\x20connect\x20to\x20ROSBridge\x20(WebRTC):','map','Disconnected\x20from\x20ROSBridge\x20(WebRTC),\x20attempting\x20to\x20reconnect...','connectToRosbridgeWebRTC','wsEndpoint','publish','message','strategy','constructor','readyState','3781224gIZOqH','config','handleServerMessage','apply','[ROSBridge]\x20Failed\x20to\x20parse\x20message\x20for\x20topic\x20management:','rosbridge','replace','connectToServer','authService','stringify'];a5_0x4acc=function(){return _0x21dcb0;};return a5_0x4acc();}a5_0x32fa44();const WebSocket=require('ws'),ROSLIB=require('roslib');function a5_0x4705(_0x43fd7a,_0xb24d1d){const _0x50733d=a5_0x4acc();return a5_0x4705=function(_0x32fa44,_0x1c0c31){_0x32fa44=_0x32fa44-0xaf;let _0x4acc65=_0x50733d[_0x32fa44];return _0x4acc65;},a5_0x4705(_0x43fd7a,_0xb24d1d);}class ReverseProxyService{constructor(_0x4cf8cd,_0x41adb2,_0x2b43f8,_0xbb693a,_0x3b4c6e){const _0x3b9313=a5_0x4705;this[_0x3b9313(0xc9)]=_0x4cf8cd,this[_0x3b9313(0xd0)]=_0x41adb2,this[_0x3b9313(0xe1)]=_0x2b43f8,this[_0x3b9313(0xb0)]=_0xbb693a,this[_0x3b9313(0xe3)]=_0x3b4c6e,this[_0x3b9313(0xf7)]=null,this[_0x3b9313(0x105)]=null,this['rosbridgeWebRTCWs']=null,this[_0x3b9313(0xfb)]=null,this[_0x3b9313(0xb4)]=null;}[a5_0x42c189(0xfa)](_0x1769b2,_0x4bfba2){const _0x3e4bfb=a5_0x42c189;this['robotId']=_0x1769b2,this[_0x3e4bfb(0xfb)]=_0x4bfba2;}[a5_0x42c189(0xf6)](){const _0x4248f2=a5_0x42c189;try{this[_0x4248f2(0x105)]=new WebSocket(this[_0x4248f2(0xc9)][_0x4248f2(0xcd)][_0x4248f2(0xc2)]),this[_0x4248f2(0x105)]['on'](_0x4248f2(0xb5),()=>{const _0x110301=_0x4248f2;console[_0x110301(0xf0)]('Connected\x20to\x20ROSBridge\x20(main)');const _0x1a7626=new ROSLIB[(_0x110301(0xe7))]({'url':this[_0x110301(0xc9)][_0x110301(0xcd)][_0x110301(0xc2)]});_0x1a7626['on']('connection',()=>{setTimeout(()=>{const _0x594637=a5_0x4705;this[_0x594637(0xb0)]['discoverTopics'](_0x1a7626)[_0x594637(0xb9)](_0x581d58=>{const _0x298c21=_0x594637;console[_0x298c21(0xfe)](_0x298c21(0xec),_0x581d58);});},0x3e8);}),this[_0x110301(0xc1)]();}),this[_0x4248f2(0x105)]['on']('message',_0x185815=>{const _0x5c841e=_0x4248f2;this[_0x5c841e(0xda)](_0x185815);}),this['rosbridgeWs']['on'](_0x4248f2(0xd7),()=>{const _0x4fe996=_0x4248f2;console[_0x4fe996(0xf0)](_0x4fe996(0xb1)),this[_0x4fe996(0xe1)]['stopAllSessions'](),setTimeout(()=>this['connectToRosbridge'](),0x1388);}),this['rosbridgeWs']['on'](_0x4248f2(0xfe),_0x468e54=>{const _0x5c56e7=_0x4248f2;console[_0x5c56e7(0xfe)](_0x5c56e7(0xee),_0x468e54);});}catch(_0x5c560d){console[_0x4248f2(0xfe)](_0x4248f2(0xef),_0x5c560d),setTimeout(()=>this[_0x4248f2(0xf6)](),0x1388);}}[a5_0x42c189(0xc1)](){const _0x5d5049=a5_0x42c189;try{this[_0x5d5049(0xb7)]=new WebSocket(this[_0x5d5049(0xc9)]['rosbridge'][_0x5d5049(0xc2)]),this[_0x5d5049(0xb7)]['on'](_0x5d5049(0xb5),()=>{const _0x2e5162=_0x5d5049;console['log'](_0x2e5162(0xf2)),this[_0x2e5162(0xe1)]['initialize'](this['rosbridgeWebRTCWs'],this[_0x2e5162(0xf7)]);}),this[_0x5d5049(0xb7)]['on']('message',_0x40bdb0=>{}),this['rosbridgeWebRTCWs']['on'](_0x5d5049(0xd7),()=>{const _0x4f69fc=_0x5d5049;console['log'](_0x4f69fc(0xc0)),this['webrtcService'][_0x4f69fc(0xe2)](),setTimeout(()=>this[_0x4f69fc(0xc1)](),0x1388);}),this[_0x5d5049(0xb7)]['on']('error',_0x356009=>{const _0x3d447c=_0x5d5049;console[_0x3d447c(0xfe)](_0x3d447c(0xba),_0x356009);});}catch(_0x350481){console['error'](_0x5d5049(0xbe),_0x350481),setTimeout(()=>this[_0x5d5049(0xc1)](),0x1388);}}['connectToServer'](){const _0x5221f8=a5_0x42c189;try{if(!this[_0x5221f8(0xfb)])throw new Error('Registration\x20token\x20not\x20found.\x20Please\x20register\x20this\x20appliance\x20first.');const _0x1ad7f6=this[_0x5221f8(0xc9)][_0x5221f8(0xde)][_0x5221f8(0xce)](_0x5221f8(0xd9),'ws')+_0x5221f8(0xf9)+this[_0x5221f8(0xfb)];this[_0x5221f8(0xf7)]=new WebSocket(_0x1ad7f6),this['serverWs']['on'](_0x5221f8(0xb5),()=>{const _0x29ae75=_0x5221f8;console['log'](_0x29ae75(0xea)),this[_0x29ae75(0xb7)]&&this[_0x29ae75(0xb7)]['readyState']===WebSocket[_0x29ae75(0xe9)]&&this[_0x29ae75(0xe1)][_0x29ae75(0xfa)](this['rosbridgeWebRTCWs'],this['serverWs']);}),this[_0x5221f8(0xf7)]['on']('message',_0x11c70b=>{const _0x492185=_0x5221f8;this[_0x492185(0xca)](_0x11c70b);}),this[_0x5221f8(0xf7)]['on']('close',(_0xd2ebf8,_0x1a5262)=>{const _0x144bf4=_0x5221f8;console[_0x144bf4(0xf0)](_0x144bf4(0xff)+_0xd2ebf8+':\x20'+_0x1a5262+_0x144bf4(0x104)),this[_0x144bf4(0xe1)][_0x144bf4(0xe2)](),setTimeout(()=>this[_0x144bf4(0xcf)](),0x1388);}),this['serverWs']['on'](_0x5221f8(0xfe),_0x6fedd=>{const _0x30c6f3=_0x5221f8;console[_0x30c6f3(0xfe)](_0x30c6f3(0xf8),_0x6fedd);});}catch(_0x47fdad){console[_0x5221f8(0xfe)](_0x5221f8(0xe5),_0x47fdad),setTimeout(()=>this[_0x5221f8(0xcf)](),0x1388);}}['handleRosbridgeMessage'](_0x359e80){const _0x196f64=a5_0x42c189;if(this[_0x196f64(0xf7)]&&this[_0x196f64(0xf7)][_0x196f64(0xc7)]===WebSocket[_0x196f64(0xe9)]){let _0x172dfa=_0x359e80['toString']();try{let _0x28c0d1=JSON['parse'](_0x172dfa);if(_0x28c0d1['op']===_0x196f64(0xc3)&&_0x28c0d1[_0x196f64(0xf1)]){const _0x2f538b=this[_0x196f64(0xb0)]['handleMessage'](_0x28c0d1);switch(_0x2f538b[_0x196f64(0xfc)]){case'sample_skip':return;case'webrtc_skip':return;case _0x196f64(0xd6):default:_0x172dfa=JSON[_0x196f64(0xd1)](_0x2f538b[_0x196f64(0xc4)]);break;}}if((_0x28c0d1['op']===_0x196f64(0xdd)||_0x28c0d1['op']==='call_service')&&(_0x28c0d1[_0x196f64(0xbd)]===_0x196f64(0x100)||_0x28c0d1[_0x196f64(0xd8)]&&_0x28c0d1[_0x196f64(0xd8)][_0x196f64(0xd2)])){console[_0x196f64(0xf0)](_0x196f64(0xbb));const _0xa2a719=_0x28c0d1[_0x196f64(0xd8)]?.[_0x196f64(0xd2)]||[],_0xcb3b55=_0x28c0d1[_0x196f64(0xd8)]?.[_0x196f64(0xb3)]||[],_0x2f56ac=_0xa2a719[_0x196f64(0xbf)]((_0x10d190,_0x5e439e)=>{const _0x3b03ec=_0x196f64,_0x340f46=this[_0x3b03ec(0xb0)]['getTopicStrategy'](_0x10d190);return{'name':_0x10d190,'type':_0xcb3b55[_0x5e439e]||_0x3b03ec(0xb8),'throttling':_0x340f46?{'isThrottled':_0x340f46[_0x3b03ec(0xc5)]===_0x3b03ec(0xf3),'strategy':_0x340f46[_0x3b03ec(0xc5)],'samplingRate':_0x340f46[_0x3b03ec(0xd5)],'reason':_0x340f46[_0x3b03ec(0xf4)],'estimatedSize':_0x340f46[_0x3b03ec(0xe8)]}:null};});_0x28c0d1[_0x196f64(0xd8)]={'topics':_0x2f56ac[_0x196f64(0xbf)](_0x352ce0=>_0x352ce0[_0x196f64(0x106)]),'types':_0x2f56ac[_0x196f64(0xbf)](_0x5709f5=>_0x5709f5[_0x196f64(0xdc)]),'throttling':_0x2f56ac['map'](_0x197d42=>_0x197d42[_0x196f64(0xe4)])},_0x172dfa=JSON['stringify'](_0x28c0d1),console['log'](_0x196f64(0xaf));}if(_0x28c0d1['op']==='publish'&&_0x28c0d1[_0x196f64(0xf1)]===_0x196f64(0x102)){const _0x2f7a6c=this['urdfService'][_0x196f64(0xe6)](_0x28c0d1,_0x28c0d1[_0x196f64(0xf1)]);_0x2f7a6c&&(_0x28c0d1=_0x2f7a6c,_0x172dfa=JSON[_0x196f64(0xd1)](_0x28c0d1));}}catch(_0x42bc25){console[_0x196f64(0xd4)](_0x196f64(0xcc),_0x42bc25[_0x196f64(0xc4)]);}this[_0x196f64(0xf7)][_0x196f64(0x101)](_0x172dfa);}}[a5_0x42c189(0xca)](_0x19a285){const _0x4d0875=a5_0x42c189;if(this[_0x4d0875(0x105)]&&this[_0x4d0875(0x105)][_0x4d0875(0xc7)]===WebSocket['OPEN']){let _0x5b309c=_0x19a285[_0x4d0875(0xdf)]();try{const _0x224b87=JSON['parse'](_0x5b309c);if(this[_0x4d0875(0xe1)]['handleMessage'](_0x224b87))return;if(this[_0x4d0875(0xe3)]['handleMessage'](_0x224b87,this[_0x4d0875(0xf7)]))return;this[_0x4d0875(0x105)][_0x4d0875(0x101)](_0x5b309c);}catch(_0x250df3){this[_0x4d0875(0x105)][_0x4d0875(0x101)](_0x5b309c);}}}['getConnectionStatus'](){const _0x3d39f1=a5_0x42c189;return{'server':this['serverWs']?this[_0x3d39f1(0xf7)]['readyState']:WebSocket[_0x3d39f1(0xe0)],'rosbridge':this[_0x3d39f1(0x105)]?this[_0x3d39f1(0x105)][_0x3d39f1(0xc7)]:WebSocket[_0x3d39f1(0xe0)],'rosbridgeWebRTC':this[_0x3d39f1(0xb7)]?this[_0x3d39f1(0xb7)][_0x3d39f1(0xc7)]:WebSocket[_0x3d39f1(0xe0)]};}['closeAllConnections'](){const _0x1a2e61=a5_0x42c189;this[_0x1a2e61(0xf7)]&&this[_0x1a2e61(0xf7)][_0x1a2e61(0xd7)](),this[_0x1a2e61(0x105)]&&this[_0x1a2e61(0x105)][_0x1a2e61(0xd7)](),this[_0x1a2e61(0xb7)]&&this[_0x1a2e61(0xb7)][_0x1a2e61(0xd7)]();}}module[a5_0x42c189(0xb2)]=ReverseProxyService;