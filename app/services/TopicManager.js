function a4_0x24b0(){const _0x2f3a5f=['get','178740Ekphhr','forward','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','entries','type','points','[TopicManager]\x20Topic\x20discovery\x20failed:','334msABdh','sensor_msgs/msg/LaserScan','strategy','2204mfkzPJ','discoveryInProgress','1623WrXRBQ','isCameraTopic','apply','constructor','name','1030tTemhp','reason','topicStrategies','[TopicManager]\x20Strategies:','image_throttled','throttle_skip','filter','replace','webrtc_only','exports','sensor_msgs/msg/Image','cloud','log','2735055bsZFJW','config','forEach','[TopicManager]\x20Loaded\x20configuration:','throttleFrequencies','largeDataThreshold','lastMessageTimes','(((.+)+)+)+$','parseStrategyConfig','size','depth_points','now','image_raw','scan','topicHandling','isLargeDataTopic','Image','shouldThrottle','set','maxFrequency','includes','error','point','map','image','from','isLargeData','child_process','unknown','sensor_msgs/msg/CompressedImage','5851881hiSIPD','websocket','topics','handleMessage','5281KeAEZl','sensor_msgs/msg/PointCloud2','estimatedSize','getStatistics','determineTopicStrategy','compressed','point_cloud','test','PointCloud2','large_data_throttled','topic','shouldUseWebRTC','8190732tPIbhv','toString','length','analyzeTopicStrategy','video_webrtc_streaming','strategies','estimateTopicSize','discoverTopics','[TopicManager]\x20Topic\x20','throttle','defaultLargeDataStrategy','pattern_configured','LaserScan','some','user_configured','getManagedTopics','6697912CFQJUu','strategiesConfig'];a4_0x24b0=function(){return _0x2f3a5f;};return a4_0x24b0();}const a4_0x2a66f1=a4_0x10eb;(function(_0x19d870,_0x6f0151){const _0x1edc0d=a4_0x10eb,_0x4215e1=_0x19d870();while(!![]){try{const _0x26c7b9=-parseInt(_0x1edc0d(0x20b))/0x1*(-parseInt(_0x1edc0d(0x1d2))/0x2)+parseInt(_0x1edc0d(0x1d7))/0x3*(-parseInt(_0x1edc0d(0x1d5))/0x4)+-parseInt(_0x1edc0d(0x1e9))/0x5+-parseInt(_0x1edc0d(0x1b8))/0x6+parseInt(_0x1edc0d(0x207))/0x7+-parseInt(_0x1edc0d(0x1c8))/0x8+parseInt(_0x1edc0d(0x1cb))/0x9*(parseInt(_0x1edc0d(0x1dc))/0xa);if(_0x26c7b9===_0x6f0151)break;else _0x4215e1['push'](_0x4215e1['shift']());}catch(_0x5435d4){_0x4215e1['push'](_0x4215e1['shift']());}}}(a4_0x24b0,0xaecfb));function a4_0x10eb(_0x23ed0f,_0xcf7644){const _0x48512d=a4_0x24b0();return a4_0x10eb=function(_0x113865,_0x313129){_0x113865=_0x113865-0x1b2;let _0x24b007=_0x48512d[_0x113865];return _0x24b007;},a4_0x10eb(_0x23ed0f,_0xcf7644);}const a4_0x313129=(function(){let _0x210271=!![];return function(_0x1ccbfa,_0x5e6f39){const _0x16339e=_0x210271?function(){const _0x24af89=a4_0x10eb;if(_0x5e6f39){const _0x273d15=_0x5e6f39[_0x24af89(0x1d9)](_0x1ccbfa,arguments);return _0x5e6f39=null,_0x273d15;}}:function(){};return _0x210271=![],_0x16339e;};}()),a4_0x113865=a4_0x313129(this,function(){const _0x51b8c6=a4_0x10eb;return a4_0x113865[_0x51b8c6(0x1b9)]()['search'](_0x51b8c6(0x1f0))['toString']()[_0x51b8c6(0x1da)](a4_0x113865)['search'](_0x51b8c6(0x1f0));});a4_0x113865();const {execSync}=require(a4_0x2a66f1(0x204));class TopicManager{constructor(){const _0x358b7c=a4_0x2a66f1;this[_0x358b7c(0x1de)]=new Map(),this[_0x358b7c(0x1ef)]=new Map(),this[_0x358b7c(0x1d6)]=![],this[_0x358b7c(0x1ea)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x358b7c(0x1e4),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x358b7c(0x1e8)]('[TopicManager]\x20Initialised');}['loadConfig'](_0x2ca3e3){const _0x515b49=a4_0x2a66f1;if(_0x2ca3e3[_0x515b49(0x1f7)]){const _0xc5c9aa=_0x2ca3e3[_0x515b49(0x1f7)];_0xc5c9aa[_0x515b49(0x1ee)]&&(this[_0x515b49(0x1ea)][_0x515b49(0x1ee)]=_0xc5c9aa[_0x515b49(0x1ee)]),_0xc5c9aa[_0x515b49(0x1c2)]&&(this['config'][_0x515b49(0x1c2)]=_0xc5c9aa[_0x515b49(0x1c2)]),_0xc5c9aa['strategies']&&(this[_0x515b49(0x1ea)][_0x515b49(0x1c9)]={..._0xc5c9aa[_0x515b49(0x1bd)]}),_0xc5c9aa[_0x515b49(0x1ed)]&&(this['config'][_0x515b49(0x1ed)]={...this[_0x515b49(0x1ea)][_0x515b49(0x1ed)],..._0xc5c9aa[_0x515b49(0x1ed)]}),console[_0x515b49(0x1e8)](_0x515b49(0x1ec),this[_0x515b49(0x1ea)]);}}async[a4_0x2a66f1(0x1bf)](_0xb058fe){const _0x8ce006=a4_0x2a66f1;if(this['discoveryInProgress']||!_0xb058fe)return;this[_0x8ce006(0x1d6)]=!![],console[_0x8ce006(0x1e8)]('[TopicManager]\x20Starting\x20topic\x20discovery...');try{await new Promise((_0xad1893,_0x7a95f8)=>{_0xb058fe['getTopics'](_0x10a7e5=>{const _0x5062ff=a4_0x10eb,_0x203bfc=_0x10a7e5[_0x5062ff(0x209)][_0x5062ff(0x200)]((_0x82e96b,_0x280f2f)=>({'name':_0x82e96b,'type':_0x10a7e5['types'][_0x280f2f]}));console['log']('[TopicManager]\x20Found\x20'+_0x203bfc[_0x5062ff(0x1ba)]+'\x20topics');for(const _0x407719 of _0x203bfc){this[_0x5062ff(0x1bb)](_0x407719);}console['log']('[TopicManager]\x20Topic\x20discovery\x20completed'),console[_0x5062ff(0x1e8)](_0x5062ff(0x1df),Array[_0x5062ff(0x202)](this[_0x5062ff(0x1de)][_0x5062ff(0x1ce)]())),_0xad1893();},_0x3a0b05=>{const _0x558851=a4_0x10eb;console[_0x558851(0x1fe)]('[TopicManager]\x20Error\x20getting\x20topics:',_0x3a0b05),_0x7a95f8(_0x3a0b05);});});}catch(_0x45b401){console[_0x8ce006(0x1fe)](_0x8ce006(0x1d1),_0x45b401);}finally{this[_0x8ce006(0x1d6)]=![];}}[a4_0x2a66f1(0x1bb)](_0x1f78bc){const _0x1b1f75=a4_0x2a66f1,_0x2d4b66=this[_0x1b1f75(0x20f)](_0x1f78bc);this[_0x1b1f75(0x1de)]['set'](_0x1f78bc[_0x1b1f75(0x1db)],{'type':_0x1f78bc[_0x1b1f75(0x1cf)],'strategy':_0x2d4b66[_0x1b1f75(0x1cf)],'reason':_0x2d4b66[_0x1b1f75(0x1dd)],'maxFrequency':_0x2d4b66[_0x1b1f75(0x1fc)],'isLargeData':_0x2d4b66[_0x1b1f75(0x203)],'estimatedSize':_0x2d4b66[_0x1b1f75(0x20d)]}),console[_0x1b1f75(0x1e8)](_0x1b1f75(0x1c0)+_0x1f78bc[_0x1b1f75(0x1db)]+':\x20'+_0x2d4b66['type']+'\x20('+_0x2d4b66['reason']+')');}[a4_0x2a66f1(0x20f)](_0xbddeca){const _0x15d721=a4_0x2a66f1;if(this[_0x15d721(0x1ea)][_0x15d721(0x1c9)][_0xbddeca['name']]){const _0x1951a7=this[_0x15d721(0x1ea)][_0x15d721(0x1c9)][_0xbddeca[_0x15d721(0x1db)]];return this[_0x15d721(0x1f1)](_0x1951a7,_0x15d721(0x1c6));}for(const [_0xf6213c,_0x2362ed]of Object[_0x15d721(0x1ce)](this[_0x15d721(0x1ea)][_0x15d721(0x1c9)])){if(_0xbddeca[_0x15d721(0x1db)][_0x15d721(0x1fd)](_0xf6213c[_0x15d721(0x1e3)]('/','')))return this['parseStrategyConfig'](_0x2362ed,_0x15d721(0x1c3));}if(this[_0x15d721(0x1d8)](_0xbddeca[_0x15d721(0x1db)],_0xbddeca['type'])){const _0x268c48=this['estimateTopicSize'](_0xbddeca[_0x15d721(0x1db)],_0xbddeca[_0x15d721(0x1cf)]);return{'type':'webrtc','reason':_0x15d721(0x1bc),'isLargeData':!![],'estimatedSize':_0x268c48,'maxFrequency':null};}const _0x1e72ed=this[_0x15d721(0x1f8)](_0xbddeca['name'],_0xbddeca[_0x15d721(0x1cf)]),_0x57ce90=this[_0x15d721(0x1be)](_0xbddeca['name'],_0xbddeca[_0x15d721(0x1cf)]);if(_0x1e72ed||_0x57ce90>this[_0x15d721(0x1ea)]['largeDataThreshold']){let _0xaaca8=this['config'][_0x15d721(0x1ed)][_0xbddeca['type']]||0xa,_0x2e3fdc=_0x15d721(0x1b5);if(_0xbddeca[_0x15d721(0x1cf)]['includes'](_0x15d721(0x1b4))||_0xbddeca[_0x15d721(0x1db)][_0x15d721(0x1fd)](_0x15d721(0x1d0)))_0xaaca8=this[_0x15d721(0x1ea)]['throttleFrequencies'][_0xbddeca[_0x15d721(0x1cf)]]||0x5,_0x2e3fdc='point_cloud_throttled';else{if(_0xbddeca['type'][_0x15d721(0x1fd)](_0x15d721(0x1c4))||_0xbddeca['name'][_0x15d721(0x1fd)](_0x15d721(0x1f6)))_0xaaca8=this[_0x15d721(0x1ea)]['throttleFrequencies'][_0xbddeca['type']]||0xf,_0x2e3fdc='laser_scan_throttled';else _0xbddeca[_0x15d721(0x1cf)][_0x15d721(0x1fd)](_0x15d721(0x1f9))&&(_0xaaca8=this[_0x15d721(0x1ea)][_0x15d721(0x1ed)][_0xbddeca['type']]||0xa,_0x2e3fdc=_0x15d721(0x1e0));}return{'type':_0x15d721(0x1c1),'reason':_0x2e3fdc,'isLargeData':!![],'estimatedSize':_0x57ce90,'maxFrequency':_0xaaca8};}return{'type':'websocket','reason':'normal_size','isLargeData':![],'estimatedSize':_0x57ce90,'maxFrequency':null};}[a4_0x2a66f1(0x1f1)](_0x22369b,_0x3b99ef){const _0x469227=a4_0x2a66f1;if(_0x22369b[_0x469227(0x1fd)](':')){const [_0x4c7a74,_0xcf340e]=_0x22369b['split'](':');return{'type':_0x4c7a74,'reason':_0x3b99ef,'isLargeData':!![],'maxFrequency':_0x4c7a74===_0x469227(0x1c1)?parseFloat(_0xcf340e):null,'estimatedSize':this['config'][_0x469227(0x1ee)]+0x1};}return{'type':_0x22369b,'reason':_0x3b99ef,'isLargeData':_0x22369b!=='websocket','maxFrequency':null,'estimatedSize':this[_0x469227(0x1ea)][_0x469227(0x1ee)]+0x1};}[a4_0x2a66f1(0x1f8)](_0x37bd77,_0x21dfcc){const _0x10150f=a4_0x2a66f1,_0x220bb4=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x2983e9=[_0x10150f(0x20c),'sensor_msgs/msg/Image',_0x10150f(0x1d3),_0x10150f(0x206)];return _0x220bb4[_0x10150f(0x1c5)](_0x2d03b5=>_0x2d03b5[_0x10150f(0x1b3)](_0x37bd77))||_0x2983e9[_0x10150f(0x1fd)](_0x21dfcc);}[a4_0x2a66f1(0x1d8)](_0x10854d,_0x2bf3e5=''){const _0x3e9b22=a4_0x2a66f1,_0x38ebdf=[_0x3e9b22(0x1e6),_0x3e9b22(0x206)];if(_0x38ebdf[_0x3e9b22(0x1fd)](_0x2bf3e5))return!_0x10854d[_0x3e9b22(0x1fd)](_0x3e9b22(0x1d0))&&!_0x10854d[_0x3e9b22(0x1fd)](_0x3e9b22(0x1b2))&&!_0x10854d['includes'](_0x3e9b22(0x1f3));return(_0x10854d[_0x3e9b22(0x1fd)](_0x3e9b22(0x201))||_0x10854d[_0x3e9b22(0x1fd)](_0x3e9b22(0x210)))&&!_0x10854d[_0x3e9b22(0x1fd)](_0x3e9b22(0x1d0))&&!_0x10854d['includes'](_0x3e9b22(0x1b2))&&!_0x10854d[_0x3e9b22(0x1fd)]('depth_points');}[a4_0x2a66f1(0x1be)](_0x1cfd37,_0x27e8ca){const _0x4d578c=a4_0x2a66f1,_0x4920eb={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x4920eb[_0x27e8ca])return _0x4920eb[_0x27e8ca];if(_0x1cfd37[_0x4d578c(0x1fd)](_0x4d578c(0x1ff))||_0x1cfd37[_0x4d578c(0x1fd)](_0x4d578c(0x1e7)))return 0x190*0x400;if(_0x1cfd37[_0x4d578c(0x1fd)](_0x4d578c(0x1f5)))return 0x12c*0x400;if(_0x1cfd37[_0x4d578c(0x1fd)](_0x4d578c(0x210)))return 0x32*0x400;return 0x400;}[a4_0x2a66f1(0x20a)](_0x4e4eba){const _0x29d909=a4_0x2a66f1;let _0x2ad58e=this['topicStrategies']['get'](_0x4e4eba[_0x29d909(0x1b6)]);if(!_0x2ad58e){console[_0x29d909(0x1e8)](_0x29d909(0x1cd)+_0x4e4eba[_0x29d909(0x1b6)]);let _0xd341ec=_0x29d909(0x205);if(_0x4e4eba['topic'][_0x29d909(0x1fd)]('image')&&_0x4e4eba[_0x29d909(0x1b6)][_0x29d909(0x1fd)](_0x29d909(0x210)))_0xd341ec='sensor_msgs/msg/CompressedImage';else{if(_0x4e4eba['topic'][_0x29d909(0x1fd)](_0x29d909(0x201)))_0xd341ec=_0x29d909(0x1e6);else{if(_0x4e4eba[_0x29d909(0x1b6)]['includes'](_0x29d909(0x1ff))||_0x4e4eba['topic'][_0x29d909(0x1fd)](_0x29d909(0x1e7)))_0xd341ec='sensor_msgs/msg/PointCloud2';else _0x4e4eba[_0x29d909(0x1b6)]['includes'](_0x29d909(0x1f6))&&(_0xd341ec='sensor_msgs/msg/LaserScan');}}const _0x52fdf2={'name':_0x4e4eba[_0x29d909(0x1b6)],'type':_0xd341ec};this[_0x29d909(0x1bb)](_0x52fdf2),_0x2ad58e=this['topicStrategies'][_0x29d909(0x1ca)](_0x4e4eba[_0x29d909(0x1b6)]);}if(!_0x2ad58e)return{'action':_0x29d909(0x1cc),'message':_0x4e4eba};switch(_0x2ad58e[_0x29d909(0x1d4)]){case _0x29d909(0x1c1):return this[_0x29d909(0x1fa)](_0x4e4eba['topic'],_0x2ad58e[_0x29d909(0x1fc)])?{'action':_0x29d909(0x1cc),'message':_0x4e4eba}:{'action':_0x29d909(0x1e1)};case'webrtc':return{'action':'webrtc_skip'};case _0x29d909(0x208):default:return{'action':'forward','message':_0x4e4eba};}}['shouldThrottle'](_0x1b0146,_0x298307){const _0x4d077a=a4_0x2a66f1;if(!_0x298307)return!![];const _0x246949=Date[_0x4d077a(0x1f4)](),_0x114cfb=0x3e8/_0x298307;!this[_0x4d077a(0x1ef)]['has'](_0x1b0146)&&this[_0x4d077a(0x1ef)][_0x4d077a(0x1fb)](_0x1b0146,0x0);const _0x4dbbdd=this[_0x4d077a(0x1ef)][_0x4d077a(0x1ca)](_0x1b0146),_0x280c16=_0x246949-_0x4dbbdd;if(_0x280c16>=_0x114cfb)return this[_0x4d077a(0x1ef)][_0x4d077a(0x1fb)](_0x1b0146,_0x246949),!![];return![];}['getTopicStrategy'](_0x4f949e){const _0x1c14eb=a4_0x2a66f1;return this[_0x1c14eb(0x1de)][_0x1c14eb(0x1ca)](_0x4f949e);}[a4_0x2a66f1(0x1c7)](){const _0x3f3eb8=a4_0x2a66f1;return Array[_0x3f3eb8(0x202)](this[_0x3f3eb8(0x1de)][_0x3f3eb8(0x1ce)]())['map'](([_0x3b9b79,_0x5c37e0])=>({'topic':_0x3b9b79,..._0x5c37e0}));}[a4_0x2a66f1(0x1b7)](_0x538a62){const _0x3ba444=a4_0x2a66f1,_0x2d06d4=this[_0x3ba444(0x1de)]['get'](_0x538a62);return _0x2d06d4?.[_0x3ba444(0x1d4)]==='webrtc_only';}[a4_0x2a66f1(0x20e)](){const _0x240473=a4_0x2a66f1,_0x91d7ec={};return this[_0x240473(0x1de)][_0x240473(0x1eb)]((_0x5a3e80,_0x41796c)=>{const _0x38bff1=_0x240473;!_0x91d7ec[_0x5a3e80['strategy']]&&(_0x91d7ec[_0x5a3e80[_0x38bff1(0x1d4)]]=0x0),_0x91d7ec[_0x5a3e80['strategy']]++;}),{'totalTopics':this[_0x240473(0x1de)][_0x240473(0x1f2)],'strategies':_0x91d7ec,'largeDataTopics':Array[_0x240473(0x202)](this[_0x240473(0x1de)][_0x240473(0x1ce)]())[_0x240473(0x1e2)](([_0x38880e,_0xea0e67])=>_0xea0e67['isLargeData'])[_0x240473(0x200)](([_0x3bc0f8,_0x5a7b5f])=>_0x3bc0f8)};}}module[a4_0x2a66f1(0x1e5)]=new TopicManager();