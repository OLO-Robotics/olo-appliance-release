const a4_0x278a48=a4_0x5e29;function a4_0x2f88(){const _0x41168a=['laser_scan_throttled','throttle_skip','sensor_msgs/msg/Image','point_cloud','types','1895ahwwep','depth_points','entries','[TopicManager]\x20Topic\x20discovery\x20completed','replace','unknown','large_data_throttled','defaultLargeDataStrategy','constructor','set','map','child_process','points','isLargeData','get','toString','estimateTopicSize','Image','[TopicManager]\x20Starting\x20topic\x20discovery...','11964WdEUqz','handleMessage','getStatistics','largeDataThreshold','cloud','video_webrtc_streaming','sensor_msgs/msg/CompressedImage','4343658tPABdP','name','has','estimatedSize','2aVeJni','lastMessageTimes','parseStrategyConfig','strategy','topicStrategies','4328910SfKfdc','\x20topics','exports','image_raw','7161560KSaUGm','isCameraTopic','determineTopicStrategy','[TopicManager]\x20Topic\x20','image_throttled','webrtc_skip','webrtc_only','1181111jJAdwx','topic','point_cloud_throttled','throttleFrequencies','6VoJsyG','pattern_configured','isLargeDataTopic','from','10917LZpRyb','split','sensor_msgs/msg/PointCloud2','reason','[TopicManager]\x20Found\x20','error','normal_size','[TopicManager]\x20Initialised','[TopicManager]\x20Topic\x20discovery\x20failed:','includes','topicHandling','strategiesConfig','point','shouldUseWebRTC','config','shouldThrottle','throttle','some','websocket','image','test','now','6232ihYzJR','maxFrequency','analyzeTopicStrategy','getManagedTopics','apply','4316514eVWtcM','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','scan','discoverTopics','log','type','compressed','discoveryInProgress','forward','LaserScan','sensor_msgs/msg/LaserScan'];a4_0x2f88=function(){return _0x41168a;};return a4_0x2f88();}(function(_0x476e92,_0x12572b){const _0x3865ac=a4_0x5e29,_0x4da657=_0x476e92();while(!![]){try{const _0x56351f=parseInt(_0x3865ac(0xb2))/0x1+parseInt(_0x3865ac(0xa2))/0x2*(-parseInt(_0x3865ac(0x74))/0x3)+-parseInt(_0x3865ac(0x97))/0x4*(-parseInt(_0x3865ac(0x84))/0x5)+parseInt(_0x3865ac(0xb6))/0x6*(-parseInt(_0x3865ac(0xab))/0x7)+parseInt(_0x3865ac(0x6f))/0x8*(parseInt(_0x3865ac(0xba))/0x9)+parseInt(_0x3865ac(0xa7))/0xa+-parseInt(_0x3865ac(0x9e))/0xb;if(_0x56351f===_0x12572b)break;else _0x4da657['push'](_0x4da657['shift']());}catch(_0x36cb70){_0x4da657['push'](_0x4da657['shift']());}}}(a4_0x2f88,0xcc08a));const a4_0x1dd397=(function(){let _0x293f8e=!![];return function(_0x11cd62,_0x12920a){const _0xb87ec1=_0x293f8e?function(){const _0x57dea5=a4_0x5e29;if(_0x12920a){const _0xca981e=_0x12920a[_0x57dea5(0x73)](_0x11cd62,arguments);return _0x12920a=null,_0xca981e;}}:function(){};return _0x293f8e=![],_0xb87ec1;};}()),a4_0x983cc5=a4_0x1dd397(this,function(){const _0x554199=a4_0x5e29;return a4_0x983cc5[_0x554199(0x93)]()['search']('(((.+)+)+)+$')[_0x554199(0x93)]()[_0x554199(0x8c)](a4_0x983cc5)['search']('(((.+)+)+)+$');});a4_0x983cc5();const {execSync}=require(a4_0x278a48(0x8f));function a4_0x5e29(_0x576c1e,_0xb57a9b){const _0x14b94e=a4_0x2f88();return a4_0x5e29=function(_0x983cc5,_0x1dd397){_0x983cc5=_0x983cc5-0x6e;let _0x2f881b=_0x14b94e[_0x983cc5];return _0x2f881b;},a4_0x5e29(_0x576c1e,_0xb57a9b);}class TopicManager{constructor(){const _0x434474=a4_0x278a48;this['topicStrategies']=new Map(),this[_0x434474(0xa3)]=new Map(),this[_0x434474(0x7b)]=![],this[_0x434474(0xc8)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x434474(0xb1),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x434474(0x78)](_0x434474(0xc1));}['loadConfig'](_0x303b3c){const _0x26c61e=a4_0x278a48;if(_0x303b3c[_0x26c61e(0xc4)]){const _0x291713=_0x303b3c[_0x26c61e(0xc4)];_0x291713[_0x26c61e(0x9a)]&&(this[_0x26c61e(0xc8)][_0x26c61e(0x9a)]=_0x291713['largeDataThreshold']),_0x291713[_0x26c61e(0x8b)]&&(this[_0x26c61e(0xc8)][_0x26c61e(0x8b)]=_0x291713[_0x26c61e(0x8b)]),_0x291713['strategies']&&(this['config'][_0x26c61e(0xc5)]={..._0x291713['strategies']}),_0x291713['throttleFrequencies']&&(this[_0x26c61e(0xc8)][_0x26c61e(0xb5)]={...this['config'][_0x26c61e(0xb5)],..._0x291713['throttleFrequencies']}),console[_0x26c61e(0x78)]('[TopicManager]\x20Loaded\x20configuration:',this['config']);}}async[a4_0x278a48(0x77)](_0x159edf){const _0x1644b9=a4_0x278a48;if(this[_0x1644b9(0x7b)]||!_0x159edf)return;this[_0x1644b9(0x7b)]=!![],console[_0x1644b9(0x78)](_0x1644b9(0x96));try{await new Promise((_0x2904db,_0x5478af)=>{_0x159edf['getTopics'](_0x2b0fa2=>{const _0x547606=a4_0x5e29,_0x4c6641=_0x2b0fa2['topics']['map']((_0x4b7719,_0x1602b6)=>({'name':_0x4b7719,'type':_0x2b0fa2[_0x547606(0x83)][_0x1602b6]}));console[_0x547606(0x78)](_0x547606(0xbe)+_0x4c6641['length']+_0x547606(0xa8));for(const _0x2c84bb of _0x4c6641){this[_0x547606(0x71)](_0x2c84bb);}console[_0x547606(0x78)](_0x547606(0x87)),console['log']('[TopicManager]\x20Strategies:',Array['from'](this['topicStrategies'][_0x547606(0x86)]())),_0x2904db();},_0x26ebc4=>{const _0x14d5c6=a4_0x5e29;console[_0x14d5c6(0xbf)]('[TopicManager]\x20Error\x20getting\x20topics:',_0x26ebc4),_0x5478af(_0x26ebc4);});});}catch(_0x19bd28){console['error'](_0x1644b9(0xc2),_0x19bd28);}finally{this[_0x1644b9(0x7b)]=![];}}[a4_0x278a48(0x71)](_0x370eac){const _0x3a15c6=a4_0x278a48,_0x5dc347=this[_0x3a15c6(0xad)](_0x370eac);this[_0x3a15c6(0xa6)][_0x3a15c6(0x8d)](_0x370eac[_0x3a15c6(0x9f)],{'type':_0x370eac['type'],'strategy':_0x5dc347[_0x3a15c6(0x79)],'reason':_0x5dc347[_0x3a15c6(0xbd)],'maxFrequency':_0x5dc347[_0x3a15c6(0x70)],'isLargeData':_0x5dc347[_0x3a15c6(0x91)],'estimatedSize':_0x5dc347[_0x3a15c6(0xa1)]}),console[_0x3a15c6(0x78)](_0x3a15c6(0xae)+_0x370eac[_0x3a15c6(0x9f)]+':\x20'+_0x5dc347['type']+'\x20('+_0x5dc347[_0x3a15c6(0xbd)]+')');}['determineTopicStrategy'](_0x3973c1){const _0x44686f=a4_0x278a48;if(this[_0x44686f(0xc8)]['strategiesConfig'][_0x3973c1[_0x44686f(0x9f)]]){const _0x4b1b8d=this[_0x44686f(0xc8)][_0x44686f(0xc5)][_0x3973c1['name']];return this[_0x44686f(0xa4)](_0x4b1b8d,'user_configured');}for(const [_0xdd437a,_0x285be1]of Object[_0x44686f(0x86)](this[_0x44686f(0xc8)][_0x44686f(0xc5)])){if(_0x3973c1['name'][_0x44686f(0xc3)](_0xdd437a[_0x44686f(0x88)]('/','')))return this[_0x44686f(0xa4)](_0x285be1,_0x44686f(0xb7));}if(this[_0x44686f(0xac)](_0x3973c1[_0x44686f(0x9f)],_0x3973c1[_0x44686f(0x79)])){const _0x4abb32=this['estimateTopicSize'](_0x3973c1['name'],_0x3973c1[_0x44686f(0x79)]);return{'type':'webrtc','reason':_0x44686f(0x9c),'isLargeData':!![],'estimatedSize':_0x4abb32,'maxFrequency':null};}const _0x29aece=this[_0x44686f(0xb8)](_0x3973c1[_0x44686f(0x9f)],_0x3973c1[_0x44686f(0x79)]),_0x58101b=this['estimateTopicSize'](_0x3973c1['name'],_0x3973c1[_0x44686f(0x79)]);if(_0x29aece||_0x58101b>this[_0x44686f(0xc8)][_0x44686f(0x9a)]){let _0x3d2784=this[_0x44686f(0xc8)][_0x44686f(0xb5)][_0x3973c1['type']]||0xa,_0x2cb627=_0x44686f(0x8a);if(_0x3973c1[_0x44686f(0x79)]['includes']('PointCloud2')||_0x3973c1[_0x44686f(0x9f)][_0x44686f(0xc3)](_0x44686f(0x90)))_0x3d2784=this['config'][_0x44686f(0xb5)][_0x3973c1[_0x44686f(0x79)]]||0x5,_0x2cb627=_0x44686f(0xb4);else{if(_0x3973c1['type'][_0x44686f(0xc3)](_0x44686f(0x7d))||_0x3973c1[_0x44686f(0x9f)][_0x44686f(0xc3)](_0x44686f(0x76)))_0x3d2784=this[_0x44686f(0xc8)][_0x44686f(0xb5)][_0x3973c1[_0x44686f(0x79)]]||0xf,_0x2cb627=_0x44686f(0x7f);else _0x3973c1[_0x44686f(0x79)][_0x44686f(0xc3)](_0x44686f(0x95))&&(_0x3d2784=this[_0x44686f(0xc8)]['throttleFrequencies'][_0x3973c1[_0x44686f(0x79)]]||0xa,_0x2cb627=_0x44686f(0xaf));}return{'type':_0x44686f(0xca),'reason':_0x2cb627,'isLargeData':!![],'estimatedSize':_0x58101b,'maxFrequency':_0x3d2784};}return{'type':_0x44686f(0xcc),'reason':_0x44686f(0xc0),'isLargeData':![],'estimatedSize':_0x58101b,'maxFrequency':null};}[a4_0x278a48(0xa4)](_0xbd81f0,_0x3d3279){const _0x30b4d9=a4_0x278a48;if(_0xbd81f0[_0x30b4d9(0xc3)](':')){const [_0x16a792,_0x5b0011]=_0xbd81f0[_0x30b4d9(0xbb)](':');return{'type':_0x16a792,'reason':_0x3d3279,'isLargeData':!![],'maxFrequency':_0x16a792===_0x30b4d9(0xca)?parseFloat(_0x5b0011):null,'estimatedSize':this['config'][_0x30b4d9(0x9a)]+0x1};}return{'type':_0xbd81f0,'reason':_0x3d3279,'isLargeData':_0xbd81f0!==_0x30b4d9(0xcc),'maxFrequency':null,'estimatedSize':this[_0x30b4d9(0xc8)][_0x30b4d9(0x9a)]+0x1};}[a4_0x278a48(0xb8)](_0x412a0b,_0x5a6b9a){const _0x41d5c2=a4_0x278a48,_0xe79187=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x5f4525=[_0x41d5c2(0xbc),_0x41d5c2(0x81),'sensor_msgs/msg/LaserScan',_0x41d5c2(0x9d)];return _0xe79187[_0x41d5c2(0xcb)](_0xbf5899=>_0xbf5899[_0x41d5c2(0xce)](_0x412a0b))||_0x5f4525[_0x41d5c2(0xc3)](_0x5a6b9a);}['isCameraTopic'](_0x136c3d,_0x4279a1=''){const _0x2be889=a4_0x278a48,_0x12ec5e=[_0x2be889(0x81),_0x2be889(0x9d)];if(_0x12ec5e['includes'](_0x4279a1))return!_0x136c3d[_0x2be889(0xc3)]('points')&&!_0x136c3d[_0x2be889(0xc3)](_0x2be889(0x82))&&!_0x136c3d[_0x2be889(0xc3)](_0x2be889(0x85));return(_0x136c3d['includes'](_0x2be889(0xcd))||_0x136c3d[_0x2be889(0xc3)](_0x2be889(0x7a)))&&!_0x136c3d[_0x2be889(0xc3)]('points')&&!_0x136c3d[_0x2be889(0xc3)]('point_cloud')&&!_0x136c3d['includes'](_0x2be889(0x85));}[a4_0x278a48(0x94)](_0x2919c3,_0x485509){const _0x39c472=a4_0x278a48,_0x3982d1={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x3982d1[_0x485509])return _0x3982d1[_0x485509];if(_0x2919c3[_0x39c472(0xc3)](_0x39c472(0xc6))||_0x2919c3[_0x39c472(0xc3)]('cloud'))return 0x190*0x400;if(_0x2919c3[_0x39c472(0xc3)](_0x39c472(0xaa)))return 0x12c*0x400;if(_0x2919c3[_0x39c472(0xc3)](_0x39c472(0x7a)))return 0x32*0x400;return 0x400;}[a4_0x278a48(0x98)](_0x5d1509){const _0x581730=a4_0x278a48;let _0x545c38=this['topicStrategies']['get'](_0x5d1509[_0x581730(0xb3)]);if(!_0x545c38){console[_0x581730(0x78)](_0x581730(0x75)+_0x5d1509['topic']);let _0x1dcb6a=_0x581730(0x89);if(_0x5d1509[_0x581730(0xb3)][_0x581730(0xc3)](_0x581730(0xcd))&&_0x5d1509[_0x581730(0xb3)][_0x581730(0xc3)]('compressed'))_0x1dcb6a='sensor_msgs/msg/CompressedImage';else{if(_0x5d1509[_0x581730(0xb3)][_0x581730(0xc3)](_0x581730(0xcd)))_0x1dcb6a=_0x581730(0x81);else{if(_0x5d1509[_0x581730(0xb3)][_0x581730(0xc3)](_0x581730(0xc6))||_0x5d1509[_0x581730(0xb3)][_0x581730(0xc3)](_0x581730(0x9b)))_0x1dcb6a='sensor_msgs/msg/PointCloud2';else _0x5d1509[_0x581730(0xb3)][_0x581730(0xc3)](_0x581730(0x76))&&(_0x1dcb6a=_0x581730(0x7e));}}const _0x3702f7={'name':_0x5d1509[_0x581730(0xb3)],'type':_0x1dcb6a};this[_0x581730(0x71)](_0x3702f7),_0x545c38=this[_0x581730(0xa6)][_0x581730(0x92)](_0x5d1509[_0x581730(0xb3)]);}if(!_0x545c38)return{'action':_0x581730(0x7c),'message':_0x5d1509};switch(_0x545c38['strategy']){case _0x581730(0xca):return this[_0x581730(0xc9)](_0x5d1509['topic'],_0x545c38[_0x581730(0x70)])?{'action':'forward','message':_0x5d1509}:{'action':_0x581730(0x80)};case'webrtc':return{'action':_0x581730(0xb0)};case _0x581730(0xcc):default:return{'action':'forward','message':_0x5d1509};}}[a4_0x278a48(0xc9)](_0x307427,_0x27639e){const _0x171ee6=a4_0x278a48;if(!_0x27639e)return!![];const _0x5ce7ca=Date[_0x171ee6(0x6e)](),_0x2418e0=0x3e8/_0x27639e;!this[_0x171ee6(0xa3)][_0x171ee6(0xa0)](_0x307427)&&this[_0x171ee6(0xa3)][_0x171ee6(0x8d)](_0x307427,0x0);const _0x5b0259=this[_0x171ee6(0xa3)][_0x171ee6(0x92)](_0x307427),_0x3da56f=_0x5ce7ca-_0x5b0259;if(_0x3da56f>=_0x2418e0)return this['lastMessageTimes'][_0x171ee6(0x8d)](_0x307427,_0x5ce7ca),!![];return![];}['getTopicStrategy'](_0x2ac3ea){const _0x4fd489=a4_0x278a48;return this['topicStrategies'][_0x4fd489(0x92)](_0x2ac3ea);}[a4_0x278a48(0x72)](){const _0x33dfc6=a4_0x278a48;return Array[_0x33dfc6(0xb9)](this[_0x33dfc6(0xa6)]['entries']())[_0x33dfc6(0x8e)](([_0x2b9f54,_0x67b5a6])=>({'topic':_0x2b9f54,..._0x67b5a6}));}[a4_0x278a48(0xc7)](_0x5e40d5){const _0x27d551=a4_0x278a48,_0x294746=this[_0x27d551(0xa6)]['get'](_0x5e40d5);return _0x294746?.[_0x27d551(0xa5)]===_0x27d551(0xb1);}[a4_0x278a48(0x99)](){const _0x552201=a4_0x278a48,_0x5ef134={};return this['topicStrategies']['forEach']((_0x43fc6b,_0x2ba50f)=>{const _0x246219=a4_0x5e29;!_0x5ef134[_0x43fc6b[_0x246219(0xa5)]]&&(_0x5ef134[_0x43fc6b[_0x246219(0xa5)]]=0x0),_0x5ef134[_0x43fc6b[_0x246219(0xa5)]]++;}),{'totalTopics':this['topicStrategies']['size'],'strategies':_0x5ef134,'largeDataTopics':Array[_0x552201(0xb9)](this[_0x552201(0xa6)][_0x552201(0x86)]())['filter'](([_0x42e3d6,_0x35ea0b])=>_0x35ea0b[_0x552201(0x91)])[_0x552201(0x8e)](([_0x45dd15,_0x4228c2])=>_0x45dd15)};}}module[a4_0x278a48(0xa9)]=new TopicManager();