const a4_0x1e338e=a4_0x4bc5;(function(_0x41026d,_0x22fe5d){const _0x5070a6=a4_0x4bc5,_0x237753=_0x41026d();while(!![]){try{const _0x43f0fd=-parseInt(_0x5070a6(0xb8))/0x1+parseInt(_0x5070a6(0x6b))/0x2+-parseInt(_0x5070a6(0xc4))/0x3+-parseInt(_0x5070a6(0x6c))/0x4+parseInt(_0x5070a6(0x76))/0x5+parseInt(_0x5070a6(0x78))/0x6*(-parseInt(_0x5070a6(0xa2))/0x7)+parseInt(_0x5070a6(0x7f))/0x8;if(_0x43f0fd===_0x22fe5d)break;else _0x237753['push'](_0x237753['shift']());}catch(_0x5f2002){_0x237753['push'](_0x237753['shift']());}}}(a4_0xfabe,0xabff1));const a4_0x72eebe=(function(){let _0x33b275=!![];return function(_0x4a785c,_0x2e9164){const _0x4738da=_0x33b275?function(){const _0x393665=a4_0x4bc5;if(_0x2e9164){const _0x198493=_0x2e9164[_0x393665(0x88)](_0x4a785c,arguments);return _0x2e9164=null,_0x198493;}}:function(){};return _0x33b275=![],_0x4738da;};}()),a4_0x514dda=a4_0x72eebe(this,function(){const _0x49bf89=a4_0x4bc5;return a4_0x514dda['toString']()[_0x49bf89(0xba)]('(((.+)+)+)+$')[_0x49bf89(0xaa)]()['constructor'](a4_0x514dda)['search'](_0x49bf89(0xad));});a4_0x514dda();const {execSync}=require(a4_0x1e338e(0x7a));function a4_0x4bc5(_0x5bd3d3,_0x82e865){const _0x4f73f1=a4_0xfabe();return a4_0x4bc5=function(_0x514dda,_0x72eebe){_0x514dda=_0x514dda-0x6b;let _0xfabe19=_0x4f73f1[_0x514dda];return _0xfabe19;},a4_0x4bc5(_0x5bd3d3,_0x82e865);}class TopicManager{constructor(){const _0x246e00=a4_0x1e338e;this['topicStrategies']=new Map(),this['lastMessageTimes']=new Map(),this[_0x246e00(0xb0)]=![],this['config']={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x246e00(0x99),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console['log'](_0x246e00(0xb3));}[a4_0x1e338e(0x90)](_0x219ef7){const _0x5cbd34=a4_0x1e338e;if(_0x219ef7['topicHandling']){const _0x231c86=_0x219ef7['topicHandling'];_0x231c86[_0x5cbd34(0x7b)]&&(this[_0x5cbd34(0x8b)][_0x5cbd34(0x7b)]=_0x231c86[_0x5cbd34(0x7b)]),_0x231c86[_0x5cbd34(0xb2)]&&(this[_0x5cbd34(0x8b)][_0x5cbd34(0xb2)]=_0x231c86['defaultLargeDataStrategy']),_0x231c86[_0x5cbd34(0xbf)]&&(this['config']['strategiesConfig']={..._0x231c86[_0x5cbd34(0xbf)]}),_0x231c86[_0x5cbd34(0x91)]&&(this[_0x5cbd34(0x8b)][_0x5cbd34(0x91)]={...this[_0x5cbd34(0x8b)][_0x5cbd34(0x91)],..._0x231c86['throttleFrequencies']}),console['log']('[TopicManager]\x20Loaded\x20configuration:',this[_0x5cbd34(0x8b)]);}}async[a4_0x1e338e(0xb7)](_0x20d5a0){const _0x1fef35=a4_0x1e338e;if(this[_0x1fef35(0xb0)]||!_0x20d5a0)return;this[_0x1fef35(0xb0)]=!![],console[_0x1fef35(0x83)]('[TopicManager]\x20Starting\x20topic\x20discovery...');try{await new Promise((_0x341b82,_0xc9fb91)=>{const _0x254930=_0x1fef35;_0x20d5a0[_0x254930(0xb6)](_0x19d72c=>{const _0x2282e6=_0x254930,_0x3c0a5f=_0x19d72c[_0x2282e6(0x94)][_0x2282e6(0x8f)]((_0x35fae0,_0x47fd7d)=>({'name':_0x35fae0,'type':_0x19d72c[_0x2282e6(0x77)][_0x47fd7d]}));console[_0x2282e6(0x83)](_0x2282e6(0x86)+_0x3c0a5f[_0x2282e6(0x87)]+_0x2282e6(0x8e));for(const _0x52fee8 of _0x3c0a5f){this[_0x2282e6(0x7c)](_0x52fee8);}console[_0x2282e6(0x83)]('[TopicManager]\x20Topic\x20discovery\x20completed'),console['log']('[TopicManager]\x20Strategies:',Array[_0x2282e6(0xa3)](this['topicStrategies'][_0x2282e6(0x81)]())),_0x341b82();},_0x4efacf=>{const _0x4ecd8f=_0x254930;console[_0x4ecd8f(0xa9)](_0x4ecd8f(0xc0),_0x4efacf),_0xc9fb91(_0x4efacf);});});}catch(_0x60cd1e){console[_0x1fef35(0xa9)](_0x1fef35(0xa7),_0x60cd1e);}finally{this[_0x1fef35(0xb0)]=![];}}['analyzeTopicStrategy'](_0x3d36f3){const _0x3b89f7=a4_0x1e338e,_0x20b8da=this[_0x3b89f7(0x96)](_0x3d36f3);this['topicStrategies'][_0x3b89f7(0xb5)](_0x3d36f3[_0x3b89f7(0x8a)],{'type':_0x3d36f3['type'],'strategy':_0x20b8da[_0x3b89f7(0x72)],'reason':_0x20b8da[_0x3b89f7(0x6d)],'maxFrequency':_0x20b8da[_0x3b89f7(0x98)],'isLargeData':_0x20b8da[_0x3b89f7(0x75)],'estimatedSize':_0x20b8da[_0x3b89f7(0x9a)]}),console[_0x3b89f7(0x83)]('[TopicManager]\x20Topic\x20'+_0x3d36f3[_0x3b89f7(0x8a)]+':\x20'+_0x20b8da[_0x3b89f7(0x72)]+'\x20('+_0x20b8da[_0x3b89f7(0x6d)]+')');}[a4_0x1e338e(0x96)](_0x15e9f3){const _0x1a73b8=a4_0x1e338e;if(this[_0x1a73b8(0x8b)][_0x1a73b8(0x9f)][_0x15e9f3[_0x1a73b8(0x8a)]]){const _0x100ee7=this[_0x1a73b8(0x8b)][_0x1a73b8(0x9f)][_0x15e9f3[_0x1a73b8(0x8a)]];return this['parseStrategyConfig'](_0x100ee7,_0x1a73b8(0xbb));}for(const [_0x316226,_0x23681a]of Object[_0x1a73b8(0x81)](this['config']['strategiesConfig'])){if(_0x15e9f3[_0x1a73b8(0x8a)][_0x1a73b8(0xaf)](_0x316226['replace']('/','')))return this[_0x1a73b8(0xac)](_0x23681a,'pattern_configured');}if(this[_0x1a73b8(0x97)](_0x15e9f3[_0x1a73b8(0x8a)],_0x15e9f3[_0x1a73b8(0x72)])){const _0x178e9e=this['estimateTopicSize'](_0x15e9f3[_0x1a73b8(0x8a)],_0x15e9f3[_0x1a73b8(0x72)]);return{'type':_0x1a73b8(0x8c),'reason':_0x1a73b8(0xbe),'isLargeData':!![],'estimatedSize':_0x178e9e,'maxFrequency':null};}const _0x26701a=this['isLargeDataTopic'](_0x15e9f3[_0x1a73b8(0x8a)],_0x15e9f3[_0x1a73b8(0x72)]),_0x594d8a=this[_0x1a73b8(0xa0)](_0x15e9f3[_0x1a73b8(0x8a)],_0x15e9f3[_0x1a73b8(0x72)]);if(_0x26701a||_0x594d8a>this[_0x1a73b8(0x8b)]['largeDataThreshold']){let _0x4af14a=this[_0x1a73b8(0x8b)][_0x1a73b8(0x91)][_0x15e9f3[_0x1a73b8(0x72)]]||0xa,_0x563e6f=_0x1a73b8(0x92);if(_0x15e9f3[_0x1a73b8(0x72)]['includes'](_0x1a73b8(0x7e))||_0x15e9f3['name'][_0x1a73b8(0xaf)](_0x1a73b8(0xae)))_0x4af14a=this[_0x1a73b8(0x8b)][_0x1a73b8(0x91)][_0x15e9f3[_0x1a73b8(0x72)]]||0x5,_0x563e6f='point_cloud_throttled';else{if(_0x15e9f3[_0x1a73b8(0x72)]['includes'](_0x1a73b8(0xa1))||_0x15e9f3[_0x1a73b8(0x8a)][_0x1a73b8(0xaf)](_0x1a73b8(0x80)))_0x4af14a=this[_0x1a73b8(0x8b)][_0x1a73b8(0x91)][_0x15e9f3[_0x1a73b8(0x72)]]||0xf,_0x563e6f='laser_scan_throttled';else _0x15e9f3[_0x1a73b8(0x72)][_0x1a73b8(0xaf)](_0x1a73b8(0xa5))&&(_0x4af14a=this['config'][_0x1a73b8(0x91)][_0x15e9f3[_0x1a73b8(0x72)]]||0xa,_0x563e6f=_0x1a73b8(0xa8));}return{'type':_0x1a73b8(0x82),'reason':_0x563e6f,'isLargeData':!![],'estimatedSize':_0x594d8a,'maxFrequency':_0x4af14a};}return{'type':'websocket','reason':_0x1a73b8(0x79),'isLargeData':![],'estimatedSize':_0x594d8a,'maxFrequency':null};}[a4_0x1e338e(0xac)](_0x58ee12,_0x1a031f){const _0x4c8f07=a4_0x1e338e;if(_0x58ee12[_0x4c8f07(0xaf)](':')){const [_0x5af805,_0x48e2f5]=_0x58ee12[_0x4c8f07(0xa4)](':');return{'type':_0x5af805,'reason':_0x1a031f,'isLargeData':!![],'maxFrequency':_0x5af805===_0x4c8f07(0x82)?parseFloat(_0x48e2f5):null,'estimatedSize':this[_0x4c8f07(0x8b)][_0x4c8f07(0x7b)]+0x1};}return{'type':_0x58ee12,'reason':_0x1a031f,'isLargeData':_0x58ee12!=='websocket','maxFrequency':null,'estimatedSize':this['config']['largeDataThreshold']+0x1};}[a4_0x1e338e(0x9b)](_0x3028fc,_0x577de2){const _0x13ec96=a4_0x1e338e,_0x225e6b=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x5677bc=['sensor_msgs/msg/PointCloud2',_0x13ec96(0xb9),_0x13ec96(0x84),_0x13ec96(0x8d)];return _0x225e6b['some'](_0x294984=>_0x294984[_0x13ec96(0x70)](_0x3028fc))||_0x5677bc[_0x13ec96(0xaf)](_0x577de2);}[a4_0x1e338e(0x97)](_0x2baca2,_0x3ba87f=''){const _0x3d1155=a4_0x1e338e,_0x178f0c=[_0x3d1155(0xb9),_0x3d1155(0x8d)];if(_0x178f0c[_0x3d1155(0xaf)](_0x3ba87f))return!_0x2baca2[_0x3d1155(0xaf)](_0x3d1155(0xae))&&!_0x2baca2[_0x3d1155(0xaf)](_0x3d1155(0x9d))&&!_0x2baca2[_0x3d1155(0xaf)](_0x3d1155(0xb4));return(_0x2baca2[_0x3d1155(0xaf)](_0x3d1155(0x89))||_0x2baca2[_0x3d1155(0xaf)]('compressed'))&&!_0x2baca2[_0x3d1155(0xaf)](_0x3d1155(0xae))&&!_0x2baca2[_0x3d1155(0xaf)]('point_cloud')&&!_0x2baca2[_0x3d1155(0xaf)]('depth_points');}[a4_0x1e338e(0xa0)](_0x15c788,_0x36fbf3){const _0x5d71e1=a4_0x1e338e,_0x3aa021={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x3aa021[_0x36fbf3])return _0x3aa021[_0x36fbf3];if(_0x15c788[_0x5d71e1(0xaf)]('point')||_0x15c788[_0x5d71e1(0xaf)](_0x5d71e1(0x93)))return 0x190*0x400;if(_0x15c788[_0x5d71e1(0xaf)](_0x5d71e1(0xab)))return 0x12c*0x400;if(_0x15c788[_0x5d71e1(0xaf)](_0x5d71e1(0xa6)))return 0x32*0x400;return 0x400;}[a4_0x1e338e(0x9c)](_0x3cdb0b){const _0x598a80=a4_0x1e338e;let _0x5f5628=this[_0x598a80(0x6e)][_0x598a80(0xc8)](_0x3cdb0b[_0x598a80(0xbd)]);if(!_0x5f5628){console[_0x598a80(0x83)]('[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20'+_0x3cdb0b[_0x598a80(0xbd)]);let _0x1ed442='unknown';if(_0x3cdb0b[_0x598a80(0xbd)][_0x598a80(0xaf)](_0x598a80(0x89))&&_0x3cdb0b[_0x598a80(0xbd)][_0x598a80(0xaf)]('compressed'))_0x1ed442=_0x598a80(0x8d);else{if(_0x3cdb0b[_0x598a80(0xbd)][_0x598a80(0xaf)]('image'))_0x1ed442=_0x598a80(0xb9);else{if(_0x3cdb0b[_0x598a80(0xbd)]['includes'](_0x598a80(0x6f))||_0x3cdb0b[_0x598a80(0xbd)][_0x598a80(0xaf)](_0x598a80(0x93)))_0x1ed442=_0x598a80(0x95);else _0x3cdb0b['topic'][_0x598a80(0xaf)](_0x598a80(0x80))&&(_0x1ed442=_0x598a80(0x84));}}const _0x3deca6={'name':_0x3cdb0b['topic'],'type':_0x1ed442};this['analyzeTopicStrategy'](_0x3deca6),_0x5f5628=this['topicStrategies'][_0x598a80(0xc8)](_0x3cdb0b['topic']);}if(!_0x5f5628)return{'action':_0x598a80(0xc7),'message':_0x3cdb0b};switch(_0x5f5628[_0x598a80(0xc3)]){case _0x598a80(0x82):return this[_0x598a80(0xc1)](_0x3cdb0b[_0x598a80(0xbd)],_0x5f5628[_0x598a80(0x98)])?{'action':_0x598a80(0xc7),'message':_0x3cdb0b}:{'action':_0x598a80(0x7d)};case _0x598a80(0x8c):return{'action':_0x598a80(0xc5)};case _0x598a80(0x73):default:return{'action':_0x598a80(0xc7),'message':_0x3cdb0b};}}[a4_0x1e338e(0xc1)](_0x4aadf9,_0x41add7){const _0x19440d=a4_0x1e338e;if(!_0x41add7)return!![];const _0xc46e27=Date[_0x19440d(0xbc)](),_0x52b53e=0x3e8/_0x41add7;!this['lastMessageTimes'][_0x19440d(0x71)](_0x4aadf9)&&this['lastMessageTimes']['set'](_0x4aadf9,0x0);const _0xb022bd=this[_0x19440d(0xb1)][_0x19440d(0xc8)](_0x4aadf9),_0x5bc044=_0xc46e27-_0xb022bd;if(_0x5bc044>=_0x52b53e)return this[_0x19440d(0xb1)][_0x19440d(0xb5)](_0x4aadf9,_0xc46e27),!![];return![];}[a4_0x1e338e(0x85)](_0x1c27fa){const _0x532b58=a4_0x1e338e;return this[_0x532b58(0x6e)][_0x532b58(0xc8)](_0x1c27fa);}[a4_0x1e338e(0xc2)](){const _0x3628ea=a4_0x1e338e;return Array['from'](this['topicStrategies'][_0x3628ea(0x81)]())['map'](([_0x1ddb71,_0x25ac9d])=>({'topic':_0x1ddb71,..._0x25ac9d}));}['shouldUseWebRTC'](_0x2fe8dc){const _0x4fda1b=a4_0x1e338e,_0x4290c7=this[_0x4fda1b(0x6e)][_0x4fda1b(0xc8)](_0x2fe8dc);return _0x4290c7?.[_0x4fda1b(0xc3)]===_0x4fda1b(0x99);}[a4_0x1e338e(0x74)](){const _0x28bce0=a4_0x1e338e,_0x1179dc={};return this[_0x28bce0(0x6e)]['forEach']((_0x490cd7,_0x214ac9)=>{const _0x44b049=_0x28bce0;!_0x1179dc[_0x490cd7[_0x44b049(0xc3)]]&&(_0x1179dc[_0x490cd7['strategy']]=0x0),_0x1179dc[_0x490cd7['strategy']]++;}),{'totalTopics':this[_0x28bce0(0x6e)][_0x28bce0(0xc6)],'strategies':_0x1179dc,'largeDataTopics':Array[_0x28bce0(0xa3)](this[_0x28bce0(0x6e)][_0x28bce0(0x81)]())['filter'](([_0x4a6a8d,_0xe55a97])=>_0xe55a97[_0x28bce0(0x75)])['map'](([_0x247f30,_0x5365f9])=>_0x247f30)};}}function a4_0xfabe(){const _0x476e16=['split','Image','compressed','[TopicManager]\x20Topic\x20discovery\x20failed:','image_throttled','error','toString','image_raw','parseStrategyConfig','(((.+)+)+)+$','points','includes','discoveryInProgress','lastMessageTimes','defaultLargeDataStrategy','[TopicManager]\x20Initialised','depth_points','set','getTopics','discoverTopics','624230ihFXRp','sensor_msgs/msg/Image','search','user_configured','now','topic','video_webrtc_streaming','strategies','[TopicManager]\x20Error\x20getting\x20topics:','shouldThrottle','getManagedTopics','strategy','137988tIDtkI','webrtc_skip','size','forward','get','2758160fCltJH','5468528ETNyVg','reason','topicStrategies','point','test','has','type','websocket','getStatistics','isLargeData','2738490sqHMxc','types','6eVUBFX','normal_size','child_process','largeDataThreshold','analyzeTopicStrategy','throttle_skip','PointCloud2','8620320JSxQdO','scan','entries','throttle','log','sensor_msgs/msg/LaserScan','getTopicStrategy','[TopicManager]\x20Found\x20','length','apply','image','name','config','webrtc','sensor_msgs/msg/CompressedImage','\x20topics','map','loadConfig','throttleFrequencies','large_data_throttled','cloud','topics','sensor_msgs/msg/PointCloud2','determineTopicStrategy','isCameraTopic','maxFrequency','webrtc_only','estimatedSize','isLargeDataTopic','handleMessage','point_cloud','exports','strategiesConfig','estimateTopicSize','LaserScan','1837241tPUHWF','from'];a4_0xfabe=function(){return _0x476e16;};return a4_0xfabe();}module[a4_0x1e338e(0x9e)]=new TopicManager();