const a4_0x482fcc=a4_0xb729;(function(_0x42e006,_0x753900){const _0x46b6f5=a4_0xb729,_0x5f5b7d=_0x42e006();while(!![]){try{const _0x366fb1=parseInt(_0x46b6f5(0x1e5))/0x1*(-parseInt(_0x46b6f5(0x1b2))/0x2)+-parseInt(_0x46b6f5(0x1e1))/0x3+-parseInt(_0x46b6f5(0x1cf))/0x4+-parseInt(_0x46b6f5(0x209))/0x5+-parseInt(_0x46b6f5(0x201))/0x6+-parseInt(_0x46b6f5(0x1b8))/0x7+parseInt(_0x46b6f5(0x1b4))/0x8;if(_0x366fb1===_0x753900)break;else _0x5f5b7d['push'](_0x5f5b7d['shift']());}catch(_0x2e68e6){_0x5f5b7d['push'](_0x5f5b7d['shift']());}}}(a4_0x369e,0x88626));function a4_0x369e(){const _0x4dc638=['getTopics','[TopicManager]\x20Error\x20getting\x20topics:','strategy','sensor_msgs/msg/CompressedImage','websocket','error','isLargeDataTopic','split','sensor_msgs/msg/PointCloud2','compressed','test','cloud','webrtc_skip','forward','1942737VUrFTr','search','toString','normal_size','8490tEHVKt','defaultLargeDataStrategy','[TopicManager]\x20Topic\x20discovery\x20completed','isLargeData','shouldThrottle','from','some','strategies','now','includes','throttleFrequencies','sensor_msgs/msg/Image','image_throttled','name','apply','topicStrategies','sensor_msgs/msg/LaserScan','points','laser_scan_throttled','image','strategiesConfig','reason','forEach','(((.+)+)+)+$','webrtc','getStatistics','analyzeTopicStrategy','set','4756464oGMpoS','topic','parseStrategyConfig','largeDataThreshold','[TopicManager]\x20Loaded\x20configuration:','estimateTopicSize','scan','size','4277620zMmZAo','pattern_configured','shouldUseWebRTC','depth_points','discoveryInProgress','constructor','lastMessageTimes','[TopicManager]\x20Initialised','config','exports','loadConfig','user_configured','124PUyVnM','point','40455704mCiWtv','Image','topicHandling','maxFrequency','4904522HKeinf','isCameraTopic','point_cloud','unknown','type','[TopicManager]\x20Topic\x20','point_cloud_throttled','topics','get','getTopicStrategy','replace','length','handleMessage','video_webrtc_streaming','\x20topics','types','entries','webrtc_only','throttle','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','[TopicManager]\x20Found\x20','log','LaserScan','3901840GIpfUV','map','filter','[TopicManager]\x20Strategies:'];a4_0x369e=function(){return _0x4dc638;};return a4_0x369e();}const a4_0x51c81f=(function(){let _0x102af2=!![];return function(_0x2f81a4,_0x3bfe50){const _0x22391b=_0x102af2?function(){const _0x42c933=a4_0xb729;if(_0x3bfe50){const _0x2c4a0c=_0x3bfe50[_0x42c933(0x1f3)](_0x2f81a4,arguments);return _0x3bfe50=null,_0x2c4a0c;}}:function(){};return _0x102af2=![],_0x22391b;};}()),a4_0x5ed023=a4_0x51c81f(this,function(){const _0x50e376=a4_0xb729;return a4_0x5ed023[_0x50e376(0x1e3)]()[_0x50e376(0x1e2)](_0x50e376(0x1fc))[_0x50e376(0x1e3)]()[_0x50e376(0x1ab)](a4_0x5ed023)[_0x50e376(0x1e2)](_0x50e376(0x1fc));});a4_0x5ed023();const {execSync}=require('child_process');function a4_0xb729(_0x5586c6,_0x3e02cd){const _0x5cb06e=a4_0x369e();return a4_0xb729=function(_0x5ed023,_0x51c81f){_0x5ed023=_0x5ed023-0x1ab;let _0x369ebe=_0x5cb06e[_0x5ed023];return _0x369ebe;},a4_0xb729(_0x5586c6,_0x3e02cd);}class TopicManager{constructor(){const _0x410fae=a4_0xb729;this[_0x410fae(0x1f4)]=new Map(),this[_0x410fae(0x1ac)]=new Map(),this[_0x410fae(0x20d)]=![],this[_0x410fae(0x1ae)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x410fae(0x1c9),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console['log'](_0x410fae(0x1ad));}[a4_0x482fcc(0x1b0)](_0x4db547){const _0x38d7de=a4_0x482fcc;if(_0x4db547[_0x38d7de(0x1b6)]){const _0x1b4c03=_0x4db547['topicHandling'];_0x1b4c03[_0x38d7de(0x204)]&&(this[_0x38d7de(0x1ae)][_0x38d7de(0x204)]=_0x1b4c03[_0x38d7de(0x204)]),_0x1b4c03[_0x38d7de(0x1e6)]&&(this[_0x38d7de(0x1ae)][_0x38d7de(0x1e6)]=_0x1b4c03[_0x38d7de(0x1e6)]),_0x1b4c03[_0x38d7de(0x1ec)]&&(this[_0x38d7de(0x1ae)][_0x38d7de(0x1f9)]={..._0x1b4c03['strategies']}),_0x1b4c03['throttleFrequencies']&&(this['config'][_0x38d7de(0x1ef)]={...this[_0x38d7de(0x1ae)][_0x38d7de(0x1ef)],..._0x1b4c03['throttleFrequencies']}),console[_0x38d7de(0x1cd)](_0x38d7de(0x205),this[_0x38d7de(0x1ae)]);}}async['discoverTopics'](_0x2f78c0){const _0x546177=a4_0x482fcc;if(this[_0x546177(0x20d)]||!_0x2f78c0)return;this[_0x546177(0x20d)]=!![],console[_0x546177(0x1cd)]('[TopicManager]\x20Starting\x20topic\x20discovery...');try{await new Promise((_0x5c837d,_0x5eac1d)=>{const _0x299e41=_0x546177;_0x2f78c0[_0x299e41(0x1d3)](_0x1fd855=>{const _0x324046=_0x299e41,_0x2d4f61=_0x1fd855[_0x324046(0x1bf)]['map']((_0x1d0b26,_0x43e815)=>({'name':_0x1d0b26,'type':_0x1fd855[_0x324046(0x1c7)][_0x43e815]}));console[_0x324046(0x1cd)](_0x324046(0x1cc)+_0x2d4f61[_0x324046(0x1c3)]+_0x324046(0x1c6));for(const _0xbe3829 of _0x2d4f61){this[_0x324046(0x1ff)](_0xbe3829);}console['log'](_0x324046(0x1e7)),console[_0x324046(0x1cd)](_0x324046(0x1d2),Array['from'](this['topicStrategies'][_0x324046(0x1c8)]())),_0x5c837d();},_0x2ad4f3=>{const _0x3998c2=_0x299e41;console[_0x3998c2(0x1d8)](_0x3998c2(0x1d4),_0x2ad4f3),_0x5eac1d(_0x2ad4f3);});});}catch(_0x2ac8cf){console[_0x546177(0x1d8)]('[TopicManager]\x20Topic\x20discovery\x20failed:',_0x2ac8cf);}finally{this[_0x546177(0x20d)]=![];}}[a4_0x482fcc(0x1ff)](_0x4b93d1){const _0x116844=a4_0x482fcc,_0x20f485=this['determineTopicStrategy'](_0x4b93d1);this[_0x116844(0x1f4)][_0x116844(0x200)](_0x4b93d1[_0x116844(0x1f2)],{'type':_0x4b93d1[_0x116844(0x1bc)],'strategy':_0x20f485['type'],'reason':_0x20f485['reason'],'maxFrequency':_0x20f485[_0x116844(0x1b7)],'isLargeData':_0x20f485[_0x116844(0x1e8)],'estimatedSize':_0x20f485['estimatedSize']}),console[_0x116844(0x1cd)](_0x116844(0x1bd)+_0x4b93d1[_0x116844(0x1f2)]+':\x20'+_0x20f485['type']+'\x20('+_0x20f485[_0x116844(0x1fa)]+')');}['determineTopicStrategy'](_0x2c3d06){const _0x3eba61=a4_0x482fcc;if(this['config'][_0x3eba61(0x1f9)][_0x2c3d06[_0x3eba61(0x1f2)]]){const _0x53d2ae=this[_0x3eba61(0x1ae)][_0x3eba61(0x1f9)][_0x2c3d06['name']];return this['parseStrategyConfig'](_0x53d2ae,_0x3eba61(0x1b1));}for(const [_0x451a72,_0x1df512]of Object[_0x3eba61(0x1c8)](this[_0x3eba61(0x1ae)][_0x3eba61(0x1f9)])){if(_0x2c3d06[_0x3eba61(0x1f2)][_0x3eba61(0x1ee)](_0x451a72[_0x3eba61(0x1c2)]('/','')))return this[_0x3eba61(0x203)](_0x1df512,_0x3eba61(0x20a));}if(this[_0x3eba61(0x1b9)](_0x2c3d06[_0x3eba61(0x1f2)],_0x2c3d06['type'])){const _0x4c87a9=this[_0x3eba61(0x206)](_0x2c3d06['name'],_0x2c3d06['type']);return{'type':_0x3eba61(0x1fd),'reason':_0x3eba61(0x1c5),'isLargeData':!![],'estimatedSize':_0x4c87a9,'maxFrequency':null};}const _0x1f3597=this[_0x3eba61(0x1d9)](_0x2c3d06[_0x3eba61(0x1f2)],_0x2c3d06['type']),_0x3f9629=this[_0x3eba61(0x206)](_0x2c3d06['name'],_0x2c3d06[_0x3eba61(0x1bc)]);if(_0x1f3597||_0x3f9629>this[_0x3eba61(0x1ae)]['largeDataThreshold']){let _0x13177f=this[_0x3eba61(0x1ae)]['throttleFrequencies'][_0x2c3d06[_0x3eba61(0x1bc)]]||0xa,_0x2c3528='large_data_throttled';if(_0x2c3d06[_0x3eba61(0x1bc)][_0x3eba61(0x1ee)]('PointCloud2')||_0x2c3d06[_0x3eba61(0x1f2)][_0x3eba61(0x1ee)](_0x3eba61(0x1f6)))_0x13177f=this[_0x3eba61(0x1ae)][_0x3eba61(0x1ef)][_0x2c3d06[_0x3eba61(0x1bc)]]||0x5,_0x2c3528=_0x3eba61(0x1be);else{if(_0x2c3d06[_0x3eba61(0x1bc)][_0x3eba61(0x1ee)](_0x3eba61(0x1ce))||_0x2c3d06[_0x3eba61(0x1f2)][_0x3eba61(0x1ee)](_0x3eba61(0x207)))_0x13177f=this[_0x3eba61(0x1ae)][_0x3eba61(0x1ef)][_0x2c3d06[_0x3eba61(0x1bc)]]||0xf,_0x2c3528=_0x3eba61(0x1f7);else _0x2c3d06[_0x3eba61(0x1bc)][_0x3eba61(0x1ee)](_0x3eba61(0x1b5))&&(_0x13177f=this[_0x3eba61(0x1ae)][_0x3eba61(0x1ef)][_0x2c3d06[_0x3eba61(0x1bc)]]||0xa,_0x2c3528=_0x3eba61(0x1f1));}return{'type':_0x3eba61(0x1ca),'reason':_0x2c3528,'isLargeData':!![],'estimatedSize':_0x3f9629,'maxFrequency':_0x13177f};}return{'type':_0x3eba61(0x1d7),'reason':_0x3eba61(0x1e4),'isLargeData':![],'estimatedSize':_0x3f9629,'maxFrequency':null};}[a4_0x482fcc(0x203)](_0x57b5ad,_0x5c5862){const _0x393c6d=a4_0x482fcc;if(_0x57b5ad[_0x393c6d(0x1ee)](':')){const [_0x295536,_0x521a3b]=_0x57b5ad[_0x393c6d(0x1da)](':');return{'type':_0x295536,'reason':_0x5c5862,'isLargeData':!![],'maxFrequency':_0x295536==='throttle'?parseFloat(_0x521a3b):null,'estimatedSize':this[_0x393c6d(0x1ae)][_0x393c6d(0x204)]+0x1};}return{'type':_0x57b5ad,'reason':_0x5c5862,'isLargeData':_0x57b5ad!=='websocket','maxFrequency':null,'estimatedSize':this[_0x393c6d(0x1ae)][_0x393c6d(0x204)]+0x1};}[a4_0x482fcc(0x1d9)](_0x517eef,_0x4e0759){const _0x2686f1=a4_0x482fcc,_0x110267=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x142afb=[_0x2686f1(0x1db),_0x2686f1(0x1f0),_0x2686f1(0x1f5),_0x2686f1(0x1d6)];return _0x110267[_0x2686f1(0x1eb)](_0x2201c9=>_0x2201c9[_0x2686f1(0x1dd)](_0x517eef))||_0x142afb[_0x2686f1(0x1ee)](_0x4e0759);}[a4_0x482fcc(0x1b9)](_0x4cc032,_0x4538b4=''){const _0x4774ed=a4_0x482fcc,_0x1acaf5=['sensor_msgs/msg/Image',_0x4774ed(0x1d6)];if(_0x1acaf5[_0x4774ed(0x1ee)](_0x4538b4))return!_0x4cc032[_0x4774ed(0x1ee)](_0x4774ed(0x1f6))&&!_0x4cc032[_0x4774ed(0x1ee)](_0x4774ed(0x1ba))&&!_0x4cc032[_0x4774ed(0x1ee)](_0x4774ed(0x20c));return(_0x4cc032['includes'](_0x4774ed(0x1f8))||_0x4cc032['includes']('compressed'))&&!_0x4cc032[_0x4774ed(0x1ee)](_0x4774ed(0x1f6))&&!_0x4cc032[_0x4774ed(0x1ee)]('point_cloud')&&!_0x4cc032[_0x4774ed(0x1ee)](_0x4774ed(0x20c));}['estimateTopicSize'](_0x350fa7,_0x43e89e){const _0x936310=a4_0x482fcc,_0x56218e={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x56218e[_0x43e89e])return _0x56218e[_0x43e89e];if(_0x350fa7[_0x936310(0x1ee)]('point')||_0x350fa7[_0x936310(0x1ee)](_0x936310(0x1de)))return 0x190*0x400;if(_0x350fa7['includes']('image_raw'))return 0x12c*0x400;if(_0x350fa7['includes'](_0x936310(0x1dc)))return 0x32*0x400;return 0x400;}[a4_0x482fcc(0x1c4)](_0x873d80){const _0x1f6baa=a4_0x482fcc;let _0x523e0e=this['topicStrategies'][_0x1f6baa(0x1c0)](_0x873d80[_0x1f6baa(0x202)]);if(!_0x523e0e){console[_0x1f6baa(0x1cd)](_0x1f6baa(0x1cb)+_0x873d80['topic']);let _0x4c13fe=_0x1f6baa(0x1bb);if(_0x873d80[_0x1f6baa(0x202)][_0x1f6baa(0x1ee)]('image')&&_0x873d80['topic'][_0x1f6baa(0x1ee)](_0x1f6baa(0x1dc)))_0x4c13fe=_0x1f6baa(0x1d6);else{if(_0x873d80['topic'][_0x1f6baa(0x1ee)]('image'))_0x4c13fe=_0x1f6baa(0x1f0);else{if(_0x873d80[_0x1f6baa(0x202)][_0x1f6baa(0x1ee)](_0x1f6baa(0x1b3))||_0x873d80['topic'][_0x1f6baa(0x1ee)](_0x1f6baa(0x1de)))_0x4c13fe=_0x1f6baa(0x1db);else _0x873d80['topic'][_0x1f6baa(0x1ee)](_0x1f6baa(0x207))&&(_0x4c13fe=_0x1f6baa(0x1f5));}}const _0x2a0d09={'name':_0x873d80[_0x1f6baa(0x202)],'type':_0x4c13fe};this[_0x1f6baa(0x1ff)](_0x2a0d09),_0x523e0e=this[_0x1f6baa(0x1f4)]['get'](_0x873d80['topic']);}if(!_0x523e0e)return{'action':_0x1f6baa(0x1e0),'message':_0x873d80};switch(_0x523e0e['strategy']){case _0x1f6baa(0x1ca):return this[_0x1f6baa(0x1e9)](_0x873d80[_0x1f6baa(0x202)],_0x523e0e[_0x1f6baa(0x1b7)])?{'action':_0x1f6baa(0x1e0),'message':_0x873d80}:{'action':'throttle_skip'};case _0x1f6baa(0x1fd):return{'action':_0x1f6baa(0x1df)};case _0x1f6baa(0x1d7):default:return{'action':'forward','message':_0x873d80};}}[a4_0x482fcc(0x1e9)](_0x3fd60f,_0x527cce){const _0x222b6c=a4_0x482fcc;if(!_0x527cce)return!![];const _0x4c3593=Date[_0x222b6c(0x1ed)](),_0x32faaf=0x3e8/_0x527cce;!this[_0x222b6c(0x1ac)]['has'](_0x3fd60f)&&this[_0x222b6c(0x1ac)][_0x222b6c(0x200)](_0x3fd60f,0x0);const _0x18148e=this[_0x222b6c(0x1ac)][_0x222b6c(0x1c0)](_0x3fd60f),_0x2369e9=_0x4c3593-_0x18148e;if(_0x2369e9>=_0x32faaf)return this[_0x222b6c(0x1ac)]['set'](_0x3fd60f,_0x4c3593),!![];return![];}[a4_0x482fcc(0x1c1)](_0x56d7eb){const _0x12ff57=a4_0x482fcc;return this['topicStrategies'][_0x12ff57(0x1c0)](_0x56d7eb);}['getManagedTopics'](){const _0x21a86e=a4_0x482fcc;return Array[_0x21a86e(0x1ea)](this[_0x21a86e(0x1f4)]['entries']())[_0x21a86e(0x1d0)](([_0x34e9a8,_0x1257e8])=>({'topic':_0x34e9a8,..._0x1257e8}));}[a4_0x482fcc(0x20b)](_0x4bc470){const _0x20c005=a4_0x482fcc,_0x41bf8c=this[_0x20c005(0x1f4)][_0x20c005(0x1c0)](_0x4bc470);return _0x41bf8c?.[_0x20c005(0x1d5)]===_0x20c005(0x1c9);}[a4_0x482fcc(0x1fe)](){const _0x2e3fa1=a4_0x482fcc,_0x52243e={};return this[_0x2e3fa1(0x1f4)][_0x2e3fa1(0x1fb)]((_0x23e513,_0x27ba05)=>{const _0x5acdc4=_0x2e3fa1;!_0x52243e[_0x23e513['strategy']]&&(_0x52243e[_0x23e513[_0x5acdc4(0x1d5)]]=0x0),_0x52243e[_0x23e513[_0x5acdc4(0x1d5)]]++;}),{'totalTopics':this[_0x2e3fa1(0x1f4)][_0x2e3fa1(0x208)],'strategies':_0x52243e,'largeDataTopics':Array[_0x2e3fa1(0x1ea)](this[_0x2e3fa1(0x1f4)]['entries']())[_0x2e3fa1(0x1d1)](([_0x4dd96f,_0x34b1e4])=>_0x34b1e4['isLargeData'])[_0x2e3fa1(0x1d0)](([_0x122e5c,_0x12cf05])=>_0x122e5c)};}}module[a4_0x482fcc(0x1af)]=new TopicManager();