const a4_0x4ad8e6=a4_0x5af2;(function(_0x4477db,_0x21bb57){const _0x11e4c9=a4_0x5af2,_0x2c3e22=_0x4477db();while(!![]){try{const _0x4c268f=-parseInt(_0x11e4c9(0x97))/0x1+-parseInt(_0x11e4c9(0xd7))/0x2+parseInt(_0x11e4c9(0xee))/0x3+-parseInt(_0x11e4c9(0xb0))/0x4*(-parseInt(_0x11e4c9(0xb7))/0x5)+parseInt(_0x11e4c9(0xa6))/0x6*(-parseInt(_0x11e4c9(0xca))/0x7)+parseInt(_0x11e4c9(0x96))/0x8+parseInt(_0x11e4c9(0xce))/0x9*(-parseInt(_0x11e4c9(0xe5))/0xa);if(_0x4c268f===_0x21bb57)break;else _0x2c3e22['push'](_0x2c3e22['shift']());}catch(_0x362a5b){_0x2c3e22['push'](_0x2c3e22['shift']());}}}(a4_0x2299,0xe88e9));const a4_0x48b9dc=(function(){let _0x1eee7a=!![];return function(_0x4daf18,_0x516d38){const _0x313bc4=_0x1eee7a?function(){const _0x3cb69d=a4_0x5af2;if(_0x516d38){const _0x58af00=_0x516d38[_0x3cb69d(0xe7)](_0x4daf18,arguments);return _0x516d38=null,_0x58af00;}}:function(){};return _0x1eee7a=![],_0x313bc4;};}()),a4_0x127750=a4_0x48b9dc(this,function(){const _0x1be0ec=a4_0x5af2;return a4_0x127750['toString']()[_0x1be0ec(0xcc)](_0x1be0ec(0x9b))[_0x1be0ec(0xa8)]()[_0x1be0ec(0xad)](a4_0x127750)[_0x1be0ec(0xcc)](_0x1be0ec(0x9b));});a4_0x127750();function a4_0x5af2(_0x3c6ae9,_0x19286c){const _0x1eb5d5=a4_0x2299();return a4_0x5af2=function(_0x127750,_0x48b9dc){_0x127750=_0x127750-0x94;let _0x2299a8=_0x1eb5d5[_0x127750];return _0x2299a8;},a4_0x5af2(_0x3c6ae9,_0x19286c);}function a4_0x2299(){const _0x401966=['[TopicManager]\x20Initialised','isLargeDataTopic','analyzeTopicStrategy','unknown','1882027XWiime','sensor_msgs/msg/Image','search','types','248229TBgGOG','getManagedTopics','depth_points','cloud','image_throttled','shouldUseWebRTC','points','Image','webrtc_only','81330sEFXPr','topic','throttle','entries','sensor_msgs/msg/LaserScan','strategiesConfig','config','sensor_msgs/msg/CompressedImage','point','getTopicStrategy','topicHandling','point_cloud','loadConfig','set','460hBokBc','handleMessage','apply','largeDataThreshold','estimateTopicSize','throttleFrequencies','now','image','error','4715682kPcXAV','get','topicStrategies','[TopicManager]\x20Error\x20getting\x20topics:','laser_scan_throttled','determineTopicStrategy','isLargeData','PointCloud2','getTopics','9742168zFMBXh','165046lbkmbT','large_data_throttled','webrtc','getStatistics','(((.+)+)+)+$','[TopicManager]\x20Found\x20','[TopicManager]\x20Topic\x20discovery\x20failed:','compressed','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','name','forward','child_process','websocket','maxFrequency','[TopicManager]\x20Strategies:','18WyxLeA','user_configured','toString','length','reason','map','estimatedSize','constructor','[TopicManager]\x20Starting\x20topic\x20discovery...','webrtc_skip','8tAPlDK','strategy','type','log','forEach','topics','defaultLargeDataStrategy','1109770xDRXou','includes','from','size','discoveryInProgress','sensor_msgs/msg/PointCloud2','isCameraTopic','scan','test','lastMessageTimes','video_webrtc_streaming','some','\x20topics','exports','discoverTopics'];a4_0x2299=function(){return _0x401966;};return a4_0x2299();}const {execSync}=require(a4_0x4ad8e6(0xa2));class TopicManager{constructor(){const _0x5d141b=a4_0x4ad8e6;this[_0x5d141b(0xf0)]=new Map(),this[_0x5d141b(0xc0)]=new Map(),this[_0x5d141b(0xbb)]=![],this[_0x5d141b(0xdd)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':'webrtc_only','throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x5d141b(0xb3)](_0x5d141b(0xc6));}[a4_0x4ad8e6(0xe3)](_0x3d68b2){const _0x413fb4=a4_0x4ad8e6;if(_0x3d68b2[_0x413fb4(0xe1)]){const _0x1b6d1d=_0x3d68b2[_0x413fb4(0xe1)];_0x1b6d1d[_0x413fb4(0xe8)]&&(this[_0x413fb4(0xdd)][_0x413fb4(0xe8)]=_0x1b6d1d[_0x413fb4(0xe8)]),_0x1b6d1d[_0x413fb4(0xb6)]&&(this['config'][_0x413fb4(0xb6)]=_0x1b6d1d[_0x413fb4(0xb6)]),_0x1b6d1d['strategies']&&(this[_0x413fb4(0xdd)][_0x413fb4(0xdc)]={..._0x1b6d1d['strategies']}),_0x1b6d1d[_0x413fb4(0xea)]&&(this['config'][_0x413fb4(0xea)]={...this['config'][_0x413fb4(0xea)],..._0x1b6d1d[_0x413fb4(0xea)]}),console[_0x413fb4(0xb3)]('[TopicManager]\x20Loaded\x20configuration:',this[_0x413fb4(0xdd)]);}}async[a4_0x4ad8e6(0xc5)](_0x592199){const _0x6d7705=a4_0x4ad8e6;if(this[_0x6d7705(0xbb)]||!_0x592199)return;this[_0x6d7705(0xbb)]=!![],console['log'](_0x6d7705(0xae));try{await new Promise((_0x36ee4c,_0x4cb1b2)=>{const _0x584025=_0x6d7705;_0x592199[_0x584025(0x95)](_0x4b5dd9=>{const _0x553d1c=_0x584025,_0x23d7ae=_0x4b5dd9[_0x553d1c(0xb5)][_0x553d1c(0xab)]((_0xf6abda,_0x10f19d)=>({'name':_0xf6abda,'type':_0x4b5dd9[_0x553d1c(0xcd)][_0x10f19d]}));console['log'](_0x553d1c(0x9c)+_0x23d7ae[_0x553d1c(0xa9)]+_0x553d1c(0xc3));for(const _0x206eec of _0x23d7ae){this[_0x553d1c(0xc8)](_0x206eec);}console[_0x553d1c(0xb3)]('[TopicManager]\x20Topic\x20discovery\x20completed'),console[_0x553d1c(0xb3)](_0x553d1c(0xa5),Array['from'](this[_0x553d1c(0xf0)][_0x553d1c(0xda)]())),_0x36ee4c();},_0x4c4748=>{const _0x50a55b=_0x584025;console[_0x50a55b(0xed)](_0x50a55b(0xf1),_0x4c4748),_0x4cb1b2(_0x4c4748);});});}catch(_0x2fd87c){console['error'](_0x6d7705(0x9d),_0x2fd87c);}finally{this[_0x6d7705(0xbb)]=![];}}[a4_0x4ad8e6(0xc8)](_0x2f3c1c){const _0x90008c=a4_0x4ad8e6,_0x8b4bdb=this['determineTopicStrategy'](_0x2f3c1c);this['topicStrategies'][_0x90008c(0xe4)](_0x2f3c1c[_0x90008c(0xa0)],{'type':_0x2f3c1c[_0x90008c(0xb2)],'strategy':_0x8b4bdb[_0x90008c(0xb2)],'reason':_0x8b4bdb[_0x90008c(0xaa)],'maxFrequency':_0x8b4bdb['maxFrequency'],'isLargeData':_0x8b4bdb['isLargeData'],'estimatedSize':_0x8b4bdb[_0x90008c(0xac)]}),console[_0x90008c(0xb3)]('[TopicManager]\x20Topic\x20'+_0x2f3c1c[_0x90008c(0xa0)]+':\x20'+_0x8b4bdb['type']+'\x20('+_0x8b4bdb['reason']+')');}[a4_0x4ad8e6(0xf3)](_0x11acbd){const _0x1af504=a4_0x4ad8e6;if(this[_0x1af504(0xdd)][_0x1af504(0xdc)][_0x11acbd[_0x1af504(0xa0)]]){const _0x28e76c=this[_0x1af504(0xdd)][_0x1af504(0xdc)][_0x11acbd[_0x1af504(0xa0)]];return this['parseStrategyConfig'](_0x28e76c,_0x1af504(0xa7));}for(const [_0xc32cb9,_0x38a258]of Object[_0x1af504(0xda)](this[_0x1af504(0xdd)]['strategiesConfig'])){if(_0x11acbd[_0x1af504(0xa0)][_0x1af504(0xb8)](_0xc32cb9['replace']('/','')))return this['parseStrategyConfig'](_0x38a258,'pattern_configured');}if(this[_0x1af504(0xbd)](_0x11acbd[_0x1af504(0xa0)],_0x11acbd[_0x1af504(0xb2)])){const _0x4a756d=this[_0x1af504(0xe9)](_0x11acbd[_0x1af504(0xa0)],_0x11acbd[_0x1af504(0xb2)]);return{'type':'webrtc','reason':_0x1af504(0xc1),'isLargeData':!![],'estimatedSize':_0x4a756d,'maxFrequency':null};}const _0x4a6ed6=this[_0x1af504(0xc7)](_0x11acbd[_0x1af504(0xa0)],_0x11acbd[_0x1af504(0xb2)]),_0x11dcd1=this['estimateTopicSize'](_0x11acbd[_0x1af504(0xa0)],_0x11acbd[_0x1af504(0xb2)]);if(_0x4a6ed6||_0x11dcd1>this[_0x1af504(0xdd)][_0x1af504(0xe8)]){let _0x1d0e64=this[_0x1af504(0xdd)][_0x1af504(0xea)][_0x11acbd[_0x1af504(0xb2)]]||0xa,_0x305c41=_0x1af504(0x98);if(_0x11acbd[_0x1af504(0xb2)][_0x1af504(0xb8)](_0x1af504(0x94))||_0x11acbd[_0x1af504(0xa0)][_0x1af504(0xb8)](_0x1af504(0xd4)))_0x1d0e64=this[_0x1af504(0xdd)][_0x1af504(0xea)][_0x11acbd[_0x1af504(0xb2)]]||0x5,_0x305c41='point_cloud_throttled';else{if(_0x11acbd[_0x1af504(0xb2)][_0x1af504(0xb8)]('LaserScan')||_0x11acbd[_0x1af504(0xa0)][_0x1af504(0xb8)](_0x1af504(0xbe)))_0x1d0e64=this[_0x1af504(0xdd)][_0x1af504(0xea)][_0x11acbd[_0x1af504(0xb2)]]||0xf,_0x305c41=_0x1af504(0xf2);else _0x11acbd[_0x1af504(0xb2)][_0x1af504(0xb8)](_0x1af504(0xd5))&&(_0x1d0e64=this[_0x1af504(0xdd)][_0x1af504(0xea)][_0x11acbd[_0x1af504(0xb2)]]||0xa,_0x305c41=_0x1af504(0xd2));}return{'type':_0x1af504(0xd9),'reason':_0x305c41,'isLargeData':!![],'estimatedSize':_0x11dcd1,'maxFrequency':_0x1d0e64};}return{'type':_0x1af504(0xa3),'reason':'normal_size','isLargeData':![],'estimatedSize':_0x11dcd1,'maxFrequency':null};}['parseStrategyConfig'](_0x14dba1,_0x16968f){const _0x472695=a4_0x4ad8e6;if(_0x14dba1[_0x472695(0xb8)](':')){const [_0x3d513b,_0x4bd76f]=_0x14dba1['split'](':');return{'type':_0x3d513b,'reason':_0x16968f,'isLargeData':!![],'maxFrequency':_0x3d513b===_0x472695(0xd9)?parseFloat(_0x4bd76f):null,'estimatedSize':this[_0x472695(0xdd)][_0x472695(0xe8)]+0x1};}return{'type':_0x14dba1,'reason':_0x16968f,'isLargeData':_0x14dba1!==_0x472695(0xa3),'maxFrequency':null,'estimatedSize':this['config'][_0x472695(0xe8)]+0x1};}[a4_0x4ad8e6(0xc7)](_0x15a721,_0xa6a462){const _0x2c5d09=a4_0x4ad8e6,_0x66220f=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x3baf3a=['sensor_msgs/msg/PointCloud2',_0x2c5d09(0xcb),_0x2c5d09(0xdb),_0x2c5d09(0xde)];return _0x66220f[_0x2c5d09(0xc2)](_0x3feb42=>_0x3feb42[_0x2c5d09(0xbf)](_0x15a721))||_0x3baf3a[_0x2c5d09(0xb8)](_0xa6a462);}[a4_0x4ad8e6(0xbd)](_0x83a2ed,_0x1d7aa9=''){const _0x2cf48a=a4_0x4ad8e6,_0x503f50=[_0x2cf48a(0xcb),_0x2cf48a(0xde)];if(_0x503f50[_0x2cf48a(0xb8)](_0x1d7aa9))return!_0x83a2ed[_0x2cf48a(0xb8)](_0x2cf48a(0xd4))&&!_0x83a2ed['includes'](_0x2cf48a(0xe2))&&!_0x83a2ed[_0x2cf48a(0xb8)](_0x2cf48a(0xd0));return(_0x83a2ed[_0x2cf48a(0xb8)](_0x2cf48a(0xec))||_0x83a2ed[_0x2cf48a(0xb8)]('compressed'))&&!_0x83a2ed[_0x2cf48a(0xb8)](_0x2cf48a(0xd4))&&!_0x83a2ed['includes'](_0x2cf48a(0xe2))&&!_0x83a2ed[_0x2cf48a(0xb8)](_0x2cf48a(0xd0));}[a4_0x4ad8e6(0xe9)](_0x35142c,_0x4d9a19){const _0x5c6b07=a4_0x4ad8e6,_0x34b146={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x34b146[_0x4d9a19])return _0x34b146[_0x4d9a19];if(_0x35142c[_0x5c6b07(0xb8)](_0x5c6b07(0xdf))||_0x35142c[_0x5c6b07(0xb8)](_0x5c6b07(0xd1)))return 0x190*0x400;if(_0x35142c['includes']('image_raw'))return 0x12c*0x400;if(_0x35142c[_0x5c6b07(0xb8)](_0x5c6b07(0x9e)))return 0x32*0x400;return 0x400;}[a4_0x4ad8e6(0xe6)](_0x22d388){const _0x4c2224=a4_0x4ad8e6;let _0x1e13f7=this[_0x4c2224(0xf0)][_0x4c2224(0xef)](_0x22d388[_0x4c2224(0xd8)]);if(!_0x1e13f7){console[_0x4c2224(0xb3)](_0x4c2224(0x9f)+_0x22d388['topic']);let _0x596102=_0x4c2224(0xc9);if(_0x22d388[_0x4c2224(0xd8)][_0x4c2224(0xb8)](_0x4c2224(0xec))&&_0x22d388['topic'][_0x4c2224(0xb8)](_0x4c2224(0x9e)))_0x596102=_0x4c2224(0xde);else{if(_0x22d388[_0x4c2224(0xd8)][_0x4c2224(0xb8)](_0x4c2224(0xec)))_0x596102=_0x4c2224(0xcb);else{if(_0x22d388[_0x4c2224(0xd8)]['includes'](_0x4c2224(0xdf))||_0x22d388[_0x4c2224(0xd8)][_0x4c2224(0xb8)](_0x4c2224(0xd1)))_0x596102=_0x4c2224(0xbc);else _0x22d388[_0x4c2224(0xd8)][_0x4c2224(0xb8)](_0x4c2224(0xbe))&&(_0x596102=_0x4c2224(0xdb));}}const _0x406e1b={'name':_0x22d388['topic'],'type':_0x596102};this[_0x4c2224(0xc8)](_0x406e1b),_0x1e13f7=this[_0x4c2224(0xf0)]['get'](_0x22d388[_0x4c2224(0xd8)]);}if(!_0x1e13f7)return{'action':_0x4c2224(0xa1),'message':_0x22d388};switch(_0x1e13f7[_0x4c2224(0xb1)]){case _0x4c2224(0xd9):return this['shouldThrottle'](_0x22d388['topic'],_0x1e13f7[_0x4c2224(0xa4)])?{'action':'forward','message':_0x22d388}:{'action':'throttle_skip'};case _0x4c2224(0x99):return{'action':_0x4c2224(0xaf)};case _0x4c2224(0xa3):default:return{'action':_0x4c2224(0xa1),'message':_0x22d388};}}['shouldThrottle'](_0x389118,_0x196e6c){const _0xe4e8b9=a4_0x4ad8e6;if(!_0x196e6c)return!![];const _0x299c96=Date[_0xe4e8b9(0xeb)](),_0xbeffd6=0x3e8/_0x196e6c;!this[_0xe4e8b9(0xc0)]['has'](_0x389118)&&this[_0xe4e8b9(0xc0)][_0xe4e8b9(0xe4)](_0x389118,0x0);const _0x53d290=this[_0xe4e8b9(0xc0)][_0xe4e8b9(0xef)](_0x389118),_0x27ad4f=_0x299c96-_0x53d290;if(_0x27ad4f>=_0xbeffd6)return this[_0xe4e8b9(0xc0)][_0xe4e8b9(0xe4)](_0x389118,_0x299c96),!![];return![];}[a4_0x4ad8e6(0xe0)](_0x3a3209){const _0x1ac9a0=a4_0x4ad8e6;return this['topicStrategies'][_0x1ac9a0(0xef)](_0x3a3209);}[a4_0x4ad8e6(0xcf)](){const _0x31dbdd=a4_0x4ad8e6;return Array[_0x31dbdd(0xb9)](this[_0x31dbdd(0xf0)][_0x31dbdd(0xda)]())[_0x31dbdd(0xab)](([_0x1663f6,_0x2eb676])=>({'topic':_0x1663f6,..._0x2eb676}));}[a4_0x4ad8e6(0xd3)](_0x3c06d4){const _0x10facb=a4_0x4ad8e6,_0x3b10e4=this[_0x10facb(0xf0)][_0x10facb(0xef)](_0x3c06d4);return _0x3b10e4?.['strategy']===_0x10facb(0xd6);}[a4_0x4ad8e6(0x9a)](){const _0xd5919c=a4_0x4ad8e6,_0x4ec821={};return this[_0xd5919c(0xf0)][_0xd5919c(0xb4)]((_0x2ececb,_0x2a8f52)=>{const _0x59fac0=_0xd5919c;!_0x4ec821[_0x2ececb[_0x59fac0(0xb1)]]&&(_0x4ec821[_0x2ececb[_0x59fac0(0xb1)]]=0x0),_0x4ec821[_0x2ececb['strategy']]++;}),{'totalTopics':this['topicStrategies'][_0xd5919c(0xba)],'strategies':_0x4ec821,'largeDataTopics':Array['from'](this['topicStrategies'][_0xd5919c(0xda)]())['filter'](([_0x55c566,_0x456aa0])=>_0x456aa0[_0xd5919c(0xf4)])[_0xd5919c(0xab)](([_0x4f69b1,_0x210230])=>_0x4f69b1)};}}module[a4_0x4ad8e6(0xc4)]=new TopicManager();