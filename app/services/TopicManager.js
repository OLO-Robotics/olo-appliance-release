function a6_0x3a46(){const _0xae0f2f=['cloud','topicStrategies','estimateTopicSize','sensor_msgs/msg/CompressedImage','shouldThrottle','[TopicManager]\x20Found\x20','sensor_msgs/msg/Image','point_cloud','getManagedTopics','forEach','strategies','Image','largeDataThreshold','split','name','map','forward','config','scan','image_raw','126142QYyFdo','laser_scan_throttled','[TopicManager]\x20Loaded\x20configuration:','normal_size','error','6btgqMr','pattern_configured','type','reason','getTopicStrategy','child_process','replace','point_cloud_throttled','topics','maxFrequency','get','points','compressed','has','apply','sensor_msgs/msg/PointCloud2','[TopicManager]\x20Error\x20getting\x20topics:','websocket','throttleFrequencies','1832712JZaUTx','webrtc_only','topicHandling','loadConfig','6089264PuJINl','isCameraTopic','(((.+)+)+)+$','constructor','shouldUseWebRTC','length','includes','entries','topic','strategy','[TopicManager]\x20Starting\x20topic\x20discovery...','lastMessageTimes','parseStrategyConfig','defaultLargeDataStrategy','webrtc_skip','analyzeTopicStrategy','3076FdcWvW','[TopicManager]\x20Initialised','toString','depth_points','now','[TopicManager]\x20Topic\x20discovery\x20completed','from','sensor_msgs/msg/LaserScan','determineTopicStrategy','user_configured','LaserScan','2571247QSzzgw','[TopicManager]\x20Topic\x20discovery\x20failed:','discoveryInProgress','1335cJdflM','getTopics','strategiesConfig','webrtc','handleMessage','isLargeData','[TopicManager]\x20Topic\x20','throttle','size','search','image','unknown','set','log','throttle_skip','3226995KdDMAR','estimatedSize','2258028DEgdXI','[TopicManager]\x20Strategies:','PointCloud2','isLargeDataTopic'];a6_0x3a46=function(){return _0xae0f2f;};return a6_0x3a46();}const a6_0x1ef057=a6_0x5204;(function(_0x1e837b,_0x462a0d){const _0x24512d=a6_0x5204,_0x1b8b55=_0x1e837b();while(!![]){try{const _0x4876f6=parseInt(_0x24512d(0x21d))/0x1+-parseInt(_0x24512d(0x1e6))/0x2*(parseInt(_0x24512d(0x1f4))/0x3)+parseInt(_0x24512d(0x235))/0x4+parseInt(_0x24512d(0x203))/0x5*(parseInt(_0x24512d(0x222))/0x6)+parseInt(_0x24512d(0x1f1))/0x7+-parseInt(_0x24512d(0x1d6))/0x8+parseInt(_0x24512d(0x205))/0x9;if(_0x4876f6===_0x462a0d)break;else _0x1b8b55['push'](_0x1b8b55['shift']());}catch(_0x2f75c0){_0x1b8b55['push'](_0x1b8b55['shift']());}}}(a6_0x3a46,0x623bc));function a6_0x5204(_0x526996,_0x4f9c05){const _0x4e4dcb=a6_0x3a46();return a6_0x5204=function(_0x5c25eb,_0x28cd25){_0x5c25eb=_0x5c25eb-0x1d4;let _0x3a464c=_0x4e4dcb[_0x5c25eb];return _0x3a464c;},a6_0x5204(_0x526996,_0x4f9c05);}const a6_0x28cd25=(function(){let _0x46d1d9=!![];return function(_0x2e23f2,_0xaacedd){const _0x11816b=_0x46d1d9?function(){const _0x2398ff=a6_0x5204;if(_0xaacedd){const _0x34649c=_0xaacedd[_0x2398ff(0x230)](_0x2e23f2,arguments);return _0xaacedd=null,_0x34649c;}}:function(){};return _0x46d1d9=![],_0x11816b;};}()),a6_0x5c25eb=a6_0x28cd25(this,function(){const _0x26c29f=a6_0x5204;return a6_0x5c25eb[_0x26c29f(0x1e8)]()[_0x26c29f(0x1fd)]('(((.+)+)+)+$')['toString']()[_0x26c29f(0x1d9)](a6_0x5c25eb)[_0x26c29f(0x1fd)](_0x26c29f(0x1d8));});a6_0x5c25eb();const {execSync}=require(a6_0x1ef057(0x227));class TopicManager{constructor(){const _0x179056=a6_0x1ef057;this[_0x179056(0x20a)]=new Map(),this['lastMessageTimes']=new Map(),this[_0x179056(0x1f3)]=![],this['config']={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x179056(0x236),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console['log'](_0x179056(0x1e7));}[a6_0x1ef057(0x1d5)](_0x15c172){const _0x4a5cd7=a6_0x1ef057;if(_0x15c172['topicHandling']){const _0x427e91=_0x15c172[_0x4a5cd7(0x1d4)];_0x427e91['largeDataThreshold']&&(this[_0x4a5cd7(0x21a)][_0x4a5cd7(0x215)]=_0x427e91[_0x4a5cd7(0x215)]),_0x427e91[_0x4a5cd7(0x1e3)]&&(this[_0x4a5cd7(0x21a)]['defaultLargeDataStrategy']=_0x427e91['defaultLargeDataStrategy']),_0x427e91[_0x4a5cd7(0x213)]&&(this[_0x4a5cd7(0x21a)][_0x4a5cd7(0x1f6)]={..._0x427e91[_0x4a5cd7(0x213)]}),_0x427e91[_0x4a5cd7(0x234)]&&(this[_0x4a5cd7(0x21a)]['throttleFrequencies']={...this[_0x4a5cd7(0x21a)][_0x4a5cd7(0x234)],..._0x427e91['throttleFrequencies']}),console['log'](_0x4a5cd7(0x21f),this[_0x4a5cd7(0x21a)]);}}async['discoverTopics'](_0x286140){const _0x4d78ee=a6_0x1ef057;if(this[_0x4d78ee(0x1f3)]||!_0x286140)return;this[_0x4d78ee(0x1f3)]=!![],console[_0x4d78ee(0x201)](_0x4d78ee(0x1e0));try{await new Promise((_0x4ea886,_0xd5fa48)=>{const _0x2aec11=_0x4d78ee;_0x286140[_0x2aec11(0x1f5)](_0x150ea0=>{const _0x24ab4c=_0x2aec11,_0x4dbf28=_0x150ea0[_0x24ab4c(0x22a)][_0x24ab4c(0x218)]((_0x426ac0,_0x3730e6)=>({'name':_0x426ac0,'type':_0x150ea0['types'][_0x3730e6]}));console[_0x24ab4c(0x201)](_0x24ab4c(0x20e)+_0x4dbf28[_0x24ab4c(0x1db)]+'\x20topics');for(const _0x171140 of _0x4dbf28){this['analyzeTopicStrategy'](_0x171140);}console[_0x24ab4c(0x201)](_0x24ab4c(0x1eb)),console[_0x24ab4c(0x201)](_0x24ab4c(0x206),Array['from'](this['topicStrategies'][_0x24ab4c(0x1dd)]())),_0x4ea886();},_0x2c5410=>{const _0xa8d0ab=_0x2aec11;console['error'](_0xa8d0ab(0x232),_0x2c5410),_0xd5fa48(_0x2c5410);});});}catch(_0x401d56){console[_0x4d78ee(0x221)](_0x4d78ee(0x1f2),_0x401d56);}finally{this['discoveryInProgress']=![];}}[a6_0x1ef057(0x1e5)](_0xa87501){const _0x1d8455=a6_0x1ef057,_0x1116d2=this[_0x1d8455(0x1ee)](_0xa87501);this[_0x1d8455(0x20a)]['set'](_0xa87501['name'],{'type':_0xa87501[_0x1d8455(0x224)],'strategy':_0x1116d2[_0x1d8455(0x224)],'reason':_0x1116d2[_0x1d8455(0x225)],'maxFrequency':_0x1116d2[_0x1d8455(0x22b)],'isLargeData':_0x1116d2[_0x1d8455(0x1f9)],'estimatedSize':_0x1116d2[_0x1d8455(0x204)]}),console['log'](_0x1d8455(0x1fa)+_0xa87501[_0x1d8455(0x217)]+':\x20'+_0x1116d2[_0x1d8455(0x224)]+'\x20('+_0x1116d2['reason']+')');}[a6_0x1ef057(0x1ee)](_0x4a926d){const _0x3c8007=a6_0x1ef057;if(this['config'][_0x3c8007(0x1f6)][_0x4a926d['name']]){const _0x329d4a=this[_0x3c8007(0x21a)]['strategiesConfig'][_0x4a926d[_0x3c8007(0x217)]];return this[_0x3c8007(0x1e2)](_0x329d4a,_0x3c8007(0x1ef));}for(const [_0x3971a0,_0x2d38e3]of Object['entries'](this[_0x3c8007(0x21a)][_0x3c8007(0x1f6)])){if(_0x4a926d[_0x3c8007(0x217)]['includes'](_0x3971a0[_0x3c8007(0x228)]('/','')))return this[_0x3c8007(0x1e2)](_0x2d38e3,_0x3c8007(0x223));}if(this[_0x3c8007(0x1d7)](_0x4a926d[_0x3c8007(0x217)],_0x4a926d[_0x3c8007(0x224)])){const _0x44d683=this[_0x3c8007(0x20b)](_0x4a926d[_0x3c8007(0x217)],_0x4a926d[_0x3c8007(0x224)]);return{'type':_0x3c8007(0x1f7),'reason':'video_webrtc_streaming','isLargeData':!![],'estimatedSize':_0x44d683,'maxFrequency':null};}const _0x30804f=this['isLargeDataTopic'](_0x4a926d['name'],_0x4a926d[_0x3c8007(0x224)]),_0x191296=this['estimateTopicSize'](_0x4a926d[_0x3c8007(0x217)],_0x4a926d[_0x3c8007(0x224)]);if(_0x30804f||_0x191296>this[_0x3c8007(0x21a)][_0x3c8007(0x215)]){let _0x28e860=this['config'][_0x3c8007(0x234)][_0x4a926d[_0x3c8007(0x224)]]||0xa,_0x4aae23='large_data_throttled';if(_0x4a926d['type'][_0x3c8007(0x1dc)](_0x3c8007(0x207))||_0x4a926d[_0x3c8007(0x217)][_0x3c8007(0x1dc)](_0x3c8007(0x22d)))_0x28e860=this['config'][_0x3c8007(0x234)][_0x4a926d[_0x3c8007(0x224)]]||0x5,_0x4aae23=_0x3c8007(0x229);else{if(_0x4a926d[_0x3c8007(0x224)]['includes'](_0x3c8007(0x1f0))||_0x4a926d[_0x3c8007(0x217)]['includes'](_0x3c8007(0x21b)))_0x28e860=this[_0x3c8007(0x21a)]['throttleFrequencies'][_0x4a926d['type']]||0xf,_0x4aae23=_0x3c8007(0x21e);else _0x4a926d[_0x3c8007(0x224)][_0x3c8007(0x1dc)](_0x3c8007(0x214))&&(_0x28e860=this[_0x3c8007(0x21a)][_0x3c8007(0x234)][_0x4a926d[_0x3c8007(0x224)]]||0xa,_0x4aae23='image_throttled');}return{'type':_0x3c8007(0x1fb),'reason':_0x4aae23,'isLargeData':!![],'estimatedSize':_0x191296,'maxFrequency':_0x28e860};}return{'type':_0x3c8007(0x233),'reason':_0x3c8007(0x220),'isLargeData':![],'estimatedSize':_0x191296,'maxFrequency':null};}[a6_0x1ef057(0x1e2)](_0x25baee,_0x4dbbd2){const _0x398e89=a6_0x1ef057;if(_0x25baee[_0x398e89(0x1dc)](':')){const [_0x246d8d,_0x2074f9]=_0x25baee[_0x398e89(0x216)](':');return{'type':_0x246d8d,'reason':_0x4dbbd2,'isLargeData':!![],'maxFrequency':_0x246d8d==='throttle'?parseFloat(_0x2074f9):null,'estimatedSize':this[_0x398e89(0x21a)]['largeDataThreshold']+0x1};}return{'type':_0x25baee,'reason':_0x4dbbd2,'isLargeData':_0x25baee!==_0x398e89(0x233),'maxFrequency':null,'estimatedSize':this[_0x398e89(0x21a)][_0x398e89(0x215)]+0x1};}[a6_0x1ef057(0x208)](_0x543d94,_0x529433){const _0x34b8e4=a6_0x1ef057,_0x3c04af=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x3c0fec=[_0x34b8e4(0x231),_0x34b8e4(0x20f),_0x34b8e4(0x1ed),_0x34b8e4(0x20c)];return _0x3c04af['some'](_0x432e30=>_0x432e30['test'](_0x543d94))||_0x3c0fec['includes'](_0x529433);}[a6_0x1ef057(0x1d7)](_0x5f411c,_0x3747d1=''){const _0x458cb1=a6_0x1ef057,_0x2d9ef7=[_0x458cb1(0x20f),_0x458cb1(0x20c)];if(_0x2d9ef7[_0x458cb1(0x1dc)](_0x3747d1))return!_0x5f411c['includes']('points')&&!_0x5f411c[_0x458cb1(0x1dc)](_0x458cb1(0x210))&&!_0x5f411c['includes'](_0x458cb1(0x1e9));return(_0x5f411c[_0x458cb1(0x1dc)](_0x458cb1(0x1fe))||_0x5f411c[_0x458cb1(0x1dc)](_0x458cb1(0x22e)))&&!_0x5f411c[_0x458cb1(0x1dc)]('points')&&!_0x5f411c[_0x458cb1(0x1dc)]('point_cloud')&&!_0x5f411c[_0x458cb1(0x1dc)]('depth_points');}['estimateTopicSize'](_0x3b1a2a,_0x19417a){const _0x4d027b=a6_0x1ef057,_0xfd6507={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0xfd6507[_0x19417a])return _0xfd6507[_0x19417a];if(_0x3b1a2a[_0x4d027b(0x1dc)]('point')||_0x3b1a2a['includes'](_0x4d027b(0x209)))return 0x190*0x400;if(_0x3b1a2a[_0x4d027b(0x1dc)](_0x4d027b(0x21c)))return 0x12c*0x400;if(_0x3b1a2a[_0x4d027b(0x1dc)](_0x4d027b(0x22e)))return 0x32*0x400;return 0x400;}[a6_0x1ef057(0x1f8)](_0x474c3f){const _0x381811=a6_0x1ef057;let _0x416ea5=this[_0x381811(0x20a)][_0x381811(0x22c)](_0x474c3f[_0x381811(0x1de)]);if(!_0x416ea5){console['log']('[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20'+_0x474c3f[_0x381811(0x1de)]);let _0x535e51=_0x381811(0x1ff);if(_0x474c3f[_0x381811(0x1de)][_0x381811(0x1dc)](_0x381811(0x1fe))&&_0x474c3f[_0x381811(0x1de)][_0x381811(0x1dc)](_0x381811(0x22e)))_0x535e51=_0x381811(0x20c);else{if(_0x474c3f['topic']['includes']('image'))_0x535e51=_0x381811(0x20f);else{if(_0x474c3f[_0x381811(0x1de)][_0x381811(0x1dc)]('point')||_0x474c3f[_0x381811(0x1de)]['includes']('cloud'))_0x535e51=_0x381811(0x231);else _0x474c3f['topic']['includes'](_0x381811(0x21b))&&(_0x535e51=_0x381811(0x1ed));}}const _0x4b23e2={'name':_0x474c3f['topic'],'type':_0x535e51};this[_0x381811(0x1e5)](_0x4b23e2),_0x416ea5=this[_0x381811(0x20a)][_0x381811(0x22c)](_0x474c3f[_0x381811(0x1de)]);}if(!_0x416ea5)return{'action':'forward','message':_0x474c3f};switch(_0x416ea5[_0x381811(0x1df)]){case _0x381811(0x1fb):return this[_0x381811(0x20d)](_0x474c3f[_0x381811(0x1de)],_0x416ea5[_0x381811(0x22b)])?{'action':_0x381811(0x219),'message':_0x474c3f}:{'action':_0x381811(0x202)};case _0x381811(0x1f7):return{'action':_0x381811(0x1e4)};case _0x381811(0x233):default:return{'action':_0x381811(0x219),'message':_0x474c3f};}}[a6_0x1ef057(0x20d)](_0x184ce6,_0x42c508){const _0x19cf70=a6_0x1ef057;if(!_0x42c508)return!![];const _0x1f56b5=Date[_0x19cf70(0x1ea)](),_0x127481=0x3e8/_0x42c508;!this[_0x19cf70(0x1e1)][_0x19cf70(0x22f)](_0x184ce6)&&this[_0x19cf70(0x1e1)][_0x19cf70(0x200)](_0x184ce6,0x0);const _0x17b184=this[_0x19cf70(0x1e1)][_0x19cf70(0x22c)](_0x184ce6),_0x1147d4=_0x1f56b5-_0x17b184;if(_0x1147d4>=_0x127481)return this[_0x19cf70(0x1e1)][_0x19cf70(0x200)](_0x184ce6,_0x1f56b5),!![];return![];}[a6_0x1ef057(0x226)](_0x1ddfb2){const _0x2e3bbe=a6_0x1ef057;return this[_0x2e3bbe(0x20a)][_0x2e3bbe(0x22c)](_0x1ddfb2);}[a6_0x1ef057(0x211)](){const _0x874c18=a6_0x1ef057;return Array['from'](this[_0x874c18(0x20a)][_0x874c18(0x1dd)]())[_0x874c18(0x218)](([_0x32afb1,_0x27bdb1])=>({'topic':_0x32afb1,..._0x27bdb1}));}[a6_0x1ef057(0x1da)](_0x460b01){const _0x389667=a6_0x1ef057,_0x5668b2=this[_0x389667(0x20a)][_0x389667(0x22c)](_0x460b01);return _0x5668b2?.[_0x389667(0x1df)]===_0x389667(0x236);}['getStatistics'](){const _0x240558=a6_0x1ef057,_0x10fe32={};return this[_0x240558(0x20a)][_0x240558(0x212)]((_0x4ae71b,_0x29a8e8)=>{const _0x1a2704=_0x240558;!_0x10fe32[_0x4ae71b[_0x1a2704(0x1df)]]&&(_0x10fe32[_0x4ae71b['strategy']]=0x0),_0x10fe32[_0x4ae71b['strategy']]++;}),{'totalTopics':this['topicStrategies'][_0x240558(0x1fc)],'strategies':_0x10fe32,'largeDataTopics':Array[_0x240558(0x1ec)](this['topicStrategies']['entries']())['filter'](([_0x12f6e2,_0x1b6696])=>_0x1b6696[_0x240558(0x1f9)])[_0x240558(0x218)](([_0x4864cb,_0x149f66])=>_0x4864cb)};}}module['exports']=new TopicManager();