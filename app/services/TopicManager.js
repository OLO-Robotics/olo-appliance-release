const a4_0x267f14=a4_0x2868;(function(_0x3471d1,_0x22f76b){const _0x1c7042=a4_0x2868,_0x501c40=_0x3471d1();while(!![]){try{const _0x5e7706=parseInt(_0x1c7042(0x1d7))/0x1*(-parseInt(_0x1c7042(0x1af))/0x2)+-parseInt(_0x1c7042(0x1c4))/0x3+-parseInt(_0x1c7042(0x190))/0x4+parseInt(_0x1c7042(0x1b3))/0x5+-parseInt(_0x1c7042(0x1b1))/0x6*(parseInt(_0x1c7042(0x1a7))/0x7)+-parseInt(_0x1c7042(0x1c6))/0x8+-parseInt(_0x1c7042(0x196))/0x9*(-parseInt(_0x1c7042(0x1a3))/0xa);if(_0x5e7706===_0x22f76b)break;else _0x501c40['push'](_0x501c40['shift']());}catch(_0x4ac513){_0x501c40['push'](_0x501c40['shift']());}}}(a4_0x373d,0x6e6e2));const a4_0x343a53=(function(){let _0x488aa5=!![];return function(_0x5065f2,_0xd34b31){const _0x58bc23=_0x488aa5?function(){if(_0xd34b31){const _0xd842ca=_0xd34b31['apply'](_0x5065f2,arguments);return _0xd34b31=null,_0xd842ca;}}:function(){};return _0x488aa5=![],_0x58bc23;};}()),a4_0x2417e5=a4_0x343a53(this,function(){const _0x1f3337=a4_0x2868;return a4_0x2417e5[_0x1f3337(0x1d4)]()[_0x1f3337(0x19b)](_0x1f3337(0x18e))[_0x1f3337(0x1d4)]()[_0x1f3337(0x185)](a4_0x2417e5)[_0x1f3337(0x19b)](_0x1f3337(0x18e));});a4_0x2417e5();function a4_0x2868(_0x25c90b,_0x39c665){const _0x14c14f=a4_0x373d();return a4_0x2868=function(_0x2417e5,_0x343a53){_0x2417e5=_0x2417e5-0x17e;let _0x373da3=_0x14c14f[_0x2417e5];return _0x373da3;},a4_0x2868(_0x25c90b,_0x39c665);}const {execSync}=require(a4_0x267f14(0x1aa));class TopicManager{constructor(){const _0x384602=a4_0x267f14;this['topicStrategies']=new Map(),this[_0x384602(0x1c7)]=new Map(),this['discoveryInProgress']=![],this[_0x384602(0x1c5)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x384602(0x18c),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x384602(0x183)]('[TopicManager]\x20Initialised');}['loadConfig'](_0x307dfc){const _0x2f3f28=a4_0x267f14;if(_0x307dfc[_0x2f3f28(0x1d1)]){const _0x3eac5d=_0x307dfc[_0x2f3f28(0x1d1)];_0x3eac5d[_0x2f3f28(0x1cb)]&&(this[_0x2f3f28(0x1c5)][_0x2f3f28(0x1cb)]=_0x3eac5d[_0x2f3f28(0x1cb)]),_0x3eac5d[_0x2f3f28(0x1bc)]&&(this['config'][_0x2f3f28(0x1bc)]=_0x3eac5d[_0x2f3f28(0x1bc)]),_0x3eac5d[_0x2f3f28(0x192)]&&(this[_0x2f3f28(0x1c5)][_0x2f3f28(0x1c0)]={..._0x3eac5d[_0x2f3f28(0x192)]}),_0x3eac5d[_0x2f3f28(0x1da)]&&(this[_0x2f3f28(0x1c5)][_0x2f3f28(0x1da)]={...this['config'][_0x2f3f28(0x1da)],..._0x3eac5d['throttleFrequencies']}),console['log'](_0x2f3f28(0x19f),this[_0x2f3f28(0x1c5)]);}}async[a4_0x267f14(0x1db)](_0x22fd33){const _0x135b7b=a4_0x267f14;if(this[_0x135b7b(0x1ba)]||!_0x22fd33)return;this[_0x135b7b(0x1ba)]=!![],console[_0x135b7b(0x183)]('[TopicManager]\x20Starting\x20topic\x20discovery...');try{await new Promise((_0x3c1858,_0x85ba4)=>{const _0x14760a=_0x135b7b;_0x22fd33[_0x14760a(0x187)](_0x48eb92=>{const _0x2e2f66=_0x14760a,_0x309497=_0x48eb92[_0x2e2f66(0x188)][_0x2e2f66(0x1b2)]((_0x1bb652,_0x37590e)=>({'name':_0x1bb652,'type':_0x48eb92[_0x2e2f66(0x18b)][_0x37590e]}));console['log'](_0x2e2f66(0x184)+_0x309497[_0x2e2f66(0x1b7)]+_0x2e2f66(0x1a8));for(const _0x520467 of _0x309497){this['analyzeTopicStrategy'](_0x520467);}console['log'](_0x2e2f66(0x1d3)),console[_0x2e2f66(0x183)](_0x2e2f66(0x1ae),Array[_0x2e2f66(0x1d2)](this[_0x2e2f66(0x1cd)]['entries']())),_0x3c1858();},_0x12e41a=>{const _0x5bbd73=_0x14760a;console[_0x5bbd73(0x197)](_0x5bbd73(0x1ac),_0x12e41a),_0x85ba4(_0x12e41a);});});}catch(_0x14bacd){console['error'](_0x135b7b(0x1dc),_0x14bacd);}finally{this[_0x135b7b(0x1ba)]=![];}}[a4_0x267f14(0x1b8)](_0x35aa53){const _0x19a262=a4_0x267f14,_0x56d172=this[_0x19a262(0x1a4)](_0x35aa53);this[_0x19a262(0x1cd)][_0x19a262(0x1b0)](_0x35aa53[_0x19a262(0x1d9)],{'type':_0x35aa53[_0x19a262(0x1a6)],'strategy':_0x56d172[_0x19a262(0x1a6)],'reason':_0x56d172['reason'],'maxFrequency':_0x56d172['maxFrequency'],'isLargeData':_0x56d172[_0x19a262(0x182)],'estimatedSize':_0x56d172['estimatedSize']}),console[_0x19a262(0x183)](_0x19a262(0x1dd)+_0x35aa53[_0x19a262(0x1d9)]+':\x20'+_0x56d172['type']+'\x20('+_0x56d172[_0x19a262(0x1ce)]+')');}[a4_0x267f14(0x1a4)](_0x124ef9){const _0xac449e=a4_0x267f14;if(this[_0xac449e(0x1c5)]['strategiesConfig'][_0x124ef9[_0xac449e(0x1d9)]]){const _0x38b94e=this[_0xac449e(0x1c5)][_0xac449e(0x1c0)][_0x124ef9[_0xac449e(0x1d9)]];return this['parseStrategyConfig'](_0x38b94e,_0xac449e(0x1ca));}for(const [_0x1e858e,_0xf04663]of Object[_0xac449e(0x19d)](this[_0xac449e(0x1c5)]['strategiesConfig'])){if(_0x124ef9['name']['includes'](_0x1e858e[_0xac449e(0x18d)]('/','')))return this['parseStrategyConfig'](_0xf04663,_0xac449e(0x180));}if(this[_0xac449e(0x17f)](_0x124ef9[_0xac449e(0x1d9)],_0x124ef9[_0xac449e(0x1a6)])){const _0x410172=this[_0xac449e(0x18a)](_0x124ef9[_0xac449e(0x1d9)],_0x124ef9[_0xac449e(0x1a6)]);return{'type':'webrtc','reason':'video_webrtc_streaming','isLargeData':!![],'estimatedSize':_0x410172,'maxFrequency':null};}const _0x1bba88=this[_0xac449e(0x1a9)](_0x124ef9['name'],_0x124ef9['type']),_0x35ebfa=this[_0xac449e(0x18a)](_0x124ef9[_0xac449e(0x1d9)],_0x124ef9[_0xac449e(0x1a6)]);if(_0x1bba88||_0x35ebfa>this['config'][_0xac449e(0x1cb)]){let _0x1540c6=this[_0xac449e(0x1c5)][_0xac449e(0x1da)][_0x124ef9[_0xac449e(0x1a6)]]||0xa,_0x4de973=_0xac449e(0x1a1);if(_0x124ef9[_0xac449e(0x1a6)][_0xac449e(0x1b5)]('PointCloud2')||_0x124ef9[_0xac449e(0x1d9)][_0xac449e(0x1b5)](_0xac449e(0x189)))_0x1540c6=this['config']['throttleFrequencies'][_0x124ef9[_0xac449e(0x1a6)]]||0x5,_0x4de973='point_cloud_throttled';else{if(_0x124ef9[_0xac449e(0x1a6)][_0xac449e(0x1b5)](_0xac449e(0x1d6))||_0x124ef9['name'][_0xac449e(0x1b5)]('scan'))_0x1540c6=this[_0xac449e(0x1c5)][_0xac449e(0x1da)][_0x124ef9[_0xac449e(0x1a6)]]||0xf,_0x4de973=_0xac449e(0x199);else _0x124ef9[_0xac449e(0x1a6)][_0xac449e(0x1b5)](_0xac449e(0x195))&&(_0x1540c6=this[_0xac449e(0x1c5)][_0xac449e(0x1da)][_0x124ef9[_0xac449e(0x1a6)]]||0xa,_0x4de973=_0xac449e(0x19a));}return{'type':_0xac449e(0x1d8),'reason':_0x4de973,'isLargeData':!![],'estimatedSize':_0x35ebfa,'maxFrequency':_0x1540c6};}return{'type':_0xac449e(0x1b9),'reason':_0xac449e(0x1cc),'isLargeData':![],'estimatedSize':_0x35ebfa,'maxFrequency':null};}['parseStrategyConfig'](_0x43b56a,_0x217297){const _0x2ee266=a4_0x267f14;if(_0x43b56a[_0x2ee266(0x1b5)](':')){const [_0x417394,_0x2241a3]=_0x43b56a[_0x2ee266(0x1be)](':');return{'type':_0x417394,'reason':_0x217297,'isLargeData':!![],'maxFrequency':_0x417394===_0x2ee266(0x1d8)?parseFloat(_0x2241a3):null,'estimatedSize':this[_0x2ee266(0x1c5)]['largeDataThreshold']+0x1};}return{'type':_0x43b56a,'reason':_0x217297,'isLargeData':_0x43b56a!=='websocket','maxFrequency':null,'estimatedSize':this[_0x2ee266(0x1c5)][_0x2ee266(0x1cb)]+0x1};}[a4_0x267f14(0x1a9)](_0x5b7a7f,_0x4a5f49){const _0x2a60f3=a4_0x267f14,_0x2196d9=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x1e0e45=[_0x2a60f3(0x19c),_0x2a60f3(0x1a2),_0x2a60f3(0x1de),_0x2a60f3(0x1ab)];return _0x2196d9[_0x2a60f3(0x1b4)](_0x1bb886=>_0x1bb886[_0x2a60f3(0x1c2)](_0x5b7a7f))||_0x1e0e45['includes'](_0x4a5f49);}[a4_0x267f14(0x17f)](_0x5565e8,_0x560971=''){const _0xace179=a4_0x267f14,_0x48b7cb=['sensor_msgs/msg/Image',_0xace179(0x1ab)];if(_0x48b7cb[_0xace179(0x1b5)](_0x560971))return!_0x5565e8['includes'](_0xace179(0x189))&&!_0x5565e8[_0xace179(0x1b5)](_0xace179(0x1cf))&&!_0x5565e8[_0xace179(0x1b5)](_0xace179(0x1ad));return(_0x5565e8[_0xace179(0x1b5)](_0xace179(0x17e))||_0x5565e8[_0xace179(0x1b5)](_0xace179(0x1c9)))&&!_0x5565e8[_0xace179(0x1b5)]('points')&&!_0x5565e8[_0xace179(0x1b5)](_0xace179(0x1cf))&&!_0x5565e8[_0xace179(0x1b5)](_0xace179(0x1ad));}[a4_0x267f14(0x18a)](_0x5340a5,_0x200688){const _0x50f737=a4_0x267f14,_0x420695={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x420695[_0x200688])return _0x420695[_0x200688];if(_0x5340a5[_0x50f737(0x1b5)](_0x50f737(0x1c3))||_0x5340a5[_0x50f737(0x1b5)](_0x50f737(0x1c8)))return 0x190*0x400;if(_0x5340a5[_0x50f737(0x1b5)]('image_raw'))return 0x12c*0x400;if(_0x5340a5['includes']('compressed'))return 0x32*0x400;return 0x400;}[a4_0x267f14(0x1bd)](_0x2e3d52){const _0x4e6109=a4_0x267f14;let _0x4f11d2=this[_0x4e6109(0x1cd)][_0x4e6109(0x186)](_0x2e3d52[_0x4e6109(0x1bf)]);if(!_0x4f11d2){console[_0x4e6109(0x183)]('[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20'+_0x2e3d52[_0x4e6109(0x1bf)]);let _0x286023='unknown';if(_0x2e3d52[_0x4e6109(0x1bf)][_0x4e6109(0x1b5)](_0x4e6109(0x17e))&&_0x2e3d52['topic'][_0x4e6109(0x1b5)]('compressed'))_0x286023=_0x4e6109(0x1ab);else{if(_0x2e3d52['topic'][_0x4e6109(0x1b5)](_0x4e6109(0x17e)))_0x286023=_0x4e6109(0x1a2);else{if(_0x2e3d52['topic']['includes']('point')||_0x2e3d52[_0x4e6109(0x1bf)][_0x4e6109(0x1b5)](_0x4e6109(0x1c8)))_0x286023=_0x4e6109(0x19c);else _0x2e3d52[_0x4e6109(0x1bf)][_0x4e6109(0x1b5)]('scan')&&(_0x286023=_0x4e6109(0x1de));}}const _0x55d654={'name':_0x2e3d52[_0x4e6109(0x1bf)],'type':_0x286023};this[_0x4e6109(0x1b8)](_0x55d654),_0x4f11d2=this[_0x4e6109(0x1cd)][_0x4e6109(0x186)](_0x2e3d52[_0x4e6109(0x1bf)]);}if(!_0x4f11d2)return{'action':_0x4e6109(0x1d0),'message':_0x2e3d52};switch(_0x4f11d2[_0x4e6109(0x18f)]){case'throttle':return this[_0x4e6109(0x19e)](_0x2e3d52[_0x4e6109(0x1bf)],_0x4f11d2[_0x4e6109(0x1bb)])?{'action':_0x4e6109(0x1d0),'message':_0x2e3d52}:{'action':'throttle_skip'};case'webrtc':return{'action':_0x4e6109(0x193)};case'websocket':default:return{'action':_0x4e6109(0x1d0),'message':_0x2e3d52};}}['shouldThrottle'](_0x1fc24c,_0x14cfb2){const _0x74bb2d=a4_0x267f14;if(!_0x14cfb2)return!![];const _0x3021b6=Date[_0x74bb2d(0x1c1)](),_0x1cab99=0x3e8/_0x14cfb2;!this['lastMessageTimes'][_0x74bb2d(0x1a5)](_0x1fc24c)&&this[_0x74bb2d(0x1c7)][_0x74bb2d(0x1b0)](_0x1fc24c,0x0);const _0x14e0eb=this[_0x74bb2d(0x1c7)][_0x74bb2d(0x186)](_0x1fc24c),_0x58e413=_0x3021b6-_0x14e0eb;if(_0x58e413>=_0x1cab99)return this[_0x74bb2d(0x1c7)][_0x74bb2d(0x1b0)](_0x1fc24c,_0x3021b6),!![];return![];}[a4_0x267f14(0x1d5)](_0x18ea2c){const _0x367c23=a4_0x267f14;return this[_0x367c23(0x1cd)][_0x367c23(0x186)](_0x18ea2c);}[a4_0x267f14(0x181)](){const _0x2ea76b=a4_0x267f14;return Array['from'](this[_0x2ea76b(0x1cd)][_0x2ea76b(0x19d)]())[_0x2ea76b(0x1b2)](([_0x33e264,_0x38fca6])=>({'topic':_0x33e264,..._0x38fca6}));}[a4_0x267f14(0x198)](_0x205b7a){const _0x66a4db=a4_0x267f14,_0x5db4b6=this[_0x66a4db(0x1cd)]['get'](_0x205b7a);return _0x5db4b6?.[_0x66a4db(0x18f)]===_0x66a4db(0x18c);}[a4_0x267f14(0x1b6)](){const _0x344594=a4_0x267f14,_0x4b371f={};return this[_0x344594(0x1cd)][_0x344594(0x1a0)]((_0x1aa4ba,_0xe90ad4)=>{const _0x66cf7c=_0x344594;!_0x4b371f[_0x1aa4ba['strategy']]&&(_0x4b371f[_0x1aa4ba[_0x66cf7c(0x18f)]]=0x0),_0x4b371f[_0x1aa4ba[_0x66cf7c(0x18f)]]++;}),{'totalTopics':this[_0x344594(0x1cd)][_0x344594(0x191)],'strategies':_0x4b371f,'largeDataTopics':Array['from'](this[_0x344594(0x1cd)][_0x344594(0x19d)]())[_0x344594(0x194)](([_0x4d00e4,_0x572427])=>_0x572427['isLargeData'])['map'](([_0x559eba,_0x414f0f])=>_0x559eba)};}}module['exports']=new TopicManager();function a4_0x373d(){const _0x5544bd=['sensor_msgs/msg/PointCloud2','entries','shouldThrottle','[TopicManager]\x20Loaded\x20configuration:','forEach','large_data_throttled','sensor_msgs/msg/Image','1060ZpbLTL','determineTopicStrategy','has','type','34223UyIPLz','\x20topics','isLargeDataTopic','child_process','sensor_msgs/msg/CompressedImage','[TopicManager]\x20Error\x20getting\x20topics:','depth_points','[TopicManager]\x20Strategies:','3374zZnICX','set','126pCIGou','map','2677255ebtQpy','some','includes','getStatistics','length','analyzeTopicStrategy','websocket','discoveryInProgress','maxFrequency','defaultLargeDataStrategy','handleMessage','split','topic','strategiesConfig','now','test','point','345468kHdixN','config','723368gHyknU','lastMessageTimes','cloud','compressed','user_configured','largeDataThreshold','normal_size','topicStrategies','reason','point_cloud','forward','topicHandling','from','[TopicManager]\x20Topic\x20discovery\x20completed','toString','getTopicStrategy','LaserScan','148vOiFuc','throttle','name','throttleFrequencies','discoverTopics','[TopicManager]\x20Topic\x20discovery\x20failed:','[TopicManager]\x20Topic\x20','sensor_msgs/msg/LaserScan','image','isCameraTopic','pattern_configured','getManagedTopics','isLargeData','log','[TopicManager]\x20Found\x20','constructor','get','getTopics','topics','points','estimateTopicSize','types','webrtc_only','replace','(((.+)+)+)+$','strategy','1429652zmGSyM','size','strategies','webrtc_skip','filter','Image','70659zYcjmh','error','shouldUseWebRTC','laser_scan_throttled','image_throttled','search'];a4_0x373d=function(){return _0x5544bd;};return a4_0x373d();}