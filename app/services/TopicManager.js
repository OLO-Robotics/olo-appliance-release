const a6_0x3d0303=a6_0x5ae7;(function(_0x26f349,_0x22b53c){const _0x3c72e8=a6_0x5ae7,_0x2e2319=_0x26f349();while(!![]){try{const _0x71dd02=-parseInt(_0x3c72e8(0x124))/0x1*(parseInt(_0x3c72e8(0x12d))/0x2)+-parseInt(_0x3c72e8(0x118))/0x3*(parseInt(_0x3c72e8(0x104))/0x4)+parseInt(_0x3c72e8(0x119))/0x5*(parseInt(_0x3c72e8(0x13b))/0x6)+-parseInt(_0x3c72e8(0xe8))/0x7*(parseInt(_0x3c72e8(0x133))/0x8)+parseInt(_0x3c72e8(0xeb))/0x9*(-parseInt(_0x3c72e8(0xe3))/0xa)+-parseInt(_0x3c72e8(0xf6))/0xb*(-parseInt(_0x3c72e8(0x110))/0xc)+parseInt(_0x3c72e8(0x11d))/0xd;if(_0x71dd02===_0x22b53c)break;else _0x2e2319['push'](_0x2e2319['shift']());}catch(_0x3ff882){_0x2e2319['push'](_0x2e2319['shift']());}}}(a6_0x40b6,0x36aac));const a6_0x2e26a6=(function(){let _0x407bea=!![];return function(_0x5e8cec,_0x2250fb){const _0x138e7e=_0x407bea?function(){const _0x5d5121=a6_0x5ae7;if(_0x2250fb){const _0x212f7b=_0x2250fb[_0x5d5121(0x138)](_0x5e8cec,arguments);return _0x2250fb=null,_0x212f7b;}}:function(){};return _0x407bea=![],_0x138e7e;};}()),a6_0x191e57=a6_0x2e26a6(this,function(){const _0x326a88=a6_0x5ae7;return a6_0x191e57[_0x326a88(0xfd)]()[_0x326a88(0x13a)]('(((.+)+)+)+$')[_0x326a88(0xfd)]()['constructor'](a6_0x191e57)['search'](_0x326a88(0x142));});function a6_0x5ae7(_0x1b9828,_0x2c2c9d){const _0x60fc26=a6_0x40b6();return a6_0x5ae7=function(_0x191e57,_0x2e26a6){_0x191e57=_0x191e57-0xe0;let _0x40b629=_0x60fc26[_0x191e57];return _0x40b629;},a6_0x5ae7(_0x1b9828,_0x2c2c9d);}a6_0x191e57();const {execSync}=require(a6_0x3d0303(0x127));function a6_0x40b6(){const _0x222b59=['getTopics','config','[TopicManager]\x20Topic\x20discovery\x20failed:','length','2nGxTsH','point_cloud','cloud','[TopicManager]\x20Initialised','sensor_msgs/msg/LaserScan','size','1232656uWpAWF','[TopicManager]\x20Topic\x20discovery\x20completed','compressed','throttleFrequencies','error','apply','test','search','6JVgZXF','exports','topic','pattern_configured','webrtc','point','loadConfig','(((.+)+)+)+$','topicHandling','sensor_msgs/msg/CompressedImage','entries','isLargeData','topicStrategies','discoveryInProgress','170070eDTCkT','Image','websocket','laser_scan_throttled','log','14Okeyab','point_cloud_throttled','determineTopicStrategy','45DIfird','lastMessageTimes','throttle','getTopicStrategy','shouldUseWebRTC','maxFrequency','unknown','strategy','[TopicManager]\x20Strategies:','normal_size','depth_points','88puUKbR','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','scan','replace','video_webrtc_streaming','topics','map','toString','type','[TopicManager]\x20Topic\x20','[TopicManager]\x20Found\x20','some','parseStrategyConfig','isLargeDataTopic','86468vMTnYB','strategiesConfig','reason','now','forEach','strategies','isCameraTopic','largeDataThreshold','webrtc_skip','defaultLargeDataStrategy','getManagedTopics','types','1440VGuMBU','[TopicManager]\x20Loaded\x20configuration:','forward','from','analyzeTopicStrategy','filter','has','image','6zZHpjD','1259245ezbcxw','webrtc_only','image_throttled','includes','8547643DifLvi','get','\x20topics','name','points','estimateTopicSize','sensor_msgs/msg/Image','249971EibSER','split','user_configured','child_process','sensor_msgs/msg/PointCloud2'];a6_0x40b6=function(){return _0x222b59;};return a6_0x40b6();}class TopicManager{constructor(){const _0x373bcf=a6_0x3d0303;this[_0x373bcf(0xe1)]=new Map(),this['lastMessageTimes']=new Map(),this[_0x373bcf(0xe2)]=![],this[_0x373bcf(0x12a)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x373bcf(0x11a),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console['log'](_0x373bcf(0x130));}[a6_0x3d0303(0x141)](_0x3a9ed8){const _0x2b3c27=a6_0x3d0303;if(_0x3a9ed8[_0x2b3c27(0x143)]){const _0xad1a8c=_0x3a9ed8[_0x2b3c27(0x143)];_0xad1a8c[_0x2b3c27(0x10b)]&&(this['config'][_0x2b3c27(0x10b)]=_0xad1a8c[_0x2b3c27(0x10b)]),_0xad1a8c[_0x2b3c27(0x10d)]&&(this['config']['defaultLargeDataStrategy']=_0xad1a8c['defaultLargeDataStrategy']),_0xad1a8c['strategies']&&(this[_0x2b3c27(0x12a)]['strategiesConfig']={..._0xad1a8c[_0x2b3c27(0x109)]}),_0xad1a8c['throttleFrequencies']&&(this['config'][_0x2b3c27(0x136)]={...this[_0x2b3c27(0x12a)][_0x2b3c27(0x136)],..._0xad1a8c[_0x2b3c27(0x136)]}),console[_0x2b3c27(0xe7)](_0x2b3c27(0x111),this[_0x2b3c27(0x12a)]);}}async['discoverTopics'](_0x68d81f){const _0x3e9c0c=a6_0x3d0303;if(this[_0x3e9c0c(0xe2)]||!_0x68d81f)return;this[_0x3e9c0c(0xe2)]=!![],console[_0x3e9c0c(0xe7)]('[TopicManager]\x20Starting\x20topic\x20discovery...');try{await new Promise((_0x30c5e1,_0x1f2b35)=>{const _0x5891cd=_0x3e9c0c;_0x68d81f[_0x5891cd(0x129)](_0x77bfd9=>{const _0x101b25=_0x5891cd,_0x37360e=_0x77bfd9[_0x101b25(0xfb)]['map']((_0x2e574a,_0x3a619e)=>({'name':_0x2e574a,'type':_0x77bfd9[_0x101b25(0x10f)][_0x3a619e]}));console[_0x101b25(0xe7)](_0x101b25(0x100)+_0x37360e[_0x101b25(0x12c)]+_0x101b25(0x11f));for(const _0x4ae14c of _0x37360e){this[_0x101b25(0x114)](_0x4ae14c);}console[_0x101b25(0xe7)](_0x101b25(0x134)),console[_0x101b25(0xe7)](_0x101b25(0xf3),Array['from'](this[_0x101b25(0xe1)]['entries']())),_0x30c5e1();},_0x3ab4d6=>{const _0x4cd0e5=_0x5891cd;console[_0x4cd0e5(0x137)]('[TopicManager]\x20Error\x20getting\x20topics:',_0x3ab4d6),_0x1f2b35(_0x3ab4d6);});});}catch(_0x1302c3){console[_0x3e9c0c(0x137)](_0x3e9c0c(0x12b),_0x1302c3);}finally{this[_0x3e9c0c(0xe2)]=![];}}[a6_0x3d0303(0x114)](_0x5b0f45){const _0x23bd09=a6_0x3d0303,_0x88aabc=this['determineTopicStrategy'](_0x5b0f45);this[_0x23bd09(0xe1)]['set'](_0x5b0f45[_0x23bd09(0x120)],{'type':_0x5b0f45[_0x23bd09(0xfe)],'strategy':_0x88aabc[_0x23bd09(0xfe)],'reason':_0x88aabc[_0x23bd09(0x106)],'maxFrequency':_0x88aabc['maxFrequency'],'isLargeData':_0x88aabc['isLargeData'],'estimatedSize':_0x88aabc['estimatedSize']}),console[_0x23bd09(0xe7)](_0x23bd09(0xff)+_0x5b0f45['name']+':\x20'+_0x88aabc[_0x23bd09(0xfe)]+'\x20('+_0x88aabc[_0x23bd09(0x106)]+')');}[a6_0x3d0303(0xea)](_0x2aa4fa){const _0x519740=a6_0x3d0303;if(this[_0x519740(0x12a)]['strategiesConfig'][_0x2aa4fa['name']]){const _0xa9b1f6=this[_0x519740(0x12a)][_0x519740(0x105)][_0x2aa4fa[_0x519740(0x120)]];return this[_0x519740(0x102)](_0xa9b1f6,_0x519740(0x126));}for(const [_0xb34ffd,_0x1afed3]of Object[_0x519740(0x145)](this[_0x519740(0x12a)]['strategiesConfig'])){if(_0x2aa4fa[_0x519740(0x120)][_0x519740(0x11c)](_0xb34ffd[_0x519740(0xf9)]('/','')))return this[_0x519740(0x102)](_0x1afed3,_0x519740(0x13e));}if(this['isCameraTopic'](_0x2aa4fa[_0x519740(0x120)],_0x2aa4fa[_0x519740(0xfe)])){const _0x1604bf=this['estimateTopicSize'](_0x2aa4fa['name'],_0x2aa4fa[_0x519740(0xfe)]);return{'type':'webrtc','reason':_0x519740(0xfa),'isLargeData':!![],'estimatedSize':_0x1604bf,'maxFrequency':null};}const _0x2fb119=this['isLargeDataTopic'](_0x2aa4fa[_0x519740(0x120)],_0x2aa4fa[_0x519740(0xfe)]),_0x23d65f=this[_0x519740(0x122)](_0x2aa4fa[_0x519740(0x120)],_0x2aa4fa[_0x519740(0xfe)]);if(_0x2fb119||_0x23d65f>this[_0x519740(0x12a)][_0x519740(0x10b)]){let _0x29f72e=this['config'][_0x519740(0x136)][_0x2aa4fa[_0x519740(0xfe)]]||0xa,_0x2568ca='large_data_throttled';if(_0x2aa4fa[_0x519740(0xfe)][_0x519740(0x11c)]('PointCloud2')||_0x2aa4fa[_0x519740(0x120)][_0x519740(0x11c)](_0x519740(0x121)))_0x29f72e=this[_0x519740(0x12a)][_0x519740(0x136)][_0x2aa4fa['type']]||0x5,_0x2568ca=_0x519740(0xe9);else{if(_0x2aa4fa[_0x519740(0xfe)][_0x519740(0x11c)]('LaserScan')||_0x2aa4fa[_0x519740(0x120)]['includes'](_0x519740(0xf8)))_0x29f72e=this['config'][_0x519740(0x136)][_0x2aa4fa['type']]||0xf,_0x2568ca=_0x519740(0xe6);else _0x2aa4fa[_0x519740(0xfe)][_0x519740(0x11c)](_0x519740(0xe4))&&(_0x29f72e=this[_0x519740(0x12a)][_0x519740(0x136)][_0x2aa4fa[_0x519740(0xfe)]]||0xa,_0x2568ca=_0x519740(0x11b));}return{'type':'throttle','reason':_0x2568ca,'isLargeData':!![],'estimatedSize':_0x23d65f,'maxFrequency':_0x29f72e};}return{'type':_0x519740(0xe5),'reason':_0x519740(0xf4),'isLargeData':![],'estimatedSize':_0x23d65f,'maxFrequency':null};}[a6_0x3d0303(0x102)](_0x4c2f21,_0x3043ff){const _0x1484e3=a6_0x3d0303;if(_0x4c2f21[_0x1484e3(0x11c)](':')){const [_0x34f082,_0x27742c]=_0x4c2f21[_0x1484e3(0x125)](':');return{'type':_0x34f082,'reason':_0x3043ff,'isLargeData':!![],'maxFrequency':_0x34f082===_0x1484e3(0xed)?parseFloat(_0x27742c):null,'estimatedSize':this[_0x1484e3(0x12a)][_0x1484e3(0x10b)]+0x1};}return{'type':_0x4c2f21,'reason':_0x3043ff,'isLargeData':_0x4c2f21!=='websocket','maxFrequency':null,'estimatedSize':this[_0x1484e3(0x12a)]['largeDataThreshold']+0x1};}[a6_0x3d0303(0x103)](_0x2740d9,_0x105ee0){const _0x2fac3d=a6_0x3d0303,_0xfd3349=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x2d6d44=[_0x2fac3d(0x128),_0x2fac3d(0x123),'sensor_msgs/msg/LaserScan',_0x2fac3d(0x144)];return _0xfd3349[_0x2fac3d(0x101)](_0x25205a=>_0x25205a[_0x2fac3d(0x139)](_0x2740d9))||_0x2d6d44[_0x2fac3d(0x11c)](_0x105ee0);}[a6_0x3d0303(0x10a)](_0x552807,_0x3cf01e=''){const _0x38f0c3=a6_0x3d0303,_0x18da4b=[_0x38f0c3(0x123),_0x38f0c3(0x144)];if(_0x18da4b[_0x38f0c3(0x11c)](_0x3cf01e))return!_0x552807['includes'](_0x38f0c3(0x121))&&!_0x552807[_0x38f0c3(0x11c)](_0x38f0c3(0x12e))&&!_0x552807['includes']('depth_points');return(_0x552807[_0x38f0c3(0x11c)](_0x38f0c3(0x117))||_0x552807['includes']('compressed'))&&!_0x552807['includes'](_0x38f0c3(0x121))&&!_0x552807[_0x38f0c3(0x11c)](_0x38f0c3(0x12e))&&!_0x552807[_0x38f0c3(0x11c)](_0x38f0c3(0xf5));}['estimateTopicSize'](_0x1dc9c1,_0x5351b1){const _0x80b139=a6_0x3d0303,_0xf8d65c={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0xf8d65c[_0x5351b1])return _0xf8d65c[_0x5351b1];if(_0x1dc9c1[_0x80b139(0x11c)](_0x80b139(0x140))||_0x1dc9c1[_0x80b139(0x11c)](_0x80b139(0x12f)))return 0x190*0x400;if(_0x1dc9c1[_0x80b139(0x11c)]('image_raw'))return 0x12c*0x400;if(_0x1dc9c1[_0x80b139(0x11c)](_0x80b139(0x135)))return 0x32*0x400;return 0x400;}['handleMessage'](_0xdb7602){const _0x1c5ec1=a6_0x3d0303;let _0x294fce=this[_0x1c5ec1(0xe1)][_0x1c5ec1(0x11e)](_0xdb7602[_0x1c5ec1(0x13d)]);if(!_0x294fce){console['log'](_0x1c5ec1(0xf7)+_0xdb7602['topic']);let _0xfea620=_0x1c5ec1(0xf1);if(_0xdb7602[_0x1c5ec1(0x13d)]['includes'](_0x1c5ec1(0x117))&&_0xdb7602[_0x1c5ec1(0x13d)][_0x1c5ec1(0x11c)]('compressed'))_0xfea620=_0x1c5ec1(0x144);else{if(_0xdb7602[_0x1c5ec1(0x13d)]['includes'](_0x1c5ec1(0x117)))_0xfea620=_0x1c5ec1(0x123);else{if(_0xdb7602['topic']['includes']('point')||_0xdb7602[_0x1c5ec1(0x13d)]['includes'](_0x1c5ec1(0x12f)))_0xfea620=_0x1c5ec1(0x128);else _0xdb7602[_0x1c5ec1(0x13d)][_0x1c5ec1(0x11c)]('scan')&&(_0xfea620=_0x1c5ec1(0x131));}}const _0x3be8b7={'name':_0xdb7602['topic'],'type':_0xfea620};this['analyzeTopicStrategy'](_0x3be8b7),_0x294fce=this[_0x1c5ec1(0xe1)]['get'](_0xdb7602['topic']);}if(!_0x294fce)return{'action':_0x1c5ec1(0x112),'message':_0xdb7602};switch(_0x294fce[_0x1c5ec1(0xf2)]){case'throttle':return this['shouldThrottle'](_0xdb7602[_0x1c5ec1(0x13d)],_0x294fce[_0x1c5ec1(0xf0)])?{'action':_0x1c5ec1(0x112),'message':_0xdb7602}:{'action':'throttle_skip'};case _0x1c5ec1(0x13f):return{'action':_0x1c5ec1(0x10c)};case _0x1c5ec1(0xe5):default:return{'action':_0x1c5ec1(0x112),'message':_0xdb7602};}}['shouldThrottle'](_0x189e38,_0x4e122b){const _0x261aac=a6_0x3d0303;if(!_0x4e122b)return!![];const _0x4f044e=Date[_0x261aac(0x107)](),_0x3d7403=0x3e8/_0x4e122b;!this[_0x261aac(0xec)][_0x261aac(0x116)](_0x189e38)&&this[_0x261aac(0xec)]['set'](_0x189e38,0x0);const _0x371f86=this[_0x261aac(0xec)][_0x261aac(0x11e)](_0x189e38),_0x48814c=_0x4f044e-_0x371f86;if(_0x48814c>=_0x3d7403)return this['lastMessageTimes']['set'](_0x189e38,_0x4f044e),!![];return![];}[a6_0x3d0303(0xee)](_0x35eae7){const _0x1e17b3=a6_0x3d0303;return this['topicStrategies'][_0x1e17b3(0x11e)](_0x35eae7);}[a6_0x3d0303(0x10e)](){const _0x23f393=a6_0x3d0303;return Array[_0x23f393(0x113)](this[_0x23f393(0xe1)]['entries']())[_0x23f393(0xfc)](([_0x413d19,_0x3c5628])=>({'topic':_0x413d19,..._0x3c5628}));}[a6_0x3d0303(0xef)](_0x1106cc){const _0x241583=a6_0x3d0303,_0x5d6e38=this[_0x241583(0xe1)]['get'](_0x1106cc);return _0x5d6e38?.[_0x241583(0xf2)]===_0x241583(0x11a);}['getStatistics'](){const _0x212bda=a6_0x3d0303,_0x2d292a={};return this['topicStrategies'][_0x212bda(0x108)]((_0x3a5e28,_0x4a3120)=>{const _0x326b8c=_0x212bda;!_0x2d292a[_0x3a5e28['strategy']]&&(_0x2d292a[_0x3a5e28[_0x326b8c(0xf2)]]=0x0),_0x2d292a[_0x3a5e28[_0x326b8c(0xf2)]]++;}),{'totalTopics':this['topicStrategies'][_0x212bda(0x132)],'strategies':_0x2d292a,'largeDataTopics':Array[_0x212bda(0x113)](this['topicStrategies'][_0x212bda(0x145)]())[_0x212bda(0x115)](([_0x4913c8,_0x5e5626])=>_0x5e5626[_0x212bda(0xe0)])[_0x212bda(0xfc)](([_0x4db6d0,_0x4bf029])=>_0x4db6d0)};}}module[a6_0x3d0303(0x13c)]=new TopicManager();