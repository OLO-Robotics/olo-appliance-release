const a4_0x22fcd2=a4_0x4809;function a4_0x4809(_0x2e4817,_0x7b7b9c){const _0xc15170=a4_0xbec4();return a4_0x4809=function(_0xd544af,_0x2cec12){_0xd544af=_0xd544af-0x179;let _0xbec440=_0xc15170[_0xd544af];return _0xbec440;},a4_0x4809(_0x2e4817,_0x7b7b9c);}(function(_0x12c0e9,_0x40c54c){const _0x59100d=a4_0x4809,_0x44f766=_0x12c0e9();while(!![]){try{const _0xc60394=parseInt(_0x59100d(0x180))/0x1*(-parseInt(_0x59100d(0x1b8))/0x2)+parseInt(_0x59100d(0x1d0))/0x3+parseInt(_0x59100d(0x1b9))/0x4+parseInt(_0x59100d(0x1be))/0x5+parseInt(_0x59100d(0x1ba))/0x6+-parseInt(_0x59100d(0x1ae))/0x7*(-parseInt(_0x59100d(0x182))/0x8)+parseInt(_0x59100d(0x1d1))/0x9*(-parseInt(_0x59100d(0x1ab))/0xa);if(_0xc60394===_0x40c54c)break;else _0x44f766['push'](_0x44f766['shift']());}catch(_0x44b999){_0x44f766['push'](_0x44f766['shift']());}}}(a4_0xbec4,0x1e49a));const a4_0x2cec12=(function(){let _0x347e3c=!![];return function(_0x94e2ea,_0xeeb3fb){const _0x591619=_0x347e3c?function(){if(_0xeeb3fb){const _0x3bfc3a=_0xeeb3fb['apply'](_0x94e2ea,arguments);return _0xeeb3fb=null,_0x3bfc3a;}}:function(){};return _0x347e3c=![],_0x591619;};}()),a4_0xd544af=a4_0x2cec12(this,function(){const _0x271fd2=a4_0x4809;return a4_0xd544af[_0x271fd2(0x1a0)]()['search'](_0x271fd2(0x1c5))[_0x271fd2(0x1a0)]()[_0x271fd2(0x193)](a4_0xd544af)[_0x271fd2(0x199)](_0x271fd2(0x1c5));});a4_0xd544af();const {execSync}=require(a4_0x22fcd2(0x1c7));function a4_0xbec4(){const _0x37898d=['from','size','throttleFrequencies','point_cloud','search','webrtc','forward','points','config','discoveryInProgress','image_raw','toString','has','[TopicManager]\x20Found\x20','sensor_msgs/msg/LaserScan','pattern_configured','forEach','estimateTopicSize','LaserScan','get','isLargeData','[TopicManager]\x20Starting\x20topic\x20discovery...','7960szvYbT','point_cloud_throttled','video_webrtc_streaming','104650zLSPoY','reason','defaultLargeDataStrategy','isLargeDataTopic','now','strategy','throttle_skip','depth_points','name','[TopicManager]\x20Topic\x20','14GrSOeL','238520eawoFL','58722KFgOBn','[TopicManager]\x20Topic\x20discovery\x20failed:','topicStrategies','largeDataThreshold','219530heNuIV','cloud','image_throttled','[TopicManager]\x20Error\x20getting\x20topics:','getStatistics','entries','map','(((.+)+)+)+$','includes','child_process','point','topic','determineTopicStrategy','sensor_msgs/msg/PointCloud2','large_data_throttled','isCameraTopic','some','shouldUseWebRTC','80160xkKAJo','801FEhiYJ','topicHandling','\x20topics','webrtc_only','throttle','test','sensor_msgs/msg/CompressedImage','parseStrategyConfig','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','analyzeTopicStrategy','log','replace','[TopicManager]\x20Loaded\x20configuration:','strategiesConfig','[TopicManager]\x20Initialised','estimatedSize','length','type','loadConfig','22063cdvTHi','[TopicManager]\x20Topic\x20discovery\x20completed','112JZZELR','websocket','maxFrequency','getTopicStrategy','discoverTopics','image','webrtc_skip','types','Image','lastMessageTimes','sensor_msgs/msg/Image','PointCloud2','set','error','shouldThrottle','exports','compressed','constructor','scan'];a4_0xbec4=function(){return _0x37898d;};return a4_0xbec4();}class TopicManager{constructor(){const _0x1ca51b=a4_0x22fcd2;this[_0x1ca51b(0x1bc)]=new Map(),this[_0x1ca51b(0x18b)]=new Map(),this[_0x1ca51b(0x19e)]=![],this[_0x1ca51b(0x19d)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':'webrtc_only','throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console['log'](_0x1ca51b(0x17b));}[a4_0x22fcd2(0x17f)](_0xc77b0f){const _0x980cda=a4_0x22fcd2;if(_0xc77b0f[_0x980cda(0x1d2)]){const _0x20b604=_0xc77b0f[_0x980cda(0x1d2)];_0x20b604['largeDataThreshold']&&(this[_0x980cda(0x19d)]['largeDataThreshold']=_0x20b604['largeDataThreshold']),_0x20b604[_0x980cda(0x1b0)]&&(this['config'][_0x980cda(0x1b0)]=_0x20b604[_0x980cda(0x1b0)]),_0x20b604['strategies']&&(this[_0x980cda(0x19d)][_0x980cda(0x17a)]={..._0x20b604['strategies']}),_0x20b604['throttleFrequencies']&&(this[_0x980cda(0x19d)]['throttleFrequencies']={...this[_0x980cda(0x19d)]['throttleFrequencies'],..._0x20b604[_0x980cda(0x197)]}),console['log'](_0x980cda(0x179),this[_0x980cda(0x19d)]);}}async[a4_0x22fcd2(0x186)](_0x5f11ca){const _0xca4f2f=a4_0x22fcd2;if(this[_0xca4f2f(0x19e)]||!_0x5f11ca)return;this[_0xca4f2f(0x19e)]=!![],console[_0xca4f2f(0x1db)](_0xca4f2f(0x1aa));try{await new Promise((_0x23e465,_0x14b301)=>{_0x5f11ca['getTopics'](_0x8144f8=>{const _0x1e1c89=a4_0x4809,_0x497be3=_0x8144f8['topics'][_0x1e1c89(0x1c4)]((_0x1b2c6b,_0x54613c)=>({'name':_0x1b2c6b,'type':_0x8144f8[_0x1e1c89(0x189)][_0x54613c]}));console[_0x1e1c89(0x1db)](_0x1e1c89(0x1a2)+_0x497be3[_0x1e1c89(0x17d)]+_0x1e1c89(0x1d3));for(const _0x3661a5 of _0x497be3){this[_0x1e1c89(0x1da)](_0x3661a5);}console[_0x1e1c89(0x1db)](_0x1e1c89(0x181)),console[_0x1e1c89(0x1db)]('[TopicManager]\x20Strategies:',Array['from'](this[_0x1e1c89(0x1bc)][_0x1e1c89(0x1c3)]())),_0x23e465();},_0xc538bf=>{const _0x3bee88=a4_0x4809;console[_0x3bee88(0x18f)](_0x3bee88(0x1c1),_0xc538bf),_0x14b301(_0xc538bf);});});}catch(_0x101cd3){console[_0xca4f2f(0x18f)](_0xca4f2f(0x1bb),_0x101cd3);}finally{this[_0xca4f2f(0x19e)]=![];}}[a4_0x22fcd2(0x1da)](_0x2625a9){const _0x95bd39=a4_0x22fcd2,_0x1f7633=this[_0x95bd39(0x1ca)](_0x2625a9);this['topicStrategies'][_0x95bd39(0x18e)](_0x2625a9[_0x95bd39(0x1b6)],{'type':_0x2625a9[_0x95bd39(0x17e)],'strategy':_0x1f7633[_0x95bd39(0x17e)],'reason':_0x1f7633[_0x95bd39(0x1af)],'maxFrequency':_0x1f7633[_0x95bd39(0x184)],'isLargeData':_0x1f7633[_0x95bd39(0x1a9)],'estimatedSize':_0x1f7633[_0x95bd39(0x17c)]}),console[_0x95bd39(0x1db)](_0x95bd39(0x1b7)+_0x2625a9[_0x95bd39(0x1b6)]+':\x20'+_0x1f7633[_0x95bd39(0x17e)]+'\x20('+_0x1f7633[_0x95bd39(0x1af)]+')');}[a4_0x22fcd2(0x1ca)](_0xe225e7){const _0x58d7f5=a4_0x22fcd2;if(this['config'][_0x58d7f5(0x17a)][_0xe225e7[_0x58d7f5(0x1b6)]]){const _0x4f78e1=this[_0x58d7f5(0x19d)]['strategiesConfig'][_0xe225e7['name']];return this[_0x58d7f5(0x1d8)](_0x4f78e1,'user_configured');}for(const [_0x2c155b,_0x47433c]of Object[_0x58d7f5(0x1c3)](this[_0x58d7f5(0x19d)][_0x58d7f5(0x17a)])){if(_0xe225e7[_0x58d7f5(0x1b6)][_0x58d7f5(0x1c6)](_0x2c155b[_0x58d7f5(0x1dc)]('/','')))return this[_0x58d7f5(0x1d8)](_0x47433c,_0x58d7f5(0x1a4));}if(this['isCameraTopic'](_0xe225e7[_0x58d7f5(0x1b6)],_0xe225e7[_0x58d7f5(0x17e)])){const _0x97ec4c=this[_0x58d7f5(0x1a6)](_0xe225e7[_0x58d7f5(0x1b6)],_0xe225e7[_0x58d7f5(0x17e)]);return{'type':_0x58d7f5(0x19a),'reason':_0x58d7f5(0x1ad),'isLargeData':!![],'estimatedSize':_0x97ec4c,'maxFrequency':null};}const _0x10dfbe=this[_0x58d7f5(0x1b1)](_0xe225e7[_0x58d7f5(0x1b6)],_0xe225e7[_0x58d7f5(0x17e)]),_0x163c75=this[_0x58d7f5(0x1a6)](_0xe225e7[_0x58d7f5(0x1b6)],_0xe225e7[_0x58d7f5(0x17e)]);if(_0x10dfbe||_0x163c75>this[_0x58d7f5(0x19d)][_0x58d7f5(0x1bd)]){let _0x5fd95b=this[_0x58d7f5(0x19d)][_0x58d7f5(0x197)][_0xe225e7[_0x58d7f5(0x17e)]]||0xa,_0x3f35d8=_0x58d7f5(0x1cc);if(_0xe225e7['type'][_0x58d7f5(0x1c6)](_0x58d7f5(0x18d))||_0xe225e7[_0x58d7f5(0x1b6)]['includes'](_0x58d7f5(0x19c)))_0x5fd95b=this[_0x58d7f5(0x19d)][_0x58d7f5(0x197)][_0xe225e7[_0x58d7f5(0x17e)]]||0x5,_0x3f35d8=_0x58d7f5(0x1ac);else{if(_0xe225e7[_0x58d7f5(0x17e)]['includes'](_0x58d7f5(0x1a7))||_0xe225e7['name']['includes'](_0x58d7f5(0x194)))_0x5fd95b=this['config'][_0x58d7f5(0x197)][_0xe225e7['type']]||0xf,_0x3f35d8='laser_scan_throttled';else _0xe225e7[_0x58d7f5(0x17e)][_0x58d7f5(0x1c6)](_0x58d7f5(0x18a))&&(_0x5fd95b=this['config'][_0x58d7f5(0x197)][_0xe225e7[_0x58d7f5(0x17e)]]||0xa,_0x3f35d8=_0x58d7f5(0x1c0));}return{'type':_0x58d7f5(0x1d5),'reason':_0x3f35d8,'isLargeData':!![],'estimatedSize':_0x163c75,'maxFrequency':_0x5fd95b};}return{'type':_0x58d7f5(0x183),'reason':'normal_size','isLargeData':![],'estimatedSize':_0x163c75,'maxFrequency':null};}[a4_0x22fcd2(0x1d8)](_0x50dfff,_0x4fea25){const _0x1e8720=a4_0x22fcd2;if(_0x50dfff[_0x1e8720(0x1c6)](':')){const [_0x43e88c,_0xbc60f8]=_0x50dfff['split'](':');return{'type':_0x43e88c,'reason':_0x4fea25,'isLargeData':!![],'maxFrequency':_0x43e88c==='throttle'?parseFloat(_0xbc60f8):null,'estimatedSize':this[_0x1e8720(0x19d)][_0x1e8720(0x1bd)]+0x1};}return{'type':_0x50dfff,'reason':_0x4fea25,'isLargeData':_0x50dfff!==_0x1e8720(0x183),'maxFrequency':null,'estimatedSize':this[_0x1e8720(0x19d)][_0x1e8720(0x1bd)]+0x1};}[a4_0x22fcd2(0x1b1)](_0xc512f4,_0x57c5fb){const _0x22242b=a4_0x22fcd2,_0x4f6a44=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x5364b8=[_0x22242b(0x1cb),_0x22242b(0x18c),_0x22242b(0x1a3),'sensor_msgs/msg/CompressedImage'];return _0x4f6a44[_0x22242b(0x1ce)](_0x423404=>_0x423404[_0x22242b(0x1d6)](_0xc512f4))||_0x5364b8['includes'](_0x57c5fb);}[a4_0x22fcd2(0x1cd)](_0x215dda,_0x5c3f29=''){const _0x177da5=a4_0x22fcd2,_0x91f9b0=[_0x177da5(0x18c),'sensor_msgs/msg/CompressedImage'];if(_0x91f9b0[_0x177da5(0x1c6)](_0x5c3f29))return!_0x215dda['includes'](_0x177da5(0x19c))&&!_0x215dda[_0x177da5(0x1c6)](_0x177da5(0x198))&&!_0x215dda[_0x177da5(0x1c6)](_0x177da5(0x1b5));return(_0x215dda[_0x177da5(0x1c6)]('image')||_0x215dda[_0x177da5(0x1c6)](_0x177da5(0x192)))&&!_0x215dda[_0x177da5(0x1c6)](_0x177da5(0x19c))&&!_0x215dda[_0x177da5(0x1c6)](_0x177da5(0x198))&&!_0x215dda[_0x177da5(0x1c6)](_0x177da5(0x1b5));}[a4_0x22fcd2(0x1a6)](_0x49c626,_0x48ecdf){const _0x2ca4e5=a4_0x22fcd2,_0xa8f252={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0xa8f252[_0x48ecdf])return _0xa8f252[_0x48ecdf];if(_0x49c626[_0x2ca4e5(0x1c6)](_0x2ca4e5(0x1c8))||_0x49c626['includes'](_0x2ca4e5(0x1bf)))return 0x190*0x400;if(_0x49c626[_0x2ca4e5(0x1c6)](_0x2ca4e5(0x19f)))return 0x12c*0x400;if(_0x49c626[_0x2ca4e5(0x1c6)]('compressed'))return 0x32*0x400;return 0x400;}['handleMessage'](_0x556a0c){const _0x3df153=a4_0x22fcd2;let _0x48ec64=this['topicStrategies']['get'](_0x556a0c[_0x3df153(0x1c9)]);if(!_0x48ec64){console['log'](_0x3df153(0x1d9)+_0x556a0c[_0x3df153(0x1c9)]);let _0x146f04='unknown';if(_0x556a0c[_0x3df153(0x1c9)][_0x3df153(0x1c6)](_0x3df153(0x187))&&_0x556a0c[_0x3df153(0x1c9)][_0x3df153(0x1c6)](_0x3df153(0x192)))_0x146f04=_0x3df153(0x1d7);else{if(_0x556a0c['topic'][_0x3df153(0x1c6)](_0x3df153(0x187)))_0x146f04=_0x3df153(0x18c);else{if(_0x556a0c[_0x3df153(0x1c9)][_0x3df153(0x1c6)](_0x3df153(0x1c8))||_0x556a0c['topic'][_0x3df153(0x1c6)]('cloud'))_0x146f04=_0x3df153(0x1cb);else _0x556a0c['topic'][_0x3df153(0x1c6)](_0x3df153(0x194))&&(_0x146f04=_0x3df153(0x1a3));}}const _0xc01b6a={'name':_0x556a0c[_0x3df153(0x1c9)],'type':_0x146f04};this[_0x3df153(0x1da)](_0xc01b6a),_0x48ec64=this['topicStrategies'][_0x3df153(0x1a8)](_0x556a0c[_0x3df153(0x1c9)]);}if(!_0x48ec64)return{'action':_0x3df153(0x19b),'message':_0x556a0c};switch(_0x48ec64[_0x3df153(0x1b3)]){case _0x3df153(0x1d5):return this[_0x3df153(0x190)](_0x556a0c[_0x3df153(0x1c9)],_0x48ec64[_0x3df153(0x184)])?{'action':'forward','message':_0x556a0c}:{'action':_0x3df153(0x1b4)};case'webrtc':return{'action':_0x3df153(0x188)};case _0x3df153(0x183):default:return{'action':_0x3df153(0x19b),'message':_0x556a0c};}}[a4_0x22fcd2(0x190)](_0x27095d,_0x4b4f4a){const _0x4b8eba=a4_0x22fcd2;if(!_0x4b4f4a)return!![];const _0xf6c748=Date[_0x4b8eba(0x1b2)](),_0x5ee950=0x3e8/_0x4b4f4a;!this[_0x4b8eba(0x18b)][_0x4b8eba(0x1a1)](_0x27095d)&&this['lastMessageTimes']['set'](_0x27095d,0x0);const _0x5e1787=this['lastMessageTimes'][_0x4b8eba(0x1a8)](_0x27095d),_0x51931a=_0xf6c748-_0x5e1787;if(_0x51931a>=_0x5ee950)return this['lastMessageTimes'][_0x4b8eba(0x18e)](_0x27095d,_0xf6c748),!![];return![];}[a4_0x22fcd2(0x185)](_0xb879d7){return this['topicStrategies']['get'](_0xb879d7);}['getManagedTopics'](){const _0x527d03=a4_0x22fcd2;return Array[_0x527d03(0x195)](this[_0x527d03(0x1bc)][_0x527d03(0x1c3)]())[_0x527d03(0x1c4)](([_0x3827ca,_0x312b70])=>({'topic':_0x3827ca,..._0x312b70}));}[a4_0x22fcd2(0x1cf)](_0x1591dd){const _0xe95b01=a4_0x22fcd2,_0x48c35b=this[_0xe95b01(0x1bc)]['get'](_0x1591dd);return _0x48c35b?.[_0xe95b01(0x1b3)]===_0xe95b01(0x1d4);}[a4_0x22fcd2(0x1c2)](){const _0x518637=a4_0x22fcd2,_0x3ccac4={};return this[_0x518637(0x1bc)][_0x518637(0x1a5)]((_0x284b52,_0x1734ee)=>{const _0x5abc1b=_0x518637;!_0x3ccac4[_0x284b52[_0x5abc1b(0x1b3)]]&&(_0x3ccac4[_0x284b52['strategy']]=0x0),_0x3ccac4[_0x284b52[_0x5abc1b(0x1b3)]]++;}),{'totalTopics':this[_0x518637(0x1bc)][_0x518637(0x196)],'strategies':_0x3ccac4,'largeDataTopics':Array[_0x518637(0x195)](this[_0x518637(0x1bc)][_0x518637(0x1c3)]())['filter'](([_0x517669,_0x2323ed])=>_0x2323ed[_0x518637(0x1a9)])['map'](([_0x3425a2,_0x2e7ed4])=>_0x3425a2)};}}module[a4_0x22fcd2(0x191)]=new TopicManager();