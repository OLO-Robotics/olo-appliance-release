const a4_0x3be5c5=a4_0x5c1d;(function(_0x21be77,_0x4c3edd){const _0x1a5945=a4_0x5c1d,_0x2a0219=_0x21be77();while(!![]){try{const _0xf48e3f=parseInt(_0x1a5945(0x179))/0x1+-parseInt(_0x1a5945(0x1a9))/0x2+parseInt(_0x1a5945(0x191))/0x3*(-parseInt(_0x1a5945(0x193))/0x4)+-parseInt(_0x1a5945(0x158))/0x5*(-parseInt(_0x1a5945(0x1a8))/0x6)+parseInt(_0x1a5945(0x176))/0x7*(-parseInt(_0x1a5945(0x188))/0x8)+-parseInt(_0x1a5945(0x157))/0x9+parseInt(_0x1a5945(0x186))/0xa;if(_0xf48e3f===_0x4c3edd)break;else _0x2a0219['push'](_0x2a0219['shift']());}catch(_0x36c6bf){_0x2a0219['push'](_0x2a0219['shift']());}}}(a4_0x514a,0x4d489));const a4_0x42b4a5=(function(){let _0x49dfd7=!![];return function(_0x435eb3,_0x2b1760){const _0x486ec2=_0x49dfd7?function(){if(_0x2b1760){const _0x4d7061=_0x2b1760['apply'](_0x435eb3,arguments);return _0x2b1760=null,_0x4d7061;}}:function(){};return _0x49dfd7=![],_0x486ec2;};}()),a4_0x3edb95=a4_0x42b4a5(this,function(){const _0x57abd2=a4_0x5c1d;return a4_0x3edb95['toString']()['search'](_0x57abd2(0x197))[_0x57abd2(0x154)]()[_0x57abd2(0x1ac)](a4_0x3edb95)['search']('(((.+)+)+)+$');});a4_0x3edb95();function a4_0x5c1d(_0x1575d6,_0x3456d3){const _0xce6031=a4_0x514a();return a4_0x5c1d=function(_0x3edb95,_0x42b4a5){_0x3edb95=_0x3edb95-0x14e;let _0x514a73=_0xce6031[_0x3edb95];return _0x514a73;},a4_0x5c1d(_0x1575d6,_0x3456d3);}const {execSync}=require(a4_0x3be5c5(0x167));class TopicManager{constructor(){const _0x4141cb=a4_0x3be5c5;this[_0x4141cb(0x18c)]=new Map(),this[_0x4141cb(0x171)]=new Map(),this[_0x4141cb(0x150)]=![],this['config']={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':'webrtc_only','throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x4141cb(0x19b)](_0x4141cb(0x17d));}[a4_0x3be5c5(0x175)](_0x436dee){const _0x547d20=a4_0x3be5c5;if(_0x436dee[_0x547d20(0x16c)]){const _0x5583f4=_0x436dee[_0x547d20(0x16c)];_0x5583f4['largeDataThreshold']&&(this[_0x547d20(0x16b)][_0x547d20(0x19d)]=_0x5583f4[_0x547d20(0x19d)]),_0x5583f4['defaultLargeDataStrategy']&&(this['config']['defaultLargeDataStrategy']=_0x5583f4[_0x547d20(0x189)]),_0x5583f4[_0x547d20(0x16a)]&&(this[_0x547d20(0x16b)][_0x547d20(0x156)]={..._0x5583f4[_0x547d20(0x16a)]}),_0x5583f4[_0x547d20(0x192)]&&(this[_0x547d20(0x16b)]['throttleFrequencies']={...this[_0x547d20(0x16b)][_0x547d20(0x192)],..._0x5583f4[_0x547d20(0x192)]}),console['log']('[TopicManager]\x20Loaded\x20configuration:',this[_0x547d20(0x16b)]);}}async[a4_0x3be5c5(0x17b)](_0x221f52){const _0x5b8c80=a4_0x3be5c5;if(this[_0x5b8c80(0x150)]||!_0x221f52)return;this[_0x5b8c80(0x150)]=!![],console[_0x5b8c80(0x19b)]('[TopicManager]\x20Starting\x20topic\x20discovery...');try{await new Promise((_0x2e5f78,_0x45545e)=>{const _0x19be1c=_0x5b8c80;_0x221f52[_0x19be1c(0x196)](_0x2ca94e=>{const _0xa2daed=_0x19be1c,_0x5ab3aa=_0x2ca94e[_0xa2daed(0x15d)][_0xa2daed(0x1a5)]((_0x497a2e,_0x5d726d)=>({'name':_0x497a2e,'type':_0x2ca94e[_0xa2daed(0x159)][_0x5d726d]}));console[_0xa2daed(0x19b)]('[TopicManager]\x20Found\x20'+_0x5ab3aa[_0xa2daed(0x185)]+_0xa2daed(0x172));for(const _0x2d60d0 of _0x5ab3aa){this[_0xa2daed(0x198)](_0x2d60d0);}console['log'](_0xa2daed(0x195)),console[_0xa2daed(0x19b)]('[TopicManager]\x20Strategies:',Array[_0xa2daed(0x187)](this[_0xa2daed(0x18c)][_0xa2daed(0x17f)]())),_0x2e5f78();},_0x23b517=>{const _0x28ae13=_0x19be1c;console[_0x28ae13(0x190)](_0x28ae13(0x17c),_0x23b517),_0x45545e(_0x23b517);});});}catch(_0x5bd87d){console['error'](_0x5b8c80(0x174),_0x5bd87d);}finally{this[_0x5b8c80(0x150)]=![];}}[a4_0x3be5c5(0x198)](_0x50e3ee){const _0x5a75e3=a4_0x3be5c5,_0xa4fb04=this[_0x5a75e3(0x15e)](_0x50e3ee);this[_0x5a75e3(0x18c)][_0x5a75e3(0x1ab)](_0x50e3ee[_0x5a75e3(0x160)],{'type':_0x50e3ee[_0x5a75e3(0x16e)],'strategy':_0xa4fb04['type'],'reason':_0xa4fb04['reason'],'maxFrequency':_0xa4fb04['maxFrequency'],'isLargeData':_0xa4fb04[_0x5a75e3(0x166)],'estimatedSize':_0xa4fb04[_0x5a75e3(0x18d)]}),console[_0x5a75e3(0x19b)](_0x5a75e3(0x169)+_0x50e3ee[_0x5a75e3(0x160)]+':\x20'+_0xa4fb04[_0x5a75e3(0x16e)]+'\x20('+_0xa4fb04[_0x5a75e3(0x183)]+')');}['determineTopicStrategy'](_0x4bc6c9){const _0x204c4a=a4_0x3be5c5;if(this[_0x204c4a(0x16b)]['strategiesConfig'][_0x4bc6c9[_0x204c4a(0x160)]]){const _0x35e560=this[_0x204c4a(0x16b)]['strategiesConfig'][_0x4bc6c9[_0x204c4a(0x160)]];return this[_0x204c4a(0x1a1)](_0x35e560,'user_configured');}for(const [_0x4d89a0,_0x5a2540]of Object[_0x204c4a(0x17f)](this[_0x204c4a(0x16b)][_0x204c4a(0x156)])){if(_0x4bc6c9['name']['includes'](_0x4d89a0['replace']('/','')))return this[_0x204c4a(0x1a1)](_0x5a2540,_0x204c4a(0x182));}if(this[_0x204c4a(0x180)](_0x4bc6c9[_0x204c4a(0x160)],_0x4bc6c9['type'])){const _0x12b450=this[_0x204c4a(0x17a)](_0x4bc6c9['name'],_0x4bc6c9[_0x204c4a(0x16e)]);return{'type':_0x204c4a(0x15c),'reason':_0x204c4a(0x15a),'isLargeData':!![],'estimatedSize':_0x12b450,'maxFrequency':null};}const _0x42c737=this['isLargeDataTopic'](_0x4bc6c9['name'],_0x4bc6c9[_0x204c4a(0x16e)]),_0x4a5abb=this[_0x204c4a(0x17a)](_0x4bc6c9['name'],_0x4bc6c9[_0x204c4a(0x16e)]);if(_0x42c737||_0x4a5abb>this[_0x204c4a(0x16b)][_0x204c4a(0x19d)]){let _0x34660d=this['config'][_0x204c4a(0x192)][_0x4bc6c9[_0x204c4a(0x16e)]]||0xa,_0x12b143=_0x204c4a(0x1a7);if(_0x4bc6c9[_0x204c4a(0x16e)][_0x204c4a(0x181)](_0x204c4a(0x1a3))||_0x4bc6c9['name']['includes'](_0x204c4a(0x155)))_0x34660d=this['config'][_0x204c4a(0x192)][_0x4bc6c9[_0x204c4a(0x16e)]]||0x5,_0x12b143='point_cloud_throttled';else{if(_0x4bc6c9[_0x204c4a(0x16e)][_0x204c4a(0x181)](_0x204c4a(0x1aa))||_0x4bc6c9[_0x204c4a(0x160)][_0x204c4a(0x181)]('scan'))_0x34660d=this[_0x204c4a(0x16b)][_0x204c4a(0x192)][_0x4bc6c9[_0x204c4a(0x16e)]]||0xf,_0x12b143=_0x204c4a(0x184);else _0x4bc6c9[_0x204c4a(0x16e)]['includes'](_0x204c4a(0x162))&&(_0x34660d=this[_0x204c4a(0x16b)]['throttleFrequencies'][_0x4bc6c9[_0x204c4a(0x16e)]]||0xa,_0x12b143='image_throttled');}return{'type':_0x204c4a(0x19e),'reason':_0x12b143,'isLargeData':!![],'estimatedSize':_0x4a5abb,'maxFrequency':_0x34660d};}return{'type':_0x204c4a(0x18e),'reason':'normal_size','isLargeData':![],'estimatedSize':_0x4a5abb,'maxFrequency':null};}[a4_0x3be5c5(0x1a1)](_0x19c313,_0x12adf9){const _0x41d782=a4_0x3be5c5;if(_0x19c313[_0x41d782(0x181)](':')){const [_0x3d4afb,_0x96c31b]=_0x19c313[_0x41d782(0x164)](':');return{'type':_0x3d4afb,'reason':_0x12adf9,'isLargeData':!![],'maxFrequency':_0x3d4afb==='throttle'?parseFloat(_0x96c31b):null,'estimatedSize':this[_0x41d782(0x16b)][_0x41d782(0x19d)]+0x1};}return{'type':_0x19c313,'reason':_0x12adf9,'isLargeData':_0x19c313!==_0x41d782(0x18e),'maxFrequency':null,'estimatedSize':this[_0x41d782(0x16b)][_0x41d782(0x19d)]+0x1};}[a4_0x3be5c5(0x1ae)](_0xac1bd,_0x1dfd16){const _0x16e76f=a4_0x3be5c5,_0x20009c=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x4b4d82=[_0x16e76f(0x151),_0x16e76f(0x19f),_0x16e76f(0x161),_0x16e76f(0x152)];return _0x20009c[_0x16e76f(0x168)](_0x1c8fc0=>_0x1c8fc0['test'](_0xac1bd))||_0x4b4d82[_0x16e76f(0x181)](_0x1dfd16);}[a4_0x3be5c5(0x180)](_0xd11fe3,_0x39dd28=''){const _0x248270=a4_0x3be5c5,_0x222d3b=[_0x248270(0x19f),_0x248270(0x152)];if(_0x222d3b['includes'](_0x39dd28))return!_0xd11fe3['includes'](_0x248270(0x155))&&!_0xd11fe3[_0x248270(0x181)](_0x248270(0x15f))&&!_0xd11fe3['includes'](_0x248270(0x19a));return(_0xd11fe3[_0x248270(0x181)](_0x248270(0x199))||_0xd11fe3[_0x248270(0x181)](_0x248270(0x1a2)))&&!_0xd11fe3[_0x248270(0x181)](_0x248270(0x155))&&!_0xd11fe3[_0x248270(0x181)](_0x248270(0x15f))&&!_0xd11fe3[_0x248270(0x181)]('depth_points');}[a4_0x3be5c5(0x17a)](_0x64bd1c,_0x31110b){const _0x6f7912=a4_0x3be5c5,_0x3c42b7={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x3c42b7[_0x31110b])return _0x3c42b7[_0x31110b];if(_0x64bd1c[_0x6f7912(0x181)](_0x6f7912(0x16f))||_0x64bd1c[_0x6f7912(0x181)](_0x6f7912(0x173)))return 0x190*0x400;if(_0x64bd1c[_0x6f7912(0x181)](_0x6f7912(0x178)))return 0x12c*0x400;if(_0x64bd1c[_0x6f7912(0x181)](_0x6f7912(0x1a2)))return 0x32*0x400;return 0x400;}[a4_0x3be5c5(0x18f)](_0x3e27f8){const _0xa3d3f6=a4_0x3be5c5;let _0x3bcb66=this[_0xa3d3f6(0x18c)][_0xa3d3f6(0x177)](_0x3e27f8[_0xa3d3f6(0x194)]);if(!_0x3bcb66){console[_0xa3d3f6(0x19b)](_0xa3d3f6(0x16d)+_0x3e27f8[_0xa3d3f6(0x194)]);let _0x1ccb51=_0xa3d3f6(0x15b);if(_0x3e27f8['topic'][_0xa3d3f6(0x181)](_0xa3d3f6(0x199))&&_0x3e27f8[_0xa3d3f6(0x194)][_0xa3d3f6(0x181)](_0xa3d3f6(0x1a2)))_0x1ccb51=_0xa3d3f6(0x152);else{if(_0x3e27f8['topic'][_0xa3d3f6(0x181)]('image'))_0x1ccb51='sensor_msgs/msg/Image';else{if(_0x3e27f8['topic'][_0xa3d3f6(0x181)](_0xa3d3f6(0x16f))||_0x3e27f8[_0xa3d3f6(0x194)][_0xa3d3f6(0x181)](_0xa3d3f6(0x173)))_0x1ccb51='sensor_msgs/msg/PointCloud2';else _0x3e27f8[_0xa3d3f6(0x194)][_0xa3d3f6(0x181)](_0xa3d3f6(0x1a6))&&(_0x1ccb51=_0xa3d3f6(0x161));}}const _0x4dbe33={'name':_0x3e27f8[_0xa3d3f6(0x194)],'type':_0x1ccb51};this[_0xa3d3f6(0x198)](_0x4dbe33),_0x3bcb66=this[_0xa3d3f6(0x18c)][_0xa3d3f6(0x177)](_0x3e27f8[_0xa3d3f6(0x194)]);}if(!_0x3bcb66)return{'action':_0xa3d3f6(0x14e),'message':_0x3e27f8};switch(_0x3bcb66[_0xa3d3f6(0x165)]){case _0xa3d3f6(0x19e):return this['shouldThrottle'](_0x3e27f8['topic'],_0x3bcb66[_0xa3d3f6(0x18b)])?{'action':_0xa3d3f6(0x14e),'message':_0x3e27f8}:{'action':_0xa3d3f6(0x19c)};case _0xa3d3f6(0x15c):return{'action':'webrtc_skip'};case _0xa3d3f6(0x18e):default:return{'action':_0xa3d3f6(0x14e),'message':_0x3e27f8};}}[a4_0x3be5c5(0x1a4)](_0x56c5e9,_0x1738bb){const _0x5499d5=a4_0x3be5c5;if(!_0x1738bb)return!![];const _0x3e7125=Date[_0x5499d5(0x163)](),_0x9b587=0x3e8/_0x1738bb;!this['lastMessageTimes']['has'](_0x56c5e9)&&this[_0x5499d5(0x171)]['set'](_0x56c5e9,0x0);const _0x2e8472=this[_0x5499d5(0x171)]['get'](_0x56c5e9),_0x4eaa5d=_0x3e7125-_0x2e8472;if(_0x4eaa5d>=_0x9b587)return this[_0x5499d5(0x171)][_0x5499d5(0x1ab)](_0x56c5e9,_0x3e7125),!![];return![];}['getTopicStrategy'](_0x383ba2){const _0x2eed0e=a4_0x3be5c5;return this[_0x2eed0e(0x18c)][_0x2eed0e(0x177)](_0x383ba2);}['getManagedTopics'](){const _0x271ebc=a4_0x3be5c5;return Array[_0x271ebc(0x187)](this[_0x271ebc(0x18c)]['entries']())[_0x271ebc(0x1a5)](([_0x4dc19c,_0x501f33])=>({'topic':_0x4dc19c,..._0x501f33}));}[a4_0x3be5c5(0x170)](_0x4f5431){const _0x28106a=a4_0x3be5c5,_0x530ddc=this[_0x28106a(0x18c)][_0x28106a(0x177)](_0x4f5431);return _0x530ddc?.[_0x28106a(0x165)]===_0x28106a(0x1ad);}[a4_0x3be5c5(0x1a0)](){const _0x54ed3b=a4_0x3be5c5,_0x5937f7={};return this[_0x54ed3b(0x18c)][_0x54ed3b(0x18a)]((_0x244d97,_0x1aaa2e)=>{const _0x1c1843=_0x54ed3b;!_0x5937f7[_0x244d97['strategy']]&&(_0x5937f7[_0x244d97[_0x1c1843(0x165)]]=0x0),_0x5937f7[_0x244d97[_0x1c1843(0x165)]]++;}),{'totalTopics':this[_0x54ed3b(0x18c)][_0x54ed3b(0x17e)],'strategies':_0x5937f7,'largeDataTopics':Array[_0x54ed3b(0x187)](this['topicStrategies'][_0x54ed3b(0x17f)]())[_0x54ed3b(0x14f)](([_0x26cfc2,_0x31c05c])=>_0x31c05c[_0x54ed3b(0x166)])[_0x54ed3b(0x1a5)](([_0x4b3c49,_0x1a2bf3])=>_0x4b3c49)};}}module[a4_0x3be5c5(0x153)]=new TopicManager();function a4_0x514a(){const _0x546323=['topic','[TopicManager]\x20Topic\x20discovery\x20completed','getTopics','(((.+)+)+)+$','analyzeTopicStrategy','image','depth_points','log','throttle_skip','largeDataThreshold','throttle','sensor_msgs/msg/Image','getStatistics','parseStrategyConfig','compressed','PointCloud2','shouldThrottle','map','scan','large_data_throttled','538440fFPwiC','1149930tpKymi','LaserScan','set','constructor','webrtc_only','isLargeDataTopic','forward','filter','discoveryInProgress','sensor_msgs/msg/PointCloud2','sensor_msgs/msg/CompressedImage','exports','toString','points','strategiesConfig','657117qRJoVA','35UegwYZ','types','video_webrtc_streaming','unknown','webrtc','topics','determineTopicStrategy','point_cloud','name','sensor_msgs/msg/LaserScan','Image','now','split','strategy','isLargeData','child_process','some','[TopicManager]\x20Topic\x20','strategies','config','topicHandling','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','type','point','shouldUseWebRTC','lastMessageTimes','\x20topics','cloud','[TopicManager]\x20Topic\x20discovery\x20failed:','loadConfig','112IGmJML','get','image_raw','147007ApNcdg','estimateTopicSize','discoverTopics','[TopicManager]\x20Error\x20getting\x20topics:','[TopicManager]\x20Initialised','size','entries','isCameraTopic','includes','pattern_configured','reason','laser_scan_throttled','length','4960610JEsADf','from','17096dTlZPX','defaultLargeDataStrategy','forEach','maxFrequency','topicStrategies','estimatedSize','websocket','handleMessage','error','15DSHOZt','throttleFrequencies','218020VOPUmo'];a4_0x514a=function(){return _0x546323;};return a4_0x514a();}