const a4_0x2772b2=a4_0x522f;function a4_0x522f(_0x228bd3,_0x45e0e5){const _0x54a553=a4_0x554b();return a4_0x522f=function(_0x15a7a0,_0x58f952){_0x15a7a0=_0x15a7a0-0x1c1;let _0x554b1c=_0x54a553[_0x15a7a0];return _0x554b1c;},a4_0x522f(_0x228bd3,_0x45e0e5);}(function(_0x3b6c30,_0x5aa23d){const _0x49b208=a4_0x522f,_0x173f43=_0x3b6c30();while(!![]){try{const _0x592f97=-parseInt(_0x49b208(0x21d))/0x1+parseInt(_0x49b208(0x21e))/0x2+parseInt(_0x49b208(0x1f7))/0x3+-parseInt(_0x49b208(0x1fb))/0x4+parseInt(_0x49b208(0x1ef))/0x5+parseInt(_0x49b208(0x1da))/0x6*(-parseInt(_0x49b208(0x219))/0x7)+parseInt(_0x49b208(0x205))/0x8*(parseInt(_0x49b208(0x1e0))/0x9);if(_0x592f97===_0x5aa23d)break;else _0x173f43['push'](_0x173f43['shift']());}catch(_0x52bbb6){_0x173f43['push'](_0x173f43['shift']());}}}(a4_0x554b,0xaaead));function a4_0x554b(){const _0xecceec=['strategiesConfig','point_cloud_throttled','sensor_msgs/msg/Image','shouldThrottle','point','[TopicManager]\x20Starting\x20topic\x20discovery...','image','throttleFrequencies','video_webrtc_streaming','forEach','loadConfig','7213062MGVXji','length','[TopicManager]\x20Topic\x20discovery\x20completed','compressed','sensor_msgs/msg/CompressedImage','test','2620845QnyUDi','strategies','exports','getManagedTopics','parseStrategyConfig','includes','normal_size','isCameraTopic','some','estimatedSize','config','size','PointCloud2','discoveryInProgress','image_raw','4466380kmprtW','image_throttled','cloud','[TopicManager]\x20Initialised','webrtc_only','constructor','getTopics','estimateTopicSize','244665QIlPUB','user_configured','toString','throttle','207724ngEwpt','split','(((.+)+)+)+$','set','topic','reason','getTopicStrategy','forward','isLargeDataTopic','sensor_msgs/msg/PointCloud2','8nrLVeU','topicHandling','\x20topics','topics','entries','discoverTopics','depth_points','get','error','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','scan','log','defaultLargeDataStrategy','child_process','name','map','LaserScan','strategy','isLargeData','websocket','7MFzKFS','[TopicManager]\x20Found\x20','lastMessageTimes','webrtc','197418YdyRCX','1771134cwiBwJ','now','largeDataThreshold','topicStrategies','search','sensor_msgs/msg/LaserScan','apply','filter','analyzeTopicStrategy','large_data_throttled','throttle_skip','Image','pattern_configured','type','replace','point_cloud','unknown','from','determineTopicStrategy','[TopicManager]\x20Loaded\x20configuration:','[TopicManager]\x20Topic\x20'];a4_0x554b=function(){return _0xecceec;};return a4_0x554b();}const a4_0x58f952=(function(){let _0xf2e796=!![];return function(_0xb6b9b1,_0x3d466b){const _0x1ac8a7=_0xf2e796?function(){const _0x45b4d0=a4_0x522f;if(_0x3d466b){const _0x48f9e3=_0x3d466b[_0x45b4d0(0x224)](_0xb6b9b1,arguments);return _0x3d466b=null,_0x48f9e3;}}:function(){};return _0xf2e796=![],_0x1ac8a7;};}()),a4_0x15a7a0=a4_0x58f952(this,function(){const _0x32b95b=a4_0x522f;return a4_0x15a7a0['toString']()[_0x32b95b(0x222)](_0x32b95b(0x1fd))[_0x32b95b(0x1f9)]()[_0x32b95b(0x1f4)](a4_0x15a7a0)[_0x32b95b(0x222)](_0x32b95b(0x1fd));});a4_0x15a7a0();const {execSync}=require(a4_0x2772b2(0x212));class TopicManager{constructor(){const _0x218c8d=a4_0x2772b2;this[_0x218c8d(0x221)]=new Map(),this['lastMessageTimes']=new Map(),this[_0x218c8d(0x1ed)]=![],this[_0x218c8d(0x1ea)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':'webrtc_only','throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x218c8d(0x210)](_0x218c8d(0x1f2));}[a4_0x2772b2(0x1d9)](_0x379026){const _0x2ccf96=a4_0x2772b2;if(_0x379026['topicHandling']){const _0x5d1bff=_0x379026[_0x2ccf96(0x206)];_0x5d1bff['largeDataThreshold']&&(this[_0x2ccf96(0x1ea)]['largeDataThreshold']=_0x5d1bff[_0x2ccf96(0x220)]),_0x5d1bff[_0x2ccf96(0x211)]&&(this['config'][_0x2ccf96(0x211)]=_0x5d1bff[_0x2ccf96(0x211)]),_0x5d1bff[_0x2ccf96(0x1e1)]&&(this[_0x2ccf96(0x1ea)][_0x2ccf96(0x1cf)]={..._0x5d1bff[_0x2ccf96(0x1e1)]}),_0x5d1bff['throttleFrequencies']&&(this[_0x2ccf96(0x1ea)]['throttleFrequencies']={...this[_0x2ccf96(0x1ea)]['throttleFrequencies'],..._0x5d1bff[_0x2ccf96(0x1d6)]}),console[_0x2ccf96(0x210)](_0x2ccf96(0x1cd),this[_0x2ccf96(0x1ea)]);}}async[a4_0x2772b2(0x20a)](_0x4bc586){const _0x5affac=a4_0x2772b2;if(this[_0x5affac(0x1ed)]||!_0x4bc586)return;this[_0x5affac(0x1ed)]=!![],console[_0x5affac(0x210)](_0x5affac(0x1d4));try{await new Promise((_0x7ba13a,_0x107e9c)=>{const _0x582011=_0x5affac;_0x4bc586[_0x582011(0x1f5)](_0x5e2ea8=>{const _0x48957e=_0x582011,_0x18bd19=_0x5e2ea8[_0x48957e(0x208)][_0x48957e(0x214)]((_0x2a4214,_0x1f93c1)=>({'name':_0x2a4214,'type':_0x5e2ea8['types'][_0x1f93c1]}));console[_0x48957e(0x210)](_0x48957e(0x21a)+_0x18bd19[_0x48957e(0x1db)]+_0x48957e(0x207));for(const _0x49cc65 of _0x18bd19){this['analyzeTopicStrategy'](_0x49cc65);}console[_0x48957e(0x210)](_0x48957e(0x1dc)),console[_0x48957e(0x210)]('[TopicManager]\x20Strategies:',Array['from'](this[_0x48957e(0x221)][_0x48957e(0x209)]())),_0x7ba13a();},_0x3223ee=>{const _0x3a4f8a=_0x582011;console[_0x3a4f8a(0x20d)]('[TopicManager]\x20Error\x20getting\x20topics:',_0x3223ee),_0x107e9c(_0x3223ee);});});}catch(_0x1dc2c1){console[_0x5affac(0x20d)]('[TopicManager]\x20Topic\x20discovery\x20failed:',_0x1dc2c1);}finally{this[_0x5affac(0x1ed)]=![];}}['analyzeTopicStrategy'](_0x5d3bec){const _0x3e7418=a4_0x2772b2,_0xda29fd=this[_0x3e7418(0x1cc)](_0x5d3bec);this['topicStrategies'][_0x3e7418(0x1fe)](_0x5d3bec['name'],{'type':_0x5d3bec[_0x3e7418(0x1c7)],'strategy':_0xda29fd[_0x3e7418(0x1c7)],'reason':_0xda29fd[_0x3e7418(0x200)],'maxFrequency':_0xda29fd['maxFrequency'],'isLargeData':_0xda29fd[_0x3e7418(0x217)],'estimatedSize':_0xda29fd[_0x3e7418(0x1e9)]}),console[_0x3e7418(0x210)](_0x3e7418(0x1ce)+_0x5d3bec[_0x3e7418(0x213)]+':\x20'+_0xda29fd[_0x3e7418(0x1c7)]+'\x20('+_0xda29fd['reason']+')');}[a4_0x2772b2(0x1cc)](_0x47e323){const _0x450daa=a4_0x2772b2;if(this[_0x450daa(0x1ea)][_0x450daa(0x1cf)][_0x47e323[_0x450daa(0x213)]]){const _0xbddf7c=this['config'][_0x450daa(0x1cf)][_0x47e323[_0x450daa(0x213)]];return this[_0x450daa(0x1e4)](_0xbddf7c,_0x450daa(0x1f8));}for(const [_0x598bd1,_0x5a8bbe]of Object[_0x450daa(0x209)](this[_0x450daa(0x1ea)][_0x450daa(0x1cf)])){if(_0x47e323[_0x450daa(0x213)][_0x450daa(0x1e5)](_0x598bd1[_0x450daa(0x1c8)]('/','')))return this[_0x450daa(0x1e4)](_0x5a8bbe,_0x450daa(0x1c6));}if(this[_0x450daa(0x1e7)](_0x47e323[_0x450daa(0x213)],_0x47e323[_0x450daa(0x1c7)])){const _0x7be6f2=this[_0x450daa(0x1f6)](_0x47e323[_0x450daa(0x213)],_0x47e323[_0x450daa(0x1c7)]);return{'type':'webrtc','reason':_0x450daa(0x1d7),'isLargeData':!![],'estimatedSize':_0x7be6f2,'maxFrequency':null};}const _0x31e53a=this[_0x450daa(0x203)](_0x47e323[_0x450daa(0x213)],_0x47e323[_0x450daa(0x1c7)]),_0x2ab446=this[_0x450daa(0x1f6)](_0x47e323[_0x450daa(0x213)],_0x47e323[_0x450daa(0x1c7)]);if(_0x31e53a||_0x2ab446>this[_0x450daa(0x1ea)][_0x450daa(0x220)]){let _0x3acb5c=this[_0x450daa(0x1ea)][_0x450daa(0x1d6)][_0x47e323[_0x450daa(0x1c7)]]||0xa,_0x1ae72e=_0x450daa(0x1c3);if(_0x47e323[_0x450daa(0x1c7)]['includes'](_0x450daa(0x1ec))||_0x47e323[_0x450daa(0x213)]['includes']('points'))_0x3acb5c=this[_0x450daa(0x1ea)]['throttleFrequencies'][_0x47e323[_0x450daa(0x1c7)]]||0x5,_0x1ae72e=_0x450daa(0x1d0);else{if(_0x47e323[_0x450daa(0x1c7)][_0x450daa(0x1e5)](_0x450daa(0x215))||_0x47e323[_0x450daa(0x213)][_0x450daa(0x1e5)](_0x450daa(0x20f)))_0x3acb5c=this[_0x450daa(0x1ea)][_0x450daa(0x1d6)][_0x47e323[_0x450daa(0x1c7)]]||0xf,_0x1ae72e='laser_scan_throttled';else _0x47e323[_0x450daa(0x1c7)]['includes'](_0x450daa(0x1c5))&&(_0x3acb5c=this['config'][_0x450daa(0x1d6)][_0x47e323[_0x450daa(0x1c7)]]||0xa,_0x1ae72e=_0x450daa(0x1f0));}return{'type':_0x450daa(0x1fa),'reason':_0x1ae72e,'isLargeData':!![],'estimatedSize':_0x2ab446,'maxFrequency':_0x3acb5c};}return{'type':_0x450daa(0x218),'reason':_0x450daa(0x1e6),'isLargeData':![],'estimatedSize':_0x2ab446,'maxFrequency':null};}[a4_0x2772b2(0x1e4)](_0x3d6e58,_0x3c923a){const _0x3e97b3=a4_0x2772b2;if(_0x3d6e58[_0x3e97b3(0x1e5)](':')){const [_0x2aec7e,_0x2afde2]=_0x3d6e58[_0x3e97b3(0x1fc)](':');return{'type':_0x2aec7e,'reason':_0x3c923a,'isLargeData':!![],'maxFrequency':_0x2aec7e===_0x3e97b3(0x1fa)?parseFloat(_0x2afde2):null,'estimatedSize':this[_0x3e97b3(0x1ea)]['largeDataThreshold']+0x1};}return{'type':_0x3d6e58,'reason':_0x3c923a,'isLargeData':_0x3d6e58!=='websocket','maxFrequency':null,'estimatedSize':this['config'][_0x3e97b3(0x220)]+0x1};}['isLargeDataTopic'](_0x3eefb9,_0x19bbf2){const _0x5c7482=a4_0x2772b2,_0x295000=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x242504=[_0x5c7482(0x204),'sensor_msgs/msg/Image','sensor_msgs/msg/LaserScan','sensor_msgs/msg/CompressedImage'];return _0x295000[_0x5c7482(0x1e8)](_0x782556=>_0x782556[_0x5c7482(0x1df)](_0x3eefb9))||_0x242504['includes'](_0x19bbf2);}[a4_0x2772b2(0x1e7)](_0x17bd97,_0xd3c0f4=''){const _0x19d8a1=a4_0x2772b2,_0x28b86b=['sensor_msgs/msg/Image',_0x19d8a1(0x1de)];if(_0x28b86b[_0x19d8a1(0x1e5)](_0xd3c0f4))return!_0x17bd97['includes']('points')&&!_0x17bd97[_0x19d8a1(0x1e5)](_0x19d8a1(0x1c9))&&!_0x17bd97[_0x19d8a1(0x1e5)](_0x19d8a1(0x20b));return(_0x17bd97[_0x19d8a1(0x1e5)]('image')||_0x17bd97[_0x19d8a1(0x1e5)](_0x19d8a1(0x1dd)))&&!_0x17bd97['includes']('points')&&!_0x17bd97[_0x19d8a1(0x1e5)](_0x19d8a1(0x1c9))&&!_0x17bd97[_0x19d8a1(0x1e5)](_0x19d8a1(0x20b));}[a4_0x2772b2(0x1f6)](_0x321d7b,_0x5423da){const _0x2774c6=a4_0x2772b2,_0x40bd0={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x40bd0[_0x5423da])return _0x40bd0[_0x5423da];if(_0x321d7b[_0x2774c6(0x1e5)](_0x2774c6(0x1d3))||_0x321d7b[_0x2774c6(0x1e5)](_0x2774c6(0x1f1)))return 0x190*0x400;if(_0x321d7b['includes'](_0x2774c6(0x1ee)))return 0x12c*0x400;if(_0x321d7b[_0x2774c6(0x1e5)]('compressed'))return 0x32*0x400;return 0x400;}['handleMessage'](_0x52ab66){const _0x42eb6f=a4_0x2772b2;let _0x5a87f5=this[_0x42eb6f(0x221)][_0x42eb6f(0x20c)](_0x52ab66[_0x42eb6f(0x1ff)]);if(!_0x5a87f5){console[_0x42eb6f(0x210)](_0x42eb6f(0x20e)+_0x52ab66[_0x42eb6f(0x1ff)]);let _0x117014=_0x42eb6f(0x1ca);if(_0x52ab66[_0x42eb6f(0x1ff)][_0x42eb6f(0x1e5)](_0x42eb6f(0x1d5))&&_0x52ab66[_0x42eb6f(0x1ff)][_0x42eb6f(0x1e5)](_0x42eb6f(0x1dd)))_0x117014=_0x42eb6f(0x1de);else{if(_0x52ab66[_0x42eb6f(0x1ff)][_0x42eb6f(0x1e5)](_0x42eb6f(0x1d5)))_0x117014=_0x42eb6f(0x1d1);else{if(_0x52ab66['topic'][_0x42eb6f(0x1e5)](_0x42eb6f(0x1d3))||_0x52ab66[_0x42eb6f(0x1ff)][_0x42eb6f(0x1e5)](_0x42eb6f(0x1f1)))_0x117014=_0x42eb6f(0x204);else _0x52ab66[_0x42eb6f(0x1ff)][_0x42eb6f(0x1e5)](_0x42eb6f(0x20f))&&(_0x117014=_0x42eb6f(0x223));}}const _0x7ef4f={'name':_0x52ab66[_0x42eb6f(0x1ff)],'type':_0x117014};this[_0x42eb6f(0x1c2)](_0x7ef4f),_0x5a87f5=this[_0x42eb6f(0x221)]['get'](_0x52ab66['topic']);}if(!_0x5a87f5)return{'action':'forward','message':_0x52ab66};switch(_0x5a87f5[_0x42eb6f(0x216)]){case _0x42eb6f(0x1fa):return this[_0x42eb6f(0x1d2)](_0x52ab66[_0x42eb6f(0x1ff)],_0x5a87f5['maxFrequency'])?{'action':'forward','message':_0x52ab66}:{'action':_0x42eb6f(0x1c4)};case _0x42eb6f(0x21c):return{'action':'webrtc_skip'};case _0x42eb6f(0x218):default:return{'action':_0x42eb6f(0x202),'message':_0x52ab66};}}[a4_0x2772b2(0x1d2)](_0x4832ae,_0x67b2d2){const _0x9f9f18=a4_0x2772b2;if(!_0x67b2d2)return!![];const _0x2aaaa6=Date[_0x9f9f18(0x21f)](),_0x4fe764=0x3e8/_0x67b2d2;!this[_0x9f9f18(0x21b)]['has'](_0x4832ae)&&this['lastMessageTimes'][_0x9f9f18(0x1fe)](_0x4832ae,0x0);const _0x2cd738=this[_0x9f9f18(0x21b)][_0x9f9f18(0x20c)](_0x4832ae),_0x979387=_0x2aaaa6-_0x2cd738;if(_0x979387>=_0x4fe764)return this[_0x9f9f18(0x21b)][_0x9f9f18(0x1fe)](_0x4832ae,_0x2aaaa6),!![];return![];}[a4_0x2772b2(0x201)](_0x211749){const _0x1621ff=a4_0x2772b2;return this[_0x1621ff(0x221)][_0x1621ff(0x20c)](_0x211749);}[a4_0x2772b2(0x1e3)](){const _0x4e5c6c=a4_0x2772b2;return Array[_0x4e5c6c(0x1cb)](this['topicStrategies'][_0x4e5c6c(0x209)]())[_0x4e5c6c(0x214)](([_0x446383,_0x356e83])=>({'topic':_0x446383,..._0x356e83}));}['shouldUseWebRTC'](_0x24c064){const _0x5710b9=a4_0x2772b2,_0x14e4cc=this[_0x5710b9(0x221)][_0x5710b9(0x20c)](_0x24c064);return _0x14e4cc?.[_0x5710b9(0x216)]===_0x5710b9(0x1f3);}['getStatistics'](){const _0x244e46=a4_0x2772b2,_0x1e418c={};return this[_0x244e46(0x221)][_0x244e46(0x1d8)]((_0x1aa7f2,_0x32d848)=>{const _0x56f30c=_0x244e46;!_0x1e418c[_0x1aa7f2[_0x56f30c(0x216)]]&&(_0x1e418c[_0x1aa7f2[_0x56f30c(0x216)]]=0x0),_0x1e418c[_0x1aa7f2['strategy']]++;}),{'totalTopics':this[_0x244e46(0x221)][_0x244e46(0x1eb)],'strategies':_0x1e418c,'largeDataTopics':Array['from'](this['topicStrategies']['entries']())[_0x244e46(0x1c1)](([_0x4cff15,_0x5424fb])=>_0x5424fb[_0x244e46(0x217)])[_0x244e46(0x214)](([_0x4fe20f,_0x1d6a64])=>_0x4fe20f)};}}module[a4_0x2772b2(0x1e2)]=new TopicManager();