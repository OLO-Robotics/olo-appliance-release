function a4_0x354b(){const _0x54b672=['getTopicStrategy','types','user_configured','[TopicManager]\x20Topic\x20discovery\x20failed:','search','777995jECKVK','log','cloud','topic','analyzeTopicStrategy','type','webrtc_skip','toString','reason','sensor_msgs/msg/CompressedImage','80UPyoCo','size','error','discoverTopics','split','3523257LGABYg','898640XxDNNJ','11bPRNSZ','now','config','video_webrtc_streaming','2BUQCLu','laser_scan_throttled','142218PIkZBD','image_raw','isLargeData','determineTopicStrategy','6412055uZaiGW','lastMessageTimes','largeDataThreshold','scan','depth_points','topicHandling','discoveryInProgress','isLargeDataTopic','test','loadConfig','strategy','throttle','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','exports','252uwhVPa','constructor','topics','LaserScan','topicStrategies','[TopicManager]\x20Found\x20','from','getManagedTopics','point','3301720bJQdVz','maxFrequency','[TopicManager]\x20Topic\x20discovery\x20completed','normal_size','shouldUseWebRTC','webrtc','get','(((.+)+)+)+$','estimateTopicSize','webrtc_only','length','unknown','filter','name','\x20topics','[TopicManager]\x20Topic\x20','[TopicManager]\x20Initialised','throttle_skip','map','sensor_msgs/msg/LaserScan','Image','compressed','120sQaxfI','pattern_configured','shouldThrottle','strategiesConfig','defaultLargeDataStrategy','PointCloud2','set','large_data_throttled','has','getStatistics','includes','sensor_msgs/msg/Image','child_process','forward','isCameraTopic','parseStrategyConfig','websocket','337925kHQFqD','point_cloud','image_throttled','points','sensor_msgs/msg/PointCloud2','strategies','135tvwHLe','entries','throttleFrequencies','handleMessage'];a4_0x354b=function(){return _0x54b672;};return a4_0x354b();}const a4_0x12accb=a4_0x5857;(function(_0x3ab58b,_0x48647e){const _0x5f25a6=a4_0x5857,_0x2ed250=_0x3ab58b();while(!![]){try{const _0x186153=parseInt(_0x5f25a6(0x10a))/0x1*(parseInt(_0x5f25a6(0x11f))/0x2)+-parseInt(_0x5f25a6(0x119))/0x3+-parseInt(_0x5f25a6(0x114))/0x4*(parseInt(_0x5f25a6(0xfb))/0x5)+parseInt(_0x5f25a6(0x121))/0x6*(-parseInt(_0x5f25a6(0x133))/0x7)+-parseInt(_0x5f25a6(0x11a))/0x8*(parseInt(_0x5f25a6(0x101))/0x9)+parseInt(_0x5f25a6(0xd4))/0xa*(parseInt(_0x5f25a6(0x11b))/0xb)+parseInt(_0x5f25a6(0xea))/0xc*(parseInt(_0x5f25a6(0x125))/0xd);if(_0x186153===_0x48647e)break;else _0x2ed250['push'](_0x2ed250['shift']());}catch(_0x402ce7){_0x2ed250['push'](_0x2ed250['shift']());}}}(a4_0x354b,0xee50c));const a4_0x4bfe94=(function(){let _0x732899=!![];return function(_0x321c55,_0x45be38){const _0x4a8db3=_0x732899?function(){if(_0x45be38){const _0x50a6b0=_0x45be38['apply'](_0x321c55,arguments);return _0x45be38=null,_0x50a6b0;}}:function(){};return _0x732899=![],_0x4a8db3;};}()),a4_0x1422a2=a4_0x4bfe94(this,function(){const _0x11b63c=a4_0x5857;return a4_0x1422a2[_0x11b63c(0x111)]()[_0x11b63c(0x109)](_0x11b63c(0xdb))['toString']()[_0x11b63c(0x134)](a4_0x1422a2)[_0x11b63c(0x109)](_0x11b63c(0xdb));});function a4_0x5857(_0x5699a7,_0x39ec95){const _0x3aa81c=a4_0x354b();return a4_0x5857=function(_0x1422a2,_0x4bfe94){_0x1422a2=_0x1422a2-0xd0;let _0x354b5e=_0x3aa81c[_0x1422a2];return _0x354b5e;},a4_0x5857(_0x5699a7,_0x39ec95);}a4_0x1422a2();const {execSync}=require(a4_0x12accb(0xf6));class TopicManager{constructor(){const _0x4cbed5=a4_0x12accb;this[_0x4cbed5(0x137)]=new Map(),this['lastMessageTimes']=new Map(),this[_0x4cbed5(0x12b)]=![],this[_0x4cbed5(0x11d)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x4cbed5(0xdd),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console['log'](_0x4cbed5(0xe4));}[a4_0x12accb(0x12e)](_0x675fef){const _0x185d58=a4_0x12accb;if(_0x675fef[_0x185d58(0x12a)]){const _0x1ff931=_0x675fef['topicHandling'];_0x1ff931[_0x185d58(0x127)]&&(this[_0x185d58(0x11d)][_0x185d58(0x127)]=_0x1ff931[_0x185d58(0x127)]),_0x1ff931[_0x185d58(0xee)]&&(this[_0x185d58(0x11d)][_0x185d58(0xee)]=_0x1ff931[_0x185d58(0xee)]),_0x1ff931[_0x185d58(0x100)]&&(this['config'][_0x185d58(0xed)]={..._0x1ff931[_0x185d58(0x100)]}),_0x1ff931[_0x185d58(0x103)]&&(this['config'][_0x185d58(0x103)]={...this[_0x185d58(0x11d)][_0x185d58(0x103)],..._0x1ff931[_0x185d58(0x103)]}),console[_0x185d58(0x10b)]('[TopicManager]\x20Loaded\x20configuration:',this['config']);}}async[a4_0x12accb(0x117)](_0x1b25f7){const _0x22af2c=a4_0x12accb;if(this['discoveryInProgress']||!_0x1b25f7)return;this['discoveryInProgress']=!![],console[_0x22af2c(0x10b)]('[TopicManager]\x20Starting\x20topic\x20discovery...');try{await new Promise((_0x148a16,_0x19dab6)=>{_0x1b25f7['getTopics'](_0x2ab330=>{const _0x2a4c46=a4_0x5857,_0xd2580b=_0x2ab330[_0x2a4c46(0x135)][_0x2a4c46(0xe6)]((_0x47bacd,_0x1a5c71)=>({'name':_0x47bacd,'type':_0x2ab330[_0x2a4c46(0x106)][_0x1a5c71]}));console['log'](_0x2a4c46(0xd0)+_0xd2580b[_0x2a4c46(0xde)]+_0x2a4c46(0xe2));for(const _0x11f3fa of _0xd2580b){this[_0x2a4c46(0x10e)](_0x11f3fa);}console[_0x2a4c46(0x10b)](_0x2a4c46(0xd6)),console[_0x2a4c46(0x10b)]('[TopicManager]\x20Strategies:',Array[_0x2a4c46(0xd1)](this[_0x2a4c46(0x137)][_0x2a4c46(0x102)]())),_0x148a16();},_0x368ae0=>{const _0x29cfba=a4_0x5857;console[_0x29cfba(0x116)]('[TopicManager]\x20Error\x20getting\x20topics:',_0x368ae0),_0x19dab6(_0x368ae0);});});}catch(_0x13ad6c){console[_0x22af2c(0x116)](_0x22af2c(0x108),_0x13ad6c);}finally{this['discoveryInProgress']=![];}}[a4_0x12accb(0x10e)](_0x3a5827){const _0x597c7b=a4_0x12accb,_0x1ae800=this[_0x597c7b(0x124)](_0x3a5827);this[_0x597c7b(0x137)]['set'](_0x3a5827[_0x597c7b(0xe1)],{'type':_0x3a5827[_0x597c7b(0x10f)],'strategy':_0x1ae800[_0x597c7b(0x10f)],'reason':_0x1ae800[_0x597c7b(0x112)],'maxFrequency':_0x1ae800[_0x597c7b(0xd5)],'isLargeData':_0x1ae800[_0x597c7b(0x123)],'estimatedSize':_0x1ae800['estimatedSize']}),console[_0x597c7b(0x10b)](_0x597c7b(0xe3)+_0x3a5827['name']+':\x20'+_0x1ae800[_0x597c7b(0x10f)]+'\x20('+_0x1ae800[_0x597c7b(0x112)]+')');}[a4_0x12accb(0x124)](_0xa88417){const _0x59acc5=a4_0x12accb;if(this[_0x59acc5(0x11d)][_0x59acc5(0xed)][_0xa88417['name']]){const _0x164200=this[_0x59acc5(0x11d)][_0x59acc5(0xed)][_0xa88417[_0x59acc5(0xe1)]];return this['parseStrategyConfig'](_0x164200,_0x59acc5(0x107));}for(const [_0xbd3fb5,_0xa603c1]of Object[_0x59acc5(0x102)](this[_0x59acc5(0x11d)]['strategiesConfig'])){if(_0xa88417[_0x59acc5(0xe1)][_0x59acc5(0xf4)](_0xbd3fb5['replace']('/','')))return this[_0x59acc5(0xf9)](_0xa603c1,_0x59acc5(0xeb));}if(this[_0x59acc5(0xf8)](_0xa88417[_0x59acc5(0xe1)],_0xa88417['type'])){const _0x394bb8=this['estimateTopicSize'](_0xa88417[_0x59acc5(0xe1)],_0xa88417['type']);return{'type':_0x59acc5(0xd9),'reason':_0x59acc5(0x11e),'isLargeData':!![],'estimatedSize':_0x394bb8,'maxFrequency':null};}const _0x1cbf35=this[_0x59acc5(0x12c)](_0xa88417[_0x59acc5(0xe1)],_0xa88417[_0x59acc5(0x10f)]),_0x2f4876=this[_0x59acc5(0xdc)](_0xa88417[_0x59acc5(0xe1)],_0xa88417['type']);if(_0x1cbf35||_0x2f4876>this['config'][_0x59acc5(0x127)]){let _0xce5870=this[_0x59acc5(0x11d)][_0x59acc5(0x103)][_0xa88417[_0x59acc5(0x10f)]]||0xa,_0x3c9fef=_0x59acc5(0xf1);if(_0xa88417[_0x59acc5(0x10f)][_0x59acc5(0xf4)](_0x59acc5(0xef))||_0xa88417[_0x59acc5(0xe1)][_0x59acc5(0xf4)]('points'))_0xce5870=this['config'][_0x59acc5(0x103)][_0xa88417[_0x59acc5(0x10f)]]||0x5,_0x3c9fef='point_cloud_throttled';else{if(_0xa88417[_0x59acc5(0x10f)][_0x59acc5(0xf4)](_0x59acc5(0x136))||_0xa88417[_0x59acc5(0xe1)][_0x59acc5(0xf4)](_0x59acc5(0x128)))_0xce5870=this[_0x59acc5(0x11d)][_0x59acc5(0x103)][_0xa88417['type']]||0xf,_0x3c9fef=_0x59acc5(0x120);else _0xa88417[_0x59acc5(0x10f)][_0x59acc5(0xf4)](_0x59acc5(0xe8))&&(_0xce5870=this['config'][_0x59acc5(0x103)][_0xa88417['type']]||0xa,_0x3c9fef=_0x59acc5(0xfd));}return{'type':_0x59acc5(0x130),'reason':_0x3c9fef,'isLargeData':!![],'estimatedSize':_0x2f4876,'maxFrequency':_0xce5870};}return{'type':_0x59acc5(0xfa),'reason':_0x59acc5(0xd7),'isLargeData':![],'estimatedSize':_0x2f4876,'maxFrequency':null};}[a4_0x12accb(0xf9)](_0x42d160,_0x504fe4){const _0x257dda=a4_0x12accb;if(_0x42d160[_0x257dda(0xf4)](':')){const [_0x2a1831,_0x418985]=_0x42d160[_0x257dda(0x118)](':');return{'type':_0x2a1831,'reason':_0x504fe4,'isLargeData':!![],'maxFrequency':_0x2a1831===_0x257dda(0x130)?parseFloat(_0x418985):null,'estimatedSize':this[_0x257dda(0x11d)][_0x257dda(0x127)]+0x1};}return{'type':_0x42d160,'reason':_0x504fe4,'isLargeData':_0x42d160!=='websocket','maxFrequency':null,'estimatedSize':this['config'][_0x257dda(0x127)]+0x1};}[a4_0x12accb(0x12c)](_0x4f87f3,_0x6c9009){const _0xa58c81=a4_0x12accb,_0x57aed6=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x3c8f0e=['sensor_msgs/msg/PointCloud2','sensor_msgs/msg/Image',_0xa58c81(0xe7),_0xa58c81(0x113)];return _0x57aed6['some'](_0x55e180=>_0x55e180[_0xa58c81(0x12d)](_0x4f87f3))||_0x3c8f0e[_0xa58c81(0xf4)](_0x6c9009);}[a4_0x12accb(0xf8)](_0x350dee,_0x41a0d6=''){const _0x307ca0=a4_0x12accb,_0x2e553c=[_0x307ca0(0xf5),_0x307ca0(0x113)];if(_0x2e553c[_0x307ca0(0xf4)](_0x41a0d6))return!_0x350dee['includes']('points')&&!_0x350dee[_0x307ca0(0xf4)]('point_cloud')&&!_0x350dee[_0x307ca0(0xf4)]('depth_points');return(_0x350dee['includes']('image')||_0x350dee[_0x307ca0(0xf4)](_0x307ca0(0xe9)))&&!_0x350dee['includes'](_0x307ca0(0xfe))&&!_0x350dee[_0x307ca0(0xf4)](_0x307ca0(0xfc))&&!_0x350dee[_0x307ca0(0xf4)](_0x307ca0(0x129));}[a4_0x12accb(0xdc)](_0x47ec17,_0x3b09bd){const _0x344606=a4_0x12accb,_0x82b846={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x82b846[_0x3b09bd])return _0x82b846[_0x3b09bd];if(_0x47ec17[_0x344606(0xf4)](_0x344606(0xd3))||_0x47ec17[_0x344606(0xf4)](_0x344606(0x10c)))return 0x190*0x400;if(_0x47ec17[_0x344606(0xf4)](_0x344606(0x122)))return 0x12c*0x400;if(_0x47ec17[_0x344606(0xf4)]('compressed'))return 0x32*0x400;return 0x400;}[a4_0x12accb(0x104)](_0x54be28){const _0x4810ec=a4_0x12accb;let _0x6af823=this['topicStrategies'][_0x4810ec(0xda)](_0x54be28[_0x4810ec(0x10d)]);if(!_0x6af823){console['log'](_0x4810ec(0x131)+_0x54be28[_0x4810ec(0x10d)]);let _0x4d2f16=_0x4810ec(0xdf);if(_0x54be28[_0x4810ec(0x10d)][_0x4810ec(0xf4)]('image')&&_0x54be28[_0x4810ec(0x10d)]['includes'](_0x4810ec(0xe9)))_0x4d2f16=_0x4810ec(0x113);else{if(_0x54be28[_0x4810ec(0x10d)][_0x4810ec(0xf4)]('image'))_0x4d2f16='sensor_msgs/msg/Image';else{if(_0x54be28[_0x4810ec(0x10d)]['includes'](_0x4810ec(0xd3))||_0x54be28[_0x4810ec(0x10d)][_0x4810ec(0xf4)](_0x4810ec(0x10c)))_0x4d2f16=_0x4810ec(0xff);else _0x54be28['topic']['includes'](_0x4810ec(0x128))&&(_0x4d2f16='sensor_msgs/msg/LaserScan');}}const _0xe8fb09={'name':_0x54be28[_0x4810ec(0x10d)],'type':_0x4d2f16};this['analyzeTopicStrategy'](_0xe8fb09),_0x6af823=this[_0x4810ec(0x137)][_0x4810ec(0xda)](_0x54be28[_0x4810ec(0x10d)]);}if(!_0x6af823)return{'action':'forward','message':_0x54be28};switch(_0x6af823[_0x4810ec(0x12f)]){case _0x4810ec(0x130):return this[_0x4810ec(0xec)](_0x54be28[_0x4810ec(0x10d)],_0x6af823[_0x4810ec(0xd5)])?{'action':'forward','message':_0x54be28}:{'action':_0x4810ec(0xe5)};case _0x4810ec(0xd9):return{'action':_0x4810ec(0x110)};case _0x4810ec(0xfa):default:return{'action':_0x4810ec(0xf7),'message':_0x54be28};}}[a4_0x12accb(0xec)](_0x4aeb39,_0x1edecd){const _0x51d07d=a4_0x12accb;if(!_0x1edecd)return!![];const _0x26ec63=Date[_0x51d07d(0x11c)](),_0x1bc7b7=0x3e8/_0x1edecd;!this['lastMessageTimes'][_0x51d07d(0xf2)](_0x4aeb39)&&this[_0x51d07d(0x126)][_0x51d07d(0xf0)](_0x4aeb39,0x0);const _0x405c76=this[_0x51d07d(0x126)]['get'](_0x4aeb39),_0x430be7=_0x26ec63-_0x405c76;if(_0x430be7>=_0x1bc7b7)return this[_0x51d07d(0x126)][_0x51d07d(0xf0)](_0x4aeb39,_0x26ec63),!![];return![];}[a4_0x12accb(0x105)](_0x2dd6ed){const _0x3becc9=a4_0x12accb;return this[_0x3becc9(0x137)]['get'](_0x2dd6ed);}[a4_0x12accb(0xd2)](){const _0x56794a=a4_0x12accb;return Array[_0x56794a(0xd1)](this[_0x56794a(0x137)][_0x56794a(0x102)]())[_0x56794a(0xe6)](([_0x44b823,_0x1606f4])=>({'topic':_0x44b823,..._0x1606f4}));}[a4_0x12accb(0xd8)](_0x4b3c96){const _0x23e1b6=a4_0x12accb,_0x1a051a=this[_0x23e1b6(0x137)][_0x23e1b6(0xda)](_0x4b3c96);return _0x1a051a?.[_0x23e1b6(0x12f)]===_0x23e1b6(0xdd);}[a4_0x12accb(0xf3)](){const _0x3d8032=a4_0x12accb,_0x2603bd={};return this['topicStrategies']['forEach']((_0x1795b5,_0x225c61)=>{const _0x58ad92=a4_0x5857;!_0x2603bd[_0x1795b5[_0x58ad92(0x12f)]]&&(_0x2603bd[_0x1795b5['strategy']]=0x0),_0x2603bd[_0x1795b5[_0x58ad92(0x12f)]]++;}),{'totalTopics':this[_0x3d8032(0x137)][_0x3d8032(0x115)],'strategies':_0x2603bd,'largeDataTopics':Array['from'](this['topicStrategies'][_0x3d8032(0x102)]())[_0x3d8032(0xe0)](([_0x58f589,_0x54714d])=>_0x54714d[_0x3d8032(0x123)])[_0x3d8032(0xe6)](([_0x1979f4,_0x205b28])=>_0x1979f4)};}}module[a4_0x12accb(0x132)]=new TopicManager();