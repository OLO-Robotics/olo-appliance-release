const a4_0x1dbc56=a4_0x3a97;(function(_0x202832,_0x29701e){const _0x593e2c=a4_0x3a97,_0x386d58=_0x202832();while(!![]){try{const _0x9f5d26=-parseInt(_0x593e2c(0x18f))/0x1*(-parseInt(_0x593e2c(0x1b3))/0x2)+-parseInt(_0x593e2c(0x18d))/0x3+-parseInt(_0x593e2c(0x1be))/0x4+-parseInt(_0x593e2c(0x1bc))/0x5+parseInt(_0x593e2c(0x16b))/0x6+-parseInt(_0x593e2c(0x168))/0x7*(parseInt(_0x593e2c(0x1c0))/0x8)+parseInt(_0x593e2c(0x186))/0x9*(parseInt(_0x593e2c(0x183))/0xa);if(_0x9f5d26===_0x29701e)break;else _0x386d58['push'](_0x386d58['shift']());}catch(_0x3a9a47){_0x386d58['push'](_0x386d58['shift']());}}}(a4_0x294a,0x75262));const a4_0x563556=(function(){let _0x1605cd=!![];return function(_0x58cfb5,_0x18eb76){const _0x4fbb67=_0x1605cd?function(){const _0x193819=a4_0x3a97;if(_0x18eb76){const _0x2e0810=_0x18eb76[_0x193819(0x1b6)](_0x58cfb5,arguments);return _0x18eb76=null,_0x2e0810;}}:function(){};return _0x1605cd=![],_0x4fbb67;};}()),a4_0x27ef1d=a4_0x563556(this,function(){const _0x37f31d=a4_0x3a97;return a4_0x27ef1d[_0x37f31d(0x189)]()[_0x37f31d(0x191)](_0x37f31d(0x18c))[_0x37f31d(0x189)]()[_0x37f31d(0x17c)](a4_0x27ef1d)[_0x37f31d(0x191)](_0x37f31d(0x18c));});function a4_0x3a97(_0x1204b1,_0x19ecc4){const _0x392235=a4_0x294a();return a4_0x3a97=function(_0x27ef1d,_0x563556){_0x27ef1d=_0x27ef1d-0x167;let _0x294a76=_0x392235[_0x27ef1d];return _0x294a76;},a4_0x3a97(_0x1204b1,_0x19ecc4);}a4_0x27ef1d();function a4_0x294a(){const _0x28ee6e=['includes','test','isLargeData','discoverTopics','types','1356955KKVqsE','sensor_msgs/msg/Image','1401956vKlSzR','split','5718712VrATQQ','parseStrategyConfig','strategy','[TopicManager]\x20Topic\x20discovery\x20completed','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','throttleFrequencies','strategiesConfig','maxFrequency','unknown','webrtc_skip','normal_size','point_cloud_throttled','7OsgZOk','length','isCameraTopic','277152dldkpD','defaultLargeDataStrategy','error','point_cloud','user_configured','getManagedTopics','topicHandling','topic','shouldUseWebRTC','sensor_msgs/msg/LaserScan','topicStrategies','discoveryInProgress','scan','config','compressed','reason','replace','constructor','webrtc','[TopicManager]\x20Starting\x20topic\x20discovery...','throttle','filter','type','LaserScan','548470YblqeD','websocket','forward','333lYCwMU','from','PointCloud2','toString','[TopicManager]\x20Strategies:','strategies','(((.+)+)+)+$','1410909EZwvpD','some','1xawVwD','log','search','isLargeDataTopic','laser_scan_throttled','depth_points','[TopicManager]\x20Initialised','lastMessageTimes','webrtc_only','map','image','large_data_throttled','[TopicManager]\x20Topic\x20','sensor_msgs/msg/CompressedImage','loadConfig','largeDataThreshold','name','analyzeTopicStrategy','points','shouldThrottle','estimateTopicSize','handleMessage','getStatistics','[TopicManager]\x20Loaded\x20configuration:','cloud','[TopicManager]\x20Topic\x20discovery\x20failed:','[TopicManager]\x20Found\x20','[TopicManager]\x20Error\x20getting\x20topics:','topics','sensor_msgs/msg/PointCloud2','set','exports','determineTopicStrategy','now','get','image_raw','422666ljFZTi','entries','point','apply'];a4_0x294a=function(){return _0x28ee6e;};return a4_0x294a();}const {execSync}=require('child_process');class TopicManager{constructor(){const _0x258bbe=a4_0x3a97;this['topicStrategies']=new Map(),this[_0x258bbe(0x196)]=new Map(),this['discoveryInProgress']=![],this[_0x258bbe(0x178)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x258bbe(0x197),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console['log'](_0x258bbe(0x195));}[a4_0x1dbc56(0x19d)](_0x14b0d3){const _0x4f4499=a4_0x1dbc56;if(_0x14b0d3['topicHandling']){const _0x35da1e=_0x14b0d3[_0x4f4499(0x171)];_0x35da1e['largeDataThreshold']&&(this[_0x4f4499(0x178)][_0x4f4499(0x19e)]=_0x35da1e[_0x4f4499(0x19e)]),_0x35da1e[_0x4f4499(0x16c)]&&(this[_0x4f4499(0x178)]['defaultLargeDataStrategy']=_0x35da1e[_0x4f4499(0x16c)]),_0x35da1e[_0x4f4499(0x18b)]&&(this[_0x4f4499(0x178)]['strategiesConfig']={..._0x35da1e[_0x4f4499(0x18b)]}),_0x35da1e[_0x4f4499(0x1c5)]&&(this['config'][_0x4f4499(0x1c5)]={...this[_0x4f4499(0x178)]['throttleFrequencies'],..._0x35da1e[_0x4f4499(0x1c5)]}),console[_0x4f4499(0x190)](_0x4f4499(0x1a6),this[_0x4f4499(0x178)]);}}async[a4_0x1dbc56(0x1ba)](_0x2aa153){const _0x31fbf3=a4_0x1dbc56;if(this[_0x31fbf3(0x176)]||!_0x2aa153)return;this[_0x31fbf3(0x176)]=!![],console[_0x31fbf3(0x190)](_0x31fbf3(0x17e));try{await new Promise((_0x5976b9,_0x274068)=>{_0x2aa153['getTopics'](_0x5f417d=>{const _0x5be165=a4_0x3a97,_0x30b90f=_0x5f417d[_0x5be165(0x1ab)][_0x5be165(0x198)]((_0x1c7e7e,_0x8871b4)=>({'name':_0x1c7e7e,'type':_0x5f417d[_0x5be165(0x1bb)][_0x8871b4]}));console[_0x5be165(0x190)](_0x5be165(0x1a9)+_0x30b90f[_0x5be165(0x169)]+'\x20topics');for(const _0x11ef20 of _0x30b90f){this[_0x5be165(0x1a0)](_0x11ef20);}console['log'](_0x5be165(0x1c3)),console[_0x5be165(0x190)](_0x5be165(0x18a),Array[_0x5be165(0x187)](this[_0x5be165(0x175)][_0x5be165(0x1b4)]())),_0x5976b9();},_0x4b1822=>{const _0x25eb83=a4_0x3a97;console[_0x25eb83(0x16d)](_0x25eb83(0x1aa),_0x4b1822),_0x274068(_0x4b1822);});});}catch(_0x1b32fe){console[_0x31fbf3(0x16d)](_0x31fbf3(0x1a8),_0x1b32fe);}finally{this[_0x31fbf3(0x176)]=![];}}[a4_0x1dbc56(0x1a0)](_0x396c17){const _0xe31177=a4_0x1dbc56,_0xf463fe=this[_0xe31177(0x1af)](_0x396c17);this['topicStrategies'][_0xe31177(0x1ad)](_0x396c17[_0xe31177(0x19f)],{'type':_0x396c17[_0xe31177(0x181)],'strategy':_0xf463fe[_0xe31177(0x181)],'reason':_0xf463fe[_0xe31177(0x17a)],'maxFrequency':_0xf463fe[_0xe31177(0x1c7)],'isLargeData':_0xf463fe[_0xe31177(0x1b9)],'estimatedSize':_0xf463fe['estimatedSize']}),console['log'](_0xe31177(0x19b)+_0x396c17[_0xe31177(0x19f)]+':\x20'+_0xf463fe[_0xe31177(0x181)]+'\x20('+_0xf463fe[_0xe31177(0x17a)]+')');}[a4_0x1dbc56(0x1af)](_0x467558){const _0x4dc0f5=a4_0x1dbc56;if(this[_0x4dc0f5(0x178)][_0x4dc0f5(0x1c6)][_0x467558[_0x4dc0f5(0x19f)]]){const _0x24916d=this[_0x4dc0f5(0x178)][_0x4dc0f5(0x1c6)][_0x467558[_0x4dc0f5(0x19f)]];return this['parseStrategyConfig'](_0x24916d,_0x4dc0f5(0x16f));}for(const [_0x2ea197,_0x37f378]of Object[_0x4dc0f5(0x1b4)](this['config'][_0x4dc0f5(0x1c6)])){if(_0x467558[_0x4dc0f5(0x19f)][_0x4dc0f5(0x1b7)](_0x2ea197[_0x4dc0f5(0x17b)]('/','')))return this[_0x4dc0f5(0x1c1)](_0x37f378,'pattern_configured');}if(this[_0x4dc0f5(0x16a)](_0x467558[_0x4dc0f5(0x19f)],_0x467558[_0x4dc0f5(0x181)])){const _0x1b852c=this[_0x4dc0f5(0x1a3)](_0x467558['name'],_0x467558[_0x4dc0f5(0x181)]);return{'type':_0x4dc0f5(0x17d),'reason':'video_webrtc_streaming','isLargeData':!![],'estimatedSize':_0x1b852c,'maxFrequency':null};}const _0x283ad4=this['isLargeDataTopic'](_0x467558['name'],_0x467558[_0x4dc0f5(0x181)]),_0x45ccb0=this['estimateTopicSize'](_0x467558[_0x4dc0f5(0x19f)],_0x467558[_0x4dc0f5(0x181)]);if(_0x283ad4||_0x45ccb0>this[_0x4dc0f5(0x178)][_0x4dc0f5(0x19e)]){let _0x1ca6b7=this['config'][_0x4dc0f5(0x1c5)][_0x467558[_0x4dc0f5(0x181)]]||0xa,_0x2971c9=_0x4dc0f5(0x19a);if(_0x467558['type'][_0x4dc0f5(0x1b7)](_0x4dc0f5(0x188))||_0x467558[_0x4dc0f5(0x19f)][_0x4dc0f5(0x1b7)]('points'))_0x1ca6b7=this[_0x4dc0f5(0x178)][_0x4dc0f5(0x1c5)][_0x467558['type']]||0x5,_0x2971c9=_0x4dc0f5(0x167);else{if(_0x467558['type'][_0x4dc0f5(0x1b7)](_0x4dc0f5(0x182))||_0x467558[_0x4dc0f5(0x19f)][_0x4dc0f5(0x1b7)](_0x4dc0f5(0x177)))_0x1ca6b7=this[_0x4dc0f5(0x178)]['throttleFrequencies'][_0x467558[_0x4dc0f5(0x181)]]||0xf,_0x2971c9=_0x4dc0f5(0x193);else _0x467558['type'][_0x4dc0f5(0x1b7)]('Image')&&(_0x1ca6b7=this[_0x4dc0f5(0x178)][_0x4dc0f5(0x1c5)][_0x467558[_0x4dc0f5(0x181)]]||0xa,_0x2971c9='image_throttled');}return{'type':_0x4dc0f5(0x17f),'reason':_0x2971c9,'isLargeData':!![],'estimatedSize':_0x45ccb0,'maxFrequency':_0x1ca6b7};}return{'type':_0x4dc0f5(0x184),'reason':_0x4dc0f5(0x1ca),'isLargeData':![],'estimatedSize':_0x45ccb0,'maxFrequency':null};}['parseStrategyConfig'](_0x22202d,_0x3262b9){const _0x4f076f=a4_0x1dbc56;if(_0x22202d[_0x4f076f(0x1b7)](':')){const [_0x23737e,_0x3ec210]=_0x22202d[_0x4f076f(0x1bf)](':');return{'type':_0x23737e,'reason':_0x3262b9,'isLargeData':!![],'maxFrequency':_0x23737e===_0x4f076f(0x17f)?parseFloat(_0x3ec210):null,'estimatedSize':this['config']['largeDataThreshold']+0x1};}return{'type':_0x22202d,'reason':_0x3262b9,'isLargeData':_0x22202d!==_0x4f076f(0x184),'maxFrequency':null,'estimatedSize':this['config'][_0x4f076f(0x19e)]+0x1};}[a4_0x1dbc56(0x192)](_0x1b32c7,_0x2cde60){const _0x5f2daf=a4_0x1dbc56,_0x2d4548=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0xfc110d=[_0x5f2daf(0x1ac),_0x5f2daf(0x1bd),_0x5f2daf(0x174),_0x5f2daf(0x19c)];return _0x2d4548[_0x5f2daf(0x18e)](_0x3eba56=>_0x3eba56[_0x5f2daf(0x1b8)](_0x1b32c7))||_0xfc110d['includes'](_0x2cde60);}['isCameraTopic'](_0x275f30,_0x558aad=''){const _0x21f599=a4_0x1dbc56,_0x28d450=[_0x21f599(0x1bd),'sensor_msgs/msg/CompressedImage'];if(_0x28d450['includes'](_0x558aad))return!_0x275f30[_0x21f599(0x1b7)]('points')&&!_0x275f30[_0x21f599(0x1b7)](_0x21f599(0x16e))&&!_0x275f30[_0x21f599(0x1b7)]('depth_points');return(_0x275f30['includes'](_0x21f599(0x199))||_0x275f30[_0x21f599(0x1b7)]('compressed'))&&!_0x275f30[_0x21f599(0x1b7)](_0x21f599(0x1a1))&&!_0x275f30[_0x21f599(0x1b7)](_0x21f599(0x16e))&&!_0x275f30[_0x21f599(0x1b7)](_0x21f599(0x194));}[a4_0x1dbc56(0x1a3)](_0x505cbb,_0x3de602){const _0x2af257=a4_0x1dbc56,_0x5c244a={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x5c244a[_0x3de602])return _0x5c244a[_0x3de602];if(_0x505cbb[_0x2af257(0x1b7)]('point')||_0x505cbb[_0x2af257(0x1b7)]('cloud'))return 0x190*0x400;if(_0x505cbb[_0x2af257(0x1b7)](_0x2af257(0x1b2)))return 0x12c*0x400;if(_0x505cbb['includes'](_0x2af257(0x179)))return 0x32*0x400;return 0x400;}[a4_0x1dbc56(0x1a4)](_0x1c3c90){const _0x302231=a4_0x1dbc56;let _0x59b4b8=this[_0x302231(0x175)]['get'](_0x1c3c90[_0x302231(0x172)]);if(!_0x59b4b8){console[_0x302231(0x190)](_0x302231(0x1c4)+_0x1c3c90[_0x302231(0x172)]);let _0x5133e6=_0x302231(0x1c8);if(_0x1c3c90['topic']['includes'](_0x302231(0x199))&&_0x1c3c90[_0x302231(0x172)][_0x302231(0x1b7)](_0x302231(0x179)))_0x5133e6=_0x302231(0x19c);else{if(_0x1c3c90[_0x302231(0x172)][_0x302231(0x1b7)]('image'))_0x5133e6=_0x302231(0x1bd);else{if(_0x1c3c90['topic'][_0x302231(0x1b7)](_0x302231(0x1b5))||_0x1c3c90['topic'][_0x302231(0x1b7)](_0x302231(0x1a7)))_0x5133e6=_0x302231(0x1ac);else _0x1c3c90[_0x302231(0x172)][_0x302231(0x1b7)](_0x302231(0x177))&&(_0x5133e6=_0x302231(0x174));}}const _0x70d801={'name':_0x1c3c90['topic'],'type':_0x5133e6};this[_0x302231(0x1a0)](_0x70d801),_0x59b4b8=this[_0x302231(0x175)]['get'](_0x1c3c90[_0x302231(0x172)]);}if(!_0x59b4b8)return{'action':_0x302231(0x185),'message':_0x1c3c90};switch(_0x59b4b8[_0x302231(0x1c2)]){case'throttle':return this['shouldThrottle'](_0x1c3c90[_0x302231(0x172)],_0x59b4b8[_0x302231(0x1c7)])?{'action':_0x302231(0x185),'message':_0x1c3c90}:{'action':'throttle_skip'};case _0x302231(0x17d):return{'action':_0x302231(0x1c9)};case'websocket':default:return{'action':_0x302231(0x185),'message':_0x1c3c90};}}[a4_0x1dbc56(0x1a2)](_0x311ea3,_0x2dda7b){const _0x2c208a=a4_0x1dbc56;if(!_0x2dda7b)return!![];const _0x535266=Date[_0x2c208a(0x1b0)](),_0x1cfcd5=0x3e8/_0x2dda7b;!this[_0x2c208a(0x196)]['has'](_0x311ea3)&&this[_0x2c208a(0x196)][_0x2c208a(0x1ad)](_0x311ea3,0x0);const _0x354f05=this[_0x2c208a(0x196)][_0x2c208a(0x1b1)](_0x311ea3),_0x42621a=_0x535266-_0x354f05;if(_0x42621a>=_0x1cfcd5)return this[_0x2c208a(0x196)][_0x2c208a(0x1ad)](_0x311ea3,_0x535266),!![];return![];}['getTopicStrategy'](_0x354e93){const _0x5637c1=a4_0x1dbc56;return this[_0x5637c1(0x175)]['get'](_0x354e93);}[a4_0x1dbc56(0x170)](){const _0x29d4e5=a4_0x1dbc56;return Array[_0x29d4e5(0x187)](this['topicStrategies'][_0x29d4e5(0x1b4)]())[_0x29d4e5(0x198)](([_0x47a519,_0x10e40c])=>({'topic':_0x47a519,..._0x10e40c}));}[a4_0x1dbc56(0x173)](_0x1d5aea){const _0x39503c=a4_0x1dbc56,_0x586843=this[_0x39503c(0x175)][_0x39503c(0x1b1)](_0x1d5aea);return _0x586843?.[_0x39503c(0x1c2)]===_0x39503c(0x197);}[a4_0x1dbc56(0x1a5)](){const _0x16167c=a4_0x1dbc56,_0xb8fb0c={};return this[_0x16167c(0x175)]['forEach']((_0x4920b1,_0x35002f)=>{const _0x3c6762=_0x16167c;!_0xb8fb0c[_0x4920b1[_0x3c6762(0x1c2)]]&&(_0xb8fb0c[_0x4920b1[_0x3c6762(0x1c2)]]=0x0),_0xb8fb0c[_0x4920b1[_0x3c6762(0x1c2)]]++;}),{'totalTopics':this[_0x16167c(0x175)]['size'],'strategies':_0xb8fb0c,'largeDataTopics':Array[_0x16167c(0x187)](this['topicStrategies']['entries']())[_0x16167c(0x180)](([_0x1f1357,_0x328418])=>_0x328418[_0x16167c(0x1b9)])['map'](([_0x59610d,_0x332ffd])=>_0x59610d)};}}module[a4_0x1dbc56(0x1ae)]=new TopicManager();