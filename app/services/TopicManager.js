const a4_0x2dcde1=a4_0xb289;(function(_0x18fb58,_0x1747a4){const _0x3a6551=a4_0xb289,_0x3f610b=_0x18fb58();while(!![]){try{const _0x1587ce=parseInt(_0x3a6551(0x193))/0x1+-parseInt(_0x3a6551(0x16f))/0x2*(-parseInt(_0x3a6551(0x158))/0x3)+-parseInt(_0x3a6551(0x18b))/0x4*(-parseInt(_0x3a6551(0x18c))/0x5)+-parseInt(_0x3a6551(0x19b))/0x6*(-parseInt(_0x3a6551(0x1a0))/0x7)+parseInt(_0x3a6551(0x159))/0x8+-parseInt(_0x3a6551(0x194))/0x9*(-parseInt(_0x3a6551(0x184))/0xa)+-parseInt(_0x3a6551(0x15c))/0xb;if(_0x1587ce===_0x1747a4)break;else _0x3f610b['push'](_0x3f610b['shift']());}catch(_0x88c68b){_0x3f610b['push'](_0x3f610b['shift']());}}}(a4_0x4c44,0xb9e24));const a4_0x25397c=(function(){let _0x17b842=!![];return function(_0x34069a,_0x5755a1){const _0x5435f7=_0x17b842?function(){const _0x156086=a4_0xb289;if(_0x5755a1){const _0x128e6a=_0x5755a1[_0x156086(0x1ac)](_0x34069a,arguments);return _0x5755a1=null,_0x128e6a;}}:function(){};return _0x17b842=![],_0x5435f7;};}()),a4_0x35684d=a4_0x25397c(this,function(){const _0xb07389=a4_0xb289;return a4_0x35684d['toString']()[_0xb07389(0x161)](_0xb07389(0x196))['toString']()['constructor'](a4_0x35684d)[_0xb07389(0x161)](_0xb07389(0x196));});a4_0x35684d();function a4_0xb289(_0x412e11,_0x107b67){const _0x1f1025=a4_0x4c44();return a4_0xb289=function(_0x35684d,_0x25397c){_0x35684d=_0x35684d-0x157;let _0x4c441a=_0x1f1025[_0x35684d];return _0x4c441a;},a4_0xb289(_0x412e11,_0x107b67);}const {execSync}=require(a4_0x2dcde1(0x169));class TopicManager{constructor(){const _0x3e68e4=a4_0x2dcde1;this['topicStrategies']=new Map(),this[_0x3e68e4(0x1a2)]=new Map(),this['discoveryInProgress']=![],this['config']={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x3e68e4(0x15e),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x3e68e4(0x1b5)](_0x3e68e4(0x171));}[a4_0x2dcde1(0x16d)](_0x4b38b2){const _0x12715b=a4_0x2dcde1;if(_0x4b38b2[_0x12715b(0x19f)]){const _0x5eb3f7=_0x4b38b2[_0x12715b(0x19f)];_0x5eb3f7[_0x12715b(0x186)]&&(this[_0x12715b(0x17c)]['largeDataThreshold']=_0x5eb3f7[_0x12715b(0x186)]),_0x5eb3f7['defaultLargeDataStrategy']&&(this['config'][_0x12715b(0x1b9)]=_0x5eb3f7[_0x12715b(0x1b9)]),_0x5eb3f7[_0x12715b(0x17d)]&&(this['config']['strategiesConfig']={..._0x5eb3f7['strategies']}),_0x5eb3f7['throttleFrequencies']&&(this[_0x12715b(0x17c)][_0x12715b(0x16a)]={...this[_0x12715b(0x17c)]['throttleFrequencies'],..._0x5eb3f7[_0x12715b(0x16a)]}),console[_0x12715b(0x1b5)](_0x12715b(0x16c),this[_0x12715b(0x17c)]);}}async[a4_0x2dcde1(0x176)](_0x6707b3){const _0x587bca=a4_0x2dcde1;if(this[_0x587bca(0x17f)]||!_0x6707b3)return;this[_0x587bca(0x17f)]=!![],console['log'](_0x587bca(0x15f));try{await new Promise((_0x2c44d6,_0x8d60f7)=>{const _0x544e90=_0x587bca;_0x6707b3[_0x544e90(0x1a4)](_0x48e855=>{const _0xb688f3=_0x544e90,_0x14dc8b=_0x48e855[_0xb688f3(0x16e)][_0xb688f3(0x189)]((_0x45614a,_0x4ab192)=>({'name':_0x45614a,'type':_0x48e855[_0xb688f3(0x1bc)][_0x4ab192]}));console[_0xb688f3(0x1b5)](_0xb688f3(0x178)+_0x14dc8b[_0xb688f3(0x157)]+'\x20topics');for(const _0x34ff20 of _0x14dc8b){this[_0xb688f3(0x197)](_0x34ff20);}console[_0xb688f3(0x1b5)](_0xb688f3(0x170)),console[_0xb688f3(0x1b5)](_0xb688f3(0x164),Array[_0xb688f3(0x1ba)](this[_0xb688f3(0x1ae)]['entries']())),_0x2c44d6();},_0x45b8cd=>{const _0x37e415=_0x544e90;console[_0x37e415(0x19d)](_0x37e415(0x1a3),_0x45b8cd),_0x8d60f7(_0x45b8cd);});});}catch(_0x406b3f){console[_0x587bca(0x19d)](_0x587bca(0x199),_0x406b3f);}finally{this[_0x587bca(0x17f)]=![];}}[a4_0x2dcde1(0x197)](_0x2b3f7d){const _0x451022=a4_0x2dcde1,_0x2ea13b=this[_0x451022(0x188)](_0x2b3f7d);this[_0x451022(0x1ae)][_0x451022(0x181)](_0x2b3f7d[_0x451022(0x17b)],{'type':_0x2b3f7d[_0x451022(0x191)],'strategy':_0x2ea13b[_0x451022(0x191)],'reason':_0x2ea13b[_0x451022(0x179)],'maxFrequency':_0x2ea13b['maxFrequency'],'isLargeData':_0x2ea13b[_0x451022(0x18a)],'estimatedSize':_0x2ea13b[_0x451022(0x163)]}),console[_0x451022(0x1b5)](_0x451022(0x1b6)+_0x2b3f7d['name']+':\x20'+_0x2ea13b[_0x451022(0x191)]+'\x20('+_0x2ea13b[_0x451022(0x179)]+')');}[a4_0x2dcde1(0x188)](_0x1aebcd){const _0x348999=a4_0x2dcde1;if(this[_0x348999(0x17c)][_0x348999(0x1b3)][_0x1aebcd[_0x348999(0x17b)]]){const _0xac9699=this[_0x348999(0x17c)][_0x348999(0x1b3)][_0x1aebcd[_0x348999(0x17b)]];return this[_0x348999(0x15a)](_0xac9699,_0x348999(0x1b2));}for(const [_0x10817a,_0x281313]of Object[_0x348999(0x1b4)](this[_0x348999(0x17c)][_0x348999(0x1b3)])){if(_0x1aebcd['name'][_0x348999(0x167)](_0x10817a[_0x348999(0x172)]('/','')))return this[_0x348999(0x15a)](_0x281313,_0x348999(0x180));}if(this[_0x348999(0x174)](_0x1aebcd[_0x348999(0x17b)],_0x1aebcd['type'])){const _0x1bcb0d=this[_0x348999(0x1b7)](_0x1aebcd[_0x348999(0x17b)],_0x1aebcd[_0x348999(0x191)]);return{'type':_0x348999(0x187),'reason':_0x348999(0x1b1),'isLargeData':!![],'estimatedSize':_0x1bcb0d,'maxFrequency':null};}const _0x213f9b=this[_0x348999(0x1be)](_0x1aebcd[_0x348999(0x17b)],_0x1aebcd['type']),_0x141e6f=this[_0x348999(0x1b7)](_0x1aebcd['name'],_0x1aebcd[_0x348999(0x191)]);if(_0x213f9b||_0x141e6f>this[_0x348999(0x17c)]['largeDataThreshold']){let _0x3ffaa6=this[_0x348999(0x17c)][_0x348999(0x16a)][_0x1aebcd[_0x348999(0x191)]]||0xa,_0x5e076d=_0x348999(0x1ad);if(_0x1aebcd[_0x348999(0x191)][_0x348999(0x167)](_0x348999(0x195))||_0x1aebcd[_0x348999(0x17b)][_0x348999(0x167)](_0x348999(0x1a5)))_0x3ffaa6=this['config'][_0x348999(0x16a)][_0x1aebcd['type']]||0x5,_0x5e076d=_0x348999(0x18f);else{if(_0x1aebcd[_0x348999(0x191)][_0x348999(0x167)](_0x348999(0x18e))||_0x1aebcd[_0x348999(0x17b)][_0x348999(0x167)]('scan'))_0x3ffaa6=this[_0x348999(0x17c)][_0x348999(0x16a)][_0x1aebcd['type']]||0xf,_0x5e076d=_0x348999(0x198);else _0x1aebcd[_0x348999(0x191)][_0x348999(0x167)](_0x348999(0x182))&&(_0x3ffaa6=this[_0x348999(0x17c)][_0x348999(0x16a)][_0x1aebcd[_0x348999(0x191)]]||0xa,_0x5e076d=_0x348999(0x1b0));}return{'type':_0x348999(0x1af),'reason':_0x5e076d,'isLargeData':!![],'estimatedSize':_0x141e6f,'maxFrequency':_0x3ffaa6};}return{'type':'websocket','reason':_0x348999(0x185),'isLargeData':![],'estimatedSize':_0x141e6f,'maxFrequency':null};}[a4_0x2dcde1(0x15a)](_0xe98364,_0x2eae5a){const _0x44d4fc=a4_0x2dcde1;if(_0xe98364[_0x44d4fc(0x167)](':')){const [_0x4ed670,_0xf000b0]=_0xe98364[_0x44d4fc(0x19c)](':');return{'type':_0x4ed670,'reason':_0x2eae5a,'isLargeData':!![],'maxFrequency':_0x4ed670===_0x44d4fc(0x1af)?parseFloat(_0xf000b0):null,'estimatedSize':this[_0x44d4fc(0x17c)][_0x44d4fc(0x186)]+0x1};}return{'type':_0xe98364,'reason':_0x2eae5a,'isLargeData':_0xe98364!==_0x44d4fc(0x192),'maxFrequency':null,'estimatedSize':this[_0x44d4fc(0x17c)][_0x44d4fc(0x186)]+0x1};}[a4_0x2dcde1(0x1be)](_0x94f9be,_0x2b5352){const _0x4ffe7c=a4_0x2dcde1,_0x3aa088=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x3c9da9=[_0x4ffe7c(0x17a),_0x4ffe7c(0x1bd),'sensor_msgs/msg/LaserScan',_0x4ffe7c(0x177)];return _0x3aa088[_0x4ffe7c(0x165)](_0x459d5b=>_0x459d5b[_0x4ffe7c(0x1a8)](_0x94f9be))||_0x3c9da9[_0x4ffe7c(0x167)](_0x2b5352);}[a4_0x2dcde1(0x174)](_0x2b0444,_0x42a8be=''){const _0x4c6305=a4_0x2dcde1,_0x1ef812=[_0x4c6305(0x1bd),_0x4c6305(0x177)];if(_0x1ef812[_0x4c6305(0x167)](_0x42a8be))return!_0x2b0444[_0x4c6305(0x167)](_0x4c6305(0x1a5))&&!_0x2b0444[_0x4c6305(0x167)](_0x4c6305(0x175))&&!_0x2b0444[_0x4c6305(0x167)](_0x4c6305(0x1a9));return(_0x2b0444['includes']('image')||_0x2b0444[_0x4c6305(0x167)](_0x4c6305(0x1b8)))&&!_0x2b0444[_0x4c6305(0x167)]('points')&&!_0x2b0444[_0x4c6305(0x167)](_0x4c6305(0x175))&&!_0x2b0444['includes'](_0x4c6305(0x1a9));}['estimateTopicSize'](_0x36d6a7,_0x363138){const _0x24fcbd=a4_0x2dcde1,_0x176ca7={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x176ca7[_0x363138])return _0x176ca7[_0x363138];if(_0x36d6a7['includes'](_0x24fcbd(0x19a))||_0x36d6a7[_0x24fcbd(0x167)](_0x24fcbd(0x17e)))return 0x190*0x400;if(_0x36d6a7[_0x24fcbd(0x167)](_0x24fcbd(0x1a1)))return 0x12c*0x400;if(_0x36d6a7[_0x24fcbd(0x167)](_0x24fcbd(0x1b8)))return 0x32*0x400;return 0x400;}[a4_0x2dcde1(0x183)](_0x1bca1f){const _0x16e713=a4_0x2dcde1;let _0x5dd72e=this['topicStrategies']['get'](_0x1bca1f[_0x16e713(0x1bb)]);if(!_0x5dd72e){console[_0x16e713(0x1b5)](_0x16e713(0x18d)+_0x1bca1f[_0x16e713(0x1bb)]);let _0x43e5a0=_0x16e713(0x1ab);if(_0x1bca1f['topic'][_0x16e713(0x167)](_0x16e713(0x166))&&_0x1bca1f[_0x16e713(0x1bb)][_0x16e713(0x167)](_0x16e713(0x1b8)))_0x43e5a0=_0x16e713(0x177);else{if(_0x1bca1f[_0x16e713(0x1bb)][_0x16e713(0x167)](_0x16e713(0x166)))_0x43e5a0=_0x16e713(0x1bd);else{if(_0x1bca1f[_0x16e713(0x1bb)][_0x16e713(0x167)](_0x16e713(0x19a))||_0x1bca1f[_0x16e713(0x1bb)][_0x16e713(0x167)](_0x16e713(0x17e)))_0x43e5a0=_0x16e713(0x17a);else _0x1bca1f[_0x16e713(0x1bb)][_0x16e713(0x167)](_0x16e713(0x1bf))&&(_0x43e5a0=_0x16e713(0x168));}}const _0x5e2be9={'name':_0x1bca1f[_0x16e713(0x1bb)],'type':_0x43e5a0};this[_0x16e713(0x197)](_0x5e2be9),_0x5dd72e=this[_0x16e713(0x1ae)][_0x16e713(0x19e)](_0x1bca1f['topic']);}if(!_0x5dd72e)return{'action':_0x16e713(0x160),'message':_0x1bca1f};switch(_0x5dd72e[_0x16e713(0x1a6)]){case _0x16e713(0x1af):return this[_0x16e713(0x190)](_0x1bca1f[_0x16e713(0x1bb)],_0x5dd72e['maxFrequency'])?{'action':_0x16e713(0x160),'message':_0x1bca1f}:{'action':'throttle_skip'};case _0x16e713(0x187):return{'action':_0x16e713(0x1a7)};case _0x16e713(0x192):default:return{'action':_0x16e713(0x160),'message':_0x1bca1f};}}[a4_0x2dcde1(0x190)](_0x148255,_0xd53792){const _0x2312bf=a4_0x2dcde1;if(!_0xd53792)return!![];const _0x29150f=Date[_0x2312bf(0x173)](),_0x314360=0x3e8/_0xd53792;!this[_0x2312bf(0x1a2)][_0x2312bf(0x16b)](_0x148255)&&this['lastMessageTimes']['set'](_0x148255,0x0);const _0xe67adc=this['lastMessageTimes'][_0x2312bf(0x19e)](_0x148255),_0x4ad43a=_0x29150f-_0xe67adc;if(_0x4ad43a>=_0x314360)return this['lastMessageTimes'][_0x2312bf(0x181)](_0x148255,_0x29150f),!![];return![];}['getTopicStrategy'](_0x3de252){const _0x4f0963=a4_0x2dcde1;return this[_0x4f0963(0x1ae)][_0x4f0963(0x19e)](_0x3de252);}[a4_0x2dcde1(0x1aa)](){const _0x4050ee=a4_0x2dcde1;return Array[_0x4050ee(0x1ba)](this[_0x4050ee(0x1ae)][_0x4050ee(0x1b4)]())[_0x4050ee(0x189)](([_0x34d3ca,_0x59de34])=>({'topic':_0x34d3ca,..._0x59de34}));}[a4_0x2dcde1(0x15d)](_0x15e803){const _0x27e624=a4_0x2dcde1,_0x86cbda=this['topicStrategies'][_0x27e624(0x19e)](_0x15e803);return _0x86cbda?.[_0x27e624(0x1a6)]===_0x27e624(0x15e);}[a4_0x2dcde1(0x15b)](){const _0x4c7f61=a4_0x2dcde1,_0x14330d={};return this[_0x4c7f61(0x1ae)]['forEach']((_0x463467,_0x42647c)=>{const _0x487518=_0x4c7f61;!_0x14330d[_0x463467[_0x487518(0x1a6)]]&&(_0x14330d[_0x463467[_0x487518(0x1a6)]]=0x0),_0x14330d[_0x463467['strategy']]++;}),{'totalTopics':this[_0x4c7f61(0x1ae)][_0x4c7f61(0x162)],'strategies':_0x14330d,'largeDataTopics':Array[_0x4c7f61(0x1ba)](this['topicStrategies']['entries']())['filter'](([_0xbad0ba,_0x45206a])=>_0x45206a[_0x4c7f61(0x18a)])['map'](([_0x2c23dc,_0x145346])=>_0x2c23dc)};}}module['exports']=new TopicManager();function a4_0x4c44(){const _0x149da9=['isLargeData','4qxwTNA','1377160jcSgcx','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','LaserScan','point_cloud_throttled','shouldThrottle','type','websocket','565588lhTPiG','2974527JYCjtl','PointCloud2','(((.+)+)+)+$','analyzeTopicStrategy','laser_scan_throttled','[TopicManager]\x20Topic\x20discovery\x20failed:','point','2586AfILFy','split','error','get','topicHandling','16961Ksgkad','image_raw','lastMessageTimes','[TopicManager]\x20Error\x20getting\x20topics:','getTopics','points','strategy','webrtc_skip','test','depth_points','getManagedTopics','unknown','apply','large_data_throttled','topicStrategies','throttle','image_throttled','video_webrtc_streaming','user_configured','strategiesConfig','entries','log','[TopicManager]\x20Topic\x20','estimateTopicSize','compressed','defaultLargeDataStrategy','from','topic','types','sensor_msgs/msg/Image','isLargeDataTopic','scan','length','7005SZNuqP','3118960fFKmfi','parseStrategyConfig','getStatistics','36032491JGzgHX','shouldUseWebRTC','webrtc_only','[TopicManager]\x20Starting\x20topic\x20discovery...','forward','search','size','estimatedSize','[TopicManager]\x20Strategies:','some','image','includes','sensor_msgs/msg/LaserScan','child_process','throttleFrequencies','has','[TopicManager]\x20Loaded\x20configuration:','loadConfig','topics','1226fhSSpu','[TopicManager]\x20Topic\x20discovery\x20completed','[TopicManager]\x20Initialised','replace','now','isCameraTopic','point_cloud','discoverTopics','sensor_msgs/msg/CompressedImage','[TopicManager]\x20Found\x20','reason','sensor_msgs/msg/PointCloud2','name','config','strategies','cloud','discoveryInProgress','pattern_configured','set','Image','handleMessage','10teoxOx','normal_size','largeDataThreshold','webrtc','determineTopicStrategy','map'];a4_0x4c44=function(){return _0x149da9;};return a4_0x4c44();}