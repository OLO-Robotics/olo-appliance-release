const a1_0x3ce42f=a1_0x2759;(function(_0x10cb3e,_0x4f4ba0){const _0x5773e6=a1_0x2759,_0x1ade81=_0x10cb3e();while(!![]){try{const _0x2a1fc3=parseInt(_0x5773e6(0x132))/0x1+-parseInt(_0x5773e6(0x10f))/0x2*(-parseInt(_0x5773e6(0xa9))/0x3)+-parseInt(_0x5773e6(0xac))/0x4+-parseInt(_0x5773e6(0x131))/0x5+-parseInt(_0x5773e6(0x8f))/0x6*(parseInt(_0x5773e6(0xe8))/0x7)+-parseInt(_0x5773e6(0x114))/0x8*(-parseInt(_0x5773e6(0xd4))/0x9)+-parseInt(_0x5773e6(0x88))/0xa*(-parseInt(_0x5773e6(0xf5))/0xb);if(_0x2a1fc3===_0x4f4ba0)break;else _0x1ade81['push'](_0x1ade81['shift']());}catch(_0x5b8794){_0x1ade81['push'](_0x1ade81['shift']());}}}(a1_0x3bd3,0xc9a08));const a1_0x1b2f5e=(function(){let _0x8592f7=!![];return function(_0x4dcc78,_0x2c0161){const _0x578062=_0x8592f7?function(){const _0x37e45e=a1_0x2759;if(_0x2c0161){const _0x2c8e14=_0x2c0161[_0x37e45e(0x113)](_0x4dcc78,arguments);return _0x2c0161=null,_0x2c8e14;}}:function(){};return _0x8592f7=![],_0x578062;};}()),a1_0x5a6861=a1_0x1b2f5e(this,function(){const _0x23428a=a1_0x2759;return a1_0x5a6861[_0x23428a(0x10c)]()[_0x23428a(0x77)](_0x23428a(0x110))[_0x23428a(0x10c)]()[_0x23428a(0xaa)](a1_0x5a6861)['search']('(((.+)+)+)+$');});a1_0x5a6861();const express=require(a1_0x3ce42f(0xb3)),config=require(a1_0x3ce42f(0x133)),authService=require('./services/auth'),webrtcService=require(a1_0x3ce42f(0x7e)),topicManager=require(a1_0x3ce42f(0xf6)),WebSocket=require('ws'),axios=require('axios'),fs=require('fs'),prompt=require(a1_0x3ce42f(0x7b))({'sigint':!![]}),dotenv=require(a1_0x3ce42f(0x74)),app=express(),port=process[a1_0x3ce42f(0xae)]['PORT']||config[a1_0x3ce42f(0xce)]['proxyPort'],APPLIANCE_FILE=a1_0x3ce42f(0x11e),{DOMParser,XMLSerializer}=require(a1_0x3ce42f(0xe2)),path=require('path'),{execSync}=require(a1_0x3ce42f(0xf2)),APPLIANCE_BASE_URL=process[a1_0x3ce42f(0xae)][a1_0x3ce42f(0x7a)]||'';console[a1_0x3ce42f(0xb4)](a1_0x3ce42f(0xb5)+(process[a1_0x3ce42f(0xae)]['NODE_ENV']||a1_0x3ce42f(0xc8))),console[a1_0x3ce42f(0xb4)](a1_0x3ce42f(0x8d)+config[a1_0x3ce42f(0x122)]),console['log'](a1_0x3ce42f(0xe5)+config[a1_0x3ce42f(0xce)]['wsEndpoint']),console[a1_0x3ce42f(0xb4)](a1_0x3ce42f(0xf1)+port);let serverWs=null,rosbridgeWs=null,rosbridgeWebRTCWs=null,registrationToken=null,robotId=null;function updateEnvFile(_0x2554fa,_0x46e44e){const _0x1a1461=a1_0x3ce42f;fs[_0x1a1461(0x11b)](_0x1a1461(0x80),'APP_USERNAME='+_0x2554fa+_0x1a1461(0x108)+_0x46e44e+'\x0a');}function reloadEnv(){const _0x99a292=a1_0x3ce42f;dotenv['config']({'override':!![]}),config[_0x99a292(0x12a)][_0x99a292(0xf3)]=process[_0x99a292(0xae)][_0x99a292(0xca)],config[_0x99a292(0x12a)][_0x99a292(0x115)]=process[_0x99a292(0xae)][_0x99a292(0x79)];}async function promptForCredentials(){const _0x5c5d10=a1_0x3ce42f,_0x23383f=prompt('Enter\x20username:\x20'),_0x62e027=prompt[_0x5c5d10(0xda)](_0x5c5d10(0x92));updateEnvFile(_0x23383f,_0x62e027),reloadEnv();}function loadApplianceIdentity(){const _0x30802e=a1_0x3ce42f;if(fs[_0x30802e(0x76)](APPLIANCE_FILE))try{const _0x28afe8=JSON[_0x30802e(0xb9)](fs['readFileSync'](APPLIANCE_FILE,_0x30802e(0x78)));if(_0x28afe8['robotId']&&_0x28afe8[_0x30802e(0xfe)])return robotId=_0x28afe8[_0x30802e(0xd5)],registrationToken=_0x28afe8[_0x30802e(0xfe)],console[_0x30802e(0xb4)]('Loaded\x20appliance\x20identity:',robotId),topicManager[_0x30802e(0xcb)](_0x28afe8),!![];}catch(_0x8b7fc6){console[_0x30802e(0x101)]('Failed\x20to\x20parse\x20appliance\x20identity\x20file:',_0x8b7fc6);}return![];}function saveApplianceIdentity(_0x4cbd6f,_0x3fc7f4){const _0x233ee1=a1_0x3ce42f;let _0x2d303f={};if(fs['existsSync'](APPLIANCE_FILE))try{_0x2d303f=JSON[_0x233ee1(0xb9)](fs['readFileSync'](APPLIANCE_FILE,_0x233ee1(0x78)));}catch(_0x88980e){_0x2d303f={};}_0x2d303f['robotId']=_0x4cbd6f,_0x2d303f[_0x233ee1(0xfe)]=_0x3fc7f4,fs[_0x233ee1(0x11b)](APPLIANCE_FILE,JSON[_0x233ee1(0xfa)](_0x2d303f,null,0x2));}async function registerWithServer(){const _0x3b53c7=a1_0x3ce42f;try{const _0x33a75b=authService[_0x3b53c7(0x81)]();if(!_0x33a75b)throw new Error(_0x3b53c7(0x9f));let _0x2046fd,_0x451966=![];while(!![]){try{robotId&&registrationToken?_0x2046fd=await axios[_0x3b53c7(0x73)](config[_0x3b53c7(0x122)]+_0x3b53c7(0xa3),{'name':'WSL\x20Appliance','robotId':robotId,'registration_token':registrationToken},{'headers':{'Authorization':_0x3b53c7(0xf0)+_0x33a75b,'Content-Type':_0x3b53c7(0xde)}}):_0x2046fd=await axios[_0x3b53c7(0x73)](config[_0x3b53c7(0x122)]+_0x3b53c7(0xa3),{'name':_0x3b53c7(0x127)},{'headers':{'Authorization':_0x3b53c7(0xf0)+_0x33a75b,'Content-Type':_0x3b53c7(0xde)}});break;}catch(_0x2e1255){const _0x386df3=_0x2e1255?.[_0x3b53c7(0xdf)]?.[_0x3b53c7(0xbd)]?.[_0x3b53c7(0x101)]||_0x2e1255[_0x3b53c7(0x130)];if(!_0x451966&&_0x386df3&&_0x386df3[_0x3b53c7(0x120)]()[_0x3b53c7(0x129)](_0x3b53c7(0xc3))){console[_0x3b53c7(0xa7)](_0x3b53c7(0x118));if(fs[_0x3b53c7(0x76)](APPLIANCE_FILE))fs['unlinkSync'](APPLIANCE_FILE);robotId=null,registrationToken=null,_0x451966=!![];continue;}throw _0x2e1255;}}if(!_0x2046fd[_0x3b53c7(0xbd)]||!_0x2046fd[_0x3b53c7(0xbd)]['registration_token']||!_0x2046fd['data']['id'])throw new Error(_0x3b53c7(0x12b));return registrationToken=_0x2046fd[_0x3b53c7(0xbd)][_0x3b53c7(0x12d)],robotId=_0x2046fd[_0x3b53c7(0xbd)]['id'],saveApplianceIdentity(robotId,registrationToken),console[_0x3b53c7(0xb4)]('Successfully\x20registered\x20with\x20server'),!![];}catch(_0x17bff5){return console[_0x3b53c7(0x101)]('Failed\x20to\x20register\x20with\x20server:',_0x17bff5[_0x3b53c7(0x130)]),![];}}function rewriteUrdfMeshUris(_0x5eadc2){const _0x75dfa8=a1_0x3ce42f;try{const _0x23b8dd=new DOMParser(),_0x455362=_0x23b8dd[_0x75dfa8(0xd0)](_0x5eadc2,_0x75dfa8(0xb8));let _0x111219=0x0,_0x591f86=0x0;const _0x178e4b=_0x455362[_0x75dfa8(0x8b)]('mesh');for(let _0xfbe3f0=0x0;_0xfbe3f0<_0x178e4b[_0x75dfa8(0xe0)];_0xfbe3f0++){const _0x34b908=_0x178e4b[_0xfbe3f0],_0x259467=_0x34b908[_0x75dfa8(0x128)]('filename'),_0xfd9b0c=[_0x75dfa8(0x90),'.dae',_0x75dfa8(0xd8),'.ply',_0x75dfa8(0x125)],_0x3d1477=_0xfd9b0c[_0x75dfa8(0x10b)](_0x57fa90=>_0x259467['toLowerCase']()[_0x75dfa8(0xab)](_0x57fa90));if(_0x259467&&_0x259467['startsWith'](_0x75dfa8(0xe3))&&_0x3d1477){_0x111219++;const _0x2af136=APPLIANCE_BASE_URL+_0x75dfa8(0x11f)+encodeURIComponent(_0x259467);_0x34b908[_0x75dfa8(0x10e)](_0x75dfa8(0xc5),_0x2af136),_0x591f86++,console[_0x75dfa8(0xb4)](_0x75dfa8(0x8e)+_0x259467+_0x75dfa8(0x87)+_0x2af136);}}_0x111219>0x0?console[_0x75dfa8(0xb4)](_0x75dfa8(0x89)+_0x591f86+'\x20of\x20'+_0x111219+_0x75dfa8(0xd6)):console['log'](_0x75dfa8(0x9b));const _0x14285a=new XMLSerializer();return _0x14285a[_0x75dfa8(0xa8)](_0x455362);}catch(_0x2d58f7){return console[_0x75dfa8(0x101)](_0x75dfa8(0x116),_0x2d58f7),_0x5eadc2;}}function connectToRosbridge(){const _0xd178b4=a1_0x3ce42f;try{rosbridgeWs=new WebSocket(config[_0xd178b4(0xce)][_0xd178b4(0xeb)]),rosbridgeWs['on'](_0xd178b4(0xc7),()=>{const _0x3246a0=_0xd178b4;console[_0x3246a0(0xb4)](_0x3246a0(0xff));const _0x396f96=require(_0x3246a0(0xd2)),_0x45adab=new _0x396f96[(_0x3246a0(0x111))]({'url':config[_0x3246a0(0xce)][_0x3246a0(0xeb)]});_0x45adab['on']('connection',()=>{setTimeout(()=>{const _0x492458=a1_0x2759;topicManager[_0x492458(0x123)](_0x45adab)['catch'](_0x33b370=>{const _0x190c93=_0x492458;console[_0x190c93(0x101)](_0x190c93(0x97),_0x33b370);});},0x3e8);}),connectToRosbridgeWebRTC();}),rosbridgeWs['on'](_0xd178b4(0x130),_0x2ae707=>{const _0x1d7018=_0xd178b4;if(serverWs&&serverWs[_0x1d7018(0x102)]===WebSocket['OPEN']){let _0x10498b=_0x2ae707[_0x1d7018(0x10c)]();try{const _0x12b378=JSON['parse'](_0x10498b);if(_0x12b378['op']===_0x1d7018(0x10d)&&_0x12b378[_0x1d7018(0x104)]){const _0x11ae0f=topicManager[_0x1d7018(0xe9)](_0x12b378);switch(_0x11ae0f[_0x1d7018(0xd1)]){case'sample_skip':return;case'webrtc_skip':return;case _0x1d7018(0xdb):default:_0x10498b=JSON[_0x1d7018(0xfa)](_0x11ae0f[_0x1d7018(0x130)]);break;}}if((_0x12b378['op']==='service_response'||_0x12b378['op']==='call_service')&&(_0x12b378[_0x1d7018(0xf9)]==='/rosapi/topics'||_0x12b378[_0x1d7018(0xb6)]&&_0x12b378[_0x1d7018(0xb6)][_0x1d7018(0x9e)])){console[_0x1d7018(0xb4)](_0x1d7018(0x95));const _0x28e578=_0x12b378[_0x1d7018(0xb6)]?.[_0x1d7018(0x9e)]||[],_0x249c98=_0x12b378[_0x1d7018(0xb6)]?.[_0x1d7018(0xa0)]||[],_0x208f73=_0x28e578['map']((_0x58d7f6,_0x236845)=>{const _0x152e0d=_0x1d7018,_0x5bada4=topicManager[_0x152e0d(0x11c)](_0x58d7f6);return{'name':_0x58d7f6,'type':_0x249c98[_0x236845]||_0x152e0d(0xf8),'throttling':_0x5bada4?{'isThrottled':_0x5bada4[_0x152e0d(0x12e)]===_0x152e0d(0xe1),'strategy':_0x5bada4[_0x152e0d(0x12e)],'samplingRate':_0x5bada4[_0x152e0d(0x10a)],'reason':_0x5bada4[_0x152e0d(0x109)],'estimatedSize':_0x5bada4[_0x152e0d(0xd7)]}:null};});_0x12b378[_0x1d7018(0xb6)]={'topics':_0x208f73[_0x1d7018(0x8a)](_0x572fc1=>_0x572fc1[_0x1d7018(0xd9)]),'types':_0x208f73[_0x1d7018(0x8a)](_0x59ad47=>_0x59ad47['type']),'throttling':_0x208f73['map'](_0x2c1077=>_0x2c1077['throttling'])},_0x10498b=JSON['stringify'](_0x12b378),console[_0x1d7018(0xb4)]('[TopicManager]\x20Enhanced\x20topics\x20response\x20sent\x20to\x20client');}if(_0x12b378['op']===_0x1d7018(0x10d)&&_0x12b378['topic']===_0x1d7018(0xd3))try{const _0x5ba7a1=_0x12b378[_0x1d7018(0x93)][_0x1d7018(0xbd)],_0x3f4412=rewriteUrdfMeshUris(_0x5ba7a1);_0x12b378[_0x1d7018(0x93)][_0x1d7018(0xbd)]=_0x3f4412,_0x10498b=JSON[_0x1d7018(0xfa)](_0x12b378);}catch(_0x21db9a){console[_0x1d7018(0x101)](_0x1d7018(0x94),_0x21db9a);}}catch(_0x5b1337){console['warn'](_0x1d7018(0xe6),_0x5b1337[_0x1d7018(0x130)]);}serverWs[_0x1d7018(0x83)](_0x10498b);}}),rosbridgeWs['on'](_0xd178b4(0xa1),()=>{const _0x3c0717=_0xd178b4;console[_0x3c0717(0xb4)](_0x3c0717(0x134)),webrtcService[_0x3c0717(0x119)](),setTimeout(connectToRosbridge,0x1388);}),rosbridgeWs['on']('error',_0x376a1b=>{const _0x7f4bdb=_0xd178b4;console[_0x7f4bdb(0x101)]('ROSBridge\x20(main)\x20connection\x20error:',_0x376a1b);});}catch(_0x4ed971){console[_0xd178b4(0x101)](_0xd178b4(0xb1),_0x4ed971),setTimeout(connectToRosbridge,0x1388);}}function connectToRosbridgeWebRTC(){const _0x44c686=a1_0x3ce42f;try{rosbridgeWebRTCWs=new WebSocket(config['rosbridge'][_0x44c686(0xeb)]),rosbridgeWebRTCWs['on'](_0x44c686(0xc7),()=>{const _0x183d34=_0x44c686;console[_0x183d34(0xb4)](_0x183d34(0xfd)),webrtcService[_0x183d34(0xc2)](rosbridgeWebRTCWs,serverWs);}),rosbridgeWebRTCWs['on'](_0x44c686(0x130),_0x4aa165=>{}),rosbridgeWebRTCWs['on']('close',()=>{const _0x46be82=_0x44c686;console[_0x46be82(0xb4)](_0x46be82(0x9d)),webrtcService[_0x46be82(0x119)](),setTimeout(connectToRosbridgeWebRTC,0x1388);}),rosbridgeWebRTCWs['on']('error',_0x518948=>{const _0x22c834=_0x44c686;console[_0x22c834(0x101)]('ROSBridge\x20(WebRTC)\x20connection\x20error:',_0x518948);});}catch(_0x41cfab){console[_0x44c686(0x101)](_0x44c686(0xe4),_0x41cfab),setTimeout(connectToRosbridgeWebRTC,0x1388);}}function connectToServer(){const _0x15e3e4=a1_0x3ce42f;try{if(!registrationToken)throw new Error(_0x15e3e4(0x103));const _0x11e06a=config[_0x15e3e4(0x122)][_0x15e3e4(0xc9)]('http','ws')+_0x15e3e4(0x117)+registrationToken;serverWs=new WebSocket(_0x11e06a),serverWs['on'](_0x15e3e4(0xc7),()=>{const _0x4b2028=_0x15e3e4;console[_0x4b2028(0xb4)](_0x4b2028(0xba)),rosbridgeWebRTCWs&&rosbridgeWebRTCWs[_0x4b2028(0x102)]===WebSocket['OPEN']&&webrtcService['initialize'](rosbridgeWebRTCWs,serverWs);}),serverWs['on']('message',_0x5d4323=>{const _0x24cf58=_0x15e3e4;if(rosbridgeWs&&rosbridgeWs[_0x24cf58(0x102)]===WebSocket[_0x24cf58(0xb7)]){let _0xf0b606=_0x5d4323['toString']();try{const _0x1e73e8=JSON[_0x24cf58(0xb9)](_0xf0b606);if(webrtcService[_0x24cf58(0xe9)](_0x1e73e8))return;if(_0x1e73e8['op']===_0x24cf58(0xfc)&&typeof _0x1e73e8[_0x24cf58(0xf4)]==='string'&&_0x1e73e8[_0x24cf58(0xb2)])try{console[_0x24cf58(0xb4)]('[URDF\x20PARAM]\x20Fetching\x20URDF\x20from\x20parameter:\x20'+_0x1e73e8['param_name']);const _0x1dfe7e=execSync(_0x24cf58(0xa5)+_0x1e73e8[_0x24cf58(0xf4)],{'encoding':_0x24cf58(0x78)})['trim']();let _0x2f8781=_0x1dfe7e;_0x1dfe7e['startsWith'](_0x24cf58(0xcf))&&(_0x2f8781=_0x1dfe7e['substring'](_0x24cf58(0xcf)[_0x24cf58(0xe0)]()));_0x2f8781[_0x24cf58(0x8c)]('\x22')&&_0x2f8781[_0x24cf58(0xab)]('\x22')&&(_0x2f8781=_0x2f8781['slice'](0x1,-0x1));_0x2f8781=_0x2f8781[_0x24cf58(0xc9)](/\\n/g,'\x0a')[_0x24cf58(0xc9)](/\\"/g,'\x22');const _0x4c8249={'op':_0x24cf58(0xbc),'request_id':_0x1e73e8[_0x24cf58(0xb2)],'data':_0x2f8781};serverWs[_0x24cf58(0x83)](JSON[_0x24cf58(0xfa)](_0x4c8249)),console[_0x24cf58(0xb4)](_0x24cf58(0xe7)+_0x1e73e8[_0x24cf58(0xf4)]);return;}catch(_0x302868){console[_0x24cf58(0x101)]('[URDF\x20PARAM]\x20Error\x20fetching\x20URDF\x20parameter:',_0x302868);const _0xcb39d5={'op':'urdf_param_data','request_id':_0x1e73e8[_0x24cf58(0xb2)],'error':_0x302868[_0x24cf58(0x130)]};serverWs[_0x24cf58(0x83)](JSON[_0x24cf58(0xfa)](_0xcb39d5));return;}if(_0x1e73e8['op']===_0x24cf58(0x7c)&&typeof _0x1e73e8['uri']===_0x24cf58(0x7f)&&_0x1e73e8[_0x24cf58(0xb2)])try{const _0x39b4c4=_0x1e73e8['uri'][_0x24cf58(0x99)](/^package:\/\/([^\/]+)\/(.+)$/);if(_0x39b4c4){const _0x51a723=_0x39b4c4[0x1],_0x4984af=_0x39b4c4[0x2],_0x105254=execSync(_0x24cf58(0xc1)+_0x51a723,{'encoding':_0x24cf58(0x78)})[_0x24cf58(0xaf)](),_0x4f560d=path[_0x24cf58(0xdc)](_0x105254,_0x24cf58(0x85),_0x51a723,_0x4984af);if(!fs[_0x24cf58(0x76)](_0x4f560d))throw new Error(_0x24cf58(0x126)+_0x4f560d);const _0x201b11=fs[_0x24cf58(0xfb)](_0x4f560d),_0x40f189={'op':_0x24cf58(0xbf),'request_id':_0x1e73e8['request_id'],'data':_0x201b11['toString']('base64')};serverWs[_0x24cf58(0x83)](JSON[_0x24cf58(0xfa)](_0x40f189)),console[_0x24cf58(0xb4)](_0x24cf58(0xee)+_0x1e73e8['uri']+_0x24cf58(0xa2)+_0x4f560d);return;}}catch(_0x47d847){console['error'](_0x24cf58(0x11d),_0x47d847);const _0x18ee81={'op':_0x24cf58(0xbf),'request_id':_0x1e73e8[_0x24cf58(0xb2)],'error':_0x47d847[_0x24cf58(0x130)]};serverWs[_0x24cf58(0x83)](JSON[_0x24cf58(0xfa)](_0x18ee81));return;}rosbridgeWs['send'](_0xf0b606);}catch(_0x28e182){rosbridgeWs[_0x24cf58(0x83)](_0xf0b606);}}}),serverWs['on'](_0x15e3e4(0xa1),(_0x2aa805,_0x34c90c)=>{const _0x3b309a=_0x15e3e4;console[_0x3b309a(0xb4)](_0x3b309a(0x11a)+_0x2aa805+':\x20'+_0x34c90c+_0x3b309a(0xb0)),webrtcService[_0x3b309a(0x119)](),setTimeout(connectToServer,0x1388);}),serverWs['on'](_0x15e3e4(0x101),_0x13f975=>{const _0x43dc40=_0x15e3e4;console['error'](_0x43dc40(0x91),_0x13f975);});}catch(_0x26c891){console['error'](_0x15e3e4(0x98),_0x26c891),setTimeout(connectToServer,0x1388);}}const requireAuth=async(_0x259a73,_0x3f881a,_0x1bc951)=>{const _0x4706dc=a1_0x3ce42f;if(!authService[_0x4706dc(0x12f)]()){console[_0x4706dc(0xb4)](_0x4706dc(0x105),config[_0x4706dc(0x122)]);const _0xd1e1ee=await authService[_0x4706dc(0x100)]();if(!_0xd1e1ee)return _0x3f881a[_0x4706dc(0xcd)](0x191)['json']({'error':_0x4706dc(0xbe)});}_0x1bc951();};app['use']((_0x1e9781,_0x345635,_0x307f0a)=>{const _0x21a26b=a1_0x3ce42f;_0x345635[_0x21a26b(0x7d)](_0x21a26b(0x96),'*'),_0x345635[_0x21a26b(0x7d)](_0x21a26b(0xad),_0x21a26b(0x12c)),_0x345635['header'](_0x21a26b(0x135),_0x21a26b(0xc0)),_0x1e9781[_0x21a26b(0xbb)]===_0x21a26b(0x84)?_0x345635[_0x21a26b(0x124)](0xc8):_0x307f0a();}),app['get']('/',requireAuth,(_0x3a5771,_0x533594)=>{const _0x2e797d=a1_0x3ce42f;_0x533594[_0x2e797d(0x83)]('Appliance\x20is\x20running\x20and\x20authenticated!');}),app[a1_0x3ce42f(0x75)](a1_0x3ce42f(0xc6),async(_0x30ae28,_0x550f5d)=>{const _0x57d56d=a1_0x3ce42f,_0x5004eb=authService[_0x57d56d(0x12f)](),_0x43677f=webrtcService[_0x57d56d(0xa4)](),_0x1cd597=webrtcService[_0x57d56d(0xf7)](),_0x294df6=topicManager['getStatistics']();_0x550f5d[_0x57d56d(0xef)]({'status':'ok','environment':process['env'][_0x57d56d(0x112)]||'development','backendUrl':config[_0x57d56d(0x122)],'rosbridgeUrl':config[_0x57d56d(0xce)]['wsEndpoint'],'proxyPort':port,'authenticated':_0x5004eb,'topicManagement':{'discovered':_0x294df6[_0x57d56d(0xdd)],'strategies':_0x294df6['strategies'],'largeDataTopics':_0x294df6[_0x57d56d(0x107)][_0x57d56d(0xe0)],'largeTopicsList':_0x294df6['largeDataTopics']},'webrtc':{'activeSessions':_0x43677f['length'],'sharedVideoSources':_0x1cd597[_0x57d56d(0xe0)],'sessions':_0x43677f,'sharedSources':_0x1cd597}});});function a1_0x3bd3(){const _0x597bfd=['service','stringify','readFileSync','get_urdf_param','Connected\x20to\x20ROSBridge\x20(WebRTC)','registrationToken','Connected\x20to\x20ROSBridge\x20(main)','login','error','readyState','Registration\x20token\x20not\x20found.\x20Please\x20register\x20this\x20appliance\x20first.','topic','Attempting\x20to\x20login\x20to:','listen','largeDataTopics','\x0aAPP_PASSWORD=','reason','samplingRate','some','toString','publish','setAttribute','2SBYZXF','(((.+)+)+)+$','Ros','NODE_ENV','apply','1144Aehwnq','password','[URDF\x20REWRITE]\x20Failed\x20to\x20rewrite\x20mesh\x20URIs\x20in\x20URDF\x20(WebSocket):','/rosbridge?type=appliance&token=','Robot\x20not\x20found\x20on\x20server.\x20Deleting\x20local\x20identity\x20and\x20re-registering.','stopAllSessions','Disconnected\x20from\x20server\x20(','writeFileSync','getTopicStrategy','[MESH]\x20Error\x20serving\x20mesh:','.appliance.json','/ros/mesh?uri=','toLowerCase','Failed\x20to\x20ping\x20server:','serverUrl','discoverTopics','sendStatus','.mesh','Mesh\x20file\x20not\x20found:\x20','WSL\x20Appliance','getAttribute','includes','credentials','Failed\x20to\x20get\x20registration\x20token\x20or\x20robot\x20id\x20from\x20server','GET,\x20POST,\x20PUT,\x20DELETE,\x20OPTIONS','registration_token','strategy','isAuthenticated','message','3523280BPSDGj','564463FWwfIK','./config','Disconnected\x20from\x20ROSBridge\x20(main),\x20attempting\x20to\x20reconnect...','Access-Control-Allow-Headers','post','dotenv','get','existsSync','search','utf8','APP_PASSWORD','APPLIANCE_BASE_URL','prompt-sync','get_mesh','header','./services/webrtcService','string','.env','getToken','No\x20appliance\x20identity\x20found.\x20Registering\x20as\x20new.','send','OPTIONS','share','Appliance\x20server\x20started\x20successfully\x20on\x20port\x20','\x20->\x20','940330sTFPHf','[URDF\x20REWRITE]\x20Rewrote\x20','map','getElementsByTagName','startsWith','Backend\x20Server\x20URL:\x20','[URDF\x20REWRITE]\x20Rewrote\x20mesh\x20URI:\x20','4677942HtfjFI','.stl','Server\x20connection\x20error:','Enter\x20password:\x20','msg','[URDF]\x20Failed\x20to\x20rewrite\x20mesh\x20URIs:','[TopicManager]\x20Enhancing\x20topics\x20response\x20with\x20throttling\x20metadata','Access-Control-Allow-Origin','Topic\x20discovery\x20failed:','Failed\x20to\x20connect\x20to\x20server:','match','code','[URDF\x20REWRITE]\x20No\x20mesh\x20references\x20found\x20in\x20URDF','PORT','Disconnected\x20from\x20ROSBridge\x20(WebRTC),\x20attempting\x20to\x20reconnect...','topics','Not\x20authenticated','types','close','\x20from\x20','/appliance/register','getActiveSessions','ros2\x20param\x20get\x20','Failed\x20to\x20start\x20application:','warn','serializeToString','4674378cdcYQs','constructor','endsWith','2288364fPYrlx','Access-Control-Allow-Methods','env','trim','),\x20attempting\x20to\x20reconnect...','Failed\x20to\x20connect\x20to\x20ROSBridge\x20(main):','request_id','express','log','Environment:\x20','values','OPEN','text/xml','parse','Connected\x20to\x20server','method','urdf_param_data','data','Authentication\x20required','mesh_data','Origin,\x20X-Requested-With,\x20Content-Type,\x20Accept,\x20Authorization','ros2\x20pkg\x20prefix\x20','initialize','robot\x20not\x20found','proxyPort','filename','/health','open','development','replace','APP_USERNAME','loadConfig','Failed\x20to\x20register\x20with\x20server','status','rosbridge','String\x20value\x20is:\x20','parseFromString','action','roslib','/robot_description','12303HDLoel','robotId','\x20mesh\x20references\x20in\x20URDF\x20(WebSocket)','estimatedSize','.obj','name','hide','forward','join','totalTopics','application/json','response','length','sample','xmldom','package://','Failed\x20to\x20connect\x20to\x20ROSBridge\x20(WebRTC):','ROSBridge\x20WebSocket\x20URL:\x20','[ROSBridge]\x20Failed\x20to\x20parse\x20message\x20for\x20topic\x20management:','[URDF\x20PARAM]\x20Successfully\x20served\x20URDF\x20parameter:\x20','7RgDZDq','handleMessage','Port\x20','wsEndpoint','Login\x20failed.\x20Please\x20enter\x20credentials\x20again.','Registering\x20with\x20server...','[MESH]\x20Successfully\x20served\x20mesh:\x20','json','Bearer\x20','Proxy\x20listening\x20on\x20port:\x20','child_process','username','param_name','66MqCWjo','./services/TopicManager','getSharedVideoSources','unknown'];a1_0x3bd3=function(){return _0x597bfd;};return a1_0x3bd3();}const getInitialPort=()=>{const _0x6d3620=a1_0x3ce42f;if(process[_0x6d3620(0xae)][_0x6d3620(0x9c)])return parseInt(process[_0x6d3620(0xae)][_0x6d3620(0x9c)],0xa);return config[_0x6d3620(0xce)][_0x6d3620(0xc4)];};async function listenWithRetries(_0x56c238,_0x5c95e1,_0x2aa848=0xa){let _0x356948=_0x5c95e1;for(let _0x218ff8=0x1;_0x218ff8<=_0x2aa848;_0x218ff8++){try{return await new Promise((_0xc1a4c7,_0x27b697)=>{const _0x825453=a1_0x2759,_0x857dce=_0x56c238[_0x825453(0x106)](_0x356948,()=>{const _0x2343bc=_0x825453;console[_0x2343bc(0xb4)](_0x2343bc(0x86)+_0x356948),_0xc1a4c7(_0x857dce);});_0x857dce['on']('error',_0x2da117=>{const _0x51d445=_0x825453;_0x2da117[_0x51d445(0x9a)]==='EADDRINUSE'?(console['warn'](_0x51d445(0xea)+_0x356948+'\x20in\x20use,\x20trying\x20next\x20port...'),_0x27b697(_0x2da117)):_0x27b697(_0x2da117);});}),_0x356948;}catch(_0x52ae6a){_0x356948++;}}throw new Error('Failed\x20to\x20bind\x20to\x20a\x20port\x20after\x20'+_0x2aa848+'\x20attempts\x20starting\x20from\x20'+_0x5c95e1);}const startApp=async()=>{const _0x4b6508=a1_0x3ce42f;try{let _0x403511=await authService[_0x4b6508(0x100)]();while(!_0x403511){console[_0x4b6508(0xb4)](_0x4b6508(0xec)),await promptForCredentials(),_0x403511=await authService[_0x4b6508(0x100)]();}console[_0x4b6508(0xb4)]('Successfully\x20logged\x20in');!loadApplianceIdentity()&&console[_0x4b6508(0xb4)](_0x4b6508(0x82));console[_0x4b6508(0xb4)](_0x4b6508(0xed));const _0x1252d0=await registerWithServer();if(!_0x1252d0)throw new Error(_0x4b6508(0xcc));connectToRosbridge(),connectToServer();const _0xc40481=getInitialPort();await listenWithRetries(app,_0xc40481,0xa);}catch(_0x2672e4){console[_0x4b6508(0x101)](_0x4b6508(0xa6),_0x2672e4),process['exit'](0x1);}};function a1_0x2759(_0x360f43,_0x45e276){const _0x405b99=a1_0x3bd3();return a1_0x2759=function(_0x5a6861,_0x1b2f5e){_0x5a6861=_0x5a6861-0x73;let _0x3bd384=_0x405b99[_0x5a6861];return _0x3bd384;},a1_0x2759(_0x360f43,_0x45e276);}setInterval(async()=>{const _0x577666=a1_0x3ce42f;try{if(robotId){const _0x54029e=authService[_0x577666(0x81)]();await axios[_0x577666(0x73)](config[_0x577666(0x122)]+'/appliance/ping',{'robotId':robotId},{'headers':{'Authorization':'Bearer\x20'+_0x54029e,'Content-Type':_0x577666(0xde)}});}}catch(_0x486bf){console[_0x577666(0x101)](_0x577666(0x121),_0x486bf[_0x577666(0x130)]);}},0x1388),startApp();