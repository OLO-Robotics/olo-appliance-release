const a4_0x1cffe8=a4_0x52aa;function a4_0x52aa(_0x57c4e6,_0x33b469){const _0x2846d5=a4_0x2129();return a4_0x52aa=function(_0x413d31,_0x272223){_0x413d31=_0x413d31-0x1ab;let _0x21292d=_0x2846d5[_0x413d31];return _0x21292d;},a4_0x52aa(_0x57c4e6,_0x33b469);}(function(_0x1b6984,_0x1537f9){const _0x1cb2de=a4_0x52aa,_0x5e1660=_0x1b6984();while(!![]){try{const _0x1f2e64=parseInt(_0x1cb2de(0x1ab))/0x1+-parseInt(_0x1cb2de(0x204))/0x2*(-parseInt(_0x1cb2de(0x1e6))/0x3)+-parseInt(_0x1cb2de(0x1d5))/0x4*(-parseInt(_0x1cb2de(0x1f2))/0x5)+parseInt(_0x1cb2de(0x1ca))/0x6*(-parseInt(_0x1cb2de(0x1be))/0x7)+-parseInt(_0x1cb2de(0x1c9))/0x8*(parseInt(_0x1cb2de(0x20d))/0x9)+parseInt(_0x1cb2de(0x1f1))/0xa+parseInt(_0x1cb2de(0x1dd))/0xb*(-parseInt(_0x1cb2de(0x1ee))/0xc);if(_0x1f2e64===_0x1537f9)break;else _0x5e1660['push'](_0x5e1660['shift']());}catch(_0x766179){_0x5e1660['push'](_0x5e1660['shift']());}}}(a4_0x2129,0xaf0bf));function a4_0x2129(){const _0x43018f=['some','getManagedTopics','[TopicManager]\x20Topic\x20discovery\x20completed','497oJgnqQ','webrtc_skip','discoveryInProgress','forEach','discoverTopics','topicStrategies','getStatistics','point_cloud','isCameraTopic','strategy','getTopicStrategy','4504hxHifx','82506XySimt','isLargeData','config','largeDataThreshold','websocket','from','points','webrtc_only','normal_size','cloud','shouldUseWebRTC','292qABPHW','point','toString','throttle_skip','split','includes','laser_scan_throttled','replace','11fcjYeM','length','lastMessageTimes','has','sensor_msgs/msg/Image','entries','defaultLargeDataStrategy','now','[TopicManager]\x20Strategies:','2436702daHHuC','types','throttle','Image','search','[TopicManager]\x20Topic\x20discovery\x20failed:','throttleFrequencies','sensor_msgs/msg/LaserScan','6299292LkHPff','compressed','filter','9511090nYUrDJ','24590UptdpC','error','[TopicManager]\x20Starting\x20topic\x20discovery...','[TopicManager]\x20Loaded\x20configuration:','sensor_msgs/msg/CompressedImage','handleMessage','webrtc','isLargeDataTopic','scan','(((.+)+)+)+$','point_cloud_throttled','set','image','analyzeTopicStrategy','get','estimateTopicSize','constructor','[TopicManager]\x20Error\x20getting\x20topics:','2kjanwP','type','PointCloud2','\x20topics','shouldThrottle','reason','log','depth_points','child_process','2907VevHRn','exports','LaserScan','277745AfFRSV','large_data_throttled','apply','topicHandling','[TopicManager]\x20Initialised','name','map','strategiesConfig','video_webrtc_streaming','maxFrequency','image_raw','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','unknown','forward','topic','strategies'];a4_0x2129=function(){return _0x43018f;};return a4_0x2129();}const a4_0x272223=(function(){let _0x2744ca=!![];return function(_0x1e6efa,_0x47e48e){const _0x2aa54f=_0x2744ca?function(){const _0x340595=a4_0x52aa;if(_0x47e48e){const _0x114b63=_0x47e48e[_0x340595(0x1ad)](_0x1e6efa,arguments);return _0x47e48e=null,_0x114b63;}}:function(){};return _0x2744ca=![],_0x2aa54f;};}()),a4_0x413d31=a4_0x272223(this,function(){const _0x2d5707=a4_0x52aa;return a4_0x413d31[_0x2d5707(0x1d7)]()['search'](_0x2d5707(0x1fb))[_0x2d5707(0x1d7)]()[_0x2d5707(0x202)](a4_0x413d31)[_0x2d5707(0x1ea)](_0x2d5707(0x1fb));});a4_0x413d31();const {execSync}=require(a4_0x1cffe8(0x20c));class TopicManager{constructor(){const _0x183a56=a4_0x1cffe8;this[_0x183a56(0x1c3)]=new Map(),this[_0x183a56(0x1df)]=new Map(),this['discoveryInProgress']=![],this['config']={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x183a56(0x1d1),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console['log'](_0x183a56(0x1af));}['loadConfig'](_0x5ba091){const _0x2d80ac=a4_0x1cffe8;if(_0x5ba091[_0x2d80ac(0x1ae)]){const _0x7dd89=_0x5ba091['topicHandling'];_0x7dd89['largeDataThreshold']&&(this[_0x2d80ac(0x1cc)]['largeDataThreshold']=_0x7dd89[_0x2d80ac(0x1cd)]),_0x7dd89[_0x2d80ac(0x1e3)]&&(this[_0x2d80ac(0x1cc)]['defaultLargeDataStrategy']=_0x7dd89[_0x2d80ac(0x1e3)]),_0x7dd89[_0x2d80ac(0x1ba)]&&(this[_0x2d80ac(0x1cc)][_0x2d80ac(0x1b2)]={..._0x7dd89[_0x2d80ac(0x1ba)]}),_0x7dd89[_0x2d80ac(0x1ec)]&&(this[_0x2d80ac(0x1cc)][_0x2d80ac(0x1ec)]={...this['config'][_0x2d80ac(0x1ec)],..._0x7dd89[_0x2d80ac(0x1ec)]}),console[_0x2d80ac(0x20a)](_0x2d80ac(0x1f5),this[_0x2d80ac(0x1cc)]);}}async[a4_0x1cffe8(0x1c2)](_0x2a7968){const _0x348b1f=a4_0x1cffe8;if(this[_0x348b1f(0x1c0)]||!_0x2a7968)return;this[_0x348b1f(0x1c0)]=!![],console[_0x348b1f(0x20a)](_0x348b1f(0x1f4));try{await new Promise((_0x565c0f,_0x3ff6b2)=>{_0x2a7968['getTopics'](_0x52b084=>{const _0x457ccd=a4_0x52aa,_0x3bd282=_0x52b084['topics'][_0x457ccd(0x1b1)]((_0x51196c,_0x251453)=>({'name':_0x51196c,'type':_0x52b084[_0x457ccd(0x1e7)][_0x251453]}));console['log']('[TopicManager]\x20Found\x20'+_0x3bd282[_0x457ccd(0x1de)]+_0x457ccd(0x207));for(const _0x17c3fd of _0x3bd282){this[_0x457ccd(0x1ff)](_0x17c3fd);}console[_0x457ccd(0x20a)](_0x457ccd(0x1bd)),console['log'](_0x457ccd(0x1e5),Array[_0x457ccd(0x1cf)](this['topicStrategies'][_0x457ccd(0x1e2)]())),_0x565c0f();},_0x5dbe24=>{const _0x18153a=a4_0x52aa;console[_0x18153a(0x1f3)](_0x18153a(0x203),_0x5dbe24),_0x3ff6b2(_0x5dbe24);});});}catch(_0x4d5deb){console[_0x348b1f(0x1f3)](_0x348b1f(0x1eb),_0x4d5deb);}finally{this['discoveryInProgress']=![];}}[a4_0x1cffe8(0x1ff)](_0x3cbc13){const _0x1d1fb4=a4_0x1cffe8,_0x52b425=this['determineTopicStrategy'](_0x3cbc13);this['topicStrategies'][_0x1d1fb4(0x1fd)](_0x3cbc13[_0x1d1fb4(0x1b0)],{'type':_0x3cbc13[_0x1d1fb4(0x205)],'strategy':_0x52b425[_0x1d1fb4(0x205)],'reason':_0x52b425[_0x1d1fb4(0x209)],'maxFrequency':_0x52b425[_0x1d1fb4(0x1b4)],'isLargeData':_0x52b425[_0x1d1fb4(0x1cb)],'estimatedSize':_0x52b425['estimatedSize']}),console[_0x1d1fb4(0x20a)]('[TopicManager]\x20Topic\x20'+_0x3cbc13[_0x1d1fb4(0x1b0)]+':\x20'+_0x52b425[_0x1d1fb4(0x205)]+'\x20('+_0x52b425[_0x1d1fb4(0x209)]+')');}['determineTopicStrategy'](_0x32dab4){const _0x516a72=a4_0x1cffe8;if(this[_0x516a72(0x1cc)][_0x516a72(0x1b2)][_0x32dab4[_0x516a72(0x1b0)]]){const _0x36dec4=this['config'][_0x516a72(0x1b2)][_0x32dab4[_0x516a72(0x1b0)]];return this['parseStrategyConfig'](_0x36dec4,'user_configured');}for(const [_0x405e17,_0xbcacc9]of Object[_0x516a72(0x1e2)](this[_0x516a72(0x1cc)][_0x516a72(0x1b2)])){if(_0x32dab4[_0x516a72(0x1b0)][_0x516a72(0x1da)](_0x405e17[_0x516a72(0x1dc)]('/','')))return this['parseStrategyConfig'](_0xbcacc9,'pattern_configured');}if(this[_0x516a72(0x1c6)](_0x32dab4[_0x516a72(0x1b0)],_0x32dab4[_0x516a72(0x205)])){const _0x4c3a7a=this[_0x516a72(0x201)](_0x32dab4['name'],_0x32dab4[_0x516a72(0x205)]);return{'type':_0x516a72(0x1f8),'reason':_0x516a72(0x1b3),'isLargeData':!![],'estimatedSize':_0x4c3a7a,'maxFrequency':null};}const _0x341e80=this[_0x516a72(0x1f9)](_0x32dab4['name'],_0x32dab4['type']),_0x53b0f5=this[_0x516a72(0x201)](_0x32dab4[_0x516a72(0x1b0)],_0x32dab4[_0x516a72(0x205)]);if(_0x341e80||_0x53b0f5>this['config'][_0x516a72(0x1cd)]){let _0x3cd4b6=this['config'][_0x516a72(0x1ec)][_0x32dab4['type']]||0xa,_0x5accc=_0x516a72(0x1ac);if(_0x32dab4[_0x516a72(0x205)][_0x516a72(0x1da)](_0x516a72(0x206))||_0x32dab4[_0x516a72(0x1b0)][_0x516a72(0x1da)](_0x516a72(0x1d0)))_0x3cd4b6=this[_0x516a72(0x1cc)][_0x516a72(0x1ec)][_0x32dab4[_0x516a72(0x205)]]||0x5,_0x5accc=_0x516a72(0x1fc);else{if(_0x32dab4[_0x516a72(0x205)][_0x516a72(0x1da)](_0x516a72(0x20f))||_0x32dab4[_0x516a72(0x1b0)]['includes'](_0x516a72(0x1fa)))_0x3cd4b6=this['config']['throttleFrequencies'][_0x32dab4[_0x516a72(0x205)]]||0xf,_0x5accc=_0x516a72(0x1db);else _0x32dab4['type'][_0x516a72(0x1da)](_0x516a72(0x1e9))&&(_0x3cd4b6=this[_0x516a72(0x1cc)]['throttleFrequencies'][_0x32dab4['type']]||0xa,_0x5accc='image_throttled');}return{'type':_0x516a72(0x1e8),'reason':_0x5accc,'isLargeData':!![],'estimatedSize':_0x53b0f5,'maxFrequency':_0x3cd4b6};}return{'type':_0x516a72(0x1ce),'reason':_0x516a72(0x1d2),'isLargeData':![],'estimatedSize':_0x53b0f5,'maxFrequency':null};}['parseStrategyConfig'](_0x45cb26,_0x5bd48f){const _0x4ed467=a4_0x1cffe8;if(_0x45cb26[_0x4ed467(0x1da)](':')){const [_0x26d220,_0x322295]=_0x45cb26[_0x4ed467(0x1d9)](':');return{'type':_0x26d220,'reason':_0x5bd48f,'isLargeData':!![],'maxFrequency':_0x26d220===_0x4ed467(0x1e8)?parseFloat(_0x322295):null,'estimatedSize':this['config']['largeDataThreshold']+0x1};}return{'type':_0x45cb26,'reason':_0x5bd48f,'isLargeData':_0x45cb26!==_0x4ed467(0x1ce),'maxFrequency':null,'estimatedSize':this['config']['largeDataThreshold']+0x1};}[a4_0x1cffe8(0x1f9)](_0x2fab70,_0x384c7d){const _0x1ae4ab=a4_0x1cffe8,_0xed8bd3=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x17a0f3=['sensor_msgs/msg/PointCloud2',_0x1ae4ab(0x1e1),_0x1ae4ab(0x1ed),_0x1ae4ab(0x1f6)];return _0xed8bd3[_0x1ae4ab(0x1bb)](_0x183641=>_0x183641['test'](_0x2fab70))||_0x17a0f3[_0x1ae4ab(0x1da)](_0x384c7d);}[a4_0x1cffe8(0x1c6)](_0x4f47b7,_0x55bebc=''){const _0x1b07d0=a4_0x1cffe8,_0x3f4389=['sensor_msgs/msg/Image',_0x1b07d0(0x1f6)];if(_0x3f4389[_0x1b07d0(0x1da)](_0x55bebc))return!_0x4f47b7[_0x1b07d0(0x1da)](_0x1b07d0(0x1d0))&&!_0x4f47b7[_0x1b07d0(0x1da)](_0x1b07d0(0x1c5))&&!_0x4f47b7[_0x1b07d0(0x1da)](_0x1b07d0(0x20b));return(_0x4f47b7['includes'](_0x1b07d0(0x1fe))||_0x4f47b7['includes'](_0x1b07d0(0x1ef)))&&!_0x4f47b7[_0x1b07d0(0x1da)](_0x1b07d0(0x1d0))&&!_0x4f47b7[_0x1b07d0(0x1da)]('point_cloud')&&!_0x4f47b7['includes'](_0x1b07d0(0x20b));}[a4_0x1cffe8(0x201)](_0x5a7a12,_0x21d141){const _0x3d2a77=a4_0x1cffe8,_0x2befa5={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x2befa5[_0x21d141])return _0x2befa5[_0x21d141];if(_0x5a7a12[_0x3d2a77(0x1da)](_0x3d2a77(0x1d6))||_0x5a7a12[_0x3d2a77(0x1da)](_0x3d2a77(0x1d3)))return 0x190*0x400;if(_0x5a7a12[_0x3d2a77(0x1da)](_0x3d2a77(0x1b5)))return 0x12c*0x400;if(_0x5a7a12[_0x3d2a77(0x1da)](_0x3d2a77(0x1ef)))return 0x32*0x400;return 0x400;}[a4_0x1cffe8(0x1f7)](_0x4ce78b){const _0x2675d4=a4_0x1cffe8;let _0x319379=this['topicStrategies'][_0x2675d4(0x200)](_0x4ce78b[_0x2675d4(0x1b9)]);if(!_0x319379){console[_0x2675d4(0x20a)](_0x2675d4(0x1b6)+_0x4ce78b['topic']);let _0x1dfc3d=_0x2675d4(0x1b7);if(_0x4ce78b[_0x2675d4(0x1b9)][_0x2675d4(0x1da)](_0x2675d4(0x1fe))&&_0x4ce78b[_0x2675d4(0x1b9)]['includes'](_0x2675d4(0x1ef)))_0x1dfc3d=_0x2675d4(0x1f6);else{if(_0x4ce78b[_0x2675d4(0x1b9)]['includes'](_0x2675d4(0x1fe)))_0x1dfc3d=_0x2675d4(0x1e1);else{if(_0x4ce78b[_0x2675d4(0x1b9)][_0x2675d4(0x1da)](_0x2675d4(0x1d6))||_0x4ce78b[_0x2675d4(0x1b9)][_0x2675d4(0x1da)](_0x2675d4(0x1d3)))_0x1dfc3d='sensor_msgs/msg/PointCloud2';else _0x4ce78b[_0x2675d4(0x1b9)][_0x2675d4(0x1da)](_0x2675d4(0x1fa))&&(_0x1dfc3d=_0x2675d4(0x1ed));}}const _0x29aafa={'name':_0x4ce78b[_0x2675d4(0x1b9)],'type':_0x1dfc3d};this[_0x2675d4(0x1ff)](_0x29aafa),_0x319379=this[_0x2675d4(0x1c3)][_0x2675d4(0x200)](_0x4ce78b[_0x2675d4(0x1b9)]);}if(!_0x319379)return{'action':_0x2675d4(0x1b8),'message':_0x4ce78b};switch(_0x319379[_0x2675d4(0x1c7)]){case _0x2675d4(0x1e8):return this[_0x2675d4(0x208)](_0x4ce78b[_0x2675d4(0x1b9)],_0x319379[_0x2675d4(0x1b4)])?{'action':_0x2675d4(0x1b8),'message':_0x4ce78b}:{'action':_0x2675d4(0x1d8)};case _0x2675d4(0x1f8):return{'action':_0x2675d4(0x1bf)};case _0x2675d4(0x1ce):default:return{'action':_0x2675d4(0x1b8),'message':_0x4ce78b};}}[a4_0x1cffe8(0x208)](_0x26f144,_0x5d0f9b){const _0xc1a974=a4_0x1cffe8;if(!_0x5d0f9b)return!![];const _0x90495b=Date[_0xc1a974(0x1e4)](),_0x4b644f=0x3e8/_0x5d0f9b;!this[_0xc1a974(0x1df)][_0xc1a974(0x1e0)](_0x26f144)&&this['lastMessageTimes']['set'](_0x26f144,0x0);const _0x5b3930=this[_0xc1a974(0x1df)][_0xc1a974(0x200)](_0x26f144),_0x54a332=_0x90495b-_0x5b3930;if(_0x54a332>=_0x4b644f)return this['lastMessageTimes'][_0xc1a974(0x1fd)](_0x26f144,_0x90495b),!![];return![];}[a4_0x1cffe8(0x1c8)](_0x1a4a19){const _0x5686bd=a4_0x1cffe8;return this[_0x5686bd(0x1c3)][_0x5686bd(0x200)](_0x1a4a19);}[a4_0x1cffe8(0x1bc)](){const _0x3eebda=a4_0x1cffe8;return Array[_0x3eebda(0x1cf)](this[_0x3eebda(0x1c3)]['entries']())[_0x3eebda(0x1b1)](([_0x14bd55,_0x313878])=>({'topic':_0x14bd55,..._0x313878}));}[a4_0x1cffe8(0x1d4)](_0x1e3b6b){const _0x5d17d9=a4_0x1cffe8,_0x11f644=this[_0x5d17d9(0x1c3)][_0x5d17d9(0x200)](_0x1e3b6b);return _0x11f644?.[_0x5d17d9(0x1c7)]===_0x5d17d9(0x1d1);}[a4_0x1cffe8(0x1c4)](){const _0x332dd6=a4_0x1cffe8,_0xce8708={};return this[_0x332dd6(0x1c3)][_0x332dd6(0x1c1)]((_0x40bf11,_0x30b406)=>{const _0x121048=_0x332dd6;!_0xce8708[_0x40bf11[_0x121048(0x1c7)]]&&(_0xce8708[_0x40bf11[_0x121048(0x1c7)]]=0x0),_0xce8708[_0x40bf11['strategy']]++;}),{'totalTopics':this[_0x332dd6(0x1c3)]['size'],'strategies':_0xce8708,'largeDataTopics':Array[_0x332dd6(0x1cf)](this[_0x332dd6(0x1c3)][_0x332dd6(0x1e2)]())[_0x332dd6(0x1f0)](([_0xc17258,_0x205790])=>_0x205790[_0x332dd6(0x1cb)])[_0x332dd6(0x1b1)](([_0x2c9a7d,_0x4892ca])=>_0x2c9a7d)};}}module[a4_0x1cffe8(0x20e)]=new TopicManager();