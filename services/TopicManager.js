const a4_0x6f8b4f=a4_0x34f0;(function(_0x55cda5,_0xb39c4d){const _0x35a666=a4_0x34f0,_0x18f824=_0x55cda5();while(!![]){try{const _0x569ef9=parseInt(_0x35a666(0x10d))/0x1*(parseInt(_0x35a666(0x142))/0x2)+parseInt(_0x35a666(0x105))/0x3*(parseInt(_0x35a666(0x153))/0x4)+-parseInt(_0x35a666(0x14f))/0x5+parseInt(_0x35a666(0x13f))/0x6*(parseInt(_0x35a666(0x147))/0x7)+-parseInt(_0x35a666(0x11f))/0x8*(parseInt(_0x35a666(0x126))/0x9)+-parseInt(_0x35a666(0x15c))/0xa+parseInt(_0x35a666(0x110))/0xb;if(_0x569ef9===_0xb39c4d)break;else _0x18f824['push'](_0x18f824['shift']());}catch(_0x1f7c05){_0x18f824['push'](_0x18f824['shift']());}}}(a4_0x313d,0x5f565));const a4_0xc4d4d4=(function(){let _0x3b0a8a=!![];return function(_0x337b1d,_0x2a576){const _0x3003a5=_0x3b0a8a?function(){const _0x404022=a4_0x34f0;if(_0x2a576){const _0x23a7e4=_0x2a576[_0x404022(0x15f)](_0x337b1d,arguments);return _0x2a576=null,_0x23a7e4;}}:function(){};return _0x3b0a8a=![],_0x3003a5;};}()),a4_0x58194a=a4_0xc4d4d4(this,function(){const _0x21324e=a4_0x34f0;return a4_0x58194a[_0x21324e(0x160)]()[_0x21324e(0x14d)]('(((.+)+)+)+$')[_0x21324e(0x160)]()['constructor'](a4_0x58194a)[_0x21324e(0x14d)](_0x21324e(0x15d));});function a4_0x313d(){const _0x21f16b=['set','entries','get','PointCloud2','isLargeData','getTopicStrategy','strategy','map','6ckeXrg','image','[TopicManager]\x20Topic\x20','61012TtSaGW','discoveryInProgress','[TopicManager]\x20Initialised','image_throttled','normal_size','3727423palZMd','websocket','replace','topicStrategies','isCameraTopic','forward','search','webrtc','559335ckxmxt','sensor_msgs/msg/CompressedImage','now','exports','22024zsytZD','depth_points','length','parseStrategyConfig','isLargeDataTopic','some','maxFrequency','video_webrtc_streaming','split','4633490ZBpISp','(((.+)+)+)+$','compressed','apply','toString','Image','webrtc_only','throttle_skip','getStatistics','[TopicManager]\x20Strategies:','topic','largeDataThreshold','points','[TopicManager]\x20Starting\x20topic\x20discovery...','shouldUseWebRTC','300HNlHwm','estimatedSize','defaultLargeDataStrategy','handleMessage','scan','[TopicManager]\x20Loaded\x20configuration:','determineTopicStrategy','strategiesConfig','4snpIqr','topics','pattern_configured','3954643vLmtnQ','sensor_msgs/msg/Image','image_raw','shouldThrottle','[TopicManager]\x20Topic\x20discovery\x20failed:','point_cloud_throttled','point','loadConfig','topicHandling','laser_scan_throttled','forEach','throttle','webrtc_skip','[TopicManager]\x20Found\x20','throttleFrequencies','4791272ODrkuf','error','includes','test','unknown','config','filter','9IqXsTc','estimateTopicSize','type','cloud','discoverTopics','name','from','point_cloud','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','child_process','lastMessageTimes','getTopics','log','strategies','sensor_msgs/msg/PointCloud2','sensor_msgs/msg/LaserScan','analyzeTopicStrategy'];a4_0x313d=function(){return _0x21f16b;};return a4_0x313d();}a4_0x58194a();const {execSync}=require(a4_0x6f8b4f(0x12f));class TopicManager{constructor(){const _0x31d83d=a4_0x6f8b4f;this[_0x31d83d(0x14a)]=new Map(),this[_0x31d83d(0x130)]=new Map(),this[_0x31d83d(0x143)]=![],this[_0x31d83d(0x124)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':'webrtc_only','throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x31d83d(0x132)](_0x31d83d(0x144));}[a4_0x6f8b4f(0x117)](_0x2ec085){const _0x1b8e26=a4_0x6f8b4f;if(_0x2ec085[_0x1b8e26(0x118)]){const _0x37cc29=_0x2ec085[_0x1b8e26(0x118)];_0x37cc29[_0x1b8e26(0x101)]&&(this[_0x1b8e26(0x124)]['largeDataThreshold']=_0x37cc29[_0x1b8e26(0x101)]),_0x37cc29[_0x1b8e26(0x107)]&&(this[_0x1b8e26(0x124)][_0x1b8e26(0x107)]=_0x37cc29['defaultLargeDataStrategy']),_0x37cc29[_0x1b8e26(0x133)]&&(this['config']['strategiesConfig']={..._0x37cc29[_0x1b8e26(0x133)]}),_0x37cc29[_0x1b8e26(0x11e)]&&(this[_0x1b8e26(0x124)]['throttleFrequencies']={...this[_0x1b8e26(0x124)][_0x1b8e26(0x11e)],..._0x37cc29['throttleFrequencies']}),console[_0x1b8e26(0x132)](_0x1b8e26(0x10a),this['config']);}}async[a4_0x6f8b4f(0x12a)](_0x33e22f){const _0x4e27d1=a4_0x6f8b4f;if(this[_0x4e27d1(0x143)]||!_0x33e22f)return;this['discoveryInProgress']=!![],console['log'](_0x4e27d1(0x103));try{await new Promise((_0x946c0e,_0x4e74a2)=>{const _0x4efba3=_0x4e27d1;_0x33e22f[_0x4efba3(0x131)](_0x41c73f=>{const _0x3a2d53=_0x4efba3,_0x25ff32=_0x41c73f[_0x3a2d53(0x10e)][_0x3a2d53(0x13e)]((_0x3f4a83,_0x134596)=>({'name':_0x3f4a83,'type':_0x41c73f['types'][_0x134596]}));console[_0x3a2d53(0x132)](_0x3a2d53(0x11d)+_0x25ff32[_0x3a2d53(0x155)]+'\x20topics');for(const _0x5edb97 of _0x25ff32){this[_0x3a2d53(0x136)](_0x5edb97);}console[_0x3a2d53(0x132)]('[TopicManager]\x20Topic\x20discovery\x20completed'),console[_0x3a2d53(0x132)](_0x3a2d53(0x165),Array[_0x3a2d53(0x12c)](this[_0x3a2d53(0x14a)][_0x3a2d53(0x138)]())),_0x946c0e();},_0x43c88b=>{console['error']('[TopicManager]\x20Error\x20getting\x20topics:',_0x43c88b),_0x4e74a2(_0x43c88b);});});}catch(_0x30a83a){console[_0x4e27d1(0x120)](_0x4e27d1(0x114),_0x30a83a);}finally{this[_0x4e27d1(0x143)]=![];}}[a4_0x6f8b4f(0x136)](_0x3e7891){const _0x2e421f=a4_0x6f8b4f,_0x7fd6a1=this[_0x2e421f(0x10b)](_0x3e7891);this['topicStrategies'][_0x2e421f(0x137)](_0x3e7891['name'],{'type':_0x3e7891[_0x2e421f(0x128)],'strategy':_0x7fd6a1[_0x2e421f(0x128)],'reason':_0x7fd6a1['reason'],'maxFrequency':_0x7fd6a1[_0x2e421f(0x159)],'isLargeData':_0x7fd6a1[_0x2e421f(0x13b)],'estimatedSize':_0x7fd6a1[_0x2e421f(0x106)]}),console[_0x2e421f(0x132)](_0x2e421f(0x141)+_0x3e7891['name']+':\x20'+_0x7fd6a1[_0x2e421f(0x128)]+'\x20('+_0x7fd6a1['reason']+')');}[a4_0x6f8b4f(0x10b)](_0x4ad6d2){const _0x4bee94=a4_0x6f8b4f;if(this[_0x4bee94(0x124)]['strategiesConfig'][_0x4ad6d2[_0x4bee94(0x12b)]]){const _0x1b0ad8=this[_0x4bee94(0x124)][_0x4bee94(0x10c)][_0x4ad6d2[_0x4bee94(0x12b)]];return this[_0x4bee94(0x156)](_0x1b0ad8,'user_configured');}for(const [_0x4442eb,_0x5f5dfe]of Object['entries'](this['config'][_0x4bee94(0x10c)])){if(_0x4ad6d2[_0x4bee94(0x12b)][_0x4bee94(0x121)](_0x4442eb[_0x4bee94(0x149)]('/','')))return this[_0x4bee94(0x156)](_0x5f5dfe,_0x4bee94(0x10f));}if(this[_0x4bee94(0x14b)](_0x4ad6d2[_0x4bee94(0x12b)],_0x4ad6d2[_0x4bee94(0x128)])){const _0x28a555=this[_0x4bee94(0x127)](_0x4ad6d2[_0x4bee94(0x12b)],_0x4ad6d2[_0x4bee94(0x128)]);return{'type':'webrtc','reason':_0x4bee94(0x15a),'isLargeData':!![],'estimatedSize':_0x28a555,'maxFrequency':null};}const _0x5504ab=this['isLargeDataTopic'](_0x4ad6d2[_0x4bee94(0x12b)],_0x4ad6d2['type']),_0x526625=this[_0x4bee94(0x127)](_0x4ad6d2[_0x4bee94(0x12b)],_0x4ad6d2['type']);if(_0x5504ab||_0x526625>this[_0x4bee94(0x124)]['largeDataThreshold']){let _0x2c1f06=this[_0x4bee94(0x124)][_0x4bee94(0x11e)][_0x4ad6d2[_0x4bee94(0x128)]]||0xa,_0x4b7791='large_data_throttled';if(_0x4ad6d2[_0x4bee94(0x128)][_0x4bee94(0x121)](_0x4bee94(0x13a))||_0x4ad6d2[_0x4bee94(0x12b)][_0x4bee94(0x121)](_0x4bee94(0x102)))_0x2c1f06=this[_0x4bee94(0x124)][_0x4bee94(0x11e)][_0x4ad6d2['type']]||0x5,_0x4b7791=_0x4bee94(0x115);else{if(_0x4ad6d2[_0x4bee94(0x128)][_0x4bee94(0x121)]('LaserScan')||_0x4ad6d2[_0x4bee94(0x12b)][_0x4bee94(0x121)](_0x4bee94(0x109)))_0x2c1f06=this[_0x4bee94(0x124)][_0x4bee94(0x11e)][_0x4ad6d2[_0x4bee94(0x128)]]||0xf,_0x4b7791=_0x4bee94(0x119);else _0x4ad6d2[_0x4bee94(0x128)][_0x4bee94(0x121)](_0x4bee94(0x161))&&(_0x2c1f06=this[_0x4bee94(0x124)][_0x4bee94(0x11e)][_0x4ad6d2[_0x4bee94(0x128)]]||0xa,_0x4b7791=_0x4bee94(0x145));}return{'type':_0x4bee94(0x11b),'reason':_0x4b7791,'isLargeData':!![],'estimatedSize':_0x526625,'maxFrequency':_0x2c1f06};}return{'type':_0x4bee94(0x148),'reason':_0x4bee94(0x146),'isLargeData':![],'estimatedSize':_0x526625,'maxFrequency':null};}[a4_0x6f8b4f(0x156)](_0x2bffcc,_0x1a49e6){const _0x46a861=a4_0x6f8b4f;if(_0x2bffcc[_0x46a861(0x121)](':')){const [_0xa56578,_0x3455d2]=_0x2bffcc[_0x46a861(0x15b)](':');return{'type':_0xa56578,'reason':_0x1a49e6,'isLargeData':!![],'maxFrequency':_0xa56578===_0x46a861(0x11b)?parseFloat(_0x3455d2):null,'estimatedSize':this[_0x46a861(0x124)][_0x46a861(0x101)]+0x1};}return{'type':_0x2bffcc,'reason':_0x1a49e6,'isLargeData':_0x2bffcc!=='websocket','maxFrequency':null,'estimatedSize':this[_0x46a861(0x124)][_0x46a861(0x101)]+0x1};}[a4_0x6f8b4f(0x157)](_0x21b770,_0x3c7b70){const _0xd0449a=a4_0x6f8b4f,_0x42f129=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x58f323=[_0xd0449a(0x134),'sensor_msgs/msg/Image','sensor_msgs/msg/LaserScan',_0xd0449a(0x150)];return _0x42f129[_0xd0449a(0x158)](_0x2c8db9=>_0x2c8db9[_0xd0449a(0x122)](_0x21b770))||_0x58f323['includes'](_0x3c7b70);}[a4_0x6f8b4f(0x14b)](_0x33ba5d,_0x2a8edf=''){const _0x2ad84c=a4_0x6f8b4f,_0x5e5916=[_0x2ad84c(0x111),_0x2ad84c(0x150)];if(_0x5e5916[_0x2ad84c(0x121)](_0x2a8edf))return!_0x33ba5d[_0x2ad84c(0x121)]('points')&&!_0x33ba5d[_0x2ad84c(0x121)](_0x2ad84c(0x12d))&&!_0x33ba5d['includes'](_0x2ad84c(0x154));return(_0x33ba5d[_0x2ad84c(0x121)](_0x2ad84c(0x140))||_0x33ba5d[_0x2ad84c(0x121)](_0x2ad84c(0x15e)))&&!_0x33ba5d[_0x2ad84c(0x121)](_0x2ad84c(0x102))&&!_0x33ba5d[_0x2ad84c(0x121)](_0x2ad84c(0x12d))&&!_0x33ba5d['includes'](_0x2ad84c(0x154));}[a4_0x6f8b4f(0x127)](_0xbbf106,_0xb578e4){const _0x8a6430=a4_0x6f8b4f,_0x3de399={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x3de399[_0xb578e4])return _0x3de399[_0xb578e4];if(_0xbbf106[_0x8a6430(0x121)](_0x8a6430(0x116))||_0xbbf106['includes'](_0x8a6430(0x129)))return 0x190*0x400;if(_0xbbf106[_0x8a6430(0x121)](_0x8a6430(0x112)))return 0x12c*0x400;if(_0xbbf106[_0x8a6430(0x121)]('compressed'))return 0x32*0x400;return 0x400;}[a4_0x6f8b4f(0x108)](_0x4b1166){const _0x1ab171=a4_0x6f8b4f;let _0x447f41=this[_0x1ab171(0x14a)]['get'](_0x4b1166['topic']);if(!_0x447f41){console[_0x1ab171(0x132)](_0x1ab171(0x12e)+_0x4b1166[_0x1ab171(0x100)]);let _0xeb7380=_0x1ab171(0x123);if(_0x4b1166['topic'][_0x1ab171(0x121)]('image')&&_0x4b1166[_0x1ab171(0x100)][_0x1ab171(0x121)](_0x1ab171(0x15e)))_0xeb7380=_0x1ab171(0x150);else{if(_0x4b1166[_0x1ab171(0x100)][_0x1ab171(0x121)](_0x1ab171(0x140)))_0xeb7380=_0x1ab171(0x111);else{if(_0x4b1166[_0x1ab171(0x100)][_0x1ab171(0x121)]('point')||_0x4b1166[_0x1ab171(0x100)][_0x1ab171(0x121)](_0x1ab171(0x129)))_0xeb7380=_0x1ab171(0x134);else _0x4b1166['topic'][_0x1ab171(0x121)](_0x1ab171(0x109))&&(_0xeb7380=_0x1ab171(0x135));}}const _0x4504b9={'name':_0x4b1166['topic'],'type':_0xeb7380};this[_0x1ab171(0x136)](_0x4504b9),_0x447f41=this[_0x1ab171(0x14a)][_0x1ab171(0x139)](_0x4b1166['topic']);}if(!_0x447f41)return{'action':'forward','message':_0x4b1166};switch(_0x447f41[_0x1ab171(0x13d)]){case'throttle':return this[_0x1ab171(0x113)](_0x4b1166['topic'],_0x447f41[_0x1ab171(0x159)])?{'action':_0x1ab171(0x14c),'message':_0x4b1166}:{'action':_0x1ab171(0x163)};case _0x1ab171(0x14e):return{'action':_0x1ab171(0x11c)};case _0x1ab171(0x148):default:return{'action':_0x1ab171(0x14c),'message':_0x4b1166};}}[a4_0x6f8b4f(0x113)](_0x1c7ce4,_0x3fa250){const _0x3e0286=a4_0x6f8b4f;if(!_0x3fa250)return!![];const _0x10a42b=Date[_0x3e0286(0x151)](),_0x55f8af=0x3e8/_0x3fa250;!this[_0x3e0286(0x130)]['has'](_0x1c7ce4)&&this[_0x3e0286(0x130)][_0x3e0286(0x137)](_0x1c7ce4,0x0);const _0x27b852=this['lastMessageTimes'][_0x3e0286(0x139)](_0x1c7ce4),_0x4f7aac=_0x10a42b-_0x27b852;if(_0x4f7aac>=_0x55f8af)return this['lastMessageTimes'][_0x3e0286(0x137)](_0x1c7ce4,_0x10a42b),!![];return![];}[a4_0x6f8b4f(0x13c)](_0x482db8){const _0x41a32a=a4_0x6f8b4f;return this[_0x41a32a(0x14a)][_0x41a32a(0x139)](_0x482db8);}['getManagedTopics'](){const _0x15473b=a4_0x6f8b4f;return Array[_0x15473b(0x12c)](this[_0x15473b(0x14a)]['entries']())['map'](([_0x524326,_0x2391b2])=>({'topic':_0x524326,..._0x2391b2}));}[a4_0x6f8b4f(0x104)](_0x4be440){const _0x1ba9f9=a4_0x6f8b4f,_0x236729=this[_0x1ba9f9(0x14a)][_0x1ba9f9(0x139)](_0x4be440);return _0x236729?.[_0x1ba9f9(0x13d)]===_0x1ba9f9(0x162);}[a4_0x6f8b4f(0x164)](){const _0x4ef7f0=a4_0x6f8b4f,_0x52c5f1={};return this[_0x4ef7f0(0x14a)][_0x4ef7f0(0x11a)]((_0x143cbf,_0x293837)=>{const _0x51fd55=_0x4ef7f0;!_0x52c5f1[_0x143cbf[_0x51fd55(0x13d)]]&&(_0x52c5f1[_0x143cbf[_0x51fd55(0x13d)]]=0x0),_0x52c5f1[_0x143cbf[_0x51fd55(0x13d)]]++;}),{'totalTopics':this[_0x4ef7f0(0x14a)]['size'],'strategies':_0x52c5f1,'largeDataTopics':Array['from'](this['topicStrategies']['entries']())[_0x4ef7f0(0x125)](([_0x382dd2,_0x4e14f7])=>_0x4e14f7['isLargeData'])[_0x4ef7f0(0x13e)](([_0x3336fb,_0xbdd278])=>_0x3336fb)};}}function a4_0x34f0(_0x5f1352,_0x185a2c){const _0x3f2caa=a4_0x313d();return a4_0x34f0=function(_0x58194a,_0xc4d4d4){_0x58194a=_0x58194a-0x100;let _0x313dfa=_0x3f2caa[_0x58194a];return _0x313dfa;},a4_0x34f0(_0x5f1352,_0x185a2c);}module[a4_0x6f8b4f(0x152)]=new TopicManager();