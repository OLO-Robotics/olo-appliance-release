const a4_0x2093db=a4_0x37e4;function a4_0x3e47(){const _0xee85bb=['16XHgguP','getStatistics','video_webrtc_streaming','31743EBJpAB','shouldThrottle','webrtc','10589201OrVAei','image','some','websocket','forEach','map','5540IgKhUH','[TopicManager]\x20Strategies:','entries','name','user_configured','sensor_msgs/msg/PointCloud2','includes','scan','14283896bsujru','lastMessageTimes','strategy','discoverTopics','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','maxFrequency','size','estimatedSize','test','\x20topics','search','point_cloud','[TopicManager]\x20Topic\x20discovery\x20completed','2790642xliGiS','handleMessage','strategiesConfig','LaserScan','set','isLargeDataTopic','topicStrategies','reason','forward','defaultLargeDataStrategy','getTopicStrategy','5NggQAB','from','point','length','log','pattern_configured','topic','sensor_msgs/msg/LaserScan','analyzeTopicStrategy','strategies','replace','filter','parseStrategyConfig','PointCloud2','toString','has','throttleFrequencies','loadConfig','(((.+)+)+)+$','[TopicManager]\x20Loaded\x20configuration:','get','322902TTCXhc','cloud','[TopicManager]\x20Starting\x20topic\x20discovery...','point_cloud_throttled','webrtc_only','isCameraTopic','config','points','child_process','image_throttled','determineTopicStrategy','5586872qVDpOZ','split','largeDataThreshold','depth_points','isLargeData','getTopics','estimateTopicSize','topics','topicHandling','sensor_msgs/msg/CompressedImage','type','webrtc_skip','throttle','680702fuasyD','discoveryInProgress','compressed','[TopicManager]\x20Found\x20','types','error','sensor_msgs/msg/Image','exports','now','throttle_skip','getManagedTopics','unknown'];a4_0x3e47=function(){return _0xee85bb;};return a4_0x3e47();}(function(_0x1bd65a,_0x5c78ca){const _0x227240=a4_0x37e4,_0xc4c0c5=_0x1bd65a();while(!![]){try{const _0x4df6fe=-parseInt(_0x227240(0xd9))/0x1+-parseInt(_0x227240(0xe5))/0x2*(-parseInt(_0x227240(0x126))/0x3)+parseInt(_0x227240(0xcc))/0x4*(-parseInt(_0x227240(0x111))/0x5)+parseInt(_0x227240(0x106))/0x6+parseInt(_0x227240(0xeb))/0x7+-parseInt(_0x227240(0xf9))/0x8+parseInt(_0x227240(0xe8))/0x9*(parseInt(_0x227240(0xf1))/0xa);if(_0x4df6fe===_0x5c78ca)break;else _0xc4c0c5['push'](_0xc4c0c5['shift']());}catch(_0x2357f8){_0xc4c0c5['push'](_0xc4c0c5['shift']());}}}(a4_0x3e47,0xe30b5));function a4_0x37e4(_0x17ebc7,_0x46d917){const _0x1b9048=a4_0x3e47();return a4_0x37e4=function(_0x2f405d,_0x456057){_0x2f405d=_0x2f405d-0xc3;let _0x3e47a2=_0x1b9048[_0x2f405d];return _0x3e47a2;},a4_0x37e4(_0x17ebc7,_0x46d917);}const a4_0x456057=(function(){let _0x2db1ed=!![];return function(_0x32136f,_0x4faef0){const _0x4b38e7=_0x2db1ed?function(){if(_0x4faef0){const _0x20e68a=_0x4faef0['apply'](_0x32136f,arguments);return _0x4faef0=null,_0x20e68a;}}:function(){};return _0x2db1ed=![],_0x4b38e7;};}()),a4_0x2f405d=a4_0x456057(this,function(){const _0x820653=a4_0x37e4;return a4_0x2f405d[_0x820653(0x11f)]()[_0x820653(0x103)](_0x820653(0x123))[_0x820653(0x11f)]()['constructor'](a4_0x2f405d)[_0x820653(0x103)](_0x820653(0x123));});a4_0x2f405d();const {execSync}=require(a4_0x2093db(0xc9));class TopicManager{constructor(){const _0x3e4436=a4_0x2093db;this[_0x3e4436(0x10c)]=new Map(),this['lastMessageTimes']=new Map(),this[_0x3e4436(0xda)]=![],this[_0x3e4436(0xc7)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':'webrtc_only','throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x3e4436(0x115)]('[TopicManager]\x20Initialised');}[a4_0x2093db(0x122)](_0x2c06d2){const _0x8ef9b6=a4_0x2093db;if(_0x2c06d2[_0x8ef9b6(0xd4)]){const _0x1694b8=_0x2c06d2['topicHandling'];_0x1694b8[_0x8ef9b6(0xce)]&&(this[_0x8ef9b6(0xc7)]['largeDataThreshold']=_0x1694b8[_0x8ef9b6(0xce)]),_0x1694b8[_0x8ef9b6(0x10f)]&&(this[_0x8ef9b6(0xc7)][_0x8ef9b6(0x10f)]=_0x1694b8[_0x8ef9b6(0x10f)]),_0x1694b8[_0x8ef9b6(0x11a)]&&(this[_0x8ef9b6(0xc7)][_0x8ef9b6(0x108)]={..._0x1694b8[_0x8ef9b6(0x11a)]}),_0x1694b8[_0x8ef9b6(0x121)]&&(this[_0x8ef9b6(0xc7)][_0x8ef9b6(0x121)]={...this['config'][_0x8ef9b6(0x121)],..._0x1694b8[_0x8ef9b6(0x121)]}),console[_0x8ef9b6(0x115)](_0x8ef9b6(0x124),this['config']);}}async[a4_0x2093db(0xfc)](_0x30850f){const _0x11af7b=a4_0x2093db;if(this[_0x11af7b(0xda)]||!_0x30850f)return;this[_0x11af7b(0xda)]=!![],console[_0x11af7b(0x115)](_0x11af7b(0xc3));try{await new Promise((_0x215eb4,_0x2ef17b)=>{const _0x4f6bb3=_0x11af7b;_0x30850f[_0x4f6bb3(0xd1)](_0xa1c68=>{const _0x257161=_0x4f6bb3,_0x6c34bc=_0xa1c68[_0x257161(0xd3)][_0x257161(0xf0)]((_0x24f212,_0x4d0ed4)=>({'name':_0x24f212,'type':_0xa1c68[_0x257161(0xdd)][_0x4d0ed4]}));console[_0x257161(0x115)](_0x257161(0xdc)+_0x6c34bc[_0x257161(0x114)]+_0x257161(0x102));for(const _0x366968 of _0x6c34bc){this[_0x257161(0x119)](_0x366968);}console[_0x257161(0x115)](_0x257161(0x105)),console[_0x257161(0x115)](_0x257161(0xf2),Array[_0x257161(0x112)](this[_0x257161(0x10c)][_0x257161(0xf3)]())),_0x215eb4();},_0x7586e7=>{const _0x1868da=_0x4f6bb3;console[_0x1868da(0xde)]('[TopicManager]\x20Error\x20getting\x20topics:',_0x7586e7),_0x2ef17b(_0x7586e7);});});}catch(_0x6615c9){console['error']('[TopicManager]\x20Topic\x20discovery\x20failed:',_0x6615c9);}finally{this['discoveryInProgress']=![];}}[a4_0x2093db(0x119)](_0x343b7c){const _0x12f93b=a4_0x2093db,_0x3a9a64=this[_0x12f93b(0xcb)](_0x343b7c);this[_0x12f93b(0x10c)][_0x12f93b(0x10a)](_0x343b7c[_0x12f93b(0xf4)],{'type':_0x343b7c['type'],'strategy':_0x3a9a64['type'],'reason':_0x3a9a64[_0x12f93b(0x10d)],'maxFrequency':_0x3a9a64[_0x12f93b(0xfe)],'isLargeData':_0x3a9a64[_0x12f93b(0xd0)],'estimatedSize':_0x3a9a64[_0x12f93b(0x100)]}),console[_0x12f93b(0x115)]('[TopicManager]\x20Topic\x20'+_0x343b7c[_0x12f93b(0xf4)]+':\x20'+_0x3a9a64[_0x12f93b(0xd6)]+'\x20('+_0x3a9a64[_0x12f93b(0x10d)]+')');}[a4_0x2093db(0xcb)](_0x129553){const _0xdb5a21=a4_0x2093db;if(this['config'][_0xdb5a21(0x108)][_0x129553['name']]){const _0x55b2ce=this[_0xdb5a21(0xc7)][_0xdb5a21(0x108)][_0x129553[_0xdb5a21(0xf4)]];return this[_0xdb5a21(0x11d)](_0x55b2ce,_0xdb5a21(0xf5));}for(const [_0x1ebc37,_0x477c7a]of Object[_0xdb5a21(0xf3)](this['config'][_0xdb5a21(0x108)])){if(_0x129553['name']['includes'](_0x1ebc37[_0xdb5a21(0x11b)]('/','')))return this[_0xdb5a21(0x11d)](_0x477c7a,_0xdb5a21(0x116));}if(this[_0xdb5a21(0xc6)](_0x129553[_0xdb5a21(0xf4)],_0x129553[_0xdb5a21(0xd6)])){const _0x268304=this[_0xdb5a21(0xd2)](_0x129553['name'],_0x129553[_0xdb5a21(0xd6)]);return{'type':'webrtc','reason':_0xdb5a21(0xe7),'isLargeData':!![],'estimatedSize':_0x268304,'maxFrequency':null};}const _0x50630d=this[_0xdb5a21(0x10b)](_0x129553[_0xdb5a21(0xf4)],_0x129553[_0xdb5a21(0xd6)]),_0x46038a=this[_0xdb5a21(0xd2)](_0x129553[_0xdb5a21(0xf4)],_0x129553[_0xdb5a21(0xd6)]);if(_0x50630d||_0x46038a>this[_0xdb5a21(0xc7)][_0xdb5a21(0xce)]){let _0x2a68c0=this[_0xdb5a21(0xc7)][_0xdb5a21(0x121)][_0x129553[_0xdb5a21(0xd6)]]||0xa,_0x129976='large_data_throttled';if(_0x129553['type'][_0xdb5a21(0xf7)](_0xdb5a21(0x11e))||_0x129553['name'][_0xdb5a21(0xf7)](_0xdb5a21(0xc8)))_0x2a68c0=this[_0xdb5a21(0xc7)][_0xdb5a21(0x121)][_0x129553[_0xdb5a21(0xd6)]]||0x5,_0x129976=_0xdb5a21(0xc4);else{if(_0x129553[_0xdb5a21(0xd6)][_0xdb5a21(0xf7)](_0xdb5a21(0x109))||_0x129553[_0xdb5a21(0xf4)][_0xdb5a21(0xf7)](_0xdb5a21(0xf8)))_0x2a68c0=this[_0xdb5a21(0xc7)]['throttleFrequencies'][_0x129553[_0xdb5a21(0xd6)]]||0xf,_0x129976='laser_scan_throttled';else _0x129553[_0xdb5a21(0xd6)]['includes']('Image')&&(_0x2a68c0=this[_0xdb5a21(0xc7)]['throttleFrequencies'][_0x129553[_0xdb5a21(0xd6)]]||0xa,_0x129976=_0xdb5a21(0xca));}return{'type':_0xdb5a21(0xd8),'reason':_0x129976,'isLargeData':!![],'estimatedSize':_0x46038a,'maxFrequency':_0x2a68c0};}return{'type':'websocket','reason':'normal_size','isLargeData':![],'estimatedSize':_0x46038a,'maxFrequency':null};}['parseStrategyConfig'](_0xa69180,_0x6f3e20){const _0x14e85f=a4_0x2093db;if(_0xa69180[_0x14e85f(0xf7)](':')){const [_0x2d488c,_0xb9b268]=_0xa69180[_0x14e85f(0xcd)](':');return{'type':_0x2d488c,'reason':_0x6f3e20,'isLargeData':!![],'maxFrequency':_0x2d488c===_0x14e85f(0xd8)?parseFloat(_0xb9b268):null,'estimatedSize':this['config'][_0x14e85f(0xce)]+0x1};}return{'type':_0xa69180,'reason':_0x6f3e20,'isLargeData':_0xa69180!==_0x14e85f(0xee),'maxFrequency':null,'estimatedSize':this[_0x14e85f(0xc7)]['largeDataThreshold']+0x1};}[a4_0x2093db(0x10b)](_0xed4dbe,_0xb79077){const _0x553235=a4_0x2093db,_0x2ea7d9=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x5b7f42=['sensor_msgs/msg/PointCloud2','sensor_msgs/msg/Image',_0x553235(0x118),_0x553235(0xd5)];return _0x2ea7d9[_0x553235(0xed)](_0x164d7d=>_0x164d7d[_0x553235(0x101)](_0xed4dbe))||_0x5b7f42['includes'](_0xb79077);}[a4_0x2093db(0xc6)](_0x3bf939,_0x3b9e3c=''){const _0x44adda=a4_0x2093db,_0x4198ee=[_0x44adda(0xdf),_0x44adda(0xd5)];if(_0x4198ee[_0x44adda(0xf7)](_0x3b9e3c))return!_0x3bf939[_0x44adda(0xf7)](_0x44adda(0xc8))&&!_0x3bf939[_0x44adda(0xf7)](_0x44adda(0x104))&&!_0x3bf939[_0x44adda(0xf7)](_0x44adda(0xcf));return(_0x3bf939['includes'](_0x44adda(0xec))||_0x3bf939[_0x44adda(0xf7)](_0x44adda(0xdb)))&&!_0x3bf939[_0x44adda(0xf7)](_0x44adda(0xc8))&&!_0x3bf939[_0x44adda(0xf7)](_0x44adda(0x104))&&!_0x3bf939[_0x44adda(0xf7)](_0x44adda(0xcf));}['estimateTopicSize'](_0x159698,_0x1e730a){const _0x3a3e54=a4_0x2093db,_0x1479d9={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x1479d9[_0x1e730a])return _0x1479d9[_0x1e730a];if(_0x159698['includes'](_0x3a3e54(0x113))||_0x159698['includes']('cloud'))return 0x190*0x400;if(_0x159698[_0x3a3e54(0xf7)]('image_raw'))return 0x12c*0x400;if(_0x159698['includes']('compressed'))return 0x32*0x400;return 0x400;}[a4_0x2093db(0x107)](_0x140d86){const _0x339b58=a4_0x2093db;let _0x7f4cd9=this[_0x339b58(0x10c)][_0x339b58(0x125)](_0x140d86['topic']);if(!_0x7f4cd9){console['log'](_0x339b58(0xfd)+_0x140d86['topic']);let _0x5c986b=_0x339b58(0xe4);if(_0x140d86['topic'][_0x339b58(0xf7)](_0x339b58(0xec))&&_0x140d86[_0x339b58(0x117)][_0x339b58(0xf7)](_0x339b58(0xdb)))_0x5c986b='sensor_msgs/msg/CompressedImage';else{if(_0x140d86['topic'][_0x339b58(0xf7)](_0x339b58(0xec)))_0x5c986b=_0x339b58(0xdf);else{if(_0x140d86[_0x339b58(0x117)]['includes'](_0x339b58(0x113))||_0x140d86['topic'][_0x339b58(0xf7)](_0x339b58(0x127)))_0x5c986b=_0x339b58(0xf6);else _0x140d86[_0x339b58(0x117)][_0x339b58(0xf7)](_0x339b58(0xf8))&&(_0x5c986b=_0x339b58(0x118));}}const _0x38b360={'name':_0x140d86['topic'],'type':_0x5c986b};this[_0x339b58(0x119)](_0x38b360),_0x7f4cd9=this['topicStrategies'][_0x339b58(0x125)](_0x140d86[_0x339b58(0x117)]);}if(!_0x7f4cd9)return{'action':_0x339b58(0x10e),'message':_0x140d86};switch(_0x7f4cd9[_0x339b58(0xfb)]){case _0x339b58(0xd8):return this['shouldThrottle'](_0x140d86[_0x339b58(0x117)],_0x7f4cd9[_0x339b58(0xfe)])?{'action':_0x339b58(0x10e),'message':_0x140d86}:{'action':_0x339b58(0xe2)};case _0x339b58(0xea):return{'action':_0x339b58(0xd7)};case _0x339b58(0xee):default:return{'action':'forward','message':_0x140d86};}}[a4_0x2093db(0xe9)](_0x4180bc,_0x1e885a){const _0x312fba=a4_0x2093db;if(!_0x1e885a)return!![];const _0x5a1f4a=Date[_0x312fba(0xe1)](),_0xc9c8ff=0x3e8/_0x1e885a;!this[_0x312fba(0xfa)][_0x312fba(0x120)](_0x4180bc)&&this[_0x312fba(0xfa)][_0x312fba(0x10a)](_0x4180bc,0x0);const _0xe0188d=this['lastMessageTimes'][_0x312fba(0x125)](_0x4180bc),_0x40c612=_0x5a1f4a-_0xe0188d;if(_0x40c612>=_0xc9c8ff)return this[_0x312fba(0xfa)][_0x312fba(0x10a)](_0x4180bc,_0x5a1f4a),!![];return![];}[a4_0x2093db(0x110)](_0x52b909){const _0x47a7ff=a4_0x2093db;return this[_0x47a7ff(0x10c)][_0x47a7ff(0x125)](_0x52b909);}[a4_0x2093db(0xe3)](){const _0x2be345=a4_0x2093db;return Array[_0x2be345(0x112)](this[_0x2be345(0x10c)][_0x2be345(0xf3)]())['map'](([_0x4bbb35,_0x12b4e0])=>({'topic':_0x4bbb35,..._0x12b4e0}));}['shouldUseWebRTC'](_0x16075e){const _0x1bf04d=a4_0x2093db,_0x2bd2b2=this[_0x1bf04d(0x10c)]['get'](_0x16075e);return _0x2bd2b2?.[_0x1bf04d(0xfb)]===_0x1bf04d(0xc5);}[a4_0x2093db(0xe6)](){const _0x2c2523=a4_0x2093db,_0x40803c={};return this['topicStrategies'][_0x2c2523(0xef)]((_0x20d078,_0x5a60ae)=>{const _0x5ec313=_0x2c2523;!_0x40803c[_0x20d078[_0x5ec313(0xfb)]]&&(_0x40803c[_0x20d078[_0x5ec313(0xfb)]]=0x0),_0x40803c[_0x20d078[_0x5ec313(0xfb)]]++;}),{'totalTopics':this[_0x2c2523(0x10c)][_0x2c2523(0xff)],'strategies':_0x40803c,'largeDataTopics':Array['from'](this[_0x2c2523(0x10c)][_0x2c2523(0xf3)]())[_0x2c2523(0x11c)](([_0xfe5380,_0x5afab1])=>_0x5afab1[_0x2c2523(0xd0)])[_0x2c2523(0xf0)](([_0x1207b5,_0x56541e])=>_0x1207b5)};}}module[a4_0x2093db(0xe0)]=new TopicManager();