function a4_0x53ac(_0xe23d42,_0x256d2f){const _0x36b347=a4_0x1b15();return a4_0x53ac=function(_0x812175,_0x5a44bc){_0x812175=_0x812175-0x115;let _0x1b158d=_0x36b347[_0x812175];return _0x1b158d;},a4_0x53ac(_0xe23d42,_0x256d2f);}const a4_0x20eddc=a4_0x53ac;(function(_0x11d048,_0x52ef66){const _0xed660f=a4_0x53ac,_0x160526=_0x11d048();while(!![]){try{const _0xdd38c9=parseInt(_0xed660f(0x11b))/0x1+-parseInt(_0xed660f(0x159))/0x2+parseInt(_0xed660f(0x158))/0x3+-parseInt(_0xed660f(0x145))/0x4+parseInt(_0xed660f(0x14e))/0x5+-parseInt(_0xed660f(0x127))/0x6*(-parseInt(_0xed660f(0x160))/0x7)+-parseInt(_0xed660f(0x156))/0x8;if(_0xdd38c9===_0x52ef66)break;else _0x160526['push'](_0x160526['shift']());}catch(_0x3b4bad){_0x160526['push'](_0x160526['shift']());}}}(a4_0x1b15,0xa9df4));const a4_0x5a44bc=(function(){let _0x4aed9a=!![];return function(_0x22607a,_0x5773e7){const _0x1af787=_0x4aed9a?function(){if(_0x5773e7){const _0x2b9154=_0x5773e7['apply'](_0x22607a,arguments);return _0x5773e7=null,_0x2b9154;}}:function(){};return _0x4aed9a=![],_0x1af787;};}()),a4_0x812175=a4_0x5a44bc(this,function(){const _0x5f2ea1=a4_0x53ac;return a4_0x812175[_0x5f2ea1(0x12a)]()['search'](_0x5f2ea1(0x15f))[_0x5f2ea1(0x12a)]()[_0x5f2ea1(0x148)](a4_0x812175)['search']('(((.+)+)+)+$');});a4_0x812175();const {execSync}=require(a4_0x20eddc(0x144));function a4_0x1b15(){const _0x38fdc1=['628738SzKmAn','strategiesConfig','[TopicManager]\x20Topic\x20discovery\x20completed','entries','image','test','error','forward','PointCloud2','getStatistics','LaserScan','includes','5604aTxQwf','get','now','toString','largeDataThreshold','webrtc_only','websocket','sensor_msgs/msg/CompressedImage','[TopicManager]\x20Initialised','exports','topic','name','[TopicManager]\x20Error\x20getting\x20topics:','getManagedTopics','laser_scan_throttled','filter','webrtc_skip','unknown','point_cloud_throttled','reason','isCameraTopic','topicStrategies','types','handleMessage','estimateTopicSize','defaultLargeDataStrategy','normal_size','pattern_configured','point','child_process','3950500CnDAIM','isLargeData','lastMessageTimes','constructor','[TopicManager]\x20Found\x20','parseStrategyConfig','discoveryInProgress','points','getTopics','4707850afOriw','forEach','has','scan','large_data_throttled','user_configured','compressed','size','10578800RdbJqp','maxFrequency','2227164PTWwqc','220330VvkTgJ','shouldThrottle','throttle','depth_points','[TopicManager]\x20Loaded\x20configuration:','sensor_msgs/msg/LaserScan','(((.+)+)+)+$','6020qSvojI','webrtc','topicHandling','analyzeTopicStrategy','shouldUseWebRTC','strategy','log','estimatedSize','point_cloud','replace','loadConfig','map','cloud','throttleFrequencies','determineTopicStrategy','config','from','topics','type','\x20topics','split','set','sensor_msgs/msg/Image','strategies','discoverTopics','sensor_msgs/msg/PointCloud2'];a4_0x1b15=function(){return _0x38fdc1;};return a4_0x1b15();}class TopicManager{constructor(){const _0x35ac49=a4_0x20eddc;this['topicStrategies']=new Map(),this[_0x35ac49(0x147)]=new Map(),this[_0x35ac49(0x14b)]=![],this[_0x35ac49(0x16f)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x35ac49(0x12c),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x35ac49(0x166)](_0x35ac49(0x12f));}[a4_0x20eddc(0x16a)](_0x4c611b){const _0x22f189=a4_0x20eddc;if(_0x4c611b[_0x22f189(0x162)]){const _0x4598b4=_0x4c611b[_0x22f189(0x162)];_0x4598b4[_0x22f189(0x12b)]&&(this[_0x22f189(0x16f)][_0x22f189(0x12b)]=_0x4598b4['largeDataThreshold']),_0x4598b4[_0x22f189(0x140)]&&(this[_0x22f189(0x16f)]['defaultLargeDataStrategy']=_0x4598b4[_0x22f189(0x140)]),_0x4598b4[_0x22f189(0x118)]&&(this[_0x22f189(0x16f)][_0x22f189(0x11c)]={..._0x4598b4['strategies']}),_0x4598b4['throttleFrequencies']&&(this[_0x22f189(0x16f)]['throttleFrequencies']={...this[_0x22f189(0x16f)][_0x22f189(0x16d)],..._0x4598b4[_0x22f189(0x16d)]}),console[_0x22f189(0x166)](_0x22f189(0x15d),this['config']);}}async[a4_0x20eddc(0x119)](_0x2fa89e){const _0x28b88c=a4_0x20eddc;if(this[_0x28b88c(0x14b)]||!_0x2fa89e)return;this[_0x28b88c(0x14b)]=!![],console['log']('[TopicManager]\x20Starting\x20topic\x20discovery...');try{await new Promise((_0x4dd809,_0x350b01)=>{const _0x45bdda=_0x28b88c;_0x2fa89e[_0x45bdda(0x14d)](_0x29621a=>{const _0x3c32d4=_0x45bdda,_0x11a319=_0x29621a[_0x3c32d4(0x171)][_0x3c32d4(0x16b)]((_0x210e4f,_0x3e8d83)=>({'name':_0x210e4f,'type':_0x29621a[_0x3c32d4(0x13d)][_0x3e8d83]}));console[_0x3c32d4(0x166)](_0x3c32d4(0x149)+_0x11a319['length']+_0x3c32d4(0x173));for(const _0x40fede of _0x11a319){this['analyzeTopicStrategy'](_0x40fede);}console[_0x3c32d4(0x166)](_0x3c32d4(0x11d)),console['log']('[TopicManager]\x20Strategies:',Array[_0x3c32d4(0x170)](this[_0x3c32d4(0x13c)][_0x3c32d4(0x11e)]())),_0x4dd809();},_0x3e2195=>{const _0x28b5b2=_0x45bdda;console[_0x28b5b2(0x121)](_0x28b5b2(0x133),_0x3e2195),_0x350b01(_0x3e2195);});});}catch(_0x1d0724){console['error']('[TopicManager]\x20Topic\x20discovery\x20failed:',_0x1d0724);}finally{this[_0x28b88c(0x14b)]=![];}}['analyzeTopicStrategy'](_0x2a8fe3){const _0x33a825=a4_0x20eddc,_0x5c356d=this[_0x33a825(0x16e)](_0x2a8fe3);this[_0x33a825(0x13c)][_0x33a825(0x116)](_0x2a8fe3[_0x33a825(0x132)],{'type':_0x2a8fe3[_0x33a825(0x172)],'strategy':_0x5c356d[_0x33a825(0x172)],'reason':_0x5c356d[_0x33a825(0x13a)],'maxFrequency':_0x5c356d[_0x33a825(0x157)],'isLargeData':_0x5c356d[_0x33a825(0x146)],'estimatedSize':_0x5c356d[_0x33a825(0x167)]}),console['log']('[TopicManager]\x20Topic\x20'+_0x2a8fe3[_0x33a825(0x132)]+':\x20'+_0x5c356d['type']+'\x20('+_0x5c356d[_0x33a825(0x13a)]+')');}[a4_0x20eddc(0x16e)](_0x2a281c){const _0x7fd121=a4_0x20eddc;if(this[_0x7fd121(0x16f)][_0x7fd121(0x11c)][_0x2a281c[_0x7fd121(0x132)]]){const _0x3ec744=this[_0x7fd121(0x16f)][_0x7fd121(0x11c)][_0x2a281c['name']];return this[_0x7fd121(0x14a)](_0x3ec744,_0x7fd121(0x153));}for(const [_0x2d5eb5,_0x32c831]of Object[_0x7fd121(0x11e)](this[_0x7fd121(0x16f)]['strategiesConfig'])){if(_0x2a281c[_0x7fd121(0x132)][_0x7fd121(0x126)](_0x2d5eb5[_0x7fd121(0x169)]('/','')))return this[_0x7fd121(0x14a)](_0x32c831,_0x7fd121(0x142));}if(this[_0x7fd121(0x13b)](_0x2a281c[_0x7fd121(0x132)],_0x2a281c[_0x7fd121(0x172)])){const _0x41d68f=this[_0x7fd121(0x13f)](_0x2a281c['name'],_0x2a281c[_0x7fd121(0x172)]);return{'type':_0x7fd121(0x161),'reason':'video_webrtc_streaming','isLargeData':!![],'estimatedSize':_0x41d68f,'maxFrequency':null};}const _0x583dbd=this['isLargeDataTopic'](_0x2a281c[_0x7fd121(0x132)],_0x2a281c[_0x7fd121(0x172)]),_0x551309=this[_0x7fd121(0x13f)](_0x2a281c['name'],_0x2a281c[_0x7fd121(0x172)]);if(_0x583dbd||_0x551309>this[_0x7fd121(0x16f)][_0x7fd121(0x12b)]){let _0x338d1a=this[_0x7fd121(0x16f)][_0x7fd121(0x16d)][_0x2a281c[_0x7fd121(0x172)]]||0xa,_0x4f5f26=_0x7fd121(0x152);if(_0x2a281c[_0x7fd121(0x172)][_0x7fd121(0x126)](_0x7fd121(0x123))||_0x2a281c[_0x7fd121(0x132)][_0x7fd121(0x126)]('points'))_0x338d1a=this[_0x7fd121(0x16f)][_0x7fd121(0x16d)][_0x2a281c[_0x7fd121(0x172)]]||0x5,_0x4f5f26=_0x7fd121(0x139);else{if(_0x2a281c[_0x7fd121(0x172)][_0x7fd121(0x126)](_0x7fd121(0x125))||_0x2a281c[_0x7fd121(0x132)][_0x7fd121(0x126)]('scan'))_0x338d1a=this['config'][_0x7fd121(0x16d)][_0x2a281c[_0x7fd121(0x172)]]||0xf,_0x4f5f26=_0x7fd121(0x135);else _0x2a281c[_0x7fd121(0x172)]['includes']('Image')&&(_0x338d1a=this['config']['throttleFrequencies'][_0x2a281c[_0x7fd121(0x172)]]||0xa,_0x4f5f26='image_throttled');}return{'type':_0x7fd121(0x15b),'reason':_0x4f5f26,'isLargeData':!![],'estimatedSize':_0x551309,'maxFrequency':_0x338d1a};}return{'type':_0x7fd121(0x12d),'reason':_0x7fd121(0x141),'isLargeData':![],'estimatedSize':_0x551309,'maxFrequency':null};}[a4_0x20eddc(0x14a)](_0x12037f,_0x133c0a){const _0x57cadb=a4_0x20eddc;if(_0x12037f[_0x57cadb(0x126)](':')){const [_0x425d82,_0x10a146]=_0x12037f[_0x57cadb(0x115)](':');return{'type':_0x425d82,'reason':_0x133c0a,'isLargeData':!![],'maxFrequency':_0x425d82===_0x57cadb(0x15b)?parseFloat(_0x10a146):null,'estimatedSize':this['config'][_0x57cadb(0x12b)]+0x1};}return{'type':_0x12037f,'reason':_0x133c0a,'isLargeData':_0x12037f!==_0x57cadb(0x12d),'maxFrequency':null,'estimatedSize':this[_0x57cadb(0x16f)][_0x57cadb(0x12b)]+0x1};}['isLargeDataTopic'](_0x371ef5,_0x59983a){const _0x27a712=a4_0x20eddc,_0x9bd6e5=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x3b6978=[_0x27a712(0x11a),_0x27a712(0x117),_0x27a712(0x15e),'sensor_msgs/msg/CompressedImage'];return _0x9bd6e5['some'](_0x2abf52=>_0x2abf52[_0x27a712(0x120)](_0x371ef5))||_0x3b6978[_0x27a712(0x126)](_0x59983a);}[a4_0x20eddc(0x13b)](_0x3a0d1c,_0x4a5612=''){const _0x1bd6ac=a4_0x20eddc,_0x6fc1d0=[_0x1bd6ac(0x117),_0x1bd6ac(0x12e)];if(_0x6fc1d0['includes'](_0x4a5612))return!_0x3a0d1c['includes'](_0x1bd6ac(0x14c))&&!_0x3a0d1c[_0x1bd6ac(0x126)](_0x1bd6ac(0x168))&&!_0x3a0d1c[_0x1bd6ac(0x126)]('depth_points');return(_0x3a0d1c[_0x1bd6ac(0x126)](_0x1bd6ac(0x11f))||_0x3a0d1c[_0x1bd6ac(0x126)](_0x1bd6ac(0x154)))&&!_0x3a0d1c['includes'](_0x1bd6ac(0x14c))&&!_0x3a0d1c['includes'](_0x1bd6ac(0x168))&&!_0x3a0d1c[_0x1bd6ac(0x126)](_0x1bd6ac(0x15c));}[a4_0x20eddc(0x13f)](_0x4cafaf,_0x1c13a6){const _0xb618ea=a4_0x20eddc,_0x3c499b={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x3c499b[_0x1c13a6])return _0x3c499b[_0x1c13a6];if(_0x4cafaf['includes'](_0xb618ea(0x143))||_0x4cafaf[_0xb618ea(0x126)](_0xb618ea(0x16c)))return 0x190*0x400;if(_0x4cafaf['includes']('image_raw'))return 0x12c*0x400;if(_0x4cafaf[_0xb618ea(0x126)]('compressed'))return 0x32*0x400;return 0x400;}[a4_0x20eddc(0x13e)](_0x5977c2){const _0x12df3e=a4_0x20eddc;let _0x22a9b=this[_0x12df3e(0x13c)][_0x12df3e(0x128)](_0x5977c2[_0x12df3e(0x131)]);if(!_0x22a9b){console['log']('[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20'+_0x5977c2[_0x12df3e(0x131)]);let _0x267f9e=_0x12df3e(0x138);if(_0x5977c2[_0x12df3e(0x131)][_0x12df3e(0x126)](_0x12df3e(0x11f))&&_0x5977c2[_0x12df3e(0x131)][_0x12df3e(0x126)](_0x12df3e(0x154)))_0x267f9e=_0x12df3e(0x12e);else{if(_0x5977c2[_0x12df3e(0x131)][_0x12df3e(0x126)]('image'))_0x267f9e=_0x12df3e(0x117);else{if(_0x5977c2[_0x12df3e(0x131)][_0x12df3e(0x126)]('point')||_0x5977c2[_0x12df3e(0x131)][_0x12df3e(0x126)](_0x12df3e(0x16c)))_0x267f9e='sensor_msgs/msg/PointCloud2';else _0x5977c2[_0x12df3e(0x131)][_0x12df3e(0x126)](_0x12df3e(0x151))&&(_0x267f9e=_0x12df3e(0x15e));}}const _0x2e687e={'name':_0x5977c2[_0x12df3e(0x131)],'type':_0x267f9e};this[_0x12df3e(0x163)](_0x2e687e),_0x22a9b=this[_0x12df3e(0x13c)][_0x12df3e(0x128)](_0x5977c2[_0x12df3e(0x131)]);}if(!_0x22a9b)return{'action':'forward','message':_0x5977c2};switch(_0x22a9b[_0x12df3e(0x165)]){case _0x12df3e(0x15b):return this['shouldThrottle'](_0x5977c2[_0x12df3e(0x131)],_0x22a9b['maxFrequency'])?{'action':_0x12df3e(0x122),'message':_0x5977c2}:{'action':'throttle_skip'};case _0x12df3e(0x161):return{'action':_0x12df3e(0x137)};case _0x12df3e(0x12d):default:return{'action':_0x12df3e(0x122),'message':_0x5977c2};}}[a4_0x20eddc(0x15a)](_0x587bea,_0x52d682){const _0x36a6f5=a4_0x20eddc;if(!_0x52d682)return!![];const _0x14b026=Date[_0x36a6f5(0x129)](),_0x4dd560=0x3e8/_0x52d682;!this[_0x36a6f5(0x147)][_0x36a6f5(0x150)](_0x587bea)&&this[_0x36a6f5(0x147)]['set'](_0x587bea,0x0);const _0x3f2d0c=this[_0x36a6f5(0x147)][_0x36a6f5(0x128)](_0x587bea),_0x27e08b=_0x14b026-_0x3f2d0c;if(_0x27e08b>=_0x4dd560)return this[_0x36a6f5(0x147)][_0x36a6f5(0x116)](_0x587bea,_0x14b026),!![];return![];}['getTopicStrategy'](_0x57c6b3){const _0xf2a253=a4_0x20eddc;return this['topicStrategies'][_0xf2a253(0x128)](_0x57c6b3);}[a4_0x20eddc(0x134)](){const _0x3373a8=a4_0x20eddc;return Array['from'](this[_0x3373a8(0x13c)][_0x3373a8(0x11e)]())[_0x3373a8(0x16b)](([_0x3d8254,_0x4687e3])=>({'topic':_0x3d8254,..._0x4687e3}));}[a4_0x20eddc(0x164)](_0x37a6f2){const _0x542db4=a4_0x20eddc,_0x404140=this[_0x542db4(0x13c)][_0x542db4(0x128)](_0x37a6f2);return _0x404140?.[_0x542db4(0x165)]===_0x542db4(0x12c);}[a4_0x20eddc(0x124)](){const _0x1f6fdb=a4_0x20eddc,_0x2e0990={};return this[_0x1f6fdb(0x13c)][_0x1f6fdb(0x14f)]((_0x267692,_0x644408)=>{const _0x25b0ce=_0x1f6fdb;!_0x2e0990[_0x267692[_0x25b0ce(0x165)]]&&(_0x2e0990[_0x267692[_0x25b0ce(0x165)]]=0x0),_0x2e0990[_0x267692[_0x25b0ce(0x165)]]++;}),{'totalTopics':this[_0x1f6fdb(0x13c)][_0x1f6fdb(0x155)],'strategies':_0x2e0990,'largeDataTopics':Array['from'](this[_0x1f6fdb(0x13c)][_0x1f6fdb(0x11e)]())[_0x1f6fdb(0x136)](([_0x2b1385,_0x15fba8])=>_0x15fba8[_0x1f6fdb(0x146)])[_0x1f6fdb(0x16b)](([_0x5a958d,_0x445807])=>_0x5a958d)};}}module[a4_0x20eddc(0x130)]=new TopicManager();