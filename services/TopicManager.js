const a4_0xb3fcca=a4_0x36ac;(function(_0x2faf91,_0x2b173f){const _0xfedeef=a4_0x36ac,_0x59f919=_0x2faf91();while(!![]){try{const _0x3949e4=parseInt(_0xfedeef(0xc2))/0x1+parseInt(_0xfedeef(0x82))/0x2*(parseInt(_0xfedeef(0xa5))/0x3)+-parseInt(_0xfedeef(0xa9))/0x4*(-parseInt(_0xfedeef(0x83))/0x5)+parseInt(_0xfedeef(0xb4))/0x6+parseInt(_0xfedeef(0x7e))/0x7*(parseInt(_0xfedeef(0xb6))/0x8)+-parseInt(_0xfedeef(0xb2))/0x9+parseInt(_0xfedeef(0xb1))/0xa*(-parseInt(_0xfedeef(0xce))/0xb);if(_0x3949e4===_0x2b173f)break;else _0x59f919['push'](_0x59f919['shift']());}catch(_0x364802){_0x59f919['push'](_0x59f919['shift']());}}}(a4_0x71b6,0x1e00c));function a4_0x36ac(_0x285ffa,_0xb3f92e){const _0x478c4e=a4_0x71b6();return a4_0x36ac=function(_0x1fa18f,_0x4e840d){_0x1fa18f=_0x1fa18f-0x79;let _0x71b62=_0x478c4e[_0x1fa18f];return _0x71b62;},a4_0x36ac(_0x285ffa,_0xb3f92e);}const a4_0x4e840d=(function(){let _0x253f97=!![];return function(_0x4bb8d3,_0x18c0bc){const _0x3ba7ae=_0x253f97?function(){const _0x999805=a4_0x36ac;if(_0x18c0bc){const _0x4ce770=_0x18c0bc[_0x999805(0x93)](_0x4bb8d3,arguments);return _0x18c0bc=null,_0x4ce770;}}:function(){};return _0x253f97=![],_0x3ba7ae;};}()),a4_0x1fa18f=a4_0x4e840d(this,function(){const _0x32ce17=a4_0x36ac;return a4_0x1fa18f[_0x32ce17(0xcc)]()[_0x32ce17(0xdb)](_0x32ce17(0xa2))['toString']()[_0x32ce17(0xca)](a4_0x1fa18f)[_0x32ce17(0xdb)]('(((.+)+)+)+$');});a4_0x1fa18f();const {execSync}=require('child_process');class TopicManager{constructor(){const _0x4aa331=a4_0x36ac;this[_0x4aa331(0xc5)]=new Map(),this[_0x4aa331(0x8b)]=new Map(),this[_0x4aa331(0xc0)]=![],this['config']={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x4aa331(0xcb),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x4aa331(0xd6)](_0x4aa331(0xab));}['loadConfig'](_0x124096){const _0x4d6e3c=a4_0x36ac;if(_0x124096['topicHandling']){const _0x1cf3bf=_0x124096[_0x4d6e3c(0xc4)];_0x1cf3bf['largeDataThreshold']&&(this[_0x4d6e3c(0xc6)][_0x4d6e3c(0xdd)]=_0x1cf3bf[_0x4d6e3c(0xdd)]),_0x1cf3bf[_0x4d6e3c(0x8e)]&&(this[_0x4d6e3c(0xc6)][_0x4d6e3c(0x8e)]=_0x1cf3bf[_0x4d6e3c(0x8e)]),_0x1cf3bf[_0x4d6e3c(0x86)]&&(this[_0x4d6e3c(0xc6)][_0x4d6e3c(0x81)]={..._0x1cf3bf[_0x4d6e3c(0x86)]}),_0x1cf3bf[_0x4d6e3c(0xd1)]&&(this[_0x4d6e3c(0xc6)][_0x4d6e3c(0xd1)]={...this[_0x4d6e3c(0xc6)][_0x4d6e3c(0xd1)],..._0x1cf3bf[_0x4d6e3c(0xd1)]}),console[_0x4d6e3c(0xd6)](_0x4d6e3c(0x98),this['config']);}}async['discoverTopics'](_0x445f42){const _0x3449dd=a4_0x36ac;if(this[_0x3449dd(0xc0)]||!_0x445f42)return;this[_0x3449dd(0xc0)]=!![],console[_0x3449dd(0xd6)](_0x3449dd(0x9a));try{await new Promise((_0x40c566,_0x1c7fe4)=>{const _0x915133=_0x3449dd;_0x445f42[_0x915133(0x7a)](_0x2daced=>{const _0x406f30=_0x915133,_0x4dc69a=_0x2daced[_0x406f30(0xb5)]['map']((_0x37efc1,_0x2642d7)=>({'name':_0x37efc1,'type':_0x2daced[_0x406f30(0x7c)][_0x2642d7]}));console[_0x406f30(0xd6)](_0x406f30(0xae)+_0x4dc69a[_0x406f30(0x79)]+_0x406f30(0xd9));for(const _0x5b6bec of _0x4dc69a){this['analyzeTopicStrategy'](_0x5b6bec);}console[_0x406f30(0xd6)](_0x406f30(0xb8)),console[_0x406f30(0xd6)](_0x406f30(0x9e),Array[_0x406f30(0xbd)](this[_0x406f30(0xc5)][_0x406f30(0xd8)]())),_0x40c566();},_0x133eea=>{const _0x3d7fdb=_0x915133;console[_0x3d7fdb(0xaf)](_0x3d7fdb(0xac),_0x133eea),_0x1c7fe4(_0x133eea);});});}catch(_0x50bf26){console['error'](_0x3449dd(0xd7),_0x50bf26);}finally{this[_0x3449dd(0xc0)]=![];}}[a4_0xb3fcca(0xc7)](_0x31e324){const _0x2ca153=a4_0xb3fcca,_0x1b8550=this[_0x2ca153(0xcf)](_0x31e324);this[_0x2ca153(0xc5)][_0x2ca153(0xa7)](_0x31e324[_0x2ca153(0xad)],{'type':_0x31e324['type'],'strategy':_0x1b8550[_0x2ca153(0x88)],'reason':_0x1b8550[_0x2ca153(0xb0)],'maxFrequency':_0x1b8550[_0x2ca153(0xcd)],'isLargeData':_0x1b8550[_0x2ca153(0xd3)],'estimatedSize':_0x1b8550[_0x2ca153(0xa3)]}),console[_0x2ca153(0xd6)]('[TopicManager]\x20Topic\x20'+_0x31e324[_0x2ca153(0xad)]+':\x20'+_0x1b8550[_0x2ca153(0x88)]+'\x20('+_0x1b8550['reason']+')');}['determineTopicStrategy'](_0x59f2c0){const _0x5e8064=a4_0xb3fcca;if(this[_0x5e8064(0xc6)]['strategiesConfig'][_0x59f2c0[_0x5e8064(0xad)]]){const _0x3a2d50=this['config'][_0x5e8064(0x81)][_0x59f2c0[_0x5e8064(0xad)]];return this['parseStrategyConfig'](_0x3a2d50,_0x5e8064(0x9f));}for(const [_0x2f1b28,_0x3cc486]of Object[_0x5e8064(0xd8)](this[_0x5e8064(0xc6)]['strategiesConfig'])){if(_0x59f2c0[_0x5e8064(0xad)]['includes'](_0x2f1b28['replace']('/','')))return this[_0x5e8064(0xda)](_0x3cc486,'pattern_configured');}if(this['isCameraTopic'](_0x59f2c0[_0x5e8064(0xad)],_0x59f2c0[_0x5e8064(0x88)])){const _0x26a80b=this[_0x5e8064(0xa1)](_0x59f2c0['name'],_0x59f2c0[_0x5e8064(0x88)]);return{'type':_0x5e8064(0x7b),'reason':_0x5e8064(0xc3),'isLargeData':!![],'estimatedSize':_0x26a80b,'maxFrequency':null};}const _0x21ed0b=this[_0x5e8064(0x8d)](_0x59f2c0[_0x5e8064(0xad)],_0x59f2c0['type']),_0x18772a=this[_0x5e8064(0xa1)](_0x59f2c0['name'],_0x59f2c0['type']);if(_0x21ed0b||_0x18772a>this[_0x5e8064(0xc6)][_0x5e8064(0xdd)]){let _0x576e0c=this[_0x5e8064(0xc6)][_0x5e8064(0xd1)][_0x59f2c0['type']]||0xa,_0x5a2bfd=_0x5e8064(0xd4);if(_0x59f2c0[_0x5e8064(0x88)][_0x5e8064(0xc1)](_0x5e8064(0xb3))||_0x59f2c0['name'][_0x5e8064(0xc1)]('points'))_0x576e0c=this[_0x5e8064(0xc6)]['throttleFrequencies'][_0x59f2c0['type']]||0x5,_0x5a2bfd='point_cloud_throttled';else{if(_0x59f2c0[_0x5e8064(0x88)][_0x5e8064(0xc1)](_0x5e8064(0xd2))||_0x59f2c0[_0x5e8064(0xad)]['includes'](_0x5e8064(0x91)))_0x576e0c=this[_0x5e8064(0xc6)][_0x5e8064(0xd1)][_0x59f2c0[_0x5e8064(0x88)]]||0xf,_0x5a2bfd=_0x5e8064(0x8c);else _0x59f2c0[_0x5e8064(0x88)][_0x5e8064(0xc1)]('Image')&&(_0x576e0c=this[_0x5e8064(0xc6)][_0x5e8064(0xd1)][_0x59f2c0[_0x5e8064(0x88)]]||0xa,_0x5a2bfd=_0x5e8064(0x9d));}return{'type':_0x5e8064(0x7f),'reason':_0x5a2bfd,'isLargeData':!![],'estimatedSize':_0x18772a,'maxFrequency':_0x576e0c};}return{'type':'websocket','reason':_0x5e8064(0xaa),'isLargeData':![],'estimatedSize':_0x18772a,'maxFrequency':null};}[a4_0xb3fcca(0xda)](_0x428845,_0x30b664){const _0x337321=a4_0xb3fcca;if(_0x428845[_0x337321(0xc1)](':')){const [_0x77dcdf,_0x4f1c2c]=_0x428845[_0x337321(0xbb)](':');return{'type':_0x77dcdf,'reason':_0x30b664,'isLargeData':!![],'maxFrequency':_0x77dcdf===_0x337321(0x7f)?parseFloat(_0x4f1c2c):null,'estimatedSize':this[_0x337321(0xc6)][_0x337321(0xdd)]+0x1};}return{'type':_0x428845,'reason':_0x30b664,'isLargeData':_0x428845!==_0x337321(0xb9),'maxFrequency':null,'estimatedSize':this[_0x337321(0xc6)][_0x337321(0xdd)]+0x1};}[a4_0xb3fcca(0x8d)](_0xb7433f,_0x454a45){const _0x39980e=a4_0xb3fcca,_0x1085e6=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x4df5b9=[_0x39980e(0x97),_0x39980e(0x80),_0x39980e(0xb7),_0x39980e(0x96)];return _0x1085e6[_0x39980e(0xbc)](_0x303bba=>_0x303bba[_0x39980e(0xa6)](_0xb7433f))||_0x4df5b9[_0x39980e(0xc1)](_0x454a45);}[a4_0xb3fcca(0xd5)](_0x3dfe4d,_0x52b12e=''){const _0x37938e=a4_0xb3fcca,_0x12dc0a=[_0x37938e(0x80),_0x37938e(0x96)];if(_0x12dc0a[_0x37938e(0xc1)](_0x52b12e))return!_0x3dfe4d['includes'](_0x37938e(0xbe))&&!_0x3dfe4d[_0x37938e(0xc1)]('point_cloud')&&!_0x3dfe4d[_0x37938e(0xc1)](_0x37938e(0x9c));return(_0x3dfe4d[_0x37938e(0xc1)]('image')||_0x3dfe4d[_0x37938e(0xc1)](_0x37938e(0x92)))&&!_0x3dfe4d['includes'](_0x37938e(0xbe))&&!_0x3dfe4d[_0x37938e(0xc1)](_0x37938e(0x95))&&!_0x3dfe4d[_0x37938e(0xc1)]('depth_points');}[a4_0xb3fcca(0xa1)](_0x431377,_0x565f91){const _0x422afe=a4_0xb3fcca,_0x33cf6f={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x33cf6f[_0x565f91])return _0x33cf6f[_0x565f91];if(_0x431377[_0x422afe(0xc1)](_0x422afe(0x90))||_0x431377[_0x422afe(0xc1)](_0x422afe(0x9b)))return 0x190*0x400;if(_0x431377[_0x422afe(0xc1)](_0x422afe(0x89)))return 0x12c*0x400;if(_0x431377[_0x422afe(0xc1)](_0x422afe(0x92)))return 0x32*0x400;return 0x400;}[a4_0xb3fcca(0x84)](_0x253f46){const _0x1bb522=a4_0xb3fcca;let _0x20d697=this[_0x1bb522(0xc5)][_0x1bb522(0x8a)](_0x253f46[_0x1bb522(0xc9)]);if(!_0x20d697){console[_0x1bb522(0xd6)](_0x1bb522(0xc8)+_0x253f46[_0x1bb522(0xc9)]);let _0xfe2769=_0x1bb522(0x99);if(_0x253f46['topic'][_0x1bb522(0xc1)]('image')&&_0x253f46[_0x1bb522(0xc9)][_0x1bb522(0xc1)](_0x1bb522(0x92)))_0xfe2769='sensor_msgs/msg/CompressedImage';else{if(_0x253f46[_0x1bb522(0xc9)][_0x1bb522(0xc1)](_0x1bb522(0x7d)))_0xfe2769=_0x1bb522(0x80);else{if(_0x253f46[_0x1bb522(0xc9)]['includes'](_0x1bb522(0x90))||_0x253f46[_0x1bb522(0xc9)]['includes'](_0x1bb522(0x9b)))_0xfe2769=_0x1bb522(0x97);else _0x253f46[_0x1bb522(0xc9)][_0x1bb522(0xc1)](_0x1bb522(0x91))&&(_0xfe2769=_0x1bb522(0xb7));}}const _0x40086e={'name':_0x253f46[_0x1bb522(0xc9)],'type':_0xfe2769};this[_0x1bb522(0xc7)](_0x40086e),_0x20d697=this['topicStrategies']['get'](_0x253f46['topic']);}if(!_0x20d697)return{'action':_0x1bb522(0x94),'message':_0x253f46};switch(_0x20d697[_0x1bb522(0xa0)]){case _0x1bb522(0x7f):return this[_0x1bb522(0xba)](_0x253f46['topic'],_0x20d697[_0x1bb522(0xcd)])?{'action':_0x1bb522(0x94),'message':_0x253f46}:{'action':'throttle_skip'};case _0x1bb522(0x7b):return{'action':_0x1bb522(0xa4)};case _0x1bb522(0xb9):default:return{'action':_0x1bb522(0x94),'message':_0x253f46};}}[a4_0xb3fcca(0xba)](_0x244a91,_0x272548){const _0x151afe=a4_0xb3fcca;if(!_0x272548)return!![];const _0x290172=Date[_0x151afe(0xde)](),_0x32903c=0x3e8/_0x272548;!this[_0x151afe(0x8b)][_0x151afe(0x85)](_0x244a91)&&this[_0x151afe(0x8b)][_0x151afe(0xa7)](_0x244a91,0x0);const _0x4d30ed=this[_0x151afe(0x8b)][_0x151afe(0x8a)](_0x244a91),_0xc3f30e=_0x290172-_0x4d30ed;if(_0xc3f30e>=_0x32903c)return this['lastMessageTimes'][_0x151afe(0xa7)](_0x244a91,_0x290172),!![];return![];}[a4_0xb3fcca(0xa8)](_0x20abc6){const _0x1c8622=a4_0xb3fcca;return this[_0x1c8622(0xc5)][_0x1c8622(0x8a)](_0x20abc6);}['getManagedTopics'](){const _0x44a7d6=a4_0xb3fcca;return Array[_0x44a7d6(0xbd)](this[_0x44a7d6(0xc5)][_0x44a7d6(0xd8)]())['map'](([_0x357e54,_0x54859c])=>({'topic':_0x357e54,..._0x54859c}));}['shouldUseWebRTC'](_0x3e2201){const _0x47f285=a4_0xb3fcca,_0x5d0b7f=this['topicStrategies'][_0x47f285(0x8a)](_0x3e2201);return _0x5d0b7f?.[_0x47f285(0xa0)]===_0x47f285(0xcb);}[a4_0xb3fcca(0xd0)](){const _0x308ccf=a4_0xb3fcca,_0x2b4bbb={};return this[_0x308ccf(0xc5)][_0x308ccf(0xbf)]((_0x50bc41,_0x4199c6)=>{const _0x4c5a42=_0x308ccf;!_0x2b4bbb[_0x50bc41['strategy']]&&(_0x2b4bbb[_0x50bc41[_0x4c5a42(0xa0)]]=0x0),_0x2b4bbb[_0x50bc41['strategy']]++;}),{'totalTopics':this[_0x308ccf(0xc5)][_0x308ccf(0xdc)],'strategies':_0x2b4bbb,'largeDataTopics':Array[_0x308ccf(0xbd)](this[_0x308ccf(0xc5)][_0x308ccf(0xd8)]())[_0x308ccf(0x8f)](([_0x1f4984,_0x237c3f])=>_0x237c3f['isLargeData'])[_0x308ccf(0x87)](([_0x5b2a8f,_0x147d44])=>_0x5b2a8f)};}}function a4_0x71b6(){const _0x24d2e0=['normal_size','[TopicManager]\x20Initialised','[TopicManager]\x20Error\x20getting\x20topics:','name','[TopicManager]\x20Found\x20','error','reason','10iwOPGI','43011zAttLW','PointCloud2','552318jdaIRG','topics','8sUuNxE','sensor_msgs/msg/LaserScan','[TopicManager]\x20Topic\x20discovery\x20completed','websocket','shouldThrottle','split','some','from','points','forEach','discoveryInProgress','includes','46459Kwklnh','video_webrtc_streaming','topicHandling','topicStrategies','config','analyzeTopicStrategy','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','topic','constructor','webrtc_only','toString','maxFrequency','2616812iwpcvO','determineTopicStrategy','getStatistics','throttleFrequencies','LaserScan','isLargeData','large_data_throttled','isCameraTopic','log','[TopicManager]\x20Topic\x20discovery\x20failed:','entries','\x20topics','parseStrategyConfig','search','size','largeDataThreshold','now','length','getTopics','webrtc','types','image','773017vwsXOa','throttle','sensor_msgs/msg/Image','strategiesConfig','20rqQEwx','20515cuuuin','handleMessage','has','strategies','map','type','image_raw','get','lastMessageTimes','laser_scan_throttled','isLargeDataTopic','defaultLargeDataStrategy','filter','point','scan','compressed','apply','forward','point_cloud','sensor_msgs/msg/CompressedImage','sensor_msgs/msg/PointCloud2','[TopicManager]\x20Loaded\x20configuration:','unknown','[TopicManager]\x20Starting\x20topic\x20discovery...','cloud','depth_points','image_throttled','[TopicManager]\x20Strategies:','user_configured','strategy','estimateTopicSize','(((.+)+)+)+$','estimatedSize','webrtc_skip','22677rVTeCc','test','set','getTopicStrategy','40chYHxv'];a4_0x71b6=function(){return _0x24d2e0;};return a4_0x71b6();}module['exports']=new TopicManager();