const a4_0x1b3f13=a4_0x4645;function a4_0x4645(_0x236023,_0x5dd2d5){const _0x1a17bc=a4_0xde1f();return a4_0x4645=function(_0x1352b4,_0x183242){_0x1352b4=_0x1352b4-0x172;let _0xde1fee=_0x1a17bc[_0x1352b4];return _0xde1fee;},a4_0x4645(_0x236023,_0x5dd2d5);}(function(_0x15f1d0,_0x1d5e92){const _0x4fb56e=a4_0x4645,_0x6da344=_0x15f1d0();while(!![]){try{const _0x141d4b=-parseInt(_0x4fb56e(0x1a7))/0x1+-parseInt(_0x4fb56e(0x186))/0x2+parseInt(_0x4fb56e(0x197))/0x3*(-parseInt(_0x4fb56e(0x1b1))/0x4)+-parseInt(_0x4fb56e(0x1c6))/0x5*(parseInt(_0x4fb56e(0x17c))/0x6)+parseInt(_0x4fb56e(0x1c1))/0x7*(-parseInt(_0x4fb56e(0x1a6))/0x8)+-parseInt(_0x4fb56e(0x17f))/0x9+parseInt(_0x4fb56e(0x1c0))/0xa*(parseInt(_0x4fb56e(0x1bd))/0xb);if(_0x141d4b===_0x1d5e92)break;else _0x6da344['push'](_0x6da344['shift']());}catch(_0x3587c2){_0x6da344['push'](_0x6da344['shift']());}}}(a4_0xde1f,0xcd003));function a4_0xde1f(){const _0x9ee08f=['image_throttled','test','analyzeTopicStrategy','normal_size','websocket','entries','from','184GpGkSR','sensor_msgs/msg/PointCloud2','apply','large_data_throttled','discoverTopics','replace','LaserScan','forward','webrtc','getStatistics','sensor_msgs/msg/CompressedImage','video_webrtc_streaming','66dTePgf','point_cloud','estimateTopicSize','5360700ExZSwx','7RoNuHy','cloud','strategiesConfig','type','config','305ExCwEW','PointCloud2','child_process','sensor_msgs/msg/LaserScan','defaultLargeDataStrategy','image','parseStrategyConfig','depth_points','discoveryInProgress','topics','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','compressed','loadConfig','strategy','webrtc_only','[TopicManager]\x20Loaded\x20configuration:','isLargeDataTopic','getTopicStrategy','Image','map','toString','[TopicManager]\x20Strategies:','constructor','get','[TopicManager]\x20Initialised','9354DRULuf','log','[TopicManager]\x20Found\x20','14585940VMyhmD','estimatedSize','sensor_msgs/msg/Image','exports','[TopicManager]\x20Starting\x20topic\x20discovery...','largeDataThreshold','maxFrequency','376824MLidFK','scan','throttleFrequencies','types','name','some','reason','isCameraTopic','getManagedTopics','unknown','determineTopicStrategy','handleMessage','laser_scan_throttled','points','lastMessageTimes','topicStrategies','error','6507DVcXvp','set','split','strategies','isLargeData','size','includes','search','[TopicManager]\x20Topic\x20discovery\x20failed:','[TopicManager]\x20Error\x20getting\x20topics:','forEach','point','webrtc_skip','throttle','now','2317304aXdoqm','83129OnHxix','topic','[TopicManager]\x20Topic\x20discovery\x20completed'];a4_0xde1f=function(){return _0x9ee08f;};return a4_0xde1f();}const a4_0x183242=(function(){let _0x4a69ed=!![];return function(_0x1a8b9b,_0x487def){const _0x5cef0e=_0x4a69ed?function(){const _0x282a3c=a4_0x4645;if(_0x487def){const _0x3acea2=_0x487def[_0x282a3c(0x1b3)](_0x1a8b9b,arguments);return _0x487def=null,_0x3acea2;}}:function(){};return _0x4a69ed=![],_0x5cef0e;};}()),a4_0x1352b4=a4_0x183242(this,function(){const _0x41be6c=a4_0x4645;return a4_0x1352b4[_0x41be6c(0x177)]()[_0x41be6c(0x19e)]('(((.+)+)+)+$')[_0x41be6c(0x177)]()[_0x41be6c(0x179)](a4_0x1352b4)[_0x41be6c(0x19e)]('(((.+)+)+)+$');});a4_0x1352b4();const {execSync}=require(a4_0x1b3f13(0x1c8));class TopicManager{constructor(){const _0xd95277=a4_0x1b3f13;this[_0xd95277(0x195)]=new Map(),this[_0xd95277(0x194)]=new Map(),this[_0xd95277(0x1ce)]=![],this[_0xd95277(0x1c5)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0xd95277(0x1d4),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0xd95277(0x17d)](_0xd95277(0x17b));}[a4_0x1b3f13(0x1d2)](_0x112775){const _0x2b6a6b=a4_0x1b3f13;if(_0x112775['topicHandling']){const _0x2d9008=_0x112775['topicHandling'];_0x2d9008['largeDataThreshold']&&(this['config'][_0x2b6a6b(0x184)]=_0x2d9008[_0x2b6a6b(0x184)]),_0x2d9008[_0x2b6a6b(0x1ca)]&&(this[_0x2b6a6b(0x1c5)][_0x2b6a6b(0x1ca)]=_0x2d9008[_0x2b6a6b(0x1ca)]),_0x2d9008[_0x2b6a6b(0x19a)]&&(this[_0x2b6a6b(0x1c5)][_0x2b6a6b(0x1c3)]={..._0x2d9008['strategies']}),_0x2d9008[_0x2b6a6b(0x188)]&&(this[_0x2b6a6b(0x1c5)][_0x2b6a6b(0x188)]={...this[_0x2b6a6b(0x1c5)][_0x2b6a6b(0x188)],..._0x2d9008[_0x2b6a6b(0x188)]}),console[_0x2b6a6b(0x17d)](_0x2b6a6b(0x172),this[_0x2b6a6b(0x1c5)]);}}async[a4_0x1b3f13(0x1b5)](_0x8b010f){const _0x1f700f=a4_0x1b3f13;if(this[_0x1f700f(0x1ce)]||!_0x8b010f)return;this['discoveryInProgress']=!![],console[_0x1f700f(0x17d)](_0x1f700f(0x183));try{await new Promise((_0x17f201,_0x36d6dc)=>{_0x8b010f['getTopics'](_0x3e318c=>{const _0x5ad217=a4_0x4645,_0x447a92=_0x3e318c[_0x5ad217(0x1cf)][_0x5ad217(0x176)]((_0x2043af,_0x5d57a1)=>({'name':_0x2043af,'type':_0x3e318c[_0x5ad217(0x189)][_0x5d57a1]}));console[_0x5ad217(0x17d)](_0x5ad217(0x17e)+_0x447a92['length']+'\x20topics');for(const _0x3ce058 of _0x447a92){this['analyzeTopicStrategy'](_0x3ce058);}console[_0x5ad217(0x17d)](_0x5ad217(0x1a9)),console[_0x5ad217(0x17d)](_0x5ad217(0x178),Array[_0x5ad217(0x1b0)](this['topicStrategies'][_0x5ad217(0x1af)]())),_0x17f201();},_0x2c0ba9=>{const _0x25d280=a4_0x4645;console['error'](_0x25d280(0x1a0),_0x2c0ba9),_0x36d6dc(_0x2c0ba9);});});}catch(_0x31b6ce){console[_0x1f700f(0x196)](_0x1f700f(0x19f),_0x31b6ce);}finally{this[_0x1f700f(0x1ce)]=![];}}[a4_0x1b3f13(0x1ac)](_0x26a51d){const _0x4355fc=a4_0x1b3f13,_0x2c12b7=this[_0x4355fc(0x190)](_0x26a51d);this[_0x4355fc(0x195)][_0x4355fc(0x198)](_0x26a51d[_0x4355fc(0x18a)],{'type':_0x26a51d['type'],'strategy':_0x2c12b7[_0x4355fc(0x1c4)],'reason':_0x2c12b7['reason'],'maxFrequency':_0x2c12b7[_0x4355fc(0x185)],'isLargeData':_0x2c12b7[_0x4355fc(0x19b)],'estimatedSize':_0x2c12b7[_0x4355fc(0x180)]}),console['log']('[TopicManager]\x20Topic\x20'+_0x26a51d[_0x4355fc(0x18a)]+':\x20'+_0x2c12b7['type']+'\x20('+_0x2c12b7[_0x4355fc(0x18c)]+')');}['determineTopicStrategy'](_0x5e74b2){const _0x37b5dc=a4_0x1b3f13;if(this[_0x37b5dc(0x1c5)][_0x37b5dc(0x1c3)][_0x5e74b2['name']]){const _0x3f8330=this[_0x37b5dc(0x1c5)][_0x37b5dc(0x1c3)][_0x5e74b2[_0x37b5dc(0x18a)]];return this[_0x37b5dc(0x1cc)](_0x3f8330,'user_configured');}for(const [_0x577334,_0x117b65]of Object[_0x37b5dc(0x1af)](this[_0x37b5dc(0x1c5)][_0x37b5dc(0x1c3)])){if(_0x5e74b2[_0x37b5dc(0x18a)][_0x37b5dc(0x19d)](_0x577334[_0x37b5dc(0x1b6)]('/','')))return this[_0x37b5dc(0x1cc)](_0x117b65,'pattern_configured');}if(this[_0x37b5dc(0x18d)](_0x5e74b2[_0x37b5dc(0x18a)],_0x5e74b2[_0x37b5dc(0x1c4)])){const _0x46f2ec=this[_0x37b5dc(0x1bf)](_0x5e74b2['name'],_0x5e74b2[_0x37b5dc(0x1c4)]);return{'type':_0x37b5dc(0x1b9),'reason':_0x37b5dc(0x1bc),'isLargeData':!![],'estimatedSize':_0x46f2ec,'maxFrequency':null};}const _0x508f13=this[_0x37b5dc(0x173)](_0x5e74b2[_0x37b5dc(0x18a)],_0x5e74b2[_0x37b5dc(0x1c4)]),_0x10413e=this['estimateTopicSize'](_0x5e74b2[_0x37b5dc(0x18a)],_0x5e74b2[_0x37b5dc(0x1c4)]);if(_0x508f13||_0x10413e>this[_0x37b5dc(0x1c5)][_0x37b5dc(0x184)]){let _0x2e48c3=this[_0x37b5dc(0x1c5)][_0x37b5dc(0x188)][_0x5e74b2[_0x37b5dc(0x1c4)]]||0xa,_0x4ba874=_0x37b5dc(0x1b4);if(_0x5e74b2[_0x37b5dc(0x1c4)][_0x37b5dc(0x19d)](_0x37b5dc(0x1c7))||_0x5e74b2[_0x37b5dc(0x18a)][_0x37b5dc(0x19d)](_0x37b5dc(0x193)))_0x2e48c3=this[_0x37b5dc(0x1c5)][_0x37b5dc(0x188)][_0x5e74b2[_0x37b5dc(0x1c4)]]||0x5,_0x4ba874='point_cloud_throttled';else{if(_0x5e74b2['type'][_0x37b5dc(0x19d)](_0x37b5dc(0x1b7))||_0x5e74b2[_0x37b5dc(0x18a)]['includes'](_0x37b5dc(0x187)))_0x2e48c3=this[_0x37b5dc(0x1c5)]['throttleFrequencies'][_0x5e74b2[_0x37b5dc(0x1c4)]]||0xf,_0x4ba874=_0x37b5dc(0x192);else _0x5e74b2[_0x37b5dc(0x1c4)][_0x37b5dc(0x19d)](_0x37b5dc(0x175))&&(_0x2e48c3=this[_0x37b5dc(0x1c5)]['throttleFrequencies'][_0x5e74b2['type']]||0xa,_0x4ba874=_0x37b5dc(0x1aa));}return{'type':_0x37b5dc(0x1a4),'reason':_0x4ba874,'isLargeData':!![],'estimatedSize':_0x10413e,'maxFrequency':_0x2e48c3};}return{'type':_0x37b5dc(0x1ae),'reason':_0x37b5dc(0x1ad),'isLargeData':![],'estimatedSize':_0x10413e,'maxFrequency':null};}[a4_0x1b3f13(0x1cc)](_0x169dd5,_0x4fb7f5){const _0x2222bf=a4_0x1b3f13;if(_0x169dd5['includes'](':')){const [_0x47c1dc,_0x29bd32]=_0x169dd5[_0x2222bf(0x199)](':');return{'type':_0x47c1dc,'reason':_0x4fb7f5,'isLargeData':!![],'maxFrequency':_0x47c1dc===_0x2222bf(0x1a4)?parseFloat(_0x29bd32):null,'estimatedSize':this[_0x2222bf(0x1c5)][_0x2222bf(0x184)]+0x1};}return{'type':_0x169dd5,'reason':_0x4fb7f5,'isLargeData':_0x169dd5!==_0x2222bf(0x1ae),'maxFrequency':null,'estimatedSize':this[_0x2222bf(0x1c5)][_0x2222bf(0x184)]+0x1};}[a4_0x1b3f13(0x173)](_0xc3b8dc,_0x20ecfc){const _0x1340c1=a4_0x1b3f13,_0x446e18=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0xb1cea1=[_0x1340c1(0x1b2),'sensor_msgs/msg/Image',_0x1340c1(0x1c9),_0x1340c1(0x1bb)];return _0x446e18[_0x1340c1(0x18b)](_0x2a97bc=>_0x2a97bc[_0x1340c1(0x1ab)](_0xc3b8dc))||_0xb1cea1[_0x1340c1(0x19d)](_0x20ecfc);}['isCameraTopic'](_0x15aa76,_0x59ea62=''){const _0x47e086=a4_0x1b3f13,_0x109c27=[_0x47e086(0x181),'sensor_msgs/msg/CompressedImage'];if(_0x109c27['includes'](_0x59ea62))return!_0x15aa76['includes']('points')&&!_0x15aa76[_0x47e086(0x19d)](_0x47e086(0x1be))&&!_0x15aa76[_0x47e086(0x19d)](_0x47e086(0x1cd));return(_0x15aa76[_0x47e086(0x19d)]('image')||_0x15aa76['includes'](_0x47e086(0x1d1)))&&!_0x15aa76[_0x47e086(0x19d)](_0x47e086(0x193))&&!_0x15aa76[_0x47e086(0x19d)](_0x47e086(0x1be))&&!_0x15aa76[_0x47e086(0x19d)](_0x47e086(0x1cd));}[a4_0x1b3f13(0x1bf)](_0x395742,_0x105a28){const _0x5a0b30=a4_0x1b3f13,_0x1f4293={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x1f4293[_0x105a28])return _0x1f4293[_0x105a28];if(_0x395742['includes'](_0x5a0b30(0x1a2))||_0x395742[_0x5a0b30(0x19d)](_0x5a0b30(0x1c2)))return 0x190*0x400;if(_0x395742[_0x5a0b30(0x19d)]('image_raw'))return 0x12c*0x400;if(_0x395742[_0x5a0b30(0x19d)]('compressed'))return 0x32*0x400;return 0x400;}[a4_0x1b3f13(0x191)](_0xccad4d){const _0xc22718=a4_0x1b3f13;let _0x5a4919=this[_0xc22718(0x195)][_0xc22718(0x17a)](_0xccad4d[_0xc22718(0x1a8)]);if(!_0x5a4919){console['log'](_0xc22718(0x1d0)+_0xccad4d['topic']);let _0x36f397=_0xc22718(0x18f);if(_0xccad4d[_0xc22718(0x1a8)][_0xc22718(0x19d)](_0xc22718(0x1cb))&&_0xccad4d['topic'][_0xc22718(0x19d)](_0xc22718(0x1d1)))_0x36f397='sensor_msgs/msg/CompressedImage';else{if(_0xccad4d[_0xc22718(0x1a8)][_0xc22718(0x19d)](_0xc22718(0x1cb)))_0x36f397=_0xc22718(0x181);else{if(_0xccad4d['topic'][_0xc22718(0x19d)](_0xc22718(0x1a2))||_0xccad4d['topic']['includes']('cloud'))_0x36f397=_0xc22718(0x1b2);else _0xccad4d[_0xc22718(0x1a8)][_0xc22718(0x19d)]('scan')&&(_0x36f397='sensor_msgs/msg/LaserScan');}}const _0x2428e3={'name':_0xccad4d[_0xc22718(0x1a8)],'type':_0x36f397};this['analyzeTopicStrategy'](_0x2428e3),_0x5a4919=this[_0xc22718(0x195)]['get'](_0xccad4d[_0xc22718(0x1a8)]);}if(!_0x5a4919)return{'action':_0xc22718(0x1b8),'message':_0xccad4d};switch(_0x5a4919[_0xc22718(0x1d3)]){case _0xc22718(0x1a4):return this['shouldThrottle'](_0xccad4d['topic'],_0x5a4919['maxFrequency'])?{'action':_0xc22718(0x1b8),'message':_0xccad4d}:{'action':'throttle_skip'};case _0xc22718(0x1b9):return{'action':_0xc22718(0x1a3)};case _0xc22718(0x1ae):default:return{'action':_0xc22718(0x1b8),'message':_0xccad4d};}}['shouldThrottle'](_0x3c27d0,_0x422eed){const _0x3bab67=a4_0x1b3f13;if(!_0x422eed)return!![];const _0x2e29d6=Date[_0x3bab67(0x1a5)](),_0x53849a=0x3e8/_0x422eed;!this[_0x3bab67(0x194)]['has'](_0x3c27d0)&&this[_0x3bab67(0x194)][_0x3bab67(0x198)](_0x3c27d0,0x0);const _0x2eb045=this[_0x3bab67(0x194)][_0x3bab67(0x17a)](_0x3c27d0),_0x1888ea=_0x2e29d6-_0x2eb045;if(_0x1888ea>=_0x53849a)return this[_0x3bab67(0x194)][_0x3bab67(0x198)](_0x3c27d0,_0x2e29d6),!![];return![];}[a4_0x1b3f13(0x174)](_0x151733){const _0xe05f84=a4_0x1b3f13;return this[_0xe05f84(0x195)][_0xe05f84(0x17a)](_0x151733);}[a4_0x1b3f13(0x18e)](){const _0x4444cb=a4_0x1b3f13;return Array[_0x4444cb(0x1b0)](this[_0x4444cb(0x195)]['entries']())[_0x4444cb(0x176)](([_0x3e424d,_0xc5ac4d])=>({'topic':_0x3e424d,..._0xc5ac4d}));}['shouldUseWebRTC'](_0x582a77){const _0x389d26=a4_0x1b3f13,_0x42dbdf=this['topicStrategies'][_0x389d26(0x17a)](_0x582a77);return _0x42dbdf?.[_0x389d26(0x1d3)]===_0x389d26(0x1d4);}[a4_0x1b3f13(0x1ba)](){const _0x18006a=a4_0x1b3f13,_0x456cc0={};return this[_0x18006a(0x195)][_0x18006a(0x1a1)]((_0x54791e,_0x5e4098)=>{const _0x32ee39=_0x18006a;!_0x456cc0[_0x54791e[_0x32ee39(0x1d3)]]&&(_0x456cc0[_0x54791e[_0x32ee39(0x1d3)]]=0x0),_0x456cc0[_0x54791e['strategy']]++;}),{'totalTopics':this[_0x18006a(0x195)][_0x18006a(0x19c)],'strategies':_0x456cc0,'largeDataTopics':Array[_0x18006a(0x1b0)](this['topicStrategies'][_0x18006a(0x1af)]())['filter'](([_0x4d84c7,_0x2db19f])=>_0x2db19f['isLargeData'])[_0x18006a(0x176)](([_0x5208e5,_0xafd42d])=>_0x5208e5)};}}module[a4_0x1b3f13(0x182)]=new TopicManager();