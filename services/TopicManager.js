const a4_0x16f656=a4_0x1f65;(function(_0x5df1ca,_0x2d3be9){const _0x287ba8=a4_0x1f65,_0x1f1008=_0x5df1ca();while(!![]){try{const _0x408dd6=parseInt(_0x287ba8(0x1b2))/0x1+-parseInt(_0x287ba8(0x1c4))/0x2+parseInt(_0x287ba8(0x1a7))/0x3+-parseInt(_0x287ba8(0x1a1))/0x4*(parseInt(_0x287ba8(0x1cd))/0x5)+parseInt(_0x287ba8(0x1de))/0x6+parseInt(_0x287ba8(0x194))/0x7*(parseInt(_0x287ba8(0x1e0))/0x8)+-parseInt(_0x287ba8(0x1c6))/0x9;if(_0x408dd6===_0x2d3be9)break;else _0x1f1008['push'](_0x1f1008['shift']());}catch(_0xbf347b){_0x1f1008['push'](_0x1f1008['shift']());}}}(a4_0x1ade,0x665c9));const a4_0x24154d=(function(){let _0x562db6=!![];return function(_0x27ef80,_0x455620){const _0x4b1293=_0x562db6?function(){const _0x140ecf=a4_0x1f65;if(_0x455620){const _0xeb321c=_0x455620[_0x140ecf(0x193)](_0x27ef80,arguments);return _0x455620=null,_0xeb321c;}}:function(){};return _0x562db6=![],_0x4b1293;};}()),a4_0x366afe=a4_0x24154d(this,function(){const _0x3201e8=a4_0x1f65;return a4_0x366afe[_0x3201e8(0x196)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](a4_0x366afe)[_0x3201e8(0x1ef)](_0x3201e8(0x1bc));});a4_0x366afe();function a4_0x1f65(_0xbdd1bf,_0xbe338b){const _0x1e7f11=a4_0x1ade();return a4_0x1f65=function(_0x366afe,_0x24154d){_0x366afe=_0x366afe-0x190;let _0x1ade5f=_0x1e7f11[_0x366afe];return _0x1ade5f;},a4_0x1f65(_0xbdd1bf,_0xbe338b);}const {execSync}=require(a4_0x16f656(0x1a2));class TopicManager{constructor(){const _0x88a4fa=a4_0x16f656;this[_0x88a4fa(0x1b0)]=new Map(),this[_0x88a4fa(0x1c0)]=new Map(),this[_0x88a4fa(0x19d)]=![],this[_0x88a4fa(0x1e6)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x88a4fa(0x1d8),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x88a4fa(0x1ab)]('[TopicManager]\x20Initialised');}[a4_0x16f656(0x19b)](_0x12a56a){const _0x1c82c6=a4_0x16f656;if(_0x12a56a[_0x1c82c6(0x1e9)]){const _0x1b9b00=_0x12a56a[_0x1c82c6(0x1e9)];_0x1b9b00['largeDataThreshold']&&(this[_0x1c82c6(0x1e6)]['largeDataThreshold']=_0x1b9b00[_0x1c82c6(0x1c2)]),_0x1b9b00['defaultLargeDataStrategy']&&(this[_0x1c82c6(0x1e6)][_0x1c82c6(0x1c1)]=_0x1b9b00[_0x1c82c6(0x1c1)]),_0x1b9b00[_0x1c82c6(0x1a8)]&&(this[_0x1c82c6(0x1e6)][_0x1c82c6(0x1bb)]={..._0x1b9b00[_0x1c82c6(0x1a8)]}),_0x1b9b00['throttleFrequencies']&&(this['config'][_0x1c82c6(0x1ad)]={...this[_0x1c82c6(0x1e6)]['throttleFrequencies'],..._0x1b9b00[_0x1c82c6(0x1ad)]}),console[_0x1c82c6(0x1ab)](_0x1c82c6(0x1db),this[_0x1c82c6(0x1e6)]);}}async[a4_0x16f656(0x1e5)](_0x46f31c){const _0x14e7a2=a4_0x16f656;if(this['discoveryInProgress']||!_0x46f31c)return;this[_0x14e7a2(0x19d)]=!![],console['log']('[TopicManager]\x20Starting\x20topic\x20discovery...');try{await new Promise((_0x1fc2c9,_0x1b5bf1)=>{_0x46f31c['getTopics'](_0x3aa010=>{const _0x424b7f=a4_0x1f65,_0x14e3af=_0x3aa010[_0x424b7f(0x1b8)][_0x424b7f(0x1d3)]((_0x4dae95,_0x1e7076)=>({'name':_0x4dae95,'type':_0x3aa010[_0x424b7f(0x1a3)][_0x1e7076]}));console[_0x424b7f(0x1ab)](_0x424b7f(0x1a4)+_0x14e3af[_0x424b7f(0x1bf)]+_0x424b7f(0x1d1));for(const _0x4e32f9 of _0x14e3af){this[_0x424b7f(0x197)](_0x4e32f9);}console[_0x424b7f(0x1ab)]('[TopicManager]\x20Topic\x20discovery\x20completed'),console[_0x424b7f(0x1ab)]('[TopicManager]\x20Strategies:',Array[_0x424b7f(0x1cc)](this[_0x424b7f(0x1b0)][_0x424b7f(0x19a)]())),_0x1fc2c9();},_0x3fc43e=>{const _0x4c3f80=a4_0x1f65;console['error'](_0x4c3f80(0x1c8),_0x3fc43e),_0x1b5bf1(_0x3fc43e);});});}catch(_0x5683c0){console[_0x14e7a2(0x1d4)](_0x14e7a2(0x1ca),_0x5683c0);}finally{this[_0x14e7a2(0x19d)]=![];}}[a4_0x16f656(0x197)](_0x12b544){const _0x540d9d=a4_0x16f656,_0x450337=this[_0x540d9d(0x192)](_0x12b544);this[_0x540d9d(0x1b0)][_0x540d9d(0x1bd)](_0x12b544[_0x540d9d(0x1e3)],{'type':_0x12b544['type'],'strategy':_0x450337[_0x540d9d(0x1ae)],'reason':_0x450337[_0x540d9d(0x1e8)],'maxFrequency':_0x450337[_0x540d9d(0x1ec)],'isLargeData':_0x450337[_0x540d9d(0x1a5)],'estimatedSize':_0x450337[_0x540d9d(0x1af)]}),console[_0x540d9d(0x1ab)](_0x540d9d(0x1d5)+_0x12b544[_0x540d9d(0x1e3)]+':\x20'+_0x450337[_0x540d9d(0x1ae)]+'\x20('+_0x450337[_0x540d9d(0x1e8)]+')');}[a4_0x16f656(0x192)](_0x56ddd0){const _0x472dad=a4_0x16f656;if(this['config']['strategiesConfig'][_0x56ddd0[_0x472dad(0x1e3)]]){const _0xda5153=this[_0x472dad(0x1e6)][_0x472dad(0x1bb)][_0x56ddd0['name']];return this['parseStrategyConfig'](_0xda5153,'user_configured');}for(const [_0x31a212,_0x42eaea]of Object[_0x472dad(0x19a)](this['config'][_0x472dad(0x1bb)])){if(_0x56ddd0['name'][_0x472dad(0x1b4)](_0x31a212[_0x472dad(0x1b6)]('/','')))return this[_0x472dad(0x1c3)](_0x42eaea,'pattern_configured');}if(this['isCameraTopic'](_0x56ddd0[_0x472dad(0x1e3)],_0x56ddd0[_0x472dad(0x1ae)])){const _0x136df2=this[_0x472dad(0x1b7)](_0x56ddd0[_0x472dad(0x1e3)],_0x56ddd0[_0x472dad(0x1ae)]);return{'type':'webrtc','reason':_0x472dad(0x195),'isLargeData':!![],'estimatedSize':_0x136df2,'maxFrequency':null};}const _0x4fd62f=this[_0x472dad(0x1a6)](_0x56ddd0[_0x472dad(0x1e3)],_0x56ddd0[_0x472dad(0x1ae)]),_0x5c6f90=this['estimateTopicSize'](_0x56ddd0[_0x472dad(0x1e3)],_0x56ddd0['type']);if(_0x4fd62f||_0x5c6f90>this[_0x472dad(0x1e6)]['largeDataThreshold']){let _0x5aea4e=this[_0x472dad(0x1e6)][_0x472dad(0x1ad)][_0x56ddd0[_0x472dad(0x1ae)]]||0xa,_0x17c67d=_0x472dad(0x1a9);if(_0x56ddd0['type'][_0x472dad(0x1b4)](_0x472dad(0x1b3))||_0x56ddd0[_0x472dad(0x1e3)][_0x472dad(0x1b4)](_0x472dad(0x1dd)))_0x5aea4e=this['config'][_0x472dad(0x1ad)][_0x56ddd0['type']]||0x5,_0x17c67d=_0x472dad(0x1cf);else{if(_0x56ddd0['type'][_0x472dad(0x1b4)]('LaserScan')||_0x56ddd0[_0x472dad(0x1e3)][_0x472dad(0x1b4)](_0x472dad(0x1b9)))_0x5aea4e=this[_0x472dad(0x1e6)][_0x472dad(0x1ad)][_0x56ddd0['type']]||0xf,_0x17c67d=_0x472dad(0x19f);else _0x56ddd0[_0x472dad(0x1ae)][_0x472dad(0x1b4)]('Image')&&(_0x5aea4e=this['config']['throttleFrequencies'][_0x56ddd0[_0x472dad(0x1ae)]]||0xa,_0x17c67d=_0x472dad(0x1aa));}return{'type':_0x472dad(0x1c7),'reason':_0x17c67d,'isLargeData':!![],'estimatedSize':_0x5c6f90,'maxFrequency':_0x5aea4e};}return{'type':_0x472dad(0x1a0),'reason':_0x472dad(0x1e1),'isLargeData':![],'estimatedSize':_0x5c6f90,'maxFrequency':null};}[a4_0x16f656(0x1c3)](_0x590252,_0x76cada){const _0x152b26=a4_0x16f656;if(_0x590252['includes'](':')){const [_0x1b3e54,_0x41cd68]=_0x590252[_0x152b26(0x1e2)](':');return{'type':_0x1b3e54,'reason':_0x76cada,'isLargeData':!![],'maxFrequency':_0x1b3e54==='throttle'?parseFloat(_0x41cd68):null,'estimatedSize':this[_0x152b26(0x1e6)][_0x152b26(0x1c2)]+0x1};}return{'type':_0x590252,'reason':_0x76cada,'isLargeData':_0x590252!==_0x152b26(0x1a0),'maxFrequency':null,'estimatedSize':this['config'][_0x152b26(0x1c2)]+0x1};}[a4_0x16f656(0x1a6)](_0x4244cd,_0x438dcf){const _0x5a8e38=a4_0x16f656,_0x16b769=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x21f201=[_0x5a8e38(0x1eb),_0x5a8e38(0x191),_0x5a8e38(0x1ba),_0x5a8e38(0x1e4)];return _0x16b769[_0x5a8e38(0x1ed)](_0x4e8186=>_0x4e8186[_0x5a8e38(0x1be)](_0x4244cd))||_0x21f201[_0x5a8e38(0x1b4)](_0x438dcf);}[a4_0x16f656(0x1c5)](_0x5baedf,_0x2458f2=''){const _0x4bb8b2=a4_0x16f656,_0x1139e2=[_0x4bb8b2(0x191),_0x4bb8b2(0x1e4)];if(_0x1139e2[_0x4bb8b2(0x1b4)](_0x2458f2))return!_0x5baedf['includes'](_0x4bb8b2(0x1dd))&&!_0x5baedf[_0x4bb8b2(0x1b4)](_0x4bb8b2(0x1e7))&&!_0x5baedf['includes'](_0x4bb8b2(0x1da));return(_0x5baedf[_0x4bb8b2(0x1b4)]('image')||_0x5baedf['includes'](_0x4bb8b2(0x19c)))&&!_0x5baedf[_0x4bb8b2(0x1b4)](_0x4bb8b2(0x1dd))&&!_0x5baedf[_0x4bb8b2(0x1b4)]('point_cloud')&&!_0x5baedf[_0x4bb8b2(0x1b4)](_0x4bb8b2(0x1da));}[a4_0x16f656(0x1b7)](_0x5e9491,_0x2a1600){const _0x4f4e92=a4_0x16f656,_0x48f050={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x48f050[_0x2a1600])return _0x48f050[_0x2a1600];if(_0x5e9491[_0x4f4e92(0x1b4)](_0x4f4e92(0x1b1))||_0x5e9491['includes'](_0x4f4e92(0x1dc)))return 0x190*0x400;if(_0x5e9491[_0x4f4e92(0x1b4)](_0x4f4e92(0x1ce)))return 0x12c*0x400;if(_0x5e9491['includes']('compressed'))return 0x32*0x400;return 0x400;}[a4_0x16f656(0x1d0)](_0x4131a9){const _0x5ab124=a4_0x16f656;let _0x3a6864=this[_0x5ab124(0x1b0)][_0x5ab124(0x1d7)](_0x4131a9['topic']);if(!_0x3a6864){console['log']('[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20'+_0x4131a9[_0x5ab124(0x1b5)]);let _0x317ae4=_0x5ab124(0x1df);if(_0x4131a9[_0x5ab124(0x1b5)][_0x5ab124(0x1b4)](_0x5ab124(0x1d6))&&_0x4131a9[_0x5ab124(0x1b5)][_0x5ab124(0x1b4)](_0x5ab124(0x19c)))_0x317ae4=_0x5ab124(0x1e4);else{if(_0x4131a9[_0x5ab124(0x1b5)]['includes']('image'))_0x317ae4='sensor_msgs/msg/Image';else{if(_0x4131a9[_0x5ab124(0x1b5)][_0x5ab124(0x1b4)](_0x5ab124(0x1b1))||_0x4131a9[_0x5ab124(0x1b5)][_0x5ab124(0x1b4)](_0x5ab124(0x1dc)))_0x317ae4='sensor_msgs/msg/PointCloud2';else _0x4131a9['topic'][_0x5ab124(0x1b4)](_0x5ab124(0x1b9))&&(_0x317ae4='sensor_msgs/msg/LaserScan');}}const _0x568f25={'name':_0x4131a9['topic'],'type':_0x317ae4};this[_0x5ab124(0x197)](_0x568f25),_0x3a6864=this[_0x5ab124(0x1b0)][_0x5ab124(0x1d7)](_0x4131a9['topic']);}if(!_0x3a6864)return{'action':_0x5ab124(0x1d2),'message':_0x4131a9};switch(_0x3a6864[_0x5ab124(0x1ee)]){case _0x5ab124(0x1c7):return this[_0x5ab124(0x199)](_0x4131a9[_0x5ab124(0x1b5)],_0x3a6864[_0x5ab124(0x1ec)])?{'action':'forward','message':_0x4131a9}:{'action':_0x5ab124(0x1ac)};case _0x5ab124(0x190):return{'action':'webrtc_skip'};case'websocket':default:return{'action':_0x5ab124(0x1d2),'message':_0x4131a9};}}[a4_0x16f656(0x199)](_0x45968b,_0xa6b9fa){const _0x4a7269=a4_0x16f656;if(!_0xa6b9fa)return!![];const _0x425b8b=Date[_0x4a7269(0x1d9)](),_0x297066=0x3e8/_0xa6b9fa;!this[_0x4a7269(0x1c0)][_0x4a7269(0x1ea)](_0x45968b)&&this[_0x4a7269(0x1c0)][_0x4a7269(0x1bd)](_0x45968b,0x0);const _0x58bf5a=this['lastMessageTimes']['get'](_0x45968b),_0x98fb4d=_0x425b8b-_0x58bf5a;if(_0x98fb4d>=_0x297066)return this['lastMessageTimes'][_0x4a7269(0x1bd)](_0x45968b,_0x425b8b),!![];return![];}['getTopicStrategy'](_0x2e7390){const _0x1c22ba=a4_0x16f656;return this[_0x1c22ba(0x1b0)][_0x1c22ba(0x1d7)](_0x2e7390);}[a4_0x16f656(0x19e)](){const _0x23f621=a4_0x16f656;return Array[_0x23f621(0x1cc)](this[_0x23f621(0x1b0)]['entries']())[_0x23f621(0x1d3)](([_0x559b37,_0x2c0c8d])=>({'topic':_0x559b37,..._0x2c0c8d}));}['shouldUseWebRTC'](_0x2a2c78){const _0x3b3e61=a4_0x16f656,_0x44649c=this[_0x3b3e61(0x1b0)]['get'](_0x2a2c78);return _0x44649c?.[_0x3b3e61(0x1ee)]===_0x3b3e61(0x1d8);}[a4_0x16f656(0x1cb)](){const _0x24e9c3=a4_0x16f656,_0x1855db={};return this[_0x24e9c3(0x1b0)][_0x24e9c3(0x1c9)]((_0x465421,_0x2ad199)=>{const _0x34d489=_0x24e9c3;!_0x1855db[_0x465421[_0x34d489(0x1ee)]]&&(_0x1855db[_0x465421['strategy']]=0x0),_0x1855db[_0x465421['strategy']]++;}),{'totalTopics':this[_0x24e9c3(0x1b0)]['size'],'strategies':_0x1855db,'largeDataTopics':Array[_0x24e9c3(0x1cc)](this['topicStrategies'][_0x24e9c3(0x19a)]())[_0x24e9c3(0x198)](([_0x39b78a,_0x19d8a0])=>_0x19d8a0[_0x24e9c3(0x1a5)])[_0x24e9c3(0x1d3)](([_0x435afa,_0x239a03])=>_0x435afa)};}}module['exports']=new TopicManager();function a4_0x1ade(){const _0x4c30c4=['image_throttled','log','throttle_skip','throttleFrequencies','type','estimatedSize','topicStrategies','point','785259AdyYqa','PointCloud2','includes','topic','replace','estimateTopicSize','topics','scan','sensor_msgs/msg/LaserScan','strategiesConfig','(((.+)+)+)+$','set','test','length','lastMessageTimes','defaultLargeDataStrategy','largeDataThreshold','parseStrategyConfig','232104shVdBd','isCameraTopic','14005602veALLs','throttle','[TopicManager]\x20Error\x20getting\x20topics:','forEach','[TopicManager]\x20Topic\x20discovery\x20failed:','getStatistics','from','5VvxSLd','image_raw','point_cloud_throttled','handleMessage','\x20topics','forward','map','error','[TopicManager]\x20Topic\x20','image','get','webrtc_only','now','depth_points','[TopicManager]\x20Loaded\x20configuration:','cloud','points','3020952myloHN','unknown','1744536VQJfwv','normal_size','split','name','sensor_msgs/msg/CompressedImage','discoverTopics','config','point_cloud','reason','topicHandling','has','sensor_msgs/msg/PointCloud2','maxFrequency','some','strategy','search','webrtc','sensor_msgs/msg/Image','determineTopicStrategy','apply','21puHsii','video_webrtc_streaming','toString','analyzeTopicStrategy','filter','shouldThrottle','entries','loadConfig','compressed','discoveryInProgress','getManagedTopics','laser_scan_throttled','websocket','1364612vfQAQg','child_process','types','[TopicManager]\x20Found\x20','isLargeData','isLargeDataTopic','1469112OGJTEz','strategies','large_data_throttled'];a4_0x1ade=function(){return _0x4c30c4;};return a4_0x1ade();}