const a4_0x4c5d45=a4_0x3f52;(function(_0x216a11,_0x6859e8){const _0x552b11=a4_0x3f52,_0x1d771e=_0x216a11();while(!![]){try{const _0x57c528=parseInt(_0x552b11(0x168))/0x1+-parseInt(_0x552b11(0x179))/0x2*(parseInt(_0x552b11(0x150))/0x3)+parseInt(_0x552b11(0x177))/0x4+parseInt(_0x552b11(0x164))/0x5+-parseInt(_0x552b11(0x171))/0x6+parseInt(_0x552b11(0x134))/0x7*(-parseInt(_0x552b11(0x14c))/0x8)+parseInt(_0x552b11(0x121))/0x9*(parseInt(_0x552b11(0x11d))/0xa);if(_0x57c528===_0x6859e8)break;else _0x1d771e['push'](_0x1d771e['shift']());}catch(_0x2872bd){_0x1d771e['push'](_0x1d771e['shift']());}}}(a4_0x7774,0x44e46));const a4_0x1d0b1c=(function(){let _0x316d7a=!![];return function(_0x42f0d0,_0x42f5f5){const _0x3a4633=_0x316d7a?function(){if(_0x42f5f5){const _0x52c469=_0x42f5f5['apply'](_0x42f0d0,arguments);return _0x42f5f5=null,_0x52c469;}}:function(){};return _0x316d7a=![],_0x3a4633;};}()),a4_0x242890=a4_0x1d0b1c(this,function(){const _0x28be35=a4_0x3f52;return a4_0x242890[_0x28be35(0x13d)]()[_0x28be35(0x153)](_0x28be35(0x154))[_0x28be35(0x13d)]()['constructor'](a4_0x242890)[_0x28be35(0x153)]('(((.+)+)+)+$');});a4_0x242890();const {execSync}=require(a4_0x4c5d45(0x11f));function a4_0x3f52(_0x1d3451,_0x1b52e0){const _0x19f247=a4_0x7774();return a4_0x3f52=function(_0x242890,_0x1d0b1c){_0x242890=_0x242890-0x115;let _0x7774cd=_0x19f247[_0x242890];return _0x7774cd;},a4_0x3f52(_0x1d3451,_0x1b52e0);}function a4_0x7774(){const _0xddbc06=['288525pTDLbT','[TopicManager]\x20Topic\x20discovery\x20failed:','lastMessageTimes','discoveryInProgress','193851rfgwTD','from','estimateTopicSize','maxFrequency','entries','points','point','size','get','1793760ploPaT','reason','replace','strategies','exports','point_cloud_throttled','124580ujsFvI','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','94dGeCRD','shouldThrottle','some','compressed','image_throttled','getTopics','strategy','topicHandling','topic','[TopicManager]\x20Starting\x20topic\x20discovery...','parseStrategyConfig','[TopicManager]\x20Strategies:','strategiesConfig','name','3209790sdAeRv','throttle_skip','child_process','sensor_msgs/msg/Image','27siYHJg','point_cloud','has','pattern_configured','split','forward','handleMessage','length','loadConfig','webrtc_only','includes','set','[TopicManager]\x20Topic\x20','image','types','map','scan','throttleFrequencies','unknown','108955qdSJAR','determineTopicStrategy','getTopicStrategy','[TopicManager]\x20Topic\x20discovery\x20completed','laser_scan_throttled','now','sensor_msgs/msg/LaserScan','image_raw','isCameraTopic','toString','large_data_throttled','throttle','webrtc_skip','sensor_msgs/msg/PointCloud2','LaserScan','forEach','cloud','PointCloud2','analyzeTopicStrategy','sensor_msgs/msg/CompressedImage','shouldUseWebRTC','[TopicManager]\x20Error\x20getting\x20topics:','defaultLargeDataStrategy','discoverTopics','104QpTRFu','topicStrategies','type','config','29499cXXazs','error','Image','search','(((.+)+)+)+$','getManagedTopics','log','getStatistics','depth_points','user_configured','isLargeDataTopic','largeDataThreshold','topics','[TopicManager]\x20Found\x20','websocket','\x20topics','video_webrtc_streaming','[TopicManager]\x20Initialised','normal_size','test'];a4_0x7774=function(){return _0xddbc06;};return a4_0x7774();}class TopicManager{constructor(){const _0x34e1d6=a4_0x4c5d45;this[_0x34e1d6(0x14d)]=new Map(),this[_0x34e1d6(0x166)]=new Map(),this[_0x34e1d6(0x167)]=![],this['config']={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x34e1d6(0x12a),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console['log'](_0x34e1d6(0x161));}[a4_0x4c5d45(0x129)](_0x545af2){const _0x10b820=a4_0x4c5d45;if(_0x545af2[_0x10b820(0x116)]){const _0x4e3318=_0x545af2[_0x10b820(0x116)];_0x4e3318['largeDataThreshold']&&(this[_0x10b820(0x14f)][_0x10b820(0x15b)]=_0x4e3318['largeDataThreshold']),_0x4e3318[_0x10b820(0x14a)]&&(this[_0x10b820(0x14f)]['defaultLargeDataStrategy']=_0x4e3318[_0x10b820(0x14a)]),_0x4e3318[_0x10b820(0x174)]&&(this[_0x10b820(0x14f)][_0x10b820(0x11b)]={..._0x4e3318[_0x10b820(0x174)]}),_0x4e3318[_0x10b820(0x132)]&&(this[_0x10b820(0x14f)]['throttleFrequencies']={...this[_0x10b820(0x14f)][_0x10b820(0x132)],..._0x4e3318[_0x10b820(0x132)]}),console['log']('[TopicManager]\x20Loaded\x20configuration:',this[_0x10b820(0x14f)]);}}async[a4_0x4c5d45(0x14b)](_0x3a4533){const _0x1c280e=a4_0x4c5d45;if(this[_0x1c280e(0x167)]||!_0x3a4533)return;this['discoveryInProgress']=!![],console[_0x1c280e(0x156)](_0x1c280e(0x118));try{await new Promise((_0x566dd5,_0x268c7f)=>{const _0x2cd400=_0x1c280e;_0x3a4533[_0x2cd400(0x17e)](_0x5d38b6=>{const _0x51e21d=_0x2cd400,_0x1942d4=_0x5d38b6[_0x51e21d(0x15c)][_0x51e21d(0x130)]((_0x48d871,_0x3ed261)=>({'name':_0x48d871,'type':_0x5d38b6[_0x51e21d(0x12f)][_0x3ed261]}));console[_0x51e21d(0x156)](_0x51e21d(0x15d)+_0x1942d4[_0x51e21d(0x128)]+_0x51e21d(0x15f));for(const _0x45e301 of _0x1942d4){this[_0x51e21d(0x146)](_0x45e301);}console['log'](_0x51e21d(0x137)),console[_0x51e21d(0x156)](_0x51e21d(0x11a),Array[_0x51e21d(0x169)](this[_0x51e21d(0x14d)]['entries']())),_0x566dd5();},_0x5495c1=>{const _0xe8fd29=_0x2cd400;console[_0xe8fd29(0x151)](_0xe8fd29(0x149),_0x5495c1),_0x268c7f(_0x5495c1);});});}catch(_0x12f850){console['error'](_0x1c280e(0x165),_0x12f850);}finally{this[_0x1c280e(0x167)]=![];}}[a4_0x4c5d45(0x146)](_0x1d4a44){const _0x123d35=a4_0x4c5d45,_0x5565a1=this[_0x123d35(0x135)](_0x1d4a44);this[_0x123d35(0x14d)]['set'](_0x1d4a44[_0x123d35(0x11c)],{'type':_0x1d4a44[_0x123d35(0x14e)],'strategy':_0x5565a1[_0x123d35(0x14e)],'reason':_0x5565a1[_0x123d35(0x172)],'maxFrequency':_0x5565a1[_0x123d35(0x16b)],'isLargeData':_0x5565a1['isLargeData'],'estimatedSize':_0x5565a1['estimatedSize']}),console[_0x123d35(0x156)](_0x123d35(0x12d)+_0x1d4a44[_0x123d35(0x11c)]+':\x20'+_0x5565a1[_0x123d35(0x14e)]+'\x20('+_0x5565a1[_0x123d35(0x172)]+')');}[a4_0x4c5d45(0x135)](_0x18f67f){const _0x5c6576=a4_0x4c5d45;if(this[_0x5c6576(0x14f)]['strategiesConfig'][_0x18f67f['name']]){const _0x10a269=this[_0x5c6576(0x14f)]['strategiesConfig'][_0x18f67f[_0x5c6576(0x11c)]];return this['parseStrategyConfig'](_0x10a269,_0x5c6576(0x159));}for(const [_0x38b8be,_0x381d90]of Object[_0x5c6576(0x16c)](this[_0x5c6576(0x14f)]['strategiesConfig'])){if(_0x18f67f[_0x5c6576(0x11c)]['includes'](_0x38b8be[_0x5c6576(0x173)]('/','')))return this[_0x5c6576(0x119)](_0x381d90,_0x5c6576(0x124));}if(this[_0x5c6576(0x13c)](_0x18f67f['name'],_0x18f67f[_0x5c6576(0x14e)])){const _0x1b26df=this['estimateTopicSize'](_0x18f67f['name'],_0x18f67f[_0x5c6576(0x14e)]);return{'type':'webrtc','reason':_0x5c6576(0x160),'isLargeData':!![],'estimatedSize':_0x1b26df,'maxFrequency':null};}const _0x4bd9df=this[_0x5c6576(0x15a)](_0x18f67f[_0x5c6576(0x11c)],_0x18f67f[_0x5c6576(0x14e)]),_0x480e0d=this[_0x5c6576(0x16a)](_0x18f67f[_0x5c6576(0x11c)],_0x18f67f[_0x5c6576(0x14e)]);if(_0x4bd9df||_0x480e0d>this['config'][_0x5c6576(0x15b)]){let _0xac91bb=this['config']['throttleFrequencies'][_0x18f67f['type']]||0xa,_0x271097=_0x5c6576(0x13e);if(_0x18f67f[_0x5c6576(0x14e)][_0x5c6576(0x12b)](_0x5c6576(0x145))||_0x18f67f['name'][_0x5c6576(0x12b)]('points'))_0xac91bb=this['config'][_0x5c6576(0x132)][_0x18f67f[_0x5c6576(0x14e)]]||0x5,_0x271097=_0x5c6576(0x176);else{if(_0x18f67f['type'][_0x5c6576(0x12b)](_0x5c6576(0x142))||_0x18f67f[_0x5c6576(0x11c)][_0x5c6576(0x12b)]('scan'))_0xac91bb=this['config'][_0x5c6576(0x132)][_0x18f67f['type']]||0xf,_0x271097=_0x5c6576(0x138);else _0x18f67f['type']['includes'](_0x5c6576(0x152))&&(_0xac91bb=this['config']['throttleFrequencies'][_0x18f67f[_0x5c6576(0x14e)]]||0xa,_0x271097=_0x5c6576(0x17d));}return{'type':'throttle','reason':_0x271097,'isLargeData':!![],'estimatedSize':_0x480e0d,'maxFrequency':_0xac91bb};}return{'type':'websocket','reason':_0x5c6576(0x162),'isLargeData':![],'estimatedSize':_0x480e0d,'maxFrequency':null};}[a4_0x4c5d45(0x119)](_0x3a133f,_0x1a423c){const _0x37b13f=a4_0x4c5d45;if(_0x3a133f['includes'](':')){const [_0x5dfc51,_0x142a8a]=_0x3a133f[_0x37b13f(0x125)](':');return{'type':_0x5dfc51,'reason':_0x1a423c,'isLargeData':!![],'maxFrequency':_0x5dfc51===_0x37b13f(0x13f)?parseFloat(_0x142a8a):null,'estimatedSize':this[_0x37b13f(0x14f)][_0x37b13f(0x15b)]+0x1};}return{'type':_0x3a133f,'reason':_0x1a423c,'isLargeData':_0x3a133f!==_0x37b13f(0x15e),'maxFrequency':null,'estimatedSize':this[_0x37b13f(0x14f)][_0x37b13f(0x15b)]+0x1};}['isLargeDataTopic'](_0x5edf38,_0x57df38){const _0x4ca6c2=a4_0x4c5d45,_0x19ba79=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x39c23c=[_0x4ca6c2(0x141),'sensor_msgs/msg/Image',_0x4ca6c2(0x13a),_0x4ca6c2(0x147)];return _0x19ba79[_0x4ca6c2(0x17b)](_0x5525e0=>_0x5525e0[_0x4ca6c2(0x163)](_0x5edf38))||_0x39c23c[_0x4ca6c2(0x12b)](_0x57df38);}[a4_0x4c5d45(0x13c)](_0x19942c,_0x105c3d=''){const _0x1fc706=a4_0x4c5d45,_0x3f6afc=[_0x1fc706(0x120),_0x1fc706(0x147)];if(_0x3f6afc['includes'](_0x105c3d))return!_0x19942c[_0x1fc706(0x12b)](_0x1fc706(0x16d))&&!_0x19942c[_0x1fc706(0x12b)]('point_cloud')&&!_0x19942c[_0x1fc706(0x12b)](_0x1fc706(0x158));return(_0x19942c[_0x1fc706(0x12b)](_0x1fc706(0x12e))||_0x19942c[_0x1fc706(0x12b)](_0x1fc706(0x17c)))&&!_0x19942c[_0x1fc706(0x12b)](_0x1fc706(0x16d))&&!_0x19942c[_0x1fc706(0x12b)](_0x1fc706(0x122))&&!_0x19942c[_0x1fc706(0x12b)](_0x1fc706(0x158));}[a4_0x4c5d45(0x16a)](_0x1ee6f6,_0x49bc06){const _0x185513=a4_0x4c5d45,_0x2b0917={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x2b0917[_0x49bc06])return _0x2b0917[_0x49bc06];if(_0x1ee6f6['includes']('point')||_0x1ee6f6[_0x185513(0x12b)](_0x185513(0x144)))return 0x190*0x400;if(_0x1ee6f6[_0x185513(0x12b)](_0x185513(0x13b)))return 0x12c*0x400;if(_0x1ee6f6['includes'](_0x185513(0x17c)))return 0x32*0x400;return 0x400;}[a4_0x4c5d45(0x127)](_0x32b9d5){const _0x32d206=a4_0x4c5d45;let _0x34c7f1=this['topicStrategies'][_0x32d206(0x170)](_0x32b9d5[_0x32d206(0x117)]);if(!_0x34c7f1){console[_0x32d206(0x156)](_0x32d206(0x178)+_0x32b9d5[_0x32d206(0x117)]);let _0x20d73b=_0x32d206(0x133);if(_0x32b9d5[_0x32d206(0x117)]['includes']('image')&&_0x32b9d5[_0x32d206(0x117)][_0x32d206(0x12b)](_0x32d206(0x17c)))_0x20d73b=_0x32d206(0x147);else{if(_0x32b9d5[_0x32d206(0x117)]['includes'](_0x32d206(0x12e)))_0x20d73b=_0x32d206(0x120);else{if(_0x32b9d5[_0x32d206(0x117)][_0x32d206(0x12b)](_0x32d206(0x16e))||_0x32b9d5[_0x32d206(0x117)]['includes']('cloud'))_0x20d73b='sensor_msgs/msg/PointCloud2';else _0x32b9d5[_0x32d206(0x117)][_0x32d206(0x12b)](_0x32d206(0x131))&&(_0x20d73b=_0x32d206(0x13a));}}const _0x5ee027={'name':_0x32b9d5[_0x32d206(0x117)],'type':_0x20d73b};this[_0x32d206(0x146)](_0x5ee027),_0x34c7f1=this[_0x32d206(0x14d)][_0x32d206(0x170)](_0x32b9d5[_0x32d206(0x117)]);}if(!_0x34c7f1)return{'action':'forward','message':_0x32b9d5};switch(_0x34c7f1[_0x32d206(0x115)]){case _0x32d206(0x13f):return this[_0x32d206(0x17a)](_0x32b9d5['topic'],_0x34c7f1['maxFrequency'])?{'action':'forward','message':_0x32b9d5}:{'action':_0x32d206(0x11e)};case'webrtc':return{'action':_0x32d206(0x140)};case'websocket':default:return{'action':_0x32d206(0x126),'message':_0x32b9d5};}}['shouldThrottle'](_0x490784,_0x24b13a){const _0x400945=a4_0x4c5d45;if(!_0x24b13a)return!![];const _0x1ed8de=Date[_0x400945(0x139)](),_0x40d346=0x3e8/_0x24b13a;!this[_0x400945(0x166)][_0x400945(0x123)](_0x490784)&&this['lastMessageTimes'][_0x400945(0x12c)](_0x490784,0x0);const _0x50b930=this[_0x400945(0x166)]['get'](_0x490784),_0x54431c=_0x1ed8de-_0x50b930;if(_0x54431c>=_0x40d346)return this[_0x400945(0x166)][_0x400945(0x12c)](_0x490784,_0x1ed8de),!![];return![];}[a4_0x4c5d45(0x136)](_0x2964ce){const _0x161d43=a4_0x4c5d45;return this[_0x161d43(0x14d)][_0x161d43(0x170)](_0x2964ce);}[a4_0x4c5d45(0x155)](){const _0x38ee08=a4_0x4c5d45;return Array[_0x38ee08(0x169)](this[_0x38ee08(0x14d)][_0x38ee08(0x16c)]())[_0x38ee08(0x130)](([_0x5767c9,_0x403448])=>({'topic':_0x5767c9,..._0x403448}));}[a4_0x4c5d45(0x148)](_0x3da969){const _0x3fae8e=a4_0x4c5d45,_0x33fb61=this[_0x3fae8e(0x14d)]['get'](_0x3da969);return _0x33fb61?.[_0x3fae8e(0x115)]===_0x3fae8e(0x12a);}[a4_0x4c5d45(0x157)](){const _0x5e99b1=a4_0x4c5d45,_0x463836={};return this['topicStrategies'][_0x5e99b1(0x143)]((_0x3acd82,_0x329f74)=>{const _0xc5227c=_0x5e99b1;!_0x463836[_0x3acd82['strategy']]&&(_0x463836[_0x3acd82[_0xc5227c(0x115)]]=0x0),_0x463836[_0x3acd82[_0xc5227c(0x115)]]++;}),{'totalTopics':this['topicStrategies'][_0x5e99b1(0x16f)],'strategies':_0x463836,'largeDataTopics':Array[_0x5e99b1(0x169)](this[_0x5e99b1(0x14d)][_0x5e99b1(0x16c)]())['filter'](([_0x4c3220,_0x540428])=>_0x540428['isLargeData'])[_0x5e99b1(0x130)](([_0x1c3f79,_0x472b80])=>_0x1c3f79)};}}module[a4_0x4c5d45(0x175)]=new TopicManager();