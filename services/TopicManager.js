function a4_0x57d7(){const _0x1f7a91=['loadConfig','split','scan','PointCloud2','includes','point','some','reason','topicHandling','getTopics','compressed','video_webrtc_streaming','cloud','1489215qefkaR','strategiesConfig','user_configured','throttle','shouldUseWebRTC','1219248zgYVjv','test','parseStrategyConfig','set','largeDataThreshold','lastMessageTimes','getManagedTopics','webrtc_skip','Image','websocket','topic','entries','determineTopicStrategy','(((.+)+)+)+$','point_cloud_throttled','forEach','depth_points','maxFrequency','strategy','60upYvIe','webrtc_only','sensor_msgs/msg/Image','name','[TopicManager]\x20Error\x20getting\x20topics:','discoveryInProgress','now','toString','3fAQdfD','child_process','isCameraTopic','estimatedSize','has','topicStrategies','[TopicManager]\x20Loaded\x20configuration:','sensor_msgs/msg/LaserScan','webrtc','isLargeDataTopic','image','[TopicManager]\x20Starting\x20topic\x20discovery...','estimateTopicSize','discoverTopics','points','14192JQALfm','1810sTDqNd','234031FzfMUV','normal_size','topics','get','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','LaserScan','[TopicManager]\x20Strategies:','shouldThrottle','analyzeTopicStrategy','[TopicManager]\x20Topic\x20discovery\x20failed:','error','202959hZJnkm','67ufgTyH','unknown','from','sensor_msgs/msg/CompressedImage','defaultLargeDataStrategy','getStatistics','[TopicManager]\x20Found\x20','filter','exports','constructor','map','strategies','isLargeData','5764MRcAcV','getTopicStrategy','replace','large_data_throttled','throttleFrequencies','laser_scan_throttled','type','image_throttled','40BhTGhZ','search','forward','config','length','3212748Oqoslx','log','sensor_msgs/msg/PointCloud2','types','\x20topics'];a4_0x57d7=function(){return _0x1f7a91;};return a4_0x57d7();}function a4_0x3ace(_0x2f36ab,_0x2c3ee5){const _0x2e36f4=a4_0x57d7();return a4_0x3ace=function(_0x349554,_0x38ddf9){_0x349554=_0x349554-0x1ed;let _0x57d701=_0x2e36f4[_0x349554];return _0x57d701;},a4_0x3ace(_0x2f36ab,_0x2c3ee5);}const a4_0x1dd8b1=a4_0x3ace;(function(_0x3d0ffb,_0x5482fd){const _0x188e99=a4_0x3ace,_0x558e06=_0x3d0ffb();while(!![]){try{const _0x24a67b=-parseInt(_0x188e99(0x22c))/0x1*(parseInt(_0x188e99(0x21e))/0x2)+parseInt(_0x188e99(0x20f))/0x3*(parseInt(_0x188e99(0x1f4))/0x4)+parseInt(_0x188e99(0x1ef))/0x5+parseInt(_0x188e99(0x207))/0x6*(-parseInt(_0x188e99(0x220))/0x7)+-parseInt(_0x188e99(0x241))/0x8*(-parseInt(_0x188e99(0x22b))/0x9)+parseInt(_0x188e99(0x21f))/0xa*(parseInt(_0x188e99(0x239))/0xb)+parseInt(_0x188e99(0x246))/0xc;if(_0x24a67b===_0x5482fd)break;else _0x558e06['push'](_0x558e06['shift']());}catch(_0x30969a){_0x558e06['push'](_0x558e06['shift']());}}}(a4_0x57d7,0x417bd));const a4_0x38ddf9=(function(){let _0x304f95=!![];return function(_0x4e41ac,_0x2fb7e7){const _0x134d45=_0x304f95?function(){if(_0x2fb7e7){const _0x5944d3=_0x2fb7e7['apply'](_0x4e41ac,arguments);return _0x2fb7e7=null,_0x5944d3;}}:function(){};return _0x304f95=![],_0x134d45;};}()),a4_0x349554=a4_0x38ddf9(this,function(){const _0x533ac4=a4_0x3ace;return a4_0x349554[_0x533ac4(0x20e)]()['search'](_0x533ac4(0x201))[_0x533ac4(0x20e)]()[_0x533ac4(0x235)](a4_0x349554)[_0x533ac4(0x242)]('(((.+)+)+)+$');});a4_0x349554();const {execSync}=require(a4_0x1dd8b1(0x210));class TopicManager{constructor(){const _0x437c38=a4_0x1dd8b1;this[_0x437c38(0x214)]=new Map(),this[_0x437c38(0x1f9)]=new Map(),this[_0x437c38(0x20c)]=![],this[_0x437c38(0x244)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x437c38(0x208),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x437c38(0x247)]('[TopicManager]\x20Initialised');}[a4_0x1dd8b1(0x24b)](_0x3a22ed){const _0x4ecd89=a4_0x1dd8b1;if(_0x3a22ed[_0x4ecd89(0x253)]){const _0x3067ea=_0x3a22ed[_0x4ecd89(0x253)];_0x3067ea[_0x4ecd89(0x1f8)]&&(this[_0x4ecd89(0x244)][_0x4ecd89(0x1f8)]=_0x3067ea[_0x4ecd89(0x1f8)]),_0x3067ea[_0x4ecd89(0x230)]&&(this[_0x4ecd89(0x244)][_0x4ecd89(0x230)]=_0x3067ea['defaultLargeDataStrategy']),_0x3067ea[_0x4ecd89(0x237)]&&(this[_0x4ecd89(0x244)]['strategiesConfig']={..._0x3067ea[_0x4ecd89(0x237)]}),_0x3067ea[_0x4ecd89(0x23d)]&&(this[_0x4ecd89(0x244)][_0x4ecd89(0x23d)]={...this['config']['throttleFrequencies'],..._0x3067ea[_0x4ecd89(0x23d)]}),console['log'](_0x4ecd89(0x215),this[_0x4ecd89(0x244)]);}}async[a4_0x1dd8b1(0x21c)](_0x25a06b){const _0x4c4b0b=a4_0x1dd8b1;if(this[_0x4c4b0b(0x20c)]||!_0x25a06b)return;this[_0x4c4b0b(0x20c)]=!![],console[_0x4c4b0b(0x247)](_0x4c4b0b(0x21a));try{await new Promise((_0x467b57,_0x5863ab)=>{const _0x22327a=_0x4c4b0b;_0x25a06b[_0x22327a(0x254)](_0x31487c=>{const _0x16da81=_0x22327a,_0x42b1be=_0x31487c[_0x16da81(0x222)][_0x16da81(0x236)]((_0x4367bd,_0x1e1727)=>({'name':_0x4367bd,'type':_0x31487c[_0x16da81(0x249)][_0x1e1727]}));console[_0x16da81(0x247)](_0x16da81(0x232)+_0x42b1be[_0x16da81(0x245)]+_0x16da81(0x24a));for(const _0x5ddb3d of _0x42b1be){this[_0x16da81(0x228)](_0x5ddb3d);}console['log']('[TopicManager]\x20Topic\x20discovery\x20completed'),console['log'](_0x16da81(0x226),Array[_0x16da81(0x22e)](this[_0x16da81(0x214)]['entries']())),_0x467b57();},_0x4ffd8c=>{const _0x1ca1a5=_0x22327a;console[_0x1ca1a5(0x22a)](_0x1ca1a5(0x20b),_0x4ffd8c),_0x5863ab(_0x4ffd8c);});});}catch(_0x4fb5db){console[_0x4c4b0b(0x22a)](_0x4c4b0b(0x229),_0x4fb5db);}finally{this[_0x4c4b0b(0x20c)]=![];}}[a4_0x1dd8b1(0x228)](_0x3e590f){const _0x386919=a4_0x1dd8b1,_0x6c5099=this[_0x386919(0x200)](_0x3e590f);this['topicStrategies'][_0x386919(0x1f7)](_0x3e590f[_0x386919(0x20a)],{'type':_0x3e590f[_0x386919(0x23f)],'strategy':_0x6c5099[_0x386919(0x23f)],'reason':_0x6c5099[_0x386919(0x252)],'maxFrequency':_0x6c5099[_0x386919(0x205)],'isLargeData':_0x6c5099[_0x386919(0x238)],'estimatedSize':_0x6c5099[_0x386919(0x212)]}),console[_0x386919(0x247)]('[TopicManager]\x20Topic\x20'+_0x3e590f[_0x386919(0x20a)]+':\x20'+_0x6c5099[_0x386919(0x23f)]+'\x20('+_0x6c5099['reason']+')');}['determineTopicStrategy'](_0x3dcab0){const _0x48776a=a4_0x1dd8b1;if(this['config']['strategiesConfig'][_0x3dcab0[_0x48776a(0x20a)]]){const _0x192dec=this[_0x48776a(0x244)][_0x48776a(0x1f0)][_0x3dcab0['name']];return this['parseStrategyConfig'](_0x192dec,_0x48776a(0x1f1));}for(const [_0x2b604f,_0x4cecc4]of Object[_0x48776a(0x1ff)](this['config'][_0x48776a(0x1f0)])){if(_0x3dcab0[_0x48776a(0x20a)][_0x48776a(0x24f)](_0x2b604f[_0x48776a(0x23b)]('/','')))return this[_0x48776a(0x1f6)](_0x4cecc4,'pattern_configured');}if(this['isCameraTopic'](_0x3dcab0[_0x48776a(0x20a)],_0x3dcab0[_0x48776a(0x23f)])){const _0x412897=this[_0x48776a(0x21b)](_0x3dcab0[_0x48776a(0x20a)],_0x3dcab0[_0x48776a(0x23f)]);return{'type':_0x48776a(0x217),'reason':_0x48776a(0x1ed),'isLargeData':!![],'estimatedSize':_0x412897,'maxFrequency':null};}const _0x4fdcb5=this[_0x48776a(0x218)](_0x3dcab0[_0x48776a(0x20a)],_0x3dcab0[_0x48776a(0x23f)]),_0x429899=this[_0x48776a(0x21b)](_0x3dcab0['name'],_0x3dcab0[_0x48776a(0x23f)]);if(_0x4fdcb5||_0x429899>this[_0x48776a(0x244)][_0x48776a(0x1f8)]){let _0x3cd4da=this['config'][_0x48776a(0x23d)][_0x3dcab0['type']]||0xa,_0x1b80f8=_0x48776a(0x23c);if(_0x3dcab0['type'][_0x48776a(0x24f)](_0x48776a(0x24e))||_0x3dcab0[_0x48776a(0x20a)][_0x48776a(0x24f)](_0x48776a(0x21d)))_0x3cd4da=this[_0x48776a(0x244)][_0x48776a(0x23d)][_0x3dcab0[_0x48776a(0x23f)]]||0x5,_0x1b80f8=_0x48776a(0x202);else{if(_0x3dcab0[_0x48776a(0x23f)][_0x48776a(0x24f)](_0x48776a(0x225))||_0x3dcab0[_0x48776a(0x20a)]['includes'](_0x48776a(0x24d)))_0x3cd4da=this['config']['throttleFrequencies'][_0x3dcab0['type']]||0xf,_0x1b80f8=_0x48776a(0x23e);else _0x3dcab0[_0x48776a(0x23f)][_0x48776a(0x24f)](_0x48776a(0x1fc))&&(_0x3cd4da=this[_0x48776a(0x244)][_0x48776a(0x23d)][_0x3dcab0[_0x48776a(0x23f)]]||0xa,_0x1b80f8=_0x48776a(0x240));}return{'type':_0x48776a(0x1f2),'reason':_0x1b80f8,'isLargeData':!![],'estimatedSize':_0x429899,'maxFrequency':_0x3cd4da};}return{'type':_0x48776a(0x1fd),'reason':_0x48776a(0x221),'isLargeData':![],'estimatedSize':_0x429899,'maxFrequency':null};}['parseStrategyConfig'](_0x6f2a24,_0x255a03){const _0x2d5efa=a4_0x1dd8b1;if(_0x6f2a24[_0x2d5efa(0x24f)](':')){const [_0x45a1b2,_0x115778]=_0x6f2a24[_0x2d5efa(0x24c)](':');return{'type':_0x45a1b2,'reason':_0x255a03,'isLargeData':!![],'maxFrequency':_0x45a1b2===_0x2d5efa(0x1f2)?parseFloat(_0x115778):null,'estimatedSize':this[_0x2d5efa(0x244)]['largeDataThreshold']+0x1};}return{'type':_0x6f2a24,'reason':_0x255a03,'isLargeData':_0x6f2a24!==_0x2d5efa(0x1fd),'maxFrequency':null,'estimatedSize':this[_0x2d5efa(0x244)][_0x2d5efa(0x1f8)]+0x1};}['isLargeDataTopic'](_0x4bd203,_0x1f0dd6){const _0x1180af=a4_0x1dd8b1,_0x4bfebd=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x1e47b5=[_0x1180af(0x248),_0x1180af(0x209),_0x1180af(0x216),'sensor_msgs/msg/CompressedImage'];return _0x4bfebd[_0x1180af(0x251)](_0x387c86=>_0x387c86[_0x1180af(0x1f5)](_0x4bd203))||_0x1e47b5[_0x1180af(0x24f)](_0x1f0dd6);}[a4_0x1dd8b1(0x211)](_0x27ed83,_0x46e748=''){const _0x3e65d2=a4_0x1dd8b1,_0x2995f1=[_0x3e65d2(0x209),'sensor_msgs/msg/CompressedImage'];if(_0x2995f1[_0x3e65d2(0x24f)](_0x46e748))return!_0x27ed83[_0x3e65d2(0x24f)](_0x3e65d2(0x21d))&&!_0x27ed83[_0x3e65d2(0x24f)]('point_cloud')&&!_0x27ed83[_0x3e65d2(0x24f)](_0x3e65d2(0x204));return(_0x27ed83['includes'](_0x3e65d2(0x219))||_0x27ed83['includes']('compressed'))&&!_0x27ed83[_0x3e65d2(0x24f)]('points')&&!_0x27ed83[_0x3e65d2(0x24f)]('point_cloud')&&!_0x27ed83[_0x3e65d2(0x24f)]('depth_points');}[a4_0x1dd8b1(0x21b)](_0x599206,_0x12f7c0){const _0x190d8d=a4_0x1dd8b1,_0x3354eb={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x3354eb[_0x12f7c0])return _0x3354eb[_0x12f7c0];if(_0x599206['includes'](_0x190d8d(0x250))||_0x599206['includes'](_0x190d8d(0x1ee)))return 0x190*0x400;if(_0x599206[_0x190d8d(0x24f)]('image_raw'))return 0x12c*0x400;if(_0x599206[_0x190d8d(0x24f)](_0x190d8d(0x255)))return 0x32*0x400;return 0x400;}['handleMessage'](_0x7ec92){const _0x5db1d7=a4_0x1dd8b1;let _0x1f29c9=this[_0x5db1d7(0x214)]['get'](_0x7ec92[_0x5db1d7(0x1fe)]);if(!_0x1f29c9){console[_0x5db1d7(0x247)](_0x5db1d7(0x224)+_0x7ec92[_0x5db1d7(0x1fe)]);let _0x178de5=_0x5db1d7(0x22d);if(_0x7ec92['topic']['includes'](_0x5db1d7(0x219))&&_0x7ec92['topic']['includes'](_0x5db1d7(0x255)))_0x178de5=_0x5db1d7(0x22f);else{if(_0x7ec92[_0x5db1d7(0x1fe)]['includes'](_0x5db1d7(0x219)))_0x178de5=_0x5db1d7(0x209);else{if(_0x7ec92['topic'][_0x5db1d7(0x24f)](_0x5db1d7(0x250))||_0x7ec92[_0x5db1d7(0x1fe)]['includes'](_0x5db1d7(0x1ee)))_0x178de5=_0x5db1d7(0x248);else _0x7ec92[_0x5db1d7(0x1fe)]['includes'](_0x5db1d7(0x24d))&&(_0x178de5='sensor_msgs/msg/LaserScan');}}const _0x9da980={'name':_0x7ec92[_0x5db1d7(0x1fe)],'type':_0x178de5};this[_0x5db1d7(0x228)](_0x9da980),_0x1f29c9=this[_0x5db1d7(0x214)][_0x5db1d7(0x223)](_0x7ec92['topic']);}if(!_0x1f29c9)return{'action':_0x5db1d7(0x243),'message':_0x7ec92};switch(_0x1f29c9[_0x5db1d7(0x206)]){case _0x5db1d7(0x1f2):return this[_0x5db1d7(0x227)](_0x7ec92[_0x5db1d7(0x1fe)],_0x1f29c9[_0x5db1d7(0x205)])?{'action':_0x5db1d7(0x243),'message':_0x7ec92}:{'action':'throttle_skip'};case _0x5db1d7(0x217):return{'action':_0x5db1d7(0x1fb)};case _0x5db1d7(0x1fd):default:return{'action':'forward','message':_0x7ec92};}}[a4_0x1dd8b1(0x227)](_0x170abe,_0x51178c){const _0x4d9f69=a4_0x1dd8b1;if(!_0x51178c)return!![];const _0x287d9b=Date[_0x4d9f69(0x20d)](),_0xa9cd3f=0x3e8/_0x51178c;!this[_0x4d9f69(0x1f9)][_0x4d9f69(0x213)](_0x170abe)&&this[_0x4d9f69(0x1f9)][_0x4d9f69(0x1f7)](_0x170abe,0x0);const _0x2c5fbf=this[_0x4d9f69(0x1f9)][_0x4d9f69(0x223)](_0x170abe),_0x208374=_0x287d9b-_0x2c5fbf;if(_0x208374>=_0xa9cd3f)return this[_0x4d9f69(0x1f9)][_0x4d9f69(0x1f7)](_0x170abe,_0x287d9b),!![];return![];}[a4_0x1dd8b1(0x23a)](_0x322716){const _0x5a1bc4=a4_0x1dd8b1;return this[_0x5a1bc4(0x214)]['get'](_0x322716);}[a4_0x1dd8b1(0x1fa)](){const _0x5688d5=a4_0x1dd8b1;return Array['from'](this['topicStrategies'][_0x5688d5(0x1ff)]())[_0x5688d5(0x236)](([_0x64b874,_0xe85c])=>({'topic':_0x64b874,..._0xe85c}));}[a4_0x1dd8b1(0x1f3)](_0x4ad2fe){const _0x65437a=a4_0x1dd8b1,_0x190a78=this['topicStrategies']['get'](_0x4ad2fe);return _0x190a78?.[_0x65437a(0x206)]===_0x65437a(0x208);}[a4_0x1dd8b1(0x231)](){const _0x2f04fb=a4_0x1dd8b1,_0x3314ba={};return this[_0x2f04fb(0x214)][_0x2f04fb(0x203)]((_0x244f78,_0x50b8f5)=>{const _0x3a5230=_0x2f04fb;!_0x3314ba[_0x244f78[_0x3a5230(0x206)]]&&(_0x3314ba[_0x244f78[_0x3a5230(0x206)]]=0x0),_0x3314ba[_0x244f78[_0x3a5230(0x206)]]++;}),{'totalTopics':this[_0x2f04fb(0x214)]['size'],'strategies':_0x3314ba,'largeDataTopics':Array['from'](this[_0x2f04fb(0x214)]['entries']())[_0x2f04fb(0x233)](([_0x3e0589,_0x45ff38])=>_0x45ff38[_0x2f04fb(0x238)])[_0x2f04fb(0x236)](([_0xf64439,_0x4ad942])=>_0xf64439)};}}module[a4_0x1dd8b1(0x234)]=new TopicManager();