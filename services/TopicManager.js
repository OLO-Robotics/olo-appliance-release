function a4_0x4f06(){const _0x1c60d3=['strategy','25FEHzXb','PointCloud2','largeDataThreshold','image_throttled','55464MgaRxE','sensor_msgs/msg/CompressedImage','[TopicManager]\x20Topic\x20discovery\x20failed:','5719819CAdcJf','sensor_msgs/msg/PointCloud2','video_webrtc_streaming','617638sSqHnh','map','test','4193166LxvEzt','error','throttle_skip','787828DkLXiA','forward','toString','replace','now','type','sensor_msgs/msg/Image','compressed','get','isLargeDataTopic','image','getStatistics','handleMessage','shouldUseWebRTC','lastMessageTimes','image_raw','has','pattern_configured','webrtc','[TopicManager]\x20Starting\x20topic\x20discovery...','apply','getTopicStrategy','topicStrategies','isLargeData','filter','discoveryInProgress','determineTopicStrategy','discoverTopics','set','search','estimateTopicSize','[TopicManager]\x20Topic\x20discovery\x20completed','split','3844554itfGVk','forEach','LaserScan','size','types','depth_points','topic','user_configured','point_cloud_throttled','normal_size','estimatedSize','child_process','webrtc_only','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','\x20topics','maxFrequency','throttle','topicHandling','log','strategiesConfig','entries','unknown','shouldThrottle','scan','topics','reason','laser_scan_throttled','analyzeTopicStrategy','isCameraTopic','[TopicManager]\x20Strategies:','points','name','some','webrtc_skip','[TopicManager]\x20Initialised','4183736RgzrYx','point','websocket','[TopicManager]\x20Loaded\x20configuration:','(((.+)+)+)+$','config','getManagedTopics','constructor','[TopicManager]\x20Topic\x20','defaultLargeDataStrategy','sensor_msgs/msg/LaserScan','[TopicManager]\x20Error\x20getting\x20topics:','parseStrategyConfig','getTopics','includes','throttleFrequencies','from'];a4_0x4f06=function(){return _0x1c60d3;};return a4_0x4f06();}const a4_0x80a71e=a4_0x39ef;(function(_0x52e32d,_0x3b723b){const _0x57a2a9=a4_0x39ef,_0x198106=_0x52e32d();while(!![]){try{const _0x551ae7=-parseInt(_0x57a2a9(0x1d6))/0x1+parseInt(_0x57a2a9(0x1d0))/0x2+parseInt(_0x57a2a9(0x1fd))/0x3+parseInt(_0x57a2a9(0x1dc))/0x4*(parseInt(_0x57a2a9(0x1cc))/0x5)+-parseInt(_0x57a2a9(0x1d9))/0x6+-parseInt(_0x57a2a9(0x1d3))/0x7+parseInt(_0x57a2a9(0x1ba))/0x8;if(_0x551ae7===_0x3b723b)break;else _0x198106['push'](_0x198106['shift']());}catch(_0x1825d7){_0x198106['push'](_0x198106['shift']());}}}(a4_0x4f06,0xa6d7a));function a4_0x39ef(_0x4c7263,_0x7d5deb){const _0x29df23=a4_0x4f06();return a4_0x39ef=function(_0x330ef3,_0x4c9637){_0x330ef3=_0x330ef3-0x1ba;let _0x4f067a=_0x29df23[_0x330ef3];return _0x4f067a;},a4_0x39ef(_0x4c7263,_0x7d5deb);}const a4_0x4c9637=(function(){let _0xcc17d0=!![];return function(_0x384732,_0x28ae33){const _0x490e79=_0xcc17d0?function(){const _0x45fd7a=a4_0x39ef;if(_0x28ae33){const _0x4778a0=_0x28ae33[_0x45fd7a(0x1f0)](_0x384732,arguments);return _0x28ae33=null,_0x4778a0;}}:function(){};return _0xcc17d0=![],_0x490e79;};}()),a4_0x330ef3=a4_0x4c9637(this,function(){const _0x497f5c=a4_0x39ef;return a4_0x330ef3[_0x497f5c(0x1de)]()[_0x497f5c(0x1f9)](_0x497f5c(0x1be))[_0x497f5c(0x1de)]()[_0x497f5c(0x1c1)](a4_0x330ef3)[_0x497f5c(0x1f9)](_0x497f5c(0x1be));});a4_0x330ef3();const {execSync}=require(a4_0x80a71e(0x208));class TopicManager{constructor(){const _0x4f241c=a4_0x80a71e;this[_0x4f241c(0x1f2)]=new Map(),this[_0x4f241c(0x1ea)]=new Map(),this[_0x4f241c(0x1f5)]=![],this[_0x4f241c(0x1bf)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x4f241c(0x209),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x4f241c(0x20f)](_0x4f241c(0x21f));}['loadConfig'](_0x4a75f5){const _0x194f74=a4_0x80a71e;if(_0x4a75f5[_0x194f74(0x20e)]){const _0x896260=_0x4a75f5['topicHandling'];_0x896260[_0x194f74(0x1ce)]&&(this['config'][_0x194f74(0x1ce)]=_0x896260['largeDataThreshold']),_0x896260[_0x194f74(0x1c3)]&&(this[_0x194f74(0x1bf)]['defaultLargeDataStrategy']=_0x896260[_0x194f74(0x1c3)]),_0x896260['strategies']&&(this[_0x194f74(0x1bf)]['strategiesConfig']={..._0x896260['strategies']}),_0x896260[_0x194f74(0x1c9)]&&(this[_0x194f74(0x1bf)][_0x194f74(0x1c9)]={...this[_0x194f74(0x1bf)][_0x194f74(0x1c9)],..._0x896260[_0x194f74(0x1c9)]}),console[_0x194f74(0x20f)](_0x194f74(0x1bd),this[_0x194f74(0x1bf)]);}}async[a4_0x80a71e(0x1f7)](_0x21cbf1){const _0x125887=a4_0x80a71e;if(this[_0x125887(0x1f5)]||!_0x21cbf1)return;this[_0x125887(0x1f5)]=!![],console[_0x125887(0x20f)](_0x125887(0x1ef));try{await new Promise((_0x1402ef,_0x2ac30f)=>{const _0x51e40e=_0x125887;_0x21cbf1[_0x51e40e(0x1c7)](_0x3163f1=>{const _0x43c5f3=_0x51e40e,_0x55ecd4=_0x3163f1[_0x43c5f3(0x215)][_0x43c5f3(0x1d7)]((_0x5771e1,_0x1e05f0)=>({'name':_0x5771e1,'type':_0x3163f1[_0x43c5f3(0x201)][_0x1e05f0]}));console['log']('[TopicManager]\x20Found\x20'+_0x55ecd4['length']+_0x43c5f3(0x20b));for(const _0x5a6da6 of _0x55ecd4){this[_0x43c5f3(0x218)](_0x5a6da6);}console[_0x43c5f3(0x20f)](_0x43c5f3(0x1fb)),console[_0x43c5f3(0x20f)](_0x43c5f3(0x21a),Array[_0x43c5f3(0x1ca)](this[_0x43c5f3(0x1f2)][_0x43c5f3(0x211)]())),_0x1402ef();},_0x4736ed=>{const _0x1be4f0=_0x51e40e;console[_0x1be4f0(0x1da)](_0x1be4f0(0x1c5),_0x4736ed),_0x2ac30f(_0x4736ed);});});}catch(_0x175bbc){console['error'](_0x125887(0x1d2),_0x175bbc);}finally{this[_0x125887(0x1f5)]=![];}}['analyzeTopicStrategy'](_0x1de80e){const _0x297b5b=a4_0x80a71e,_0x5a86cb=this[_0x297b5b(0x1f6)](_0x1de80e);this[_0x297b5b(0x1f2)][_0x297b5b(0x1f8)](_0x1de80e[_0x297b5b(0x21c)],{'type':_0x1de80e[_0x297b5b(0x1e1)],'strategy':_0x5a86cb[_0x297b5b(0x1e1)],'reason':_0x5a86cb['reason'],'maxFrequency':_0x5a86cb[_0x297b5b(0x20c)],'isLargeData':_0x5a86cb[_0x297b5b(0x1f3)],'estimatedSize':_0x5a86cb[_0x297b5b(0x207)]}),console['log'](_0x297b5b(0x1c2)+_0x1de80e['name']+':\x20'+_0x5a86cb[_0x297b5b(0x1e1)]+'\x20('+_0x5a86cb[_0x297b5b(0x216)]+')');}[a4_0x80a71e(0x1f6)](_0x4393f0){const _0x3de7da=a4_0x80a71e;if(this[_0x3de7da(0x1bf)][_0x3de7da(0x210)][_0x4393f0[_0x3de7da(0x21c)]]){const _0x1fa2c8=this[_0x3de7da(0x1bf)][_0x3de7da(0x210)][_0x4393f0['name']];return this[_0x3de7da(0x1c6)](_0x1fa2c8,_0x3de7da(0x204));}for(const [_0x1eff2b,_0x41c177]of Object[_0x3de7da(0x211)](this[_0x3de7da(0x1bf)][_0x3de7da(0x210)])){if(_0x4393f0['name'][_0x3de7da(0x1c8)](_0x1eff2b[_0x3de7da(0x1df)]('/','')))return this[_0x3de7da(0x1c6)](_0x41c177,_0x3de7da(0x1ed));}if(this['isCameraTopic'](_0x4393f0[_0x3de7da(0x21c)],_0x4393f0['type'])){const _0x4f09d2=this[_0x3de7da(0x1fa)](_0x4393f0[_0x3de7da(0x21c)],_0x4393f0[_0x3de7da(0x1e1)]);return{'type':_0x3de7da(0x1ee),'reason':_0x3de7da(0x1d5),'isLargeData':!![],'estimatedSize':_0x4f09d2,'maxFrequency':null};}const _0x85203c=this[_0x3de7da(0x1e5)](_0x4393f0[_0x3de7da(0x21c)],_0x4393f0[_0x3de7da(0x1e1)]),_0x3cd387=this[_0x3de7da(0x1fa)](_0x4393f0[_0x3de7da(0x21c)],_0x4393f0['type']);if(_0x85203c||_0x3cd387>this[_0x3de7da(0x1bf)][_0x3de7da(0x1ce)]){let _0x5b1726=this[_0x3de7da(0x1bf)][_0x3de7da(0x1c9)][_0x4393f0['type']]||0xa,_0x4747c1='large_data_throttled';if(_0x4393f0[_0x3de7da(0x1e1)][_0x3de7da(0x1c8)](_0x3de7da(0x1cd))||_0x4393f0[_0x3de7da(0x21c)][_0x3de7da(0x1c8)]('points'))_0x5b1726=this['config'][_0x3de7da(0x1c9)][_0x4393f0[_0x3de7da(0x1e1)]]||0x5,_0x4747c1=_0x3de7da(0x205);else{if(_0x4393f0[_0x3de7da(0x1e1)][_0x3de7da(0x1c8)](_0x3de7da(0x1ff))||_0x4393f0[_0x3de7da(0x21c)][_0x3de7da(0x1c8)](_0x3de7da(0x214)))_0x5b1726=this[_0x3de7da(0x1bf)][_0x3de7da(0x1c9)][_0x4393f0[_0x3de7da(0x1e1)]]||0xf,_0x4747c1=_0x3de7da(0x217);else _0x4393f0[_0x3de7da(0x1e1)][_0x3de7da(0x1c8)]('Image')&&(_0x5b1726=this[_0x3de7da(0x1bf)][_0x3de7da(0x1c9)][_0x4393f0['type']]||0xa,_0x4747c1=_0x3de7da(0x1cf));}return{'type':_0x3de7da(0x20d),'reason':_0x4747c1,'isLargeData':!![],'estimatedSize':_0x3cd387,'maxFrequency':_0x5b1726};}return{'type':_0x3de7da(0x1bc),'reason':_0x3de7da(0x206),'isLargeData':![],'estimatedSize':_0x3cd387,'maxFrequency':null};}[a4_0x80a71e(0x1c6)](_0x5b7a26,_0x274517){const _0x469723=a4_0x80a71e;if(_0x5b7a26[_0x469723(0x1c8)](':')){const [_0x650a66,_0x28922a]=_0x5b7a26[_0x469723(0x1fc)](':');return{'type':_0x650a66,'reason':_0x274517,'isLargeData':!![],'maxFrequency':_0x650a66===_0x469723(0x20d)?parseFloat(_0x28922a):null,'estimatedSize':this['config'][_0x469723(0x1ce)]+0x1};}return{'type':_0x5b7a26,'reason':_0x274517,'isLargeData':_0x5b7a26!==_0x469723(0x1bc),'maxFrequency':null,'estimatedSize':this[_0x469723(0x1bf)][_0x469723(0x1ce)]+0x1};}[a4_0x80a71e(0x1e5)](_0x1e7c78,_0x4745a6){const _0x1c66ee=a4_0x80a71e,_0xf29cad=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x44b5ca=[_0x1c66ee(0x1d4),_0x1c66ee(0x1e2),'sensor_msgs/msg/LaserScan',_0x1c66ee(0x1d1)];return _0xf29cad[_0x1c66ee(0x21d)](_0x4036da=>_0x4036da[_0x1c66ee(0x1d8)](_0x1e7c78))||_0x44b5ca[_0x1c66ee(0x1c8)](_0x4745a6);}[a4_0x80a71e(0x219)](_0x5bf9f3,_0x2db206=''){const _0xe815c=a4_0x80a71e,_0x48526f=[_0xe815c(0x1e2),_0xe815c(0x1d1)];if(_0x48526f[_0xe815c(0x1c8)](_0x2db206))return!_0x5bf9f3[_0xe815c(0x1c8)](_0xe815c(0x21b))&&!_0x5bf9f3['includes']('point_cloud')&&!_0x5bf9f3[_0xe815c(0x1c8)](_0xe815c(0x202));return(_0x5bf9f3[_0xe815c(0x1c8)](_0xe815c(0x1e6))||_0x5bf9f3[_0xe815c(0x1c8)](_0xe815c(0x1e3)))&&!_0x5bf9f3[_0xe815c(0x1c8)]('points')&&!_0x5bf9f3[_0xe815c(0x1c8)]('point_cloud')&&!_0x5bf9f3[_0xe815c(0x1c8)](_0xe815c(0x202));}[a4_0x80a71e(0x1fa)](_0x5ddfb1,_0x256e71){const _0x3919c7=a4_0x80a71e,_0x577d3d={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x577d3d[_0x256e71])return _0x577d3d[_0x256e71];if(_0x5ddfb1['includes'](_0x3919c7(0x1bb))||_0x5ddfb1[_0x3919c7(0x1c8)]('cloud'))return 0x190*0x400;if(_0x5ddfb1[_0x3919c7(0x1c8)](_0x3919c7(0x1eb)))return 0x12c*0x400;if(_0x5ddfb1[_0x3919c7(0x1c8)]('compressed'))return 0x32*0x400;return 0x400;}[a4_0x80a71e(0x1e8)](_0x2e86e9){const _0x3fa62c=a4_0x80a71e;let _0x41a817=this['topicStrategies']['get'](_0x2e86e9[_0x3fa62c(0x203)]);if(!_0x41a817){console[_0x3fa62c(0x20f)](_0x3fa62c(0x20a)+_0x2e86e9[_0x3fa62c(0x203)]);let _0x189596=_0x3fa62c(0x212);if(_0x2e86e9[_0x3fa62c(0x203)][_0x3fa62c(0x1c8)](_0x3fa62c(0x1e6))&&_0x2e86e9[_0x3fa62c(0x203)][_0x3fa62c(0x1c8)]('compressed'))_0x189596=_0x3fa62c(0x1d1);else{if(_0x2e86e9[_0x3fa62c(0x203)][_0x3fa62c(0x1c8)](_0x3fa62c(0x1e6)))_0x189596='sensor_msgs/msg/Image';else{if(_0x2e86e9[_0x3fa62c(0x203)][_0x3fa62c(0x1c8)](_0x3fa62c(0x1bb))||_0x2e86e9[_0x3fa62c(0x203)][_0x3fa62c(0x1c8)]('cloud'))_0x189596=_0x3fa62c(0x1d4);else _0x2e86e9[_0x3fa62c(0x203)][_0x3fa62c(0x1c8)](_0x3fa62c(0x214))&&(_0x189596=_0x3fa62c(0x1c4));}}const _0x5a5e46={'name':_0x2e86e9[_0x3fa62c(0x203)],'type':_0x189596};this[_0x3fa62c(0x218)](_0x5a5e46),_0x41a817=this[_0x3fa62c(0x1f2)][_0x3fa62c(0x1e4)](_0x2e86e9['topic']);}if(!_0x41a817)return{'action':_0x3fa62c(0x1dd),'message':_0x2e86e9};switch(_0x41a817['strategy']){case'throttle':return this[_0x3fa62c(0x213)](_0x2e86e9[_0x3fa62c(0x203)],_0x41a817[_0x3fa62c(0x20c)])?{'action':_0x3fa62c(0x1dd),'message':_0x2e86e9}:{'action':_0x3fa62c(0x1db)};case'webrtc':return{'action':_0x3fa62c(0x21e)};case _0x3fa62c(0x1bc):default:return{'action':'forward','message':_0x2e86e9};}}[a4_0x80a71e(0x213)](_0x4aa516,_0x216716){const _0x2b3922=a4_0x80a71e;if(!_0x216716)return!![];const _0x10ad54=Date[_0x2b3922(0x1e0)](),_0x5e0613=0x3e8/_0x216716;!this[_0x2b3922(0x1ea)][_0x2b3922(0x1ec)](_0x4aa516)&&this[_0x2b3922(0x1ea)][_0x2b3922(0x1f8)](_0x4aa516,0x0);const _0x5952ae=this[_0x2b3922(0x1ea)][_0x2b3922(0x1e4)](_0x4aa516),_0x8883ed=_0x10ad54-_0x5952ae;if(_0x8883ed>=_0x5e0613)return this[_0x2b3922(0x1ea)][_0x2b3922(0x1f8)](_0x4aa516,_0x10ad54),!![];return![];}[a4_0x80a71e(0x1f1)](_0x58003a){const _0x5fbea4=a4_0x80a71e;return this[_0x5fbea4(0x1f2)][_0x5fbea4(0x1e4)](_0x58003a);}[a4_0x80a71e(0x1c0)](){const _0x53835b=a4_0x80a71e;return Array['from'](this[_0x53835b(0x1f2)][_0x53835b(0x211)]())['map'](([_0x24feed,_0x2c8743])=>({'topic':_0x24feed,..._0x2c8743}));}[a4_0x80a71e(0x1e9)](_0x108487){const _0x189294=a4_0x80a71e,_0x58739c=this[_0x189294(0x1f2)][_0x189294(0x1e4)](_0x108487);return _0x58739c?.[_0x189294(0x1cb)]===_0x189294(0x209);}[a4_0x80a71e(0x1e7)](){const _0x21a851=a4_0x80a71e,_0x5338c9={};return this['topicStrategies'][_0x21a851(0x1fe)]((_0x126e66,_0x21a56b)=>{const _0x2dab6b=_0x21a851;!_0x5338c9[_0x126e66[_0x2dab6b(0x1cb)]]&&(_0x5338c9[_0x126e66['strategy']]=0x0),_0x5338c9[_0x126e66[_0x2dab6b(0x1cb)]]++;}),{'totalTopics':this[_0x21a851(0x1f2)][_0x21a851(0x200)],'strategies':_0x5338c9,'largeDataTopics':Array[_0x21a851(0x1ca)](this[_0x21a851(0x1f2)][_0x21a851(0x211)]())[_0x21a851(0x1f4)](([_0x11e4b2,_0x43100c])=>_0x43100c[_0x21a851(0x1f3)])[_0x21a851(0x1d7)](([_0x384753,_0x501871])=>_0x384753)};}}module['exports']=new TopicManager();