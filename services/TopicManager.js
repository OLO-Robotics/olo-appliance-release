const a4_0x51c11b=a4_0x30c8;(function(_0x5905b0,_0x19b226){const _0x55eada=a4_0x30c8,_0x4255c2=_0x5905b0();while(!![]){try{const _0x1648cc=parseInt(_0x55eada(0x8e))/0x1+parseInt(_0x55eada(0xd3))/0x2*(parseInt(_0x55eada(0xcd))/0x3)+-parseInt(_0x55eada(0xb3))/0x4+parseInt(_0x55eada(0xcc))/0x5+parseInt(_0x55eada(0xb7))/0x6*(-parseInt(_0x55eada(0xc0))/0x7)+-parseInt(_0x55eada(0xd7))/0x8*(parseInt(_0x55eada(0x8d))/0x9)+parseInt(_0x55eada(0xac))/0xa;if(_0x1648cc===_0x19b226)break;else _0x4255c2['push'](_0x4255c2['shift']());}catch(_0x5f3c88){_0x4255c2['push'](_0x4255c2['shift']());}}}(a4_0x10de,0x9f63f));const a4_0x5883c6=(function(){let _0x41bac1=!![];return function(_0x16afab,_0xaa14fa){const _0x6065e5=_0x41bac1?function(){const _0x335a82=a4_0x30c8;if(_0xaa14fa){const _0x3c4fee=_0xaa14fa[_0x335a82(0xd4)](_0x16afab,arguments);return _0xaa14fa=null,_0x3c4fee;}}:function(){};return _0x41bac1=![],_0x6065e5;};}()),a4_0x54de49=a4_0x5883c6(this,function(){const _0xc321f9=a4_0x30c8;return a4_0x54de49[_0xc321f9(0x7a)]()['search'](_0xc321f9(0x96))[_0xc321f9(0x7a)]()[_0xc321f9(0xbf)](a4_0x54de49)[_0xc321f9(0xca)](_0xc321f9(0x96));});a4_0x54de49();function a4_0x30c8(_0x3bb903,_0x25d340){const _0x4b8e94=a4_0x10de();return a4_0x30c8=function(_0x54de49,_0x5883c6){_0x54de49=_0x54de49-0x78;let _0x10de5e=_0x4b8e94[_0x54de49];return _0x10de5e;},a4_0x30c8(_0x3bb903,_0x25d340);}const {execSync}=require(a4_0x51c11b(0x78));function a4_0x10de(){const _0x109f1a=['entries','throttle','webrtc','discoveryInProgress','[TopicManager]\x20Error\x20getting\x20topics:','(((.+)+)+)+$','sensor_msgs/msg/LaserScan','shouldUseWebRTC','webrtc_only','includes','getManagedTopics','\x20topics','[TopicManager]\x20Topic\x20','topic','config','log','strategies','compressed','maxFrequency','image_raw','topicStrategies','types','error','strategiesConfig','get','sensor_msgs/msg/CompressedImage','loadConfig','13197870wSbULm','sensor_msgs/msg/Image','some','now','isCameraTopic','forward','estimateTopicSize','3380384hhwDLB','[TopicManager]\x20Topic\x20discovery\x20completed','defaultLargeDataStrategy','size','2385870jayPwo','length','throttleFrequencies','getTopics','websocket','discoverTopics','determineTopicStrategy','getStatistics','constructor','7NZsiqr','image_throttled','PointCloud2','from','strategy','[TopicManager]\x20Loaded\x20configuration:','user_configured','shouldThrottle','analyzeTopicStrategy','filter','search','isLargeData','2285645AMstBu','380283mktEmE','name','topicHandling','normal_size','lastMessageTimes','type','2JvPnQc','apply','has','Image','440EQXjsa','throttle_skip','sensor_msgs/msg/PointCloud2','child_process','largeDataThreshold','toString','webrtc_skip','point','point_cloud_throttled','exports','LaserScan','point_cloud','depth_points','[TopicManager]\x20Topic\x20discovery\x20failed:','[TopicManager]\x20Found\x20','replace','test','map','points','cloud','scan','parseStrategyConfig','isLargeDataTopic','set','99432YOTdvJ','599567XfpAPL','estimatedSize','image'];a4_0x10de=function(){return _0x109f1a;};return a4_0x10de();}class TopicManager{constructor(){const _0x414a73=a4_0x51c11b;this[_0x414a73(0xa5)]=new Map(),this[_0x414a73(0xd1)]=new Map(),this[_0x414a73(0x94)]=![],this['config']={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x414a73(0x99),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x414a73(0xa0)]('[TopicManager]\x20Initialised');}[a4_0x51c11b(0xab)](_0x53f941){const _0x27d141=a4_0x51c11b;if(_0x53f941[_0x27d141(0xcf)]){const _0x3d2e1b=_0x53f941['topicHandling'];_0x3d2e1b['largeDataThreshold']&&(this['config']['largeDataThreshold']=_0x3d2e1b['largeDataThreshold']),_0x3d2e1b[_0x27d141(0xb5)]&&(this['config'][_0x27d141(0xb5)]=_0x3d2e1b[_0x27d141(0xb5)]),_0x3d2e1b[_0x27d141(0xa1)]&&(this['config']['strategiesConfig']={..._0x3d2e1b[_0x27d141(0xa1)]}),_0x3d2e1b[_0x27d141(0xb9)]&&(this[_0x27d141(0x9f)][_0x27d141(0xb9)]={...this['config'][_0x27d141(0xb9)],..._0x3d2e1b[_0x27d141(0xb9)]}),console[_0x27d141(0xa0)](_0x27d141(0xc5),this['config']);}}async[a4_0x51c11b(0xbc)](_0x390a21){const _0xdb6d7f=a4_0x51c11b;if(this['discoveryInProgress']||!_0x390a21)return;this[_0xdb6d7f(0x94)]=!![],console[_0xdb6d7f(0xa0)]('[TopicManager]\x20Starting\x20topic\x20discovery...');try{await new Promise((_0x22f9ce,_0x161105)=>{const _0x16a78e=_0xdb6d7f;_0x390a21[_0x16a78e(0xba)](_0x47f42b=>{const _0x56d32c=_0x16a78e,_0x5596b3=_0x47f42b['topics'][_0x56d32c(0x86)]((_0x189f7e,_0x5d0389)=>({'name':_0x189f7e,'type':_0x47f42b[_0x56d32c(0xa6)][_0x5d0389]}));console['log'](_0x56d32c(0x83)+_0x5596b3[_0x56d32c(0xb8)]+_0x56d32c(0x9c));for(const _0x395a4d of _0x5596b3){this[_0x56d32c(0xc8)](_0x395a4d);}console[_0x56d32c(0xa0)](_0x56d32c(0xb4)),console[_0x56d32c(0xa0)]('[TopicManager]\x20Strategies:',Array[_0x56d32c(0xc3)](this['topicStrategies'][_0x56d32c(0x91)]())),_0x22f9ce();},_0x31cb40=>{const _0x55ae67=_0x16a78e;console[_0x55ae67(0xa7)](_0x55ae67(0x95),_0x31cb40),_0x161105(_0x31cb40);});});}catch(_0x454518){console[_0xdb6d7f(0xa7)](_0xdb6d7f(0x82),_0x454518);}finally{this['discoveryInProgress']=![];}}['analyzeTopicStrategy'](_0xf09f36){const _0x5d9067=a4_0x51c11b,_0x2322c5=this[_0x5d9067(0xbd)](_0xf09f36);this['topicStrategies'][_0x5d9067(0x8c)](_0xf09f36[_0x5d9067(0xce)],{'type':_0xf09f36['type'],'strategy':_0x2322c5['type'],'reason':_0x2322c5['reason'],'maxFrequency':_0x2322c5[_0x5d9067(0xa3)],'isLargeData':_0x2322c5[_0x5d9067(0xcb)],'estimatedSize':_0x2322c5[_0x5d9067(0x8f)]}),console[_0x5d9067(0xa0)](_0x5d9067(0x9d)+_0xf09f36[_0x5d9067(0xce)]+':\x20'+_0x2322c5['type']+'\x20('+_0x2322c5['reason']+')');}[a4_0x51c11b(0xbd)](_0x245cfc){const _0x429f38=a4_0x51c11b;if(this['config'][_0x429f38(0xa8)][_0x245cfc[_0x429f38(0xce)]]){const _0xbff8c7=this['config'][_0x429f38(0xa8)][_0x245cfc[_0x429f38(0xce)]];return this[_0x429f38(0x8a)](_0xbff8c7,_0x429f38(0xc6));}for(const [_0x249a8c,_0x109cb2]of Object[_0x429f38(0x91)](this['config']['strategiesConfig'])){if(_0x245cfc[_0x429f38(0xce)][_0x429f38(0x9a)](_0x249a8c[_0x429f38(0x84)]('/','')))return this['parseStrategyConfig'](_0x109cb2,'pattern_configured');}if(this[_0x429f38(0xb0)](_0x245cfc[_0x429f38(0xce)],_0x245cfc['type'])){const _0x53d554=this[_0x429f38(0xb2)](_0x245cfc[_0x429f38(0xce)],_0x245cfc[_0x429f38(0xd2)]);return{'type':_0x429f38(0x93),'reason':'video_webrtc_streaming','isLargeData':!![],'estimatedSize':_0x53d554,'maxFrequency':null};}const _0x2ebc49=this[_0x429f38(0x8b)](_0x245cfc[_0x429f38(0xce)],_0x245cfc[_0x429f38(0xd2)]),_0x387e31=this['estimateTopicSize'](_0x245cfc[_0x429f38(0xce)],_0x245cfc[_0x429f38(0xd2)]);if(_0x2ebc49||_0x387e31>this[_0x429f38(0x9f)][_0x429f38(0x79)]){let _0x5bbb9a=this[_0x429f38(0x9f)][_0x429f38(0xb9)][_0x245cfc[_0x429f38(0xd2)]]||0xa,_0x1d7286='large_data_throttled';if(_0x245cfc[_0x429f38(0xd2)][_0x429f38(0x9a)](_0x429f38(0xc2))||_0x245cfc['name']['includes'](_0x429f38(0x87)))_0x5bbb9a=this[_0x429f38(0x9f)][_0x429f38(0xb9)][_0x245cfc[_0x429f38(0xd2)]]||0x5,_0x1d7286=_0x429f38(0x7d);else{if(_0x245cfc[_0x429f38(0xd2)]['includes'](_0x429f38(0x7f))||_0x245cfc[_0x429f38(0xce)][_0x429f38(0x9a)](_0x429f38(0x89)))_0x5bbb9a=this[_0x429f38(0x9f)][_0x429f38(0xb9)][_0x245cfc[_0x429f38(0xd2)]]||0xf,_0x1d7286='laser_scan_throttled';else _0x245cfc[_0x429f38(0xd2)]['includes'](_0x429f38(0xd6))&&(_0x5bbb9a=this[_0x429f38(0x9f)][_0x429f38(0xb9)][_0x245cfc['type']]||0xa,_0x1d7286=_0x429f38(0xc1));}return{'type':_0x429f38(0x92),'reason':_0x1d7286,'isLargeData':!![],'estimatedSize':_0x387e31,'maxFrequency':_0x5bbb9a};}return{'type':_0x429f38(0xbb),'reason':_0x429f38(0xd0),'isLargeData':![],'estimatedSize':_0x387e31,'maxFrequency':null};}[a4_0x51c11b(0x8a)](_0x12b49e,_0x203348){const _0x117cd9=a4_0x51c11b;if(_0x12b49e[_0x117cd9(0x9a)](':')){const [_0x5dc352,_0x3921ff]=_0x12b49e['split'](':');return{'type':_0x5dc352,'reason':_0x203348,'isLargeData':!![],'maxFrequency':_0x5dc352===_0x117cd9(0x92)?parseFloat(_0x3921ff):null,'estimatedSize':this[_0x117cd9(0x9f)][_0x117cd9(0x79)]+0x1};}return{'type':_0x12b49e,'reason':_0x203348,'isLargeData':_0x12b49e!==_0x117cd9(0xbb),'maxFrequency':null,'estimatedSize':this[_0x117cd9(0x9f)][_0x117cd9(0x79)]+0x1};}[a4_0x51c11b(0x8b)](_0x405dd9,_0x111d9a){const _0x25d36e=a4_0x51c11b,_0x28a8d3=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x5a746c=[_0x25d36e(0xd9),_0x25d36e(0xad),_0x25d36e(0x97),'sensor_msgs/msg/CompressedImage'];return _0x28a8d3[_0x25d36e(0xae)](_0x4881cb=>_0x4881cb[_0x25d36e(0x85)](_0x405dd9))||_0x5a746c[_0x25d36e(0x9a)](_0x111d9a);}[a4_0x51c11b(0xb0)](_0x3297f4,_0x491ab4=''){const _0x20a61a=a4_0x51c11b,_0x2664f2=[_0x20a61a(0xad),_0x20a61a(0xaa)];if(_0x2664f2['includes'](_0x491ab4))return!_0x3297f4['includes'](_0x20a61a(0x87))&&!_0x3297f4['includes']('point_cloud')&&!_0x3297f4[_0x20a61a(0x9a)](_0x20a61a(0x81));return(_0x3297f4[_0x20a61a(0x9a)](_0x20a61a(0x90))||_0x3297f4[_0x20a61a(0x9a)](_0x20a61a(0xa2)))&&!_0x3297f4['includes']('points')&&!_0x3297f4[_0x20a61a(0x9a)](_0x20a61a(0x80))&&!_0x3297f4[_0x20a61a(0x9a)]('depth_points');}[a4_0x51c11b(0xb2)](_0x2bc72f,_0x329a33){const _0x15479f=a4_0x51c11b,_0x41e75f={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x41e75f[_0x329a33])return _0x41e75f[_0x329a33];if(_0x2bc72f[_0x15479f(0x9a)](_0x15479f(0x7c))||_0x2bc72f[_0x15479f(0x9a)](_0x15479f(0x88)))return 0x190*0x400;if(_0x2bc72f[_0x15479f(0x9a)](_0x15479f(0xa4)))return 0x12c*0x400;if(_0x2bc72f[_0x15479f(0x9a)](_0x15479f(0xa2)))return 0x32*0x400;return 0x400;}['handleMessage'](_0x199ab5){const _0x1139fe=a4_0x51c11b;let _0x2a89a1=this['topicStrategies'][_0x1139fe(0xa9)](_0x199ab5[_0x1139fe(0x9e)]);if(!_0x2a89a1){console[_0x1139fe(0xa0)]('[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20'+_0x199ab5['topic']);let _0x43d9c5='unknown';if(_0x199ab5['topic'][_0x1139fe(0x9a)]('image')&&_0x199ab5['topic'][_0x1139fe(0x9a)]('compressed'))_0x43d9c5=_0x1139fe(0xaa);else{if(_0x199ab5[_0x1139fe(0x9e)][_0x1139fe(0x9a)]('image'))_0x43d9c5=_0x1139fe(0xad);else{if(_0x199ab5[_0x1139fe(0x9e)]['includes']('point')||_0x199ab5[_0x1139fe(0x9e)]['includes'](_0x1139fe(0x88)))_0x43d9c5=_0x1139fe(0xd9);else _0x199ab5['topic'][_0x1139fe(0x9a)](_0x1139fe(0x89))&&(_0x43d9c5=_0x1139fe(0x97));}}const _0x2b6f00={'name':_0x199ab5['topic'],'type':_0x43d9c5};this[_0x1139fe(0xc8)](_0x2b6f00),_0x2a89a1=this['topicStrategies']['get'](_0x199ab5[_0x1139fe(0x9e)]);}if(!_0x2a89a1)return{'action':_0x1139fe(0xb1),'message':_0x199ab5};switch(_0x2a89a1['strategy']){case _0x1139fe(0x92):return this[_0x1139fe(0xc7)](_0x199ab5[_0x1139fe(0x9e)],_0x2a89a1['maxFrequency'])?{'action':_0x1139fe(0xb1),'message':_0x199ab5}:{'action':_0x1139fe(0xd8)};case _0x1139fe(0x93):return{'action':_0x1139fe(0x7b)};case _0x1139fe(0xbb):default:return{'action':_0x1139fe(0xb1),'message':_0x199ab5};}}[a4_0x51c11b(0xc7)](_0x47839e,_0x57bf51){const _0x28e6e5=a4_0x51c11b;if(!_0x57bf51)return!![];const _0xe10684=Date[_0x28e6e5(0xaf)](),_0xf633d8=0x3e8/_0x57bf51;!this[_0x28e6e5(0xd1)][_0x28e6e5(0xd5)](_0x47839e)&&this[_0x28e6e5(0xd1)][_0x28e6e5(0x8c)](_0x47839e,0x0);const _0x33f3f5=this['lastMessageTimes'][_0x28e6e5(0xa9)](_0x47839e),_0x292238=_0xe10684-_0x33f3f5;if(_0x292238>=_0xf633d8)return this[_0x28e6e5(0xd1)][_0x28e6e5(0x8c)](_0x47839e,_0xe10684),!![];return![];}['getTopicStrategy'](_0x3bf8c5){const _0xd5ff0a=a4_0x51c11b;return this[_0xd5ff0a(0xa5)][_0xd5ff0a(0xa9)](_0x3bf8c5);}[a4_0x51c11b(0x9b)](){const _0x40a166=a4_0x51c11b;return Array['from'](this[_0x40a166(0xa5)][_0x40a166(0x91)]())[_0x40a166(0x86)](([_0x221aa8,_0x4eb22f])=>({'topic':_0x221aa8,..._0x4eb22f}));}[a4_0x51c11b(0x98)](_0x2a8c5d){const _0x27ca7b=a4_0x51c11b,_0x2d18fb=this[_0x27ca7b(0xa5)]['get'](_0x2a8c5d);return _0x2d18fb?.['strategy']===_0x27ca7b(0x99);}[a4_0x51c11b(0xbe)](){const _0x3adc54=a4_0x51c11b,_0x49adf9={};return this[_0x3adc54(0xa5)]['forEach']((_0x35d6b9,_0x435f2c)=>{const _0x1a73da=_0x3adc54;!_0x49adf9[_0x35d6b9['strategy']]&&(_0x49adf9[_0x35d6b9['strategy']]=0x0),_0x49adf9[_0x35d6b9[_0x1a73da(0xc4)]]++;}),{'totalTopics':this[_0x3adc54(0xa5)][_0x3adc54(0xb6)],'strategies':_0x49adf9,'largeDataTopics':Array[_0x3adc54(0xc3)](this[_0x3adc54(0xa5)][_0x3adc54(0x91)]())[_0x3adc54(0xc9)](([_0x6a3c97,_0x2a383d])=>_0x2a383d[_0x3adc54(0xcb)])[_0x3adc54(0x86)](([_0x3a1994,_0x22c5db])=>_0x3a1994)};}}module[a4_0x51c11b(0x7e)]=new TopicManager();