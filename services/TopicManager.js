const a4_0xa9917=a4_0x2176;(function(_0x526b7d,_0x859c4d){const _0x4237ac=a4_0x2176,_0x47e0f8=_0x526b7d();while(!![]){try{const _0x3405b0=parseInt(_0x4237ac(0x1b1))/0x1+parseInt(_0x4237ac(0x1b3))/0x2*(-parseInt(_0x4237ac(0x1e6))/0x3)+-parseInt(_0x4237ac(0x1e7))/0x4+-parseInt(_0x4237ac(0x1cd))/0x5+-parseInt(_0x4237ac(0x1cf))/0x6*(-parseInt(_0x4237ac(0x1b8))/0x7)+-parseInt(_0x4237ac(0x1c3))/0x8+parseInt(_0x4237ac(0x18e))/0x9;if(_0x3405b0===_0x859c4d)break;else _0x47e0f8['push'](_0x47e0f8['shift']());}catch(_0x424ad5){_0x47e0f8['push'](_0x47e0f8['shift']());}}}(a4_0x1a38,0x79c72));const a4_0x5023f5=(function(){let _0x3d0f07=!![];return function(_0x3d3036,_0x3dc665){const _0x5e3812=_0x3d0f07?function(){const _0x210378=a4_0x2176;if(_0x3dc665){const _0x20f9c7=_0x3dc665[_0x210378(0x1e4)](_0x3d3036,arguments);return _0x3dc665=null,_0x20f9c7;}}:function(){};return _0x3d0f07=![],_0x5e3812;};}()),a4_0x1ada2c=a4_0x5023f5(this,function(){const _0x9c8a1e=a4_0x2176;return a4_0x1ada2c[_0x9c8a1e(0x1d5)]()[_0x9c8a1e(0x193)](_0x9c8a1e(0x1e2))['toString']()['constructor'](a4_0x1ada2c)[_0x9c8a1e(0x193)](_0x9c8a1e(0x1e2));});function a4_0x1a38(){const _0x6c3ff=['799914cPDRGI','[TopicManager]\x20Starting\x20topic\x20discovery...','types','error','point_cloud','scan','toString','entries','webrtc','throttle','shouldUseWebRTC','loadConfig','image_throttled','config','sensor_msgs/msg/LaserScan','image_raw','forward','estimatedSize','split','(((.+)+)+)+$','unknown','apply','depth_points','1023411IvsFUm','2271440FolfnD','Image','throttleFrequencies','strategy','\x20topics','user_configured','point_cloud_throttled','from','topicHandling','sensor_msgs/msg/Image','laser_scan_throttled','video_webrtc_streaming','6996744cYSnyJ','length','type','[TopicManager]\x20Error\x20getting\x20topics:','image','search','strategiesConfig','topics','websocket','webrtc_skip','strategies','replace','points','isCameraTopic','[TopicManager]\x20Topic\x20','getStatistics','cloud','some','sensor_msgs/msg/PointCloud2','compressed','includes','parseStrategyConfig','test','topicStrategies','filter','size','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','[TopicManager]\x20Initialised','defaultLargeDataStrategy','largeDataThreshold','get','normal_size','isLargeData','map','large_data_throttled','991329VNAqoa','getTopicStrategy','4ruDxzI','[TopicManager]\x20Topic\x20discovery\x20failed:','log','has','reason','35MzhXGI','shouldThrottle','getTopics','[TopicManager]\x20Loaded\x20configuration:','estimateTopicSize','analyzeTopicStrategy','webrtc_only','maxFrequency','LaserScan','set','discoveryInProgress','629120vKanSE','name','handleMessage','[TopicManager]\x20Strategies:','topic','lastMessageTimes','sensor_msgs/msg/CompressedImage','getManagedTopics','isLargeDataTopic','point','3038820yrxkBz','determineTopicStrategy'];a4_0x1a38=function(){return _0x6c3ff;};return a4_0x1a38();}a4_0x1ada2c();const {execSync}=require('child_process');class TopicManager{constructor(){const _0x4a1a35=a4_0x2176;this[_0x4a1a35(0x1a5)]=new Map(),this[_0x4a1a35(0x1c8)]=new Map(),this[_0x4a1a35(0x1c2)]=![],this[_0x4a1a35(0x1dc)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':_0x4a1a35(0x1be),'throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console['log'](_0x4a1a35(0x1a9));}[a4_0xa9917(0x1da)](_0x22af51){const _0x1a7e1b=a4_0xa9917;if(_0x22af51[_0x1a7e1b(0x18a)]){const _0x539c6f=_0x22af51[_0x1a7e1b(0x18a)];_0x539c6f['largeDataThreshold']&&(this['config']['largeDataThreshold']=_0x539c6f[_0x1a7e1b(0x1ab)]),_0x539c6f[_0x1a7e1b(0x1aa)]&&(this['config']['defaultLargeDataStrategy']=_0x539c6f[_0x1a7e1b(0x1aa)]),_0x539c6f[_0x1a7e1b(0x198)]&&(this[_0x1a7e1b(0x1dc)][_0x1a7e1b(0x194)]={..._0x539c6f[_0x1a7e1b(0x198)]}),_0x539c6f[_0x1a7e1b(0x184)]&&(this[_0x1a7e1b(0x1dc)][_0x1a7e1b(0x184)]={...this[_0x1a7e1b(0x1dc)][_0x1a7e1b(0x184)],..._0x539c6f[_0x1a7e1b(0x184)]}),console['log'](_0x1a7e1b(0x1bb),this[_0x1a7e1b(0x1dc)]);}}async['discoverTopics'](_0x53c306){const _0xa9271b=a4_0xa9917;if(this[_0xa9271b(0x1c2)]||!_0x53c306)return;this[_0xa9271b(0x1c2)]=!![],console['log'](_0xa9271b(0x1d0));try{await new Promise((_0x4b0007,_0x32b07d)=>{const _0x3121c2=_0xa9271b;_0x53c306[_0x3121c2(0x1ba)](_0x38bd24=>{const _0x4c3822=_0x3121c2,_0x1ecdd5=_0x38bd24[_0x4c3822(0x195)]['map']((_0x1e2f00,_0x2e8357)=>({'name':_0x1e2f00,'type':_0x38bd24[_0x4c3822(0x1d1)][_0x2e8357]}));console[_0x4c3822(0x1b5)]('[TopicManager]\x20Found\x20'+_0x1ecdd5[_0x4c3822(0x18f)]+_0x4c3822(0x186));for(const _0x3d9960 of _0x1ecdd5){this[_0x4c3822(0x1bd)](_0x3d9960);}console['log']('[TopicManager]\x20Topic\x20discovery\x20completed'),console[_0x4c3822(0x1b5)](_0x4c3822(0x1c6),Array['from'](this[_0x4c3822(0x1a5)][_0x4c3822(0x1d6)]())),_0x4b0007();},_0x3f5122=>{const _0x5e0cef=_0x3121c2;console[_0x5e0cef(0x1d2)](_0x5e0cef(0x191),_0x3f5122),_0x32b07d(_0x3f5122);});});}catch(_0x55dd1a){console[_0xa9271b(0x1d2)](_0xa9271b(0x1b4),_0x55dd1a);}finally{this[_0xa9271b(0x1c2)]=![];}}[a4_0xa9917(0x1bd)](_0x56bb8b){const _0x6aa96=a4_0xa9917,_0x435768=this[_0x6aa96(0x1ce)](_0x56bb8b);this[_0x6aa96(0x1a5)]['set'](_0x56bb8b['name'],{'type':_0x56bb8b[_0x6aa96(0x190)],'strategy':_0x435768[_0x6aa96(0x190)],'reason':_0x435768['reason'],'maxFrequency':_0x435768[_0x6aa96(0x1bf)],'isLargeData':_0x435768[_0x6aa96(0x1ae)],'estimatedSize':_0x435768[_0x6aa96(0x1e0)]}),console[_0x6aa96(0x1b5)](_0x6aa96(0x19c)+_0x56bb8b[_0x6aa96(0x1c4)]+':\x20'+_0x435768['type']+'\x20('+_0x435768[_0x6aa96(0x1b7)]+')');}[a4_0xa9917(0x1ce)](_0x522948){const _0x14e3cb=a4_0xa9917;if(this[_0x14e3cb(0x1dc)][_0x14e3cb(0x194)][_0x522948[_0x14e3cb(0x1c4)]]){const _0x394616=this[_0x14e3cb(0x1dc)][_0x14e3cb(0x194)][_0x522948[_0x14e3cb(0x1c4)]];return this[_0x14e3cb(0x1a3)](_0x394616,_0x14e3cb(0x187));}for(const [_0x462cef,_0x330b4d]of Object[_0x14e3cb(0x1d6)](this[_0x14e3cb(0x1dc)][_0x14e3cb(0x194)])){if(_0x522948[_0x14e3cb(0x1c4)][_0x14e3cb(0x1a2)](_0x462cef[_0x14e3cb(0x199)]('/','')))return this[_0x14e3cb(0x1a3)](_0x330b4d,'pattern_configured');}if(this[_0x14e3cb(0x19b)](_0x522948[_0x14e3cb(0x1c4)],_0x522948[_0x14e3cb(0x190)])){const _0x4a804c=this[_0x14e3cb(0x1bc)](_0x522948[_0x14e3cb(0x1c4)],_0x522948[_0x14e3cb(0x190)]);return{'type':'webrtc','reason':_0x14e3cb(0x18d),'isLargeData':!![],'estimatedSize':_0x4a804c,'maxFrequency':null};}const _0x1ac8a2=this[_0x14e3cb(0x1cb)](_0x522948[_0x14e3cb(0x1c4)],_0x522948[_0x14e3cb(0x190)]),_0x166ea4=this['estimateTopicSize'](_0x522948['name'],_0x522948['type']);if(_0x1ac8a2||_0x166ea4>this[_0x14e3cb(0x1dc)][_0x14e3cb(0x1ab)]){let _0x301974=this[_0x14e3cb(0x1dc)][_0x14e3cb(0x184)][_0x522948[_0x14e3cb(0x190)]]||0xa,_0x3aa228=_0x14e3cb(0x1b0);if(_0x522948['type'][_0x14e3cb(0x1a2)]('PointCloud2')||_0x522948[_0x14e3cb(0x1c4)][_0x14e3cb(0x1a2)](_0x14e3cb(0x19a)))_0x301974=this[_0x14e3cb(0x1dc)][_0x14e3cb(0x184)][_0x522948[_0x14e3cb(0x190)]]||0x5,_0x3aa228=_0x14e3cb(0x188);else{if(_0x522948[_0x14e3cb(0x190)][_0x14e3cb(0x1a2)](_0x14e3cb(0x1c0))||_0x522948[_0x14e3cb(0x1c4)][_0x14e3cb(0x1a2)](_0x14e3cb(0x1d4)))_0x301974=this[_0x14e3cb(0x1dc)][_0x14e3cb(0x184)][_0x522948[_0x14e3cb(0x190)]]||0xf,_0x3aa228=_0x14e3cb(0x18c);else _0x522948[_0x14e3cb(0x190)][_0x14e3cb(0x1a2)](_0x14e3cb(0x1e8))&&(_0x301974=this[_0x14e3cb(0x1dc)][_0x14e3cb(0x184)][_0x522948['type']]||0xa,_0x3aa228=_0x14e3cb(0x1db));}return{'type':_0x14e3cb(0x1d8),'reason':_0x3aa228,'isLargeData':!![],'estimatedSize':_0x166ea4,'maxFrequency':_0x301974};}return{'type':_0x14e3cb(0x196),'reason':_0x14e3cb(0x1ad),'isLargeData':![],'estimatedSize':_0x166ea4,'maxFrequency':null};}[a4_0xa9917(0x1a3)](_0x10d558,_0x2797f4){const _0x4c629a=a4_0xa9917;if(_0x10d558[_0x4c629a(0x1a2)](':')){const [_0x116855,_0x46b9a9]=_0x10d558[_0x4c629a(0x1e1)](':');return{'type':_0x116855,'reason':_0x2797f4,'isLargeData':!![],'maxFrequency':_0x116855===_0x4c629a(0x1d8)?parseFloat(_0x46b9a9):null,'estimatedSize':this[_0x4c629a(0x1dc)][_0x4c629a(0x1ab)]+0x1};}return{'type':_0x10d558,'reason':_0x2797f4,'isLargeData':_0x10d558!==_0x4c629a(0x196),'maxFrequency':null,'estimatedSize':this[_0x4c629a(0x1dc)][_0x4c629a(0x1ab)]+0x1};}[a4_0xa9917(0x1cb)](_0x33f012,_0x5169d3){const _0x2dd095=a4_0xa9917,_0x19f79e=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0xc87e9c=[_0x2dd095(0x1a0),_0x2dd095(0x18b),'sensor_msgs/msg/LaserScan',_0x2dd095(0x1c9)];return _0x19f79e[_0x2dd095(0x19f)](_0x36bce9=>_0x36bce9[_0x2dd095(0x1a4)](_0x33f012))||_0xc87e9c[_0x2dd095(0x1a2)](_0x5169d3);}[a4_0xa9917(0x19b)](_0x3adce0,_0x372719=''){const _0x213b84=a4_0xa9917,_0x179755=[_0x213b84(0x18b),_0x213b84(0x1c9)];if(_0x179755[_0x213b84(0x1a2)](_0x372719))return!_0x3adce0[_0x213b84(0x1a2)](_0x213b84(0x19a))&&!_0x3adce0[_0x213b84(0x1a2)](_0x213b84(0x1d3))&&!_0x3adce0[_0x213b84(0x1a2)](_0x213b84(0x1e5));return(_0x3adce0['includes']('image')||_0x3adce0['includes'](_0x213b84(0x1a1)))&&!_0x3adce0[_0x213b84(0x1a2)](_0x213b84(0x19a))&&!_0x3adce0[_0x213b84(0x1a2)](_0x213b84(0x1d3))&&!_0x3adce0[_0x213b84(0x1a2)]('depth_points');}['estimateTopicSize'](_0x34a471,_0x3a0641){const _0x2217d8=a4_0xa9917,_0x200340={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x200340[_0x3a0641])return _0x200340[_0x3a0641];if(_0x34a471[_0x2217d8(0x1a2)]('point')||_0x34a471['includes'](_0x2217d8(0x19e)))return 0x190*0x400;if(_0x34a471[_0x2217d8(0x1a2)](_0x2217d8(0x1de)))return 0x12c*0x400;if(_0x34a471[_0x2217d8(0x1a2)]('compressed'))return 0x32*0x400;return 0x400;}[a4_0xa9917(0x1c5)](_0x304ab8){const _0x5913dd=a4_0xa9917;let _0xf9fdcf=this[_0x5913dd(0x1a5)][_0x5913dd(0x1ac)](_0x304ab8['topic']);if(!_0xf9fdcf){console[_0x5913dd(0x1b5)](_0x5913dd(0x1a8)+_0x304ab8[_0x5913dd(0x1c7)]);let _0x4fb914=_0x5913dd(0x1e3);if(_0x304ab8[_0x5913dd(0x1c7)][_0x5913dd(0x1a2)](_0x5913dd(0x192))&&_0x304ab8[_0x5913dd(0x1c7)]['includes']('compressed'))_0x4fb914=_0x5913dd(0x1c9);else{if(_0x304ab8[_0x5913dd(0x1c7)]['includes'](_0x5913dd(0x192)))_0x4fb914='sensor_msgs/msg/Image';else{if(_0x304ab8[_0x5913dd(0x1c7)][_0x5913dd(0x1a2)](_0x5913dd(0x1cc))||_0x304ab8[_0x5913dd(0x1c7)][_0x5913dd(0x1a2)]('cloud'))_0x4fb914='sensor_msgs/msg/PointCloud2';else _0x304ab8[_0x5913dd(0x1c7)][_0x5913dd(0x1a2)]('scan')&&(_0x4fb914=_0x5913dd(0x1dd));}}const _0x26731d={'name':_0x304ab8[_0x5913dd(0x1c7)],'type':_0x4fb914};this[_0x5913dd(0x1bd)](_0x26731d),_0xf9fdcf=this[_0x5913dd(0x1a5)][_0x5913dd(0x1ac)](_0x304ab8[_0x5913dd(0x1c7)]);}if(!_0xf9fdcf)return{'action':_0x5913dd(0x1df),'message':_0x304ab8};switch(_0xf9fdcf['strategy']){case _0x5913dd(0x1d8):return this['shouldThrottle'](_0x304ab8['topic'],_0xf9fdcf['maxFrequency'])?{'action':_0x5913dd(0x1df),'message':_0x304ab8}:{'action':'throttle_skip'};case _0x5913dd(0x1d7):return{'action':_0x5913dd(0x197)};case'websocket':default:return{'action':_0x5913dd(0x1df),'message':_0x304ab8};}}[a4_0xa9917(0x1b9)](_0x3612f1,_0x3a710d){const _0x54fad9=a4_0xa9917;if(!_0x3a710d)return!![];const _0x1b48ff=Date['now'](),_0x1a3085=0x3e8/_0x3a710d;!this[_0x54fad9(0x1c8)][_0x54fad9(0x1b6)](_0x3612f1)&&this['lastMessageTimes'][_0x54fad9(0x1c1)](_0x3612f1,0x0);const _0x52311f=this[_0x54fad9(0x1c8)][_0x54fad9(0x1ac)](_0x3612f1),_0x27c88c=_0x1b48ff-_0x52311f;if(_0x27c88c>=_0x1a3085)return this[_0x54fad9(0x1c8)][_0x54fad9(0x1c1)](_0x3612f1,_0x1b48ff),!![];return![];}[a4_0xa9917(0x1b2)](_0x1daf7e){const _0x4c9fc7=a4_0xa9917;return this['topicStrategies'][_0x4c9fc7(0x1ac)](_0x1daf7e);}[a4_0xa9917(0x1ca)](){const _0x55def5=a4_0xa9917;return Array[_0x55def5(0x189)](this[_0x55def5(0x1a5)][_0x55def5(0x1d6)]())[_0x55def5(0x1af)](([_0x590fe0,_0x2cc60a])=>({'topic':_0x590fe0,..._0x2cc60a}));}[a4_0xa9917(0x1d9)](_0x10ade1){const _0x5c67ff=a4_0xa9917,_0x2ab49d=this['topicStrategies'][_0x5c67ff(0x1ac)](_0x10ade1);return _0x2ab49d?.[_0x5c67ff(0x185)]===_0x5c67ff(0x1be);}[a4_0xa9917(0x19d)](){const _0x434597=a4_0xa9917,_0x2ae8e9={};return this[_0x434597(0x1a5)]['forEach']((_0x5f068d,_0xebe6b6)=>{const _0x1ae2bd=_0x434597;!_0x2ae8e9[_0x5f068d[_0x1ae2bd(0x185)]]&&(_0x2ae8e9[_0x5f068d[_0x1ae2bd(0x185)]]=0x0),_0x2ae8e9[_0x5f068d[_0x1ae2bd(0x185)]]++;}),{'totalTopics':this[_0x434597(0x1a5)][_0x434597(0x1a7)],'strategies':_0x2ae8e9,'largeDataTopics':Array[_0x434597(0x189)](this[_0x434597(0x1a5)][_0x434597(0x1d6)]())[_0x434597(0x1a6)](([_0x2c98b8,_0x411618])=>_0x411618[_0x434597(0x1ae)])[_0x434597(0x1af)](([_0x13c8fa,_0x44756a])=>_0x13c8fa)};}}function a4_0x2176(_0x5bfa4e,_0x19e98a){const _0x299f14=a4_0x1a38();return a4_0x2176=function(_0x1ada2c,_0x5023f5){_0x1ada2c=_0x1ada2c-0x184;let _0x1a38c1=_0x299f14[_0x1ada2c];return _0x1a38c1;},a4_0x2176(_0x5bfa4e,_0x19e98a);}module['exports']=new TopicManager();