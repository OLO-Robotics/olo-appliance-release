function a4_0x5810(_0x565e20,_0x3bb6a4){const _0x25f069=a4_0x1930();return a4_0x5810=function(_0x34a883,_0x33295f){_0x34a883=_0x34a883-0x1e4;let _0x193019=_0x25f069[_0x34a883];return _0x193019;},a4_0x5810(_0x565e20,_0x3bb6a4);}const a4_0x242db0=a4_0x5810;(function(_0x121a89,_0x197892){const _0x560022=a4_0x5810,_0x3dc426=_0x121a89();while(!![]){try{const _0x542dca=parseInt(_0x560022(0x246))/0x1*(-parseInt(_0x560022(0x204))/0x2)+parseInt(_0x560022(0x21c))/0x3+parseInt(_0x560022(0x221))/0x4*(parseInt(_0x560022(0x214))/0x5)+-parseInt(_0x560022(0x226))/0x6*(parseInt(_0x560022(0x1e8))/0x7)+parseInt(_0x560022(0x233))/0x8+-parseInt(_0x560022(0x20e))/0x9+parseInt(_0x560022(0x207))/0xa;if(_0x542dca===_0x197892)break;else _0x3dc426['push'](_0x3dc426['shift']());}catch(_0x1b5341){_0x3dc426['push'](_0x3dc426['shift']());}}}(a4_0x1930,0x7716e));function a4_0x1930(){const _0x540350=['Image','estimateTopicSize','now','[TopicManager]\x20Loaded\x20configuration:','large_data_throttled','replace','strategiesConfig','get','1875616NrFPrx','name','discoverTopics','4507460ZtlpQA','depth_points','pattern_configured','[TopicManager]\x20Starting\x20topic\x20discovery...','LaserScan','throttle','webrtc','3191499qYxIfE','webrtc_skip','forward','\x20topics','lastMessageTimes','isCameraTopic','1105445fhahqM','throttle_skip','from','entries','set','compressed','[TopicManager]\x20Found\x20','maxFrequency','2152503aoTwGB','apply','defaultLargeDataStrategy','log','length','12kKYDkj','topics','size','exports','map','2117106BZisEh','websocket','[TopicManager]\x20Discovering\x20new\x20topic\x20at\x20runtime:\x20','some','unknown','user_configured','throttleFrequencies','sensor_msgs/msg/Image','topicStrategies','cloud','getManagedTopics','topic','topicHandling','2412368UpNFgA','getTopics','getTopicStrategy','forEach','toString','sensor_msgs/msg/CompressedImage','constructor','points','config','(((.+)+)+)+$','scan','[TopicManager]\x20Strategies:','shouldUseWebRTC','image_raw','strategy','isLargeDataTopic','type','search','includes','1gSyMAO','analyzeTopicStrategy','error','sensor_msgs/msg/PointCloud2','estimatedSize','point','isLargeData','split','image_throttled','parseStrategyConfig','7anrQld','video_webrtc_streaming','strategies','types','sensor_msgs/msg/LaserScan','shouldThrottle','discoveryInProgress','laser_scan_throttled','determineTopicStrategy','reason','PointCloud2','largeDataThreshold','point_cloud','handleMessage','[TopicManager]\x20Initialised','[TopicManager]\x20Topic\x20discovery\x20failed:','webrtc_only','filter','normal_size','image'];a4_0x1930=function(){return _0x540350;};return a4_0x1930();}const a4_0x33295f=(function(){let _0x446fbc=!![];return function(_0x5a07b4,_0x4c6b36){const _0x5e758a=_0x446fbc?function(){const _0x3f53f5=a4_0x5810;if(_0x4c6b36){const _0x3d220a=_0x4c6b36[_0x3f53f5(0x21d)](_0x5a07b4,arguments);return _0x4c6b36=null,_0x3d220a;}}:function(){};return _0x446fbc=![],_0x5e758a;};}()),a4_0x34a883=a4_0x33295f(this,function(){const _0x357e22=a4_0x5810;return a4_0x34a883[_0x357e22(0x237)]()[_0x357e22(0x244)](_0x357e22(0x23c))[_0x357e22(0x237)]()[_0x357e22(0x239)](a4_0x34a883)[_0x357e22(0x244)]('(((.+)+)+)+$');});a4_0x34a883();const {execSync}=require('child_process');class TopicManager{constructor(){const _0x195598=a4_0x5810;this['topicStrategies']=new Map(),this[_0x195598(0x212)]=new Map(),this['discoveryInProgress']=![],this[_0x195598(0x23b)]={'largeDataThreshold':0x64*0x400,'defaultLargeDataStrategy':'webrtc_only','throttleFrequencies':{'sensor_msgs/msg/PointCloud2':0x5,'sensor_msgs/msg/LaserScan':0xf},'strategiesConfig':{}},console[_0x195598(0x21f)](_0x195598(0x1f6));}['loadConfig'](_0x23a6de){const _0x388285=a4_0x5810;if(_0x23a6de[_0x388285(0x232)]){const _0x74ff0f=_0x23a6de['topicHandling'];_0x74ff0f[_0x388285(0x1f3)]&&(this[_0x388285(0x23b)][_0x388285(0x1f3)]=_0x74ff0f['largeDataThreshold']),_0x74ff0f[_0x388285(0x21e)]&&(this[_0x388285(0x23b)][_0x388285(0x21e)]=_0x74ff0f[_0x388285(0x21e)]),_0x74ff0f[_0x388285(0x1ea)]&&(this[_0x388285(0x23b)][_0x388285(0x202)]={..._0x74ff0f['strategies']}),_0x74ff0f['throttleFrequencies']&&(this[_0x388285(0x23b)][_0x388285(0x22c)]={...this[_0x388285(0x23b)][_0x388285(0x22c)],..._0x74ff0f[_0x388285(0x22c)]}),console[_0x388285(0x21f)](_0x388285(0x1ff),this['config']);}}async[a4_0x242db0(0x206)](_0x31b696){const _0x390202=a4_0x242db0;if(this[_0x390202(0x1ee)]||!_0x31b696)return;this['discoveryInProgress']=!![],console[_0x390202(0x21f)](_0x390202(0x20a));try{await new Promise((_0x380825,_0x3996de)=>{const _0x536f80=_0x390202;_0x31b696[_0x536f80(0x234)](_0x1ec638=>{const _0x4f7c9b=_0x536f80,_0x107863=_0x1ec638[_0x4f7c9b(0x222)][_0x4f7c9b(0x225)]((_0x4f9bac,_0x4cb989)=>({'name':_0x4f9bac,'type':_0x1ec638[_0x4f7c9b(0x1eb)][_0x4cb989]}));console['log'](_0x4f7c9b(0x21a)+_0x107863[_0x4f7c9b(0x220)]+_0x4f7c9b(0x211));for(const _0x53e6a3 of _0x107863){this[_0x4f7c9b(0x247)](_0x53e6a3);}console[_0x4f7c9b(0x21f)]('[TopicManager]\x20Topic\x20discovery\x20completed'),console[_0x4f7c9b(0x21f)](_0x4f7c9b(0x23e),Array['from'](this[_0x4f7c9b(0x22e)][_0x4f7c9b(0x217)]())),_0x380825();},_0x153d87=>{const _0x298a4a=_0x536f80;console[_0x298a4a(0x248)]('[TopicManager]\x20Error\x20getting\x20topics:',_0x153d87),_0x3996de(_0x153d87);});});}catch(_0x3b1467){console[_0x390202(0x248)](_0x390202(0x1f7),_0x3b1467);}finally{this[_0x390202(0x1ee)]=![];}}[a4_0x242db0(0x247)](_0xdfcffa){const _0x31ddd3=a4_0x242db0,_0x220b23=this[_0x31ddd3(0x1f0)](_0xdfcffa);this[_0x31ddd3(0x22e)]['set'](_0xdfcffa['name'],{'type':_0xdfcffa['type'],'strategy':_0x220b23[_0x31ddd3(0x243)],'reason':_0x220b23[_0x31ddd3(0x1f1)],'maxFrequency':_0x220b23[_0x31ddd3(0x21b)],'isLargeData':_0x220b23[_0x31ddd3(0x1e4)],'estimatedSize':_0x220b23[_0x31ddd3(0x24a)]}),console[_0x31ddd3(0x21f)]('[TopicManager]\x20Topic\x20'+_0xdfcffa[_0x31ddd3(0x205)]+':\x20'+_0x220b23[_0x31ddd3(0x243)]+'\x20('+_0x220b23[_0x31ddd3(0x1f1)]+')');}['determineTopicStrategy'](_0x5ac532){const _0x3b82dd=a4_0x242db0;if(this[_0x3b82dd(0x23b)]['strategiesConfig'][_0x5ac532['name']]){const _0x2bf0d0=this['config'][_0x3b82dd(0x202)][_0x5ac532[_0x3b82dd(0x205)]];return this[_0x3b82dd(0x1e7)](_0x2bf0d0,_0x3b82dd(0x22b));}for(const [_0x1b2905,_0x1631ad]of Object['entries'](this[_0x3b82dd(0x23b)][_0x3b82dd(0x202)])){if(_0x5ac532[_0x3b82dd(0x205)]['includes'](_0x1b2905[_0x3b82dd(0x201)]('/','')))return this[_0x3b82dd(0x1e7)](_0x1631ad,_0x3b82dd(0x209));}if(this[_0x3b82dd(0x213)](_0x5ac532[_0x3b82dd(0x205)],_0x5ac532[_0x3b82dd(0x243)])){const _0x4efad6=this[_0x3b82dd(0x1fd)](_0x5ac532[_0x3b82dd(0x205)],_0x5ac532[_0x3b82dd(0x243)]);return{'type':'webrtc','reason':_0x3b82dd(0x1e9),'isLargeData':!![],'estimatedSize':_0x4efad6,'maxFrequency':null};}const _0x279a14=this[_0x3b82dd(0x242)](_0x5ac532[_0x3b82dd(0x205)],_0x5ac532['type']),_0x162b47=this[_0x3b82dd(0x1fd)](_0x5ac532[_0x3b82dd(0x205)],_0x5ac532[_0x3b82dd(0x243)]);if(_0x279a14||_0x162b47>this['config'][_0x3b82dd(0x1f3)]){let _0x2f0066=this['config']['throttleFrequencies'][_0x5ac532[_0x3b82dd(0x243)]]||0xa,_0x3fc472=_0x3b82dd(0x200);if(_0x5ac532[_0x3b82dd(0x243)][_0x3b82dd(0x245)](_0x3b82dd(0x1f2))||_0x5ac532[_0x3b82dd(0x205)][_0x3b82dd(0x245)](_0x3b82dd(0x23a)))_0x2f0066=this[_0x3b82dd(0x23b)][_0x3b82dd(0x22c)][_0x5ac532[_0x3b82dd(0x243)]]||0x5,_0x3fc472='point_cloud_throttled';else{if(_0x5ac532[_0x3b82dd(0x243)][_0x3b82dd(0x245)](_0x3b82dd(0x20b))||_0x5ac532[_0x3b82dd(0x205)][_0x3b82dd(0x245)](_0x3b82dd(0x23d)))_0x2f0066=this[_0x3b82dd(0x23b)][_0x3b82dd(0x22c)][_0x5ac532['type']]||0xf,_0x3fc472=_0x3b82dd(0x1ef);else _0x5ac532['type']['includes'](_0x3b82dd(0x1fc))&&(_0x2f0066=this[_0x3b82dd(0x23b)]['throttleFrequencies'][_0x5ac532[_0x3b82dd(0x243)]]||0xa,_0x3fc472=_0x3b82dd(0x1e6));}return{'type':_0x3b82dd(0x20c),'reason':_0x3fc472,'isLargeData':!![],'estimatedSize':_0x162b47,'maxFrequency':_0x2f0066};}return{'type':_0x3b82dd(0x227),'reason':_0x3b82dd(0x1fa),'isLargeData':![],'estimatedSize':_0x162b47,'maxFrequency':null};}['parseStrategyConfig'](_0x3b831c,_0xe4e10e){const _0x13ccd7=a4_0x242db0;if(_0x3b831c[_0x13ccd7(0x245)](':')){const [_0x17f376,_0x3d0933]=_0x3b831c[_0x13ccd7(0x1e5)](':');return{'type':_0x17f376,'reason':_0xe4e10e,'isLargeData':!![],'maxFrequency':_0x17f376===_0x13ccd7(0x20c)?parseFloat(_0x3d0933):null,'estimatedSize':this[_0x13ccd7(0x23b)][_0x13ccd7(0x1f3)]+0x1};}return{'type':_0x3b831c,'reason':_0xe4e10e,'isLargeData':_0x3b831c!==_0x13ccd7(0x227),'maxFrequency':null,'estimatedSize':this[_0x13ccd7(0x23b)][_0x13ccd7(0x1f3)]+0x1};}[a4_0x242db0(0x242)](_0x306258,_0x3bbdd2){const _0x81f7be=a4_0x242db0,_0x7d0065=[/point_cloud/i,/points/i,/depth.*image/i,/.*pointcloud/i,/laser.*scan/i,/scan/i,/camera.*image_raw/i,/lidar/i],_0x2f36ff=[_0x81f7be(0x249),_0x81f7be(0x22d),'sensor_msgs/msg/LaserScan',_0x81f7be(0x238)];return _0x7d0065[_0x81f7be(0x229)](_0x3f2942=>_0x3f2942['test'](_0x306258))||_0x2f36ff[_0x81f7be(0x245)](_0x3bbdd2);}[a4_0x242db0(0x213)](_0x466869,_0x2f0a48=''){const _0x4b7905=a4_0x242db0,_0x3d87fe=[_0x4b7905(0x22d),_0x4b7905(0x238)];if(_0x3d87fe[_0x4b7905(0x245)](_0x2f0a48))return!_0x466869[_0x4b7905(0x245)](_0x4b7905(0x23a))&&!_0x466869['includes'](_0x4b7905(0x1f4))&&!_0x466869[_0x4b7905(0x245)](_0x4b7905(0x208));return(_0x466869[_0x4b7905(0x245)](_0x4b7905(0x1fb))||_0x466869[_0x4b7905(0x245)](_0x4b7905(0x219)))&&!_0x466869[_0x4b7905(0x245)](_0x4b7905(0x23a))&&!_0x466869[_0x4b7905(0x245)](_0x4b7905(0x1f4))&&!_0x466869[_0x4b7905(0x245)](_0x4b7905(0x208));}[a4_0x242db0(0x1fd)](_0x6766ae,_0x22f12c){const _0x3bc2fc=a4_0x242db0,_0x4d7c96={'sensor_msgs/msg/PointCloud2':0x1f4*0x400,'sensor_msgs/msg/Image':0x12c*0x400,'sensor_msgs/msg/CompressedImage':0x32*0x400,'sensor_msgs/msg/LaserScan':0x14*0x400};if(_0x4d7c96[_0x22f12c])return _0x4d7c96[_0x22f12c];if(_0x6766ae[_0x3bc2fc(0x245)](_0x3bc2fc(0x24b))||_0x6766ae['includes'](_0x3bc2fc(0x22f)))return 0x190*0x400;if(_0x6766ae[_0x3bc2fc(0x245)](_0x3bc2fc(0x240)))return 0x12c*0x400;if(_0x6766ae[_0x3bc2fc(0x245)](_0x3bc2fc(0x219)))return 0x32*0x400;return 0x400;}[a4_0x242db0(0x1f5)](_0x20c281){const _0x557cdb=a4_0x242db0;let _0x10dbc9=this['topicStrategies'][_0x557cdb(0x203)](_0x20c281[_0x557cdb(0x231)]);if(!_0x10dbc9){console['log'](_0x557cdb(0x228)+_0x20c281[_0x557cdb(0x231)]);let _0x30bd17=_0x557cdb(0x22a);if(_0x20c281[_0x557cdb(0x231)]['includes'](_0x557cdb(0x1fb))&&_0x20c281[_0x557cdb(0x231)][_0x557cdb(0x245)](_0x557cdb(0x219)))_0x30bd17='sensor_msgs/msg/CompressedImage';else{if(_0x20c281['topic'][_0x557cdb(0x245)](_0x557cdb(0x1fb)))_0x30bd17=_0x557cdb(0x22d);else{if(_0x20c281['topic'][_0x557cdb(0x245)]('point')||_0x20c281[_0x557cdb(0x231)][_0x557cdb(0x245)](_0x557cdb(0x22f)))_0x30bd17=_0x557cdb(0x249);else _0x20c281[_0x557cdb(0x231)][_0x557cdb(0x245)]('scan')&&(_0x30bd17=_0x557cdb(0x1ec));}}const _0x30af73={'name':_0x20c281['topic'],'type':_0x30bd17};this[_0x557cdb(0x247)](_0x30af73),_0x10dbc9=this[_0x557cdb(0x22e)][_0x557cdb(0x203)](_0x20c281[_0x557cdb(0x231)]);}if(!_0x10dbc9)return{'action':_0x557cdb(0x210),'message':_0x20c281};switch(_0x10dbc9[_0x557cdb(0x241)]){case _0x557cdb(0x20c):return this[_0x557cdb(0x1ed)](_0x20c281[_0x557cdb(0x231)],_0x10dbc9['maxFrequency'])?{'action':_0x557cdb(0x210),'message':_0x20c281}:{'action':_0x557cdb(0x215)};case _0x557cdb(0x20d):return{'action':_0x557cdb(0x20f)};case _0x557cdb(0x227):default:return{'action':'forward','message':_0x20c281};}}[a4_0x242db0(0x1ed)](_0x13f179,_0x123a0e){const _0xd28325=a4_0x242db0;if(!_0x123a0e)return!![];const _0x3abced=Date[_0xd28325(0x1fe)](),_0x2ab225=0x3e8/_0x123a0e;!this['lastMessageTimes']['has'](_0x13f179)&&this['lastMessageTimes'][_0xd28325(0x218)](_0x13f179,0x0);const _0x521b74=this[_0xd28325(0x212)][_0xd28325(0x203)](_0x13f179),_0xdb5f7f=_0x3abced-_0x521b74;if(_0xdb5f7f>=_0x2ab225)return this[_0xd28325(0x212)]['set'](_0x13f179,_0x3abced),!![];return![];}[a4_0x242db0(0x235)](_0x5746f9){const _0x248be2=a4_0x242db0;return this[_0x248be2(0x22e)][_0x248be2(0x203)](_0x5746f9);}[a4_0x242db0(0x230)](){const _0x44d0fe=a4_0x242db0;return Array[_0x44d0fe(0x216)](this[_0x44d0fe(0x22e)][_0x44d0fe(0x217)]())[_0x44d0fe(0x225)](([_0x2907d4,_0x2bd043])=>({'topic':_0x2907d4,..._0x2bd043}));}[a4_0x242db0(0x23f)](_0x1fd644){const _0x7f18df=a4_0x242db0,_0x4b0df3=this[_0x7f18df(0x22e)][_0x7f18df(0x203)](_0x1fd644);return _0x4b0df3?.['strategy']===_0x7f18df(0x1f8);}['getStatistics'](){const _0x48aaf7=a4_0x242db0,_0x521b97={};return this[_0x48aaf7(0x22e)][_0x48aaf7(0x236)]((_0x51ede9,_0x2a6389)=>{const _0x23e96a=_0x48aaf7;!_0x521b97[_0x51ede9[_0x23e96a(0x241)]]&&(_0x521b97[_0x51ede9[_0x23e96a(0x241)]]=0x0),_0x521b97[_0x51ede9[_0x23e96a(0x241)]]++;}),{'totalTopics':this['topicStrategies'][_0x48aaf7(0x223)],'strategies':_0x521b97,'largeDataTopics':Array['from'](this[_0x48aaf7(0x22e)]['entries']())[_0x48aaf7(0x1f9)](([_0x3d5ff7,_0x174241])=>_0x174241[_0x48aaf7(0x1e4)])[_0x48aaf7(0x225)](([_0x222d3b,_0x3d4820])=>_0x222d3b)};}}module[a4_0x242db0(0x224)]=new TopicManager();