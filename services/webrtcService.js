function a6_0x639d(){const _0x1ddf0e=['[WebRTC\x20Appliance]\x20Error\x20updating\x20TURN\x20credentials:','message','video','has','\x20sessions)','[WebRTC\x20Appliance]\x20Failed\x20to\x20process\x20frame\x20for\x20topic\x20','subscribe','onconnectionstatechange','\x20connection\x20state:\x20','[WebRTC\x20Appliance]\x20Error\x20initializing\x20session\x20','add','getContext','msg','parse','1281798FmPmaR','751188QVCGku','center','/9j/','initialize','protocol','color','[WebRTC\x20Appliance]\x20Error\x20during\x20session\x20cleanup:\x20','[WebRTC\x20Appliance]\x20No\x20data\x20received\x20on\x20','12px\x20monospace','[WebRTC\x20Appliance]\x20Trying\x20subscription\x20with\x20type:\x20','processDepthImage','184xniWyb','peerConnection','[WebRTC\x20Appliance]\x20Processing\x20image\x20data\x20for\x20topic\x20','257301iJSwYb','webrtc_ice_candidate','subscribeToROSTopic','drawLoadingPattern','[WebRTC\x20Appliance]\x20Error\x20processing\x20ROS\x20message:','publish','./DepthImageProcessor','395378CPdnDu','[WebRTC\x20Appliance]\x20Service\x20initialized','webrtc_stop_session','\x20for\x20topic:\x20','constructor','#666','#00ffff','webrtc','arc','connectionState','from','toLocaleTimeString','stun:stun1.l.google.com:19302','stun:stun.l.google.com:19302','exports','fillStyle','sendFrameToVideoSource','textAlign','fillText','session_id','data','ðŸ“¹\x20Color','getSharedVideoSources','font','releaseSharedVideoSource','round','rtcConfig','keys','getImageData','cleanupSession','compressedDepth','737644UsKQPv','random','[WebRTC\x20Appliance]\x20Using\x20fallback\x20STUN\x20servers',',\x20size:\x20','depth','[WebRTC\x20Appliance]\x20Stopping\x20all\x20active\x20sessions','includes','setRemoteDescription','stringify','readyState','Waiting\x20for\x20ROS\x20image\x20data...','getIceServers','ðŸ”\x20Depth','base64','now','pop','getOrCreateSharedVideoSource','function','12px\x20Arial','#ffffff','warn','webrtc_offer','[WebRTC\x20Appliance]\x20Active\x20sessions\x20for\x20topic\x20','[WebRTC\x20Appliance]\x20No\x20more\x20sessions\x20for\x20topic\x20','sensor_msgs/msg/Image','[WebRTC\x20Appliance]\x20Created\x20video\x20track\x20for\x20session\x20','onicecandidate','[WebRTC\x20Appliance]\x20Updating\x20TURN\x20credentials...','16px\x20Arial','onFrame','[WebRTC\x20Appliance]\x20Released\x20shared\x20video\x20source\x20for\x20topic\x20','topic','wrtc','\x20bytes','search',',\x20converting\x20to\x20base64...','startsWith','rosbridgeWs','fillRect','../config','rgba(0,\x20170,\x20255,\x20','fill','split','videoSource','push','[WebRTC\x20Appliance]\x20Trying\x20alternative\x20topic:\x20','\x20connection\x20closed,\x20cleaning\x20up','\x20successfully\x20connected!','[WebRTC\x20Appliance]\x20Session\x20not\x20found\x20for\x20ICE\x20candidate:\x20','\x20connection\x20failed,\x20stopping\x20session','delete','[WebRTC\x20Appliance]\x20Session\x20not\x20found:\x20','sharp','[WebRTC\x20Appliance]\x20Successfully\x20receiving\x20data\x20on\x20','updateCanvasWithImageData','failed','activeSessions','toString','putImageData','[WebRTC\x20Appliance]\x20Error\x20processing\x20alternative\x20topic\x20message:','rgba(0,\x200,\x200,\x200.7)','[WebRTC\x20Appliance]\x20Error\x20adding\x20ICE\x20candidate\x20for\x20session\x20','compressed','log','[WebRTC\x20Appliance]\x20Set\x20local\x20description\x20(answer)','stopAllSessions','ðŸ”\x20Processing\x20depth...','candidate','\x20image,\x20trying\x20message\x20types:','[WebRTC\x20Appliance]\x20Attempted\x20to\x20stop\x20non-existent\x20session:\x20','[WebRTC\x20Appliance]\x20Reusing\x20shared\x20video\x20source\x20for\x20topic\x20','get','frameCount','/compressed','[WebRTC\x20Appliance]\x20Session\x20','addIceCandidate','updateTurnCredentials','(((.+)+)+)+$','handleMessage','\x20for\x20topic\x20','[WebRTC\x20Appliance]\x20Generated\x20ICE\x20candidate\x20for\x20session\x20','rosSubscriber','stopSession','#888','addTrack','send','stop','sharedVideoSources','[WebRTC\x20Appliance]\x20Answer\x20sent\x20for\x20session\x20','[WebRTC\x20Appliance]\x20Handling\x20message:\x20','topicSessions','sensor_msgs/msg/CompressedImage','webrtc_init_session','sensor_msgs/Image','3168120NsaNYL','framerate','24px\x20Arial','\x20initialized\x20successfully','[WebRTC\x20Appliance]\x20Unknown\x20operation:\x20','canvas','[WebRTC\x20Appliance]\x20Error\x20sending\x20frame\x20to\x20video\x20source:','apply','[WebRTC\x20Appliance]\x20Initializing\x20session\x20','[WebRTC\x20Appliance]\x20Processing\x20offer\x20for\x20session\x20','set','\x20with\x20message\x20type\x20','max','handleIceCandidate','setLocalDescription','[WebRTC\x20Appliance]\x20Creating\x20new\x20shared\x20video\x20source\x20for\x20topic\x20','unsubscribe','convertRGBAtoI420','sensor_msgs/CompressedImage','[WebRTC\x20Appliance]\x20Error\x20handling\x20offer\x20for\x20session\x20','height','unknown','depthProcessor','ðŸ“¹\x20Processing\x20video...','min','width','error','replace','addEventListener','[WebRTC\x20Appliance]\x20TURN\x20credentials\x20updated\x20successfully','[WebRTC\x20Appliance]\x20Set\x20remote\x20description\x20(offer)','[WebRTC\x20Appliance]\x20Depth\x20processing\x20issue.\x20Alternative\x20topics:\x20','[WebRTC\x20Appliance]\x20ICE\x20candidate\x20added\x20for\x20session\x20','165270pPNtNO','serverWs','OPEN',',\x20cleaning\x20up\x20shared\x20resources','sin','/image_raw','3mrkHsX','iceServers','isDepthTopic','Topic:\x20','handleOffer','videoTrack','ðŸ¤–\x20Robot\x20Camera','close'];a6_0x639d=function(){return _0x1ddf0e;};return a6_0x639d();}const a6_0xd28b8b=a6_0x5494;(function(_0x57a9d9,_0x29d260){const _0x474807=a6_0x5494,_0x5ae924=_0x57a9d9();while(!![]){try{const _0x4d8f93=parseInt(_0x474807(0x1cd))/0x1*(-parseInt(_0x474807(0x129))/0x2)+-parseInt(_0x474807(0x1c7))/0x3+-parseInt(_0x474807(0x148))/0x4+parseInt(_0x474807(0x1a6))/0x5+parseInt(_0x474807(0x114))/0x6+-parseInt(_0x474807(0x113))/0x7+parseInt(_0x474807(0x11f))/0x8*(parseInt(_0x474807(0x122))/0x9);if(_0x4d8f93===_0x29d260)break;else _0x5ae924['push'](_0x5ae924['shift']());}catch(_0x2d9e9e){_0x5ae924['push'](_0x5ae924['shift']());}}}(a6_0x639d,0x61d2f));const a6_0x1b19e5=(function(){let _0x2973e4=!![];return function(_0x5f1058,_0xa9a8a0){const _0x4b2c1b=_0x2973e4?function(){const _0x4506f7=a6_0x5494;if(_0xa9a8a0){const _0x170e0d=_0xa9a8a0[_0x4506f7(0x1ad)](_0x5f1058,arguments);return _0xa9a8a0=null,_0x170e0d;}}:function(){};return _0x2973e4=![],_0x4b2c1b;};}()),a6_0x39a622=a6_0x1b19e5(this,function(){const _0x4eecf9=a6_0x5494;return a6_0x39a622[_0x4eecf9(0x181)]()[_0x4eecf9(0x16a)](_0x4eecf9(0x195))[_0x4eecf9(0x181)]()[_0x4eecf9(0x12d)](a6_0x39a622)[_0x4eecf9(0x16a)](_0x4eecf9(0x195));});a6_0x39a622();const {RTCPeerConnection,RTCSessionDescription,RTCIceCandidate,nonstandard}=require(a6_0xd28b8b(0x168)),sharp=require(a6_0xd28b8b(0x17c)),config=require(a6_0xd28b8b(0x16f)),DepthImageProcessor=require(a6_0xd28b8b(0x128)),turnCredentialsService=require('./turnCredentialsService');class ApplianceWebRTCService{constructor(){const _0x49b228=a6_0xd28b8b;this[_0x49b228(0x180)]=new Map(),this[_0x49b228(0x1a2)]=new Map(),this[_0x49b228(0x19f)]=new Map(),this['rosbridgeWs']=null,this['serverWs']=null,this[_0x49b228(0x1bc)]=new DepthImageProcessor(),this[_0x49b228(0x143)]={'iceServers':[{'urls':_0x49b228(0x136)},{'urls':_0x49b228(0x135)}]};}['initialize'](_0x45e18b,_0x1e6dde){const _0x26cafe=a6_0xd28b8b;this[_0x26cafe(0x16d)]=_0x45e18b,this['serverWs']=_0x1e6dde,turnCredentialsService[_0x26cafe(0x117)](config['serverUrl']),this[_0x26cafe(0x194)](),console[_0x26cafe(0x187)](_0x26cafe(0x12a));}async[a6_0xd28b8b(0x194)](){const _0x3e8820=a6_0xd28b8b;try{console['log'](_0x3e8820(0x163));const _0xfa3781=await turnCredentialsService[_0x3e8820(0x153)]();this[_0x3e8820(0x143)][_0x3e8820(0x1ce)]=_0xfa3781,console[_0x3e8820(0x187)](_0x3e8820(0x1c3));}catch(_0x2ed90f){console[_0x3e8820(0x1c0)](_0x3e8820(0x1d5),_0x2ed90f),console[_0x3e8820(0x187)](_0x3e8820(0x14a));}}[a6_0xd28b8b(0x196)](_0x4b04ef){const _0x16a526=a6_0xd28b8b;if(!_0x4b04ef['op']||!_0x4b04ef['op'][_0x16a526(0x16c)]('webrtc_'))return![];console[_0x16a526(0x187)](_0x16a526(0x1a1)+_0x4b04ef['op']);switch(_0x4b04ef['op']){case _0x16a526(0x1a4):this['initializeSession'](_0x4b04ef[_0x16a526(0x13c)],_0x4b04ef[_0x16a526(0x167)]);return!![];case _0x16a526(0x15d):this[_0x16a526(0x1d1)](_0x4b04ef[_0x16a526(0x13c)],_0x4b04ef['offer']);return!![];case _0x16a526(0x123):this[_0x16a526(0x1b3)](_0x4b04ef['session_id'],_0x4b04ef[_0x16a526(0x18b)]);return!![];case _0x16a526(0x12b):this[_0x16a526(0x19a)](_0x4b04ef[_0x16a526(0x13c)]);return!![];default:console[_0x16a526(0x15c)](_0x16a526(0x1aa)+_0x4b04ef['op']);return![];}}[a6_0xd28b8b(0x158)](_0x201529){const _0x356fc0=a6_0xd28b8b;if(this[_0x356fc0(0x19f)][_0x356fc0(0x1d8)](_0x201529)){const _0x23c4dc=this[_0x356fc0(0x19f)][_0x356fc0(0x18f)](_0x201529);return _0x23c4dc[_0x356fc0(0x190)]++,console[_0x356fc0(0x187)](_0x356fc0(0x18e)+_0x201529+'\x20('+_0x23c4dc[_0x356fc0(0x190)]+_0x356fc0(0x1d9)),_0x23c4dc;}console[_0x356fc0(0x187)](_0x356fc0(0x1b5)+_0x201529);const {createCanvas:_0xa35925}=require(_0x356fc0(0x1ab)),_0x26363e=_0xa35925(config[_0x356fc0(0x130)][_0x356fc0(0x1d7)][_0x356fc0(0x1bf)],config[_0x356fc0(0x130)][_0x356fc0(0x1d7)][_0x356fc0(0x1ba)]),_0x121513=_0x26363e[_0x356fc0(0x1e0)]('2d');this[_0x356fc0(0x125)](_0x26363e,_0x121513);const {RTCVideoSource:_0x58facd}=nonstandard,_0x31d1b5=new _0x58facd();let _0x5222a6=0x0;const _0x160393=0x3e8/config['webrtc']['video'][_0x356fc0(0x1a7)],_0x52def0=this[_0x356fc0(0x124)](_0x201529,_0x415b1c=>{const _0x133a9f=_0x356fc0,_0x8f22c3=Date['now']();_0x8f22c3-_0x5222a6>=_0x160393&&(_0x5222a6=_0x8f22c3,this[_0x133a9f(0x17e)](_0x26363e,_0x121513,_0x415b1c,_0x201529,_0x31d1b5));}),_0x35cce1={'videoSource':_0x31d1b5,'canvas':_0x26363e,'rosSubscriber':_0x52def0,'frameCount':0x1,'topic':_0x201529};return this[_0x356fc0(0x19f)][_0x356fc0(0x1b0)](_0x201529,_0x35cce1),_0x35cce1;}['releaseSharedVideoSource'](_0x1b3c82){const _0x216569=a6_0xd28b8b,_0x1613b5=this[_0x216569(0x19f)][_0x216569(0x18f)](_0x1b3c82);if(!_0x1613b5)return;_0x1613b5['frameCount']--,console[_0x216569(0x187)](_0x216569(0x166)+_0x1b3c82+'\x20('+_0x1613b5['frameCount']+'\x20sessions\x20remaining)'),_0x1613b5[_0x216569(0x190)]<=0x0&&(console[_0x216569(0x187)](_0x216569(0x15f)+_0x1b3c82+_0x216569(0x1ca)),_0x1613b5[_0x216569(0x173)]&&(_0x1613b5[_0x216569(0x173)]=null),_0x1613b5[_0x216569(0x199)]&&_0x1613b5[_0x216569(0x199)][_0x216569(0x1b6)](),this[_0x216569(0x19f)][_0x216569(0x17a)](_0x1b3c82));}async['initializeSession'](_0x55dcf0,_0x59dfec){const _0x536d44=a6_0xd28b8b;try{console[_0x536d44(0x187)](_0x536d44(0x1ae)+_0x55dcf0+_0x536d44(0x197)+_0x59dfec);const _0xe7cf46=this[_0x536d44(0x158)](_0x59dfec),_0x3335cb=new RTCPeerConnection(this['rtcConfig']),_0x134cf3=_0xe7cf46[_0x536d44(0x173)]['createTrack']({'width':config[_0x536d44(0x130)][_0x536d44(0x1d7)][_0x536d44(0x1bf)],'height':config[_0x536d44(0x130)][_0x536d44(0x1d7)]['height'],'framerate':config[_0x536d44(0x130)][_0x536d44(0x1d7)]['framerate']});console[_0x536d44(0x187)](_0x536d44(0x161)+_0x55dcf0);const {MediaStream:_0x1bdfb0}=require(_0x536d44(0x168)),_0x43c62d=new _0x1bdfb0([_0x134cf3]);_0x3335cb[_0x536d44(0x19c)](_0x134cf3,_0x43c62d),this['sendFrameToVideoSource'](_0xe7cf46['videoSource'],_0xe7cf46[_0x536d44(0x1ab)]),_0x3335cb[_0x536d44(0x162)]=_0x271380=>{const _0x2b1460=_0x536d44;if(_0x271380[_0x2b1460(0x18b)]&&this[_0x2b1460(0x1c8)])console[_0x2b1460(0x187)](_0x2b1460(0x198)+_0x55dcf0+':',{'type':_0x271380[_0x2b1460(0x18b)]['type'],'protocol':_0x271380[_0x2b1460(0x18b)][_0x2b1460(0x118)],'address':_0x271380['candidate']['address'],'port':_0x271380[_0x2b1460(0x18b)]['port']}),this['serverWs'][_0x2b1460(0x19d)](JSON[_0x2b1460(0x150)]({'op':'webrtc_ice_candidate','session_id':_0x55dcf0,'candidate':_0x271380[_0x2b1460(0x18b)]}));else!_0x271380[_0x2b1460(0x18b)]&&console[_0x2b1460(0x187)]('[WebRTC\x20Appliance]\x20ICE\x20gathering\x20complete\x20for\x20session\x20'+_0x55dcf0);},_0x3335cb[_0x536d44(0x1dc)]=()=>{const _0xb534ef=_0x536d44;console[_0xb534ef(0x187)](_0xb534ef(0x192)+_0x55dcf0+_0xb534ef(0x1dd)+_0x3335cb[_0xb534ef(0x132)]);if(_0x3335cb['connectionState']==='connected')console[_0xb534ef(0x187)](_0xb534ef(0x192)+_0x55dcf0+_0xb534ef(0x177));else{if(_0x3335cb['connectionState']===_0xb534ef(0x17f))console[_0xb534ef(0x187)](_0xb534ef(0x192)+_0x55dcf0+_0xb534ef(0x179)),this[_0xb534ef(0x19a)](_0x55dcf0);else _0x3335cb[_0xb534ef(0x132)]==='closed'&&(console[_0xb534ef(0x187)](_0xb534ef(0x192)+_0x55dcf0+_0xb534ef(0x176)),this['cleanupSession'](_0x55dcf0));}},this[_0x536d44(0x180)][_0x536d44(0x1b0)](_0x55dcf0,{'peerConnection':_0x3335cb,'topic':_0x59dfec,'videoTrack':_0x134cf3,'mediaStream':_0x43c62d,'status':'initializing'}),!this['topicSessions'][_0x536d44(0x1d8)](_0x59dfec)&&this['topicSessions'][_0x536d44(0x1b0)](_0x59dfec,new Set()),this[_0x536d44(0x1a2)]['get'](_0x59dfec)[_0x536d44(0x1df)](_0x55dcf0),console[_0x536d44(0x187)](_0x536d44(0x192)+_0x55dcf0+_0x536d44(0x1a9)),console[_0x536d44(0x187)](_0x536d44(0x15e)+_0x59dfec+':\x20'+this[_0x536d44(0x1a2)]['get'](_0x59dfec)['size']);}catch(_0x21b999){console['error'](_0x536d44(0x1de)+_0x55dcf0+':',_0x21b999),this[_0x536d44(0x19a)](_0x55dcf0);}}async[a6_0xd28b8b(0x1d1)](_0x4c6da0,_0x355ee2){const _0x1f0eca=a6_0xd28b8b,_0x4ddcee=this[_0x1f0eca(0x180)][_0x1f0eca(0x18f)](_0x4c6da0);if(!_0x4ddcee){console[_0x1f0eca(0x1c0)](_0x1f0eca(0x17b)+_0x4c6da0);return;}try{console[_0x1f0eca(0x187)](_0x1f0eca(0x1af)+_0x4c6da0),await _0x4ddcee[_0x1f0eca(0x120)][_0x1f0eca(0x14f)](new RTCSessionDescription(_0x355ee2)),console['log'](_0x1f0eca(0x1c4));const _0x8d7ec1=await _0x4ddcee[_0x1f0eca(0x120)]['createAnswer']();console['log']('[WebRTC\x20Appliance]\x20Created\x20answer'),await _0x4ddcee[_0x1f0eca(0x120)][_0x1f0eca(0x1b4)](_0x8d7ec1),console[_0x1f0eca(0x187)](_0x1f0eca(0x188)),this[_0x1f0eca(0x1c8)]&&(this[_0x1f0eca(0x1c8)]['send'](JSON['stringify']({'op':'webrtc_answer','session_id':_0x4c6da0,'answer':_0x8d7ec1})),console[_0x1f0eca(0x187)](_0x1f0eca(0x1a0)+_0x4c6da0));}catch(_0x41d9d1){console[_0x1f0eca(0x1c0)](_0x1f0eca(0x1b9)+_0x4c6da0+':',_0x41d9d1),this[_0x1f0eca(0x19a)](_0x4c6da0);}}async[a6_0xd28b8b(0x1b3)](_0x2a6530,_0xe2a56a){const _0x407f07=a6_0xd28b8b,_0x5db630=this[_0x407f07(0x180)][_0x407f07(0x18f)](_0x2a6530);if(!_0x5db630){console[_0x407f07(0x1c0)](_0x407f07(0x178)+_0x2a6530);return;}try{await _0x5db630['peerConnection'][_0x407f07(0x193)](new RTCIceCandidate(_0xe2a56a)),console[_0x407f07(0x187)](_0x407f07(0x1c6)+_0x2a6530);}catch(_0x190a7a){console[_0x407f07(0x1c0)](_0x407f07(0x185)+_0x2a6530+':',_0x190a7a);}}[a6_0xd28b8b(0x124)](_0x3ec92b,_0xfe2bc2){const _0x37e7e3=a6_0xd28b8b;if(!this['rosbridgeWs']||this['rosbridgeWs'][_0x37e7e3(0x151)]!==this['rosbridgeWs']['OPEN'])return console[_0x37e7e3(0x1c0)]('[WebRTC\x20Appliance]\x20ROSBridge\x20not\x20connected'),null;console[_0x37e7e3(0x187)]('[WebRTC\x20Appliance]\x20Subscribing\x20to\x20ROS\x20topic:\x20'+_0x3ec92b);const _0x32e186=_0x3ec92b[_0x37e7e3(0x14e)]('depth'),_0x33854a=_0x3ec92b[_0x37e7e3(0x14e)](_0x37e7e3(0x186))||_0x3ec92b['includes'](_0x37e7e3(0x147));let _0x52ba18=[];_0x32e186?_0x33854a?_0x52ba18=[_0x37e7e3(0x1b8),_0x37e7e3(0x1a3),'compressed_depth_image_transport/CompressedDepthImage',_0x37e7e3(0x1a5)]:_0x52ba18=[_0x37e7e3(0x1a5),_0x37e7e3(0x160),_0x37e7e3(0x1b8)]:_0x52ba18=[_0x37e7e3(0x1b8),_0x37e7e3(0x1a3),_0x37e7e3(0x1a5)];console[_0x37e7e3(0x187)]('[WebRTC\x20Appliance]\x20Topic\x20'+_0x3ec92b+'\x20detected\x20as\x20'+(_0x32e186?_0x37e7e3(0x14c):_0x37e7e3(0x119))+_0x37e7e3(0x18c),_0x52ba18);const _0x497173=[];let _0x6e0e4=![];const _0x2b3440=_0x3fd62d=>{return _0x256e1a=>{const _0x28e1fa=a6_0x5494;try{const _0x4f26a7=JSON[_0x28e1fa(0x112)](_0x256e1a[_0x28e1fa(0x13d)]);_0x4f26a7['op']===_0x28e1fa(0x127)&&_0x4f26a7[_0x28e1fa(0x167)]===_0x3ec92b&&_0x4f26a7[_0x28e1fa(0x111)]&&(!_0x6e0e4&&(console[_0x28e1fa(0x187)](_0x28e1fa(0x17d)+_0x3ec92b+_0x28e1fa(0x1b1)+_0x3fd62d),_0x6e0e4=!![]),_0xfe2bc2(_0x4f26a7['msg']));}catch(_0x491226){console[_0x28e1fa(0x1c0)](_0x28e1fa(0x126),_0x491226);}};};for(const _0x143da2 of _0x52ba18){const _0x2a41c3={'op':_0x37e7e3(0x1db),'topic':_0x3ec92b,'type':_0x143da2};console[_0x37e7e3(0x187)](_0x37e7e3(0x11d)+_0x143da2),this['rosbridgeWs'][_0x37e7e3(0x19d)](JSON['stringify'](_0x2a41c3));const _0x361761=_0x2b3440(_0x143da2);this['rosbridgeWs'][_0x37e7e3(0x1c2)](_0x37e7e3(0x1d6),_0x361761),_0x497173[_0x37e7e3(0x174)]({'handler':_0x361761,'type':_0x143da2});}return _0x32e186&&_0x33854a&&setTimeout(()=>{const _0x4486cc=_0x37e7e3;if(!_0x6e0e4){console[_0x4486cc(0x187)](_0x4486cc(0x11b)+_0x3ec92b+',\x20trying\x20alternative\x20depth\x20topics');const _0x3f4810=_0x3ec92b[_0x4486cc(0x1c1)]('/compressedDepth','')['replace'](_0x4486cc(0x191),''),_0x36fcb8=[_0x3f4810+_0x4486cc(0x1cc),_0x3f4810+'/image',_0x3f4810];for(const _0x323c7f of _0x36fcb8){console[_0x4486cc(0x187)](_0x4486cc(0x175)+_0x323c7f);const _0x425dad={'op':_0x4486cc(0x1db),'topic':_0x323c7f,'type':_0x4486cc(0x1a5)};this['rosbridgeWs'][_0x4486cc(0x19d)](JSON['stringify'](_0x425dad));const _0x1fa4c6=_0x534427=>{const _0x3887c1=_0x4486cc;try{const _0x51c7ba=JSON[_0x3887c1(0x112)](_0x534427[_0x3887c1(0x13d)]);_0x51c7ba['op']===_0x3887c1(0x127)&&_0x51c7ba['topic']===_0x323c7f&&_0x51c7ba['msg']&&(console[_0x3887c1(0x187)]('[WebRTC\x20Appliance]\x20Got\x20data\x20from\x20alternative\x20topic\x20'+_0x323c7f+_0x3887c1(0x16b)),_0x51c7ba['msg']['data']&&!_0x51c7ba['msg'][_0x3887c1(0x13d)]['startsWith'](_0x3887c1(0x116))&&_0xfe2bc2(_0x51c7ba[_0x3887c1(0x111)]));}catch(_0x2cf6de){console[_0x3887c1(0x1c0)](_0x3887c1(0x183),_0x2cf6de);}};this[_0x4486cc(0x16d)][_0x4486cc(0x1c2)](_0x4486cc(0x1d6),_0x1fa4c6),_0x497173[_0x4486cc(0x174)]({'handler':_0x1fa4c6,'type':'sensor_msgs/Image','topic':_0x323c7f});}}},0xbb8),{'unsubscribe':()=>{const _0x23e351=_0x37e7e3;for(const {handler:_0x3b72b6,type:_0x47d57e,topic:_0x4e2eb1}of _0x497173){this[_0x23e351(0x16d)]['removeEventListener']('message',_0x3b72b6),this[_0x23e351(0x16d)][_0x23e351(0x151)]===this[_0x23e351(0x16d)]['OPEN']&&this[_0x23e351(0x16d)]['send'](JSON['stringify']({'op':_0x23e351(0x1b6),'topic':_0x4e2eb1||_0x3ec92b}));}}};}['drawLoadingPattern'](_0x450ad5,_0x2e336b){const _0x2e83fa=a6_0xd28b8b;_0x2e336b['fillStyle']='#1a1a1a',_0x2e336b[_0x2e83fa(0x16e)](0x0,0x0,_0x450ad5['width'],_0x450ad5[_0x2e83fa(0x1ba)]),_0x2e336b[_0x2e83fa(0x138)]='#00aaff',_0x2e336b['font']=_0x2e83fa(0x1a8),_0x2e336b[_0x2e83fa(0x13a)]=_0x2e83fa(0x115),_0x2e336b[_0x2e83fa(0x13b)](_0x2e83fa(0x1d3),_0x450ad5[_0x2e83fa(0x1bf)]/0x2,_0x450ad5[_0x2e83fa(0x1ba)]/0x2-0x14),_0x2e336b[_0x2e83fa(0x138)]=_0x2e83fa(0x15b),_0x2e336b[_0x2e83fa(0x140)]=_0x2e83fa(0x164),_0x2e336b[_0x2e83fa(0x13b)](_0x2e83fa(0x152),_0x450ad5[_0x2e83fa(0x1bf)]/0x2,_0x450ad5[_0x2e83fa(0x1ba)]/0x2+0x14);const _0x436c5e=Date[_0x2e83fa(0x156)]()/0x3e8;for(let _0x320610=0x0;_0x320610<0x3;_0x320610++){const _0xc4aebf=(Math[_0x2e83fa(0x1cb)](_0x436c5e*0x2+_0x320610*0.5)+0x1)/0x2;_0x2e336b[_0x2e83fa(0x138)]=_0x2e83fa(0x170)+_0xc4aebf*0.5+')',_0x2e336b['beginPath'](),_0x2e336b[_0x2e83fa(0x131)](_0x450ad5[_0x2e83fa(0x1bf)]/0x2-0x28+_0x320610*0x28,_0x450ad5[_0x2e83fa(0x1ba)]/0x2+0x3c,0x8,0x0,0x2*Math['PI']),_0x2e336b[_0x2e83fa(0x171)]();}}[a6_0xd28b8b(0x139)](_0x198ff2,_0x59b09d){const _0x278608=a6_0xd28b8b;try{if(!_0x198ff2||!_0x59b09d)return;const _0x26e8a5=_0x59b09d['getContext']('2d'),_0x151327=_0x26e8a5[_0x278608(0x145)](0x0,0x0,_0x59b09d['width'],_0x59b09d[_0x278608(0x1ba)]),_0x466919=this[_0x278608(0x1b7)](_0x151327[_0x278608(0x13d)],_0x59b09d[_0x278608(0x1bf)],_0x59b09d[_0x278608(0x1ba)]),_0x562a0e={'width':_0x59b09d['width'],'height':_0x59b09d[_0x278608(0x1ba)],'data':_0x466919};typeof _0x198ff2[_0x278608(0x165)]===_0x278608(0x159)&&_0x198ff2[_0x278608(0x165)](_0x562a0e);}catch(_0x4bf3e5){console[_0x278608(0x1c0)](_0x278608(0x1ac),_0x4bf3e5);}}[a6_0xd28b8b(0x1b7)](_0x34d18d,_0x345c91,_0x4d14c6){const _0x395fe4=a6_0xd28b8b,_0x4ec608=_0x345c91*_0x4d14c6,_0x10dad1=_0x345c91*_0x4d14c6/0x4,_0x2bcc5d=new Uint8Array(_0x4ec608+_0x10dad1*0x2);let _0x485282=0x0,_0x2efb75=_0x4ec608,_0x4eecc7=_0x4ec608+_0x10dad1;for(let _0x423101=0x0;_0x423101<_0x4d14c6;_0x423101++){for(let _0x14d0ae=0x0;_0x14d0ae<_0x345c91;_0x14d0ae++){const _0xe83ae7=(_0x423101*_0x345c91+_0x14d0ae)*0x4,_0xf943df=_0x34d18d[_0xe83ae7],_0x56b7e1=_0x34d18d[_0xe83ae7+0x1],_0x454beb=_0x34d18d[_0xe83ae7+0x2],_0x563c66=Math['round'](0.299*_0xf943df+0.587*_0x56b7e1+0.114*_0x454beb);_0x2bcc5d[_0x485282++]=_0x563c66;if(_0x423101%0x2===0x0&&_0x14d0ae%0x2===0x0){const _0x124aaa=Math[_0x395fe4(0x142)](-0.169*_0xf943df-0.331*_0x56b7e1+0.5*_0x454beb+0x80),_0x1eb065=Math[_0x395fe4(0x142)](0.5*_0xf943df-0.419*_0x56b7e1-0.081*_0x454beb+0x80);_0x2bcc5d[_0x2efb75++]=Math[_0x395fe4(0x1b2)](0x0,Math[_0x395fe4(0x1be)](0xff,_0x124aaa)),_0x2bcc5d[_0x4eecc7++]=Math[_0x395fe4(0x1b2)](0x0,Math[_0x395fe4(0x1be)](0xff,_0x1eb065));}}}return _0x2bcc5d;}async[a6_0xd28b8b(0x17e)](_0xc4f768,_0x3bae99,_0x40ab25,_0x40d5f6,_0x50b09d){const _0x5e308b=a6_0xd28b8b;try{if(!_0x40ab25||!_0x40ab25[_0x5e308b(0x13d)])return;Math[_0x5e308b(0x149)]()<0.01&&console[_0x5e308b(0x187)](_0x5e308b(0x121)+_0x40d5f6+_0x5e308b(0x14b)+_0x40ab25[_0x5e308b(0x13d)]['length']+_0x5e308b(0x169));const _0x432116=Buffer[_0x5e308b(0x133)](_0x40ab25[_0x5e308b(0x13d)],_0x5e308b(0x155)),_0x4a81c8=this[_0x5e308b(0x1bc)][_0x5e308b(0x1cf)](_0x40d5f6);let _0x4cba6a;_0x4a81c8?_0x4cba6a=await this[_0x5e308b(0x1bc)][_0x5e308b(0x11e)](_0x432116,_0xc4f768,_0x3bae99,_0x40d5f6):_0x4cba6a=await this[_0x5e308b(0x1bc)]['processColorImage'](_0x432116,_0xc4f768,_0x3bae99),_0x3bae99[_0x5e308b(0x182)](_0x4cba6a,0x0,0x0),_0x3bae99['fillStyle']=_0x5e308b(0x184),_0x3bae99[_0x5e308b(0x16e)](0xa,0xa,0xdc,0x32),_0x3bae99['fillStyle']=_0x4a81c8?_0x5e308b(0x12f):'#00ff00',_0x3bae99[_0x5e308b(0x140)]=_0x5e308b(0x11c),_0x3bae99['fillText']((_0x4a81c8?_0x5e308b(0x154):_0x5e308b(0x13e))+':\x20'+new Date()[_0x5e308b(0x134)](),0xf,0x1c),_0x3bae99['fillStyle']=_0x5e308b(0x15b),_0x3bae99[_0x5e308b(0x140)]='10px\x20monospace',_0x3bae99[_0x5e308b(0x13b)](_0x5e308b(0x1d0)+_0x40d5f6['split']('/')[_0x5e308b(0x157)](),0xf,0x2d),this[_0x5e308b(0x139)](_0x50b09d,_0xc4f768);}catch(_0x29c1b2){console[_0x5e308b(0x15c)](_0x5e308b(0x1da)+_0x40d5f6+':',_0x29c1b2['message']);_0x40d5f6[_0x5e308b(0x14e)]('depth')&&Math['random']()<0.1&&console[_0x5e308b(0x15c)](_0x5e308b(0x1c5)+_0x40d5f6[_0x5e308b(0x1c1)]('/compressedDepth',_0x5e308b(0x1cc)));_0x3bae99[_0x5e308b(0x138)]='#1a1a1a',_0x3bae99[_0x5e308b(0x16e)](0x0,0x0,_0xc4f768[_0x5e308b(0x1bf)],_0xc4f768[_0x5e308b(0x1ba)]),_0x3bae99[_0x5e308b(0x138)]=_0x5e308b(0x19b),_0x3bae99[_0x5e308b(0x140)]=_0x5e308b(0x164),_0x3bae99[_0x5e308b(0x13a)]=_0x5e308b(0x115);const _0x2317a6=_0x40d5f6[_0x5e308b(0x14e)](_0x5e308b(0x14c))?_0x5e308b(0x18a):_0x5e308b(0x1bd);_0x3bae99[_0x5e308b(0x13b)](_0x2317a6,_0xc4f768[_0x5e308b(0x1bf)]/0x2,_0xc4f768[_0x5e308b(0x1ba)]/0x2),_0x3bae99[_0x5e308b(0x138)]=_0x5e308b(0x12e),_0x3bae99['font']=_0x5e308b(0x15a),_0x3bae99[_0x5e308b(0x13b)](_0x5e308b(0x1d0)+_0x40d5f6[_0x5e308b(0x172)]('/')[_0x5e308b(0x157)](),_0xc4f768['width']/0x2,_0xc4f768[_0x5e308b(0x1ba)]/0x2+0x19),this['sendFrameToVideoSource'](_0x50b09d,_0xc4f768);}}['stopSession'](_0x5102fc){const _0x15fb2b=a6_0xd28b8b,_0x228fb5=this['activeSessions'][_0x15fb2b(0x18f)](_0x5102fc);if(!_0x228fb5){console[_0x15fb2b(0x15c)](_0x15fb2b(0x18d)+_0x5102fc);return;}console[_0x15fb2b(0x187)]('[WebRTC\x20Appliance]\x20Stopping\x20session:\x20'+_0x5102fc+_0x15fb2b(0x12c)+_0x228fb5[_0x15fb2b(0x167)]);try{this[_0x15fb2b(0x1c8)]&&this['serverWs']['readyState']===this[_0x15fb2b(0x1c8)][_0x15fb2b(0x1c9)]&&this[_0x15fb2b(0x1c8)]['send'](JSON['stringify']({'op':_0x15fb2b(0x12b),'session_id':_0x5102fc})),_0x228fb5[_0x15fb2b(0x1d2)]&&_0x228fb5[_0x15fb2b(0x1d2)][_0x15fb2b(0x19e)](),_0x228fb5[_0x15fb2b(0x120)]&&_0x228fb5[_0x15fb2b(0x120)][_0x15fb2b(0x1d4)]();}catch(_0x39967e){console[_0x15fb2b(0x1c0)](_0x15fb2b(0x11a)+_0x39967e);}this[_0x15fb2b(0x146)](_0x5102fc);}[a6_0xd28b8b(0x146)](_0x53e0b6){const _0x1461b2=a6_0xd28b8b,_0x8f930f=this[_0x1461b2(0x180)][_0x1461b2(0x18f)](_0x53e0b6);if(_0x8f930f){const _0x1282d6=this[_0x1461b2(0x1a2)][_0x1461b2(0x18f)](_0x8f930f['topic']);_0x1282d6&&(_0x1282d6['delete'](_0x53e0b6),_0x1282d6['size']===0x0&&this[_0x1461b2(0x1a2)][_0x1461b2(0x17a)](_0x8f930f[_0x1461b2(0x167)])),this[_0x1461b2(0x141)](_0x8f930f[_0x1461b2(0x167)]);}this[_0x1461b2(0x180)]['delete'](_0x53e0b6),console['log']('[WebRTC\x20Appliance]\x20Cleaned\x20up\x20session:\x20'+_0x53e0b6);}[a6_0xd28b8b(0x189)](){const _0x178952=a6_0xd28b8b;console[_0x178952(0x187)](_0x178952(0x14d));const _0x16a402=Array['from'](this['activeSessions'][_0x178952(0x144)]());_0x16a402['forEach'](_0x46925b=>this[_0x178952(0x19a)](_0x46925b));}['getActiveSessions'](){const _0x1386c0=a6_0xd28b8b,_0x14ee45=[];for(const [_0x18c3fa,_0x587c2d]of this[_0x1386c0(0x180)]){_0x14ee45[_0x1386c0(0x174)]({'sessionId':_0x18c3fa,'topic':_0x587c2d['topic'],'connectionState':_0x587c2d[_0x1386c0(0x120)]?.[_0x1386c0(0x132)]||_0x1386c0(0x1bb),'hasVideoTrack':!!_0x587c2d['videoTrack']});}return _0x14ee45;}[a6_0xd28b8b(0x13f)](){const _0x3f82b5=a6_0xd28b8b,_0x4e761f=[];for(const [_0x3d4c2c,_0x301ffe]of this[_0x3f82b5(0x19f)]){_0x4e761f[_0x3f82b5(0x174)]({'topic':_0x3d4c2c,'frameCount':_0x301ffe[_0x3f82b5(0x190)],'hasVideoSource':!!_0x301ffe[_0x3f82b5(0x173)],'hasRosSubscriber':!!_0x301ffe[_0x3f82b5(0x199)]});}return _0x4e761f;}}function a6_0x5494(_0x1017c3,_0xc7dbbb){const _0x3b1f56=a6_0x639d();return a6_0x5494=function(_0x39a622,_0x1b19e5){_0x39a622=_0x39a622-0x111;let _0x639d6=_0x3b1f56[_0x39a622];return _0x639d6;},a6_0x5494(_0x1017c3,_0xc7dbbb);}module[a6_0xd28b8b(0x137)]=new ApplianceWebRTCService();