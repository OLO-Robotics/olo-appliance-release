const a5_0x944b3=a5_0x579b;(function(_0x587888,_0x55cad0){const _0x57e26f=a5_0x579b,_0x47e369=_0x587888();while(!![]){try{const _0x5321f5=parseInt(_0x57e26f(0x162))/0x1+-parseInt(_0x57e26f(0x154))/0x2*(parseInt(_0x57e26f(0x147))/0x3)+parseInt(_0x57e26f(0x14a))/0x4+parseInt(_0x57e26f(0x174))/0x5*(-parseInt(_0x57e26f(0x148))/0x6)+parseInt(_0x57e26f(0x16b))/0x7*(parseInt(_0x57e26f(0x15c))/0x8)+parseInt(_0x57e26f(0x155))/0x9+-parseInt(_0x57e26f(0x15b))/0xa;if(_0x5321f5===_0x55cad0)break;else _0x47e369['push'](_0x47e369['shift']());}catch(_0x145556){_0x47e369['push'](_0x47e369['shift']());}}}(a5_0x4bf8,0x29a5d));const a5_0x2bbac0=(function(){let _0x523a1c=!![];return function(_0x4db37c,_0x12d887){const _0x246079=_0x523a1c?function(){const _0x1dcd0f=a5_0x579b;if(_0x12d887){const _0x45fc9a=_0x12d887[_0x1dcd0f(0x14d)](_0x4db37c,arguments);return _0x12d887=null,_0x45fc9a;}}:function(){};return _0x523a1c=![],_0x246079;};}()),a5_0x4608ab=a5_0x2bbac0(this,function(){const _0x11da12=a5_0x579b;return a5_0x4608ab[_0x11da12(0x14f)]()[_0x11da12(0x175)](_0x11da12(0x15e))['toString']()[_0x11da12(0x15f)](a5_0x4608ab)['search'](_0x11da12(0x15e));});function a5_0x579b(_0x487111,_0x3971b8){const _0x52dff9=a5_0x4bf8();return a5_0x579b=function(_0x4608ab,_0x2bbac0){_0x4608ab=_0x4608ab-0x141;let _0x4bf88a=_0x52dff9[_0x4608ab];return _0x4bf88a;},a5_0x579b(_0x487111,_0x3971b8);}function a5_0x4bf8(){const _0x363ee1=['14aFOSmX','2157696uLOQUI','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','getToken','parse','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','5836030wtLZLO','16aBOSHJ','cacheDuration','(((.+)+)+)+$','constructor','getIceServers','https:','263894aqyXpD','data','serverUrl','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','isAuthenticated','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','/webrtc/turn-credentials','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','./auth','972209tsSBFk','login','https','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','Bearer\x20','http','getFallbackIceServers','now','6470TsDBiz','search','error','getCredentials','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','credentialsCache','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','setTimeout','request','end','stun:stun1.l.google.com:19302','iceServers','cacheExpiry','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','8061zVBAWW','768YeVNaS','initialize','628884hmhwup','exports','stun:stun.l.google.com:19302','apply','fetchCredentials','toString','log','OLO-Appliance/1.0','clearCache','protocol'];a5_0x4bf8=function(){return _0x363ee1;};return a5_0x4bf8();}a5_0x4608ab();const https=require(a5_0x944b3(0x16d)),http=require(a5_0x944b3(0x171)),authService=require(a5_0x944b3(0x16a));class ApplianceTurnCredentialsService{constructor(){const _0x19d50f=a5_0x944b3;this[_0x19d50f(0x179)]=null,this[_0x19d50f(0x145)]=0x0,this[_0x19d50f(0x15d)]=0xe10*0x3e8,this[_0x19d50f(0x164)]=null;}[a5_0x944b3(0x149)](_0x506982){const _0x316b38=a5_0x944b3;this['serverUrl']=_0x506982,console['log'](_0x316b38(0x16f),_0x506982);}async[a5_0x944b3(0x14e)](){const _0x447990=a5_0x944b3;if(!this[_0x447990(0x164)])return console[_0x447990(0x176)]('[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized'),this[_0x447990(0x172)]();if(!authService[_0x447990(0x166)]()){console[_0x447990(0x150)](_0x447990(0x156));const _0x428199=await authService[_0x447990(0x16c)]();if(!_0x428199)return console[_0x447990(0x176)](_0x447990(0x167)),this[_0x447990(0x172)]();}try{console[_0x447990(0x150)]('[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...');const _0x34c430=new URL(_0x447990(0x168),this[_0x447990(0x164)]),_0x59c516=_0x34c430[_0x447990(0x153)]===_0x447990(0x161),_0x483d3c=_0x59c516?https:http,_0x28d12a=authService[_0x447990(0x157)]();if(!_0x28d12a)return console[_0x447990(0x176)]('[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available'),this[_0x447990(0x172)]();return new Promise((_0x4c87aa,_0x2e57ad)=>{const _0xabec02=_0x447990,_0x3fc23d={'hostname':_0x34c430['hostname'],'port':_0x34c430['port']||(_0x59c516?0x1bb:0x50),'path':_0x34c430['pathname'],'method':'GET','headers':{'User-Agent':_0xabec02(0x151),'Authorization':_0xabec02(0x170)+_0x28d12a}},_0x2a063c=_0x483d3c[_0xabec02(0x141)](_0x3fc23d,_0x47ee37=>{const _0x57576a=_0xabec02;let _0xd6b5f8='';_0x47ee37['on'](_0x57576a(0x163),_0x4b3582=>{_0xd6b5f8+=_0x4b3582;}),_0x47ee37['on']('end',()=>{const _0x1aafa4=_0x57576a;try{const _0x424c41=JSON[_0x1aafa4(0x158)](_0xd6b5f8);_0x424c41[_0x1aafa4(0x144)]?(console[_0x1aafa4(0x150)](_0x1aafa4(0x146)),_0x4c87aa(_0x424c41['iceServers'])):(console['warn'](_0x1aafa4(0x178)),_0x4c87aa(this[_0x1aafa4(0x172)]()));}catch(_0x2792dc){console[_0x1aafa4(0x176)](_0x1aafa4(0x16e),_0x2792dc),_0x4c87aa(this['getFallbackIceServers']());}});});_0x2a063c['on'](_0xabec02(0x176),_0x37b856=>{const _0x1e5de1=_0xabec02;console[_0x1e5de1(0x176)]('[Appliance\x20TURN\x20Service]\x20Request\x20error:',_0x37b856),_0x4c87aa(this[_0x1e5de1(0x172)]());}),_0x2a063c[_0xabec02(0x17b)](0x2710,()=>{const _0x42b23b=_0xabec02;console[_0x42b23b(0x176)](_0x42b23b(0x165)),_0x2a063c['destroy'](),_0x4c87aa(this[_0x42b23b(0x172)]());}),_0x2a063c[_0xabec02(0x142)]();});}catch(_0x3c5cbc){return console['error'](_0x447990(0x17a),_0x3c5cbc),this[_0x447990(0x172)]();}}async[a5_0x944b3(0x177)](){const _0x4f1ecc=a5_0x944b3,_0x159460=Date[_0x4f1ecc(0x173)]();if(this[_0x4f1ecc(0x179)]&&_0x159460<this[_0x4f1ecc(0x145)])return console[_0x4f1ecc(0x150)](_0x4f1ecc(0x159)),this[_0x4f1ecc(0x179)];const _0x228801=await this[_0x4f1ecc(0x14e)]();return this['credentialsCache']=_0x228801,this[_0x4f1ecc(0x145)]=_0x159460+this['cacheDuration'],console[_0x4f1ecc(0x150)]('[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials'),_0x228801;}async[a5_0x944b3(0x160)](){return await this['getCredentials']();}[a5_0x944b3(0x172)](){const _0x54c07b=a5_0x944b3;return console[_0x54c07b(0x150)](_0x54c07b(0x169)),[{'urls':_0x54c07b(0x14c)},{'urls':_0x54c07b(0x143)}];}[a5_0x944b3(0x152)](){const _0x398bd1=a5_0x944b3;this[_0x398bd1(0x179)]=null,this[_0x398bd1(0x145)]=0x0,console[_0x398bd1(0x150)](_0x398bd1(0x15a));}}module[a5_0x944b3(0x14b)]=new ApplianceTurnCredentialsService();