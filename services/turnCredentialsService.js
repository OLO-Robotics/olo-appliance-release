const a5_0x3547c7=a5_0xd086;(function(_0x33049a,_0x21769f){const _0x512989=a5_0xd086,_0x4eb649=_0x33049a();while(!![]){try{const _0x136498=parseInt(_0x512989(0x17b))/0x1+parseInt(_0x512989(0x19d))/0x2*(-parseInt(_0x512989(0x195))/0x3)+-parseInt(_0x512989(0x1a0))/0x4*(parseInt(_0x512989(0x197))/0x5)+-parseInt(_0x512989(0x180))/0x6*(-parseInt(_0x512989(0x191))/0x7)+-parseInt(_0x512989(0x186))/0x8*(-parseInt(_0x512989(0x194))/0x9)+parseInt(_0x512989(0x187))/0xa*(-parseInt(_0x512989(0x168))/0xb)+parseInt(_0x512989(0x18a))/0xc;if(_0x136498===_0x21769f)break;else _0x4eb649['push'](_0x4eb649['shift']());}catch(_0x29cae0){_0x4eb649['push'](_0x4eb649['shift']());}}}(a5_0x283e,0x30ecf));const a5_0x5e87aa=(function(){let _0x2b18f1=!![];return function(_0x39eec8,_0x3814fd){const _0x30e20a=_0x2b18f1?function(){const _0x5abfe2=a5_0xd086;if(_0x3814fd){const _0x18e6a8=_0x3814fd[_0x5abfe2(0x183)](_0x39eec8,arguments);return _0x3814fd=null,_0x18e6a8;}}:function(){};return _0x2b18f1=![],_0x30e20a;};}()),a5_0x22ce6=a5_0x5e87aa(this,function(){const _0x3188=a5_0xd086;return a5_0x22ce6['toString']()['search'](_0x3188(0x19e))[_0x3188(0x167)]()[_0x3188(0x181)](a5_0x22ce6)[_0x3188(0x177)](_0x3188(0x19e));});function a5_0x283e(){const _0xc9d4a3=['90sltpdG','destroy','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','1267356lVPpUw','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','fetchCredentials','error','./auth','pathname','1512xIBAnU','now','credentialsCache','9kTbUTZ','658113NpnQdW','setTimeout','5DrBeID','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','stun:stun1.l.google.com:19302','getIceServers','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','clearCache','2LlDZyT','(((.+)+)+)+$','parse','1484564SzAHwo','OLO-Appliance/1.0','isAuthenticated','toString','273009UWNoWf','serverUrl','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','warn','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','log','getCredentials','port','data','getToken','https','login','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','protocol','search','cacheExpiry','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','stun:stun.l.google.com:19302','133012ZFHRwq','iceServers','end','[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...','cacheDuration','10794YloHKJ','constructor','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','apply','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','getFallbackIceServers','3096584nrKsTX'];a5_0x283e=function(){return _0xc9d4a3;};return a5_0x283e();}a5_0x22ce6();const https=require(a5_0x3547c7(0x173)),http=require('http'),authService=require(a5_0x3547c7(0x18f));function a5_0xd086(_0xa91135,_0x24c825){const _0x5e4a0f=a5_0x283e();return a5_0xd086=function(_0x22ce6,_0x5e87aa){_0x22ce6=_0x22ce6-0x167;let _0x283e06=_0x5e4a0f[_0x22ce6];return _0x283e06;},a5_0xd086(_0xa91135,_0x24c825);}class ApplianceTurnCredentialsService{constructor(){const _0x604738=a5_0x3547c7;this[_0x604738(0x193)]=null,this[_0x604738(0x178)]=0x0,this[_0x604738(0x17f)]=0xe10*0x3e8,this[_0x604738(0x169)]=null;}['initialize'](_0x223159){const _0x2eef89=a5_0x3547c7;this['serverUrl']=_0x223159,console[_0x2eef89(0x16e)](_0x2eef89(0x175),_0x223159);}async[a5_0x3547c7(0x18d)](){const _0x10c89c=a5_0x3547c7;if(!this[_0x10c89c(0x169)])return console['error']('[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized'),this[_0x10c89c(0x185)]();if(!authService[_0x10c89c(0x1a2)]()){console[_0x10c89c(0x16e)](_0x10c89c(0x18b));const _0x25edc0=await authService[_0x10c89c(0x174)]();if(!_0x25edc0)return console[_0x10c89c(0x18e)](_0x10c89c(0x16b)),this['getFallbackIceServers']();}try{console[_0x10c89c(0x16e)](_0x10c89c(0x17e));const _0x813971=new URL('/webrtc/turn-credentials',this[_0x10c89c(0x169)]),_0x5bca31=_0x813971[_0x10c89c(0x176)]==='https:',_0x116312=_0x5bca31?https:http,_0x3d4648=authService[_0x10c89c(0x172)]();if(!_0x3d4648)return console[_0x10c89c(0x18e)](_0x10c89c(0x18c)),this[_0x10c89c(0x185)]();return new Promise((_0x3917e3,_0x813604)=>{const _0x4c7d86=_0x10c89c,_0x347b07={'hostname':_0x813971['hostname'],'port':_0x813971[_0x4c7d86(0x170)]||(_0x5bca31?0x1bb:0x50),'path':_0x813971[_0x4c7d86(0x190)],'method':'GET','headers':{'User-Agent':_0x4c7d86(0x1a1),'Authorization':'Bearer\x20'+_0x3d4648}},_0x222495=_0x116312['request'](_0x347b07,_0x4a5fc1=>{const _0x1eee88=_0x4c7d86;let _0x5d3439='';_0x4a5fc1['on'](_0x1eee88(0x171),_0x223889=>{_0x5d3439+=_0x223889;}),_0x4a5fc1['on'](_0x1eee88(0x17d),()=>{const _0x57a413=_0x1eee88;try{const _0xb5956a=JSON[_0x57a413(0x19f)](_0x5d3439);_0xb5956a[_0x57a413(0x17c)]?(console[_0x57a413(0x16e)](_0x57a413(0x189)),_0x3917e3(_0xb5956a[_0x57a413(0x17c)])):(console[_0x57a413(0x16c)](_0x57a413(0x182)),_0x3917e3(this[_0x57a413(0x185)]()));}catch(_0x3aa7c2){console[_0x57a413(0x18e)]('[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:',_0x3aa7c2),_0x3917e3(this[_0x57a413(0x185)]());}});});_0x222495['on'](_0x4c7d86(0x18e),_0x5c7838=>{const _0x4fc3b1=_0x4c7d86;console[_0x4fc3b1(0x18e)]('[Appliance\x20TURN\x20Service]\x20Request\x20error:',_0x5c7838),_0x3917e3(this[_0x4fc3b1(0x185)]());}),_0x222495[_0x4c7d86(0x196)](0x2710,()=>{const _0x253806=_0x4c7d86;console['error'](_0x253806(0x198)),_0x222495[_0x253806(0x188)](),_0x3917e3(this[_0x253806(0x185)]());}),_0x222495[_0x4c7d86(0x17d)]();});}catch(_0x5a567b){return console[_0x10c89c(0x18e)](_0x10c89c(0x16d),_0x5a567b),this['getFallbackIceServers']();}}async[a5_0x3547c7(0x16f)](){const _0x374275=a5_0x3547c7,_0x1a18e7=Date[_0x374275(0x192)]();if(this[_0x374275(0x193)]&&_0x1a18e7<this[_0x374275(0x178)])return console['log'](_0x374275(0x16a)),this['credentialsCache'];const _0x1a807b=await this[_0x374275(0x18d)]();return this[_0x374275(0x193)]=_0x1a807b,this[_0x374275(0x178)]=_0x1a18e7+this[_0x374275(0x17f)],console[_0x374275(0x16e)](_0x374275(0x179)),_0x1a807b;}async[a5_0x3547c7(0x19a)](){const _0x2170fc=a5_0x3547c7;return await this[_0x2170fc(0x16f)]();}['getFallbackIceServers'](){const _0x2fceef=a5_0x3547c7;return console[_0x2fceef(0x16e)](_0x2fceef(0x19b)),[{'urls':_0x2fceef(0x17a)},{'urls':_0x2fceef(0x199)}];}[a5_0x3547c7(0x19c)](){const _0x5ceb6c=a5_0x3547c7;this[_0x5ceb6c(0x193)]=null,this[_0x5ceb6c(0x178)]=0x0,console[_0x5ceb6c(0x16e)](_0x5ceb6c(0x184));}}module['exports']=new ApplianceTurnCredentialsService();