const a5_0x5f56ae=a5_0x7323;function a5_0x211d(){const _0x458bac=['[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','getFallbackIceServers','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','getToken','toString','error','277228BjDjFc','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','log','6538552XcecIo','https:','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','credentialsCache','search','cacheExpiry','[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...','https','16169094qetxRc','getCredentials','cacheDuration','apply','parse','258972NgKnBm','warn','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','stun:stun.l.google.com:19302','exports','15ZumbwP','iceServers','isAuthenticated','Bearer\x20','protocol','http','(((.+)+)+)+$','getIceServers','pathname','stun:stun1.l.google.com:19302','port','12xtrBFL','OLO-Appliance/1.0','hostname','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','request','fetchCredentials','6647872IusnBu','clearCache','515394VvpAnB','serverUrl','initialize','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','./auth','login','setTimeout','constructor','949551yJCLOK','[Appliance\x20TURN\x20Service]\x20Request\x20error:'];a5_0x211d=function(){return _0x458bac;};return a5_0x211d();}(function(_0x253673,_0x300713){const _0x13666e=a5_0x7323,_0x2f57af=_0x253673();while(!![]){try{const _0x27742e=-parseInt(_0x13666e(0xe4))/0x1+-parseInt(_0x13666e(0xd4))/0x2+parseInt(_0x13666e(0xdc))/0x3*(-parseInt(_0x13666e(0xcc))/0x4)+parseInt(_0x13666e(0xc1))/0x5*(parseInt(_0x13666e(0xbc))/0x6)+parseInt(_0x13666e(0xd2))/0x7+-parseInt(_0x13666e(0xaf))/0x8+parseInt(_0x13666e(0xb7))/0x9;if(_0x27742e===_0x300713)break;else _0x2f57af['push'](_0x2f57af['shift']());}catch(_0x4645b1){_0x2f57af['push'](_0x2f57af['shift']());}}}(a5_0x211d,0x8c201));const a5_0x484738=(function(){let _0x249767=!![];return function(_0x5af346,_0x12a251){const _0x2e0897=_0x249767?function(){const _0x172173=a5_0x7323;if(_0x12a251){const _0x424621=_0x12a251[_0x172173(0xba)](_0x5af346,arguments);return _0x12a251=null,_0x424621;}}:function(){};return _0x249767=![],_0x2e0897;};}()),a5_0x272cb6=a5_0x484738(this,function(){const _0x5f241a=a5_0x7323;return a5_0x272cb6[_0x5f241a(0xe2)]()[_0x5f241a(0xb3)](_0x5f241a(0xc7))[_0x5f241a(0xe2)]()[_0x5f241a(0xdb)](a5_0x272cb6)[_0x5f241a(0xb3)](_0x5f241a(0xc7));});a5_0x272cb6();const https=require(a5_0x5f56ae(0xb6)),http=require(a5_0x5f56ae(0xc6)),authService=require(a5_0x5f56ae(0xd8));function a5_0x7323(_0x360c03,_0x2fb2e1){const _0x1243b1=a5_0x211d();return a5_0x7323=function(_0x272cb6,_0x484738){_0x272cb6=_0x272cb6-0xad;let _0x211d0d=_0x1243b1[_0x272cb6];return _0x211d0d;},a5_0x7323(_0x360c03,_0x2fb2e1);}class ApplianceTurnCredentialsService{constructor(){const _0xe704c5=a5_0x5f56ae;this[_0xe704c5(0xb2)]=null,this[_0xe704c5(0xb4)]=0x0,this[_0xe704c5(0xb9)]=0xe10*0x3e8,this['serverUrl']=null;}[a5_0x5f56ae(0xd6)](_0x2b8893){const _0x206b1c=a5_0x5f56ae;this[_0x206b1c(0xd5)]=_0x2b8893,console[_0x206b1c(0xae)]('[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:',_0x2b8893);}async[a5_0x5f56ae(0xd1)](){const _0x7cba17=a5_0x5f56ae;if(!this[_0x7cba17(0xd5)])return console[_0x7cba17(0xe3)](_0x7cba17(0xad)),this['getFallbackIceServers']();if(!authService[_0x7cba17(0xc3)]()){console[_0x7cba17(0xae)](_0x7cba17(0xb1));const _0x62c5b1=await authService[_0x7cba17(0xd9)]();if(!_0x62c5b1)return console[_0x7cba17(0xe3)]('[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate'),this[_0x7cba17(0xdf)]();}try{console[_0x7cba17(0xae)](_0x7cba17(0xb5));const _0x3c9774=new URL('/webrtc/turn-credentials',this['serverUrl']),_0x1598c2=_0x3c9774[_0x7cba17(0xc5)]===_0x7cba17(0xb0),_0x2dd83b=_0x1598c2?https:http,_0x15d44c=authService[_0x7cba17(0xe1)]();if(!_0x15d44c)return console[_0x7cba17(0xe3)](_0x7cba17(0xbe)),this[_0x7cba17(0xdf)]();return new Promise((_0x4ccaa0,_0x2f26c1)=>{const _0x56bf57=_0x7cba17,_0x4e4a23={'hostname':_0x3c9774[_0x56bf57(0xce)],'port':_0x3c9774[_0x56bf57(0xcb)]||(_0x1598c2?0x1bb:0x50),'path':_0x3c9774[_0x56bf57(0xc9)],'method':'GET','headers':{'User-Agent':_0x56bf57(0xcd),'Authorization':_0x56bf57(0xc4)+_0x15d44c}},_0x4212e3=_0x2dd83b[_0x56bf57(0xd0)](_0x4e4a23,_0x1a1bb3=>{let _0x3ba89b='';_0x1a1bb3['on']('data',_0x53d7af=>{_0x3ba89b+=_0x53d7af;}),_0x1a1bb3['on']('end',()=>{const _0x6c883c=a5_0x7323;try{const _0x4317f6=JSON[_0x6c883c(0xbb)](_0x3ba89b);_0x4317f6[_0x6c883c(0xc2)]?(console[_0x6c883c(0xae)](_0x6c883c(0xe0)),_0x4ccaa0(_0x4317f6[_0x6c883c(0xc2)])):(console[_0x6c883c(0xbd)]('[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback'),_0x4ccaa0(this[_0x6c883c(0xdf)]()));}catch(_0x2eb0d8){console['error'](_0x6c883c(0xd7),_0x2eb0d8),_0x4ccaa0(this[_0x6c883c(0xdf)]());}});});_0x4212e3['on'](_0x56bf57(0xe3),_0x393469=>{const _0x2dcccb=_0x56bf57;console['error'](_0x2dcccb(0xdd),_0x393469),_0x4ccaa0(this[_0x2dcccb(0xdf)]());}),_0x4212e3[_0x56bf57(0xda)](0x2710,()=>{const _0x5a73ac=_0x56bf57;console[_0x5a73ac(0xe3)]('[Appliance\x20TURN\x20Service]\x20Request\x20timeout'),_0x4212e3['destroy'](),_0x4ccaa0(this[_0x5a73ac(0xdf)]());}),_0x4212e3['end']();});}catch(_0x420467){return console['error'](_0x7cba17(0xde),_0x420467),this[_0x7cba17(0xdf)]();}}async[a5_0x5f56ae(0xb8)](){const _0x2ef54c=a5_0x5f56ae,_0x38456d=Date['now']();if(this[_0x2ef54c(0xb2)]&&_0x38456d<this['cacheExpiry'])return console[_0x2ef54c(0xae)]('[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials'),this[_0x2ef54c(0xb2)];const _0x2f5d46=await this[_0x2ef54c(0xd1)]();return this[_0x2ef54c(0xb2)]=_0x2f5d46,this[_0x2ef54c(0xb4)]=_0x38456d+this[_0x2ef54c(0xb9)],console[_0x2ef54c(0xae)]('[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials'),_0x2f5d46;}async[a5_0x5f56ae(0xc8)](){return await this['getCredentials']();}[a5_0x5f56ae(0xdf)](){const _0x4b963f=a5_0x5f56ae;return console[_0x4b963f(0xae)](_0x4b963f(0xcf)),[{'urls':_0x4b963f(0xbf)},{'urls':_0x4b963f(0xca)}];}[a5_0x5f56ae(0xd3)](){const _0x40ccb6=a5_0x5f56ae;this[_0x40ccb6(0xb2)]=null,this['cacheExpiry']=0x0,console[_0x40ccb6(0xae)]('[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared');}}module[a5_0x5f56ae(0xc0)]=new ApplianceTurnCredentialsService();