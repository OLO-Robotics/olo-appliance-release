const a5_0x4208a8=a5_0x2808;(function(_0x627b31,_0x58165f){const _0x35bb1a=a5_0x2808,_0x5ab62d=_0x627b31();while(!![]){try{const _0x44be64=parseInt(_0x35bb1a(0x192))/0x1*(parseInt(_0x35bb1a(0x185))/0x2)+parseInt(_0x35bb1a(0x186))/0x3+parseInt(_0x35bb1a(0x19d))/0x4+-parseInt(_0x35bb1a(0x1a0))/0x5*(parseInt(_0x35bb1a(0x195))/0x6)+parseInt(_0x35bb1a(0x17b))/0x7*(-parseInt(_0x35bb1a(0x184))/0x8)+parseInt(_0x35bb1a(0x1a7))/0x9+parseInt(_0x35bb1a(0x179))/0xa*(parseInt(_0x35bb1a(0x18b))/0xb);if(_0x44be64===_0x58165f)break;else _0x5ab62d['push'](_0x5ab62d['shift']());}catch(_0x312bf0){_0x5ab62d['push'](_0x5ab62d['shift']());}}}(a5_0x5562,0xecaff));function a5_0x2808(_0x249628,_0x59c2a4){const _0x1b5439=a5_0x5562();return a5_0x2808=function(_0x5dc4bc,_0x10bb31){_0x5dc4bc=_0x5dc4bc-0x176;let _0x556215=_0x1b5439[_0x5dc4bc];return _0x556215;},a5_0x2808(_0x249628,_0x59c2a4);}const a5_0x10bb31=(function(){let _0x5e4542=!![];return function(_0x319fb0,_0x29a8bc){const _0x463a2a=_0x5e4542?function(){if(_0x29a8bc){const _0xc129e4=_0x29a8bc['apply'](_0x319fb0,arguments);return _0x29a8bc=null,_0xc129e4;}}:function(){};return _0x5e4542=![],_0x463a2a;};}()),a5_0x5dc4bc=a5_0x10bb31(this,function(){const _0x4f3359=a5_0x2808;return a5_0x5dc4bc[_0x4f3359(0x18d)]()['search']('(((.+)+)+)+$')[_0x4f3359(0x18d)]()[_0x4f3359(0x1b0)](a5_0x5dc4bc)['search'](_0x4f3359(0x190));});a5_0x5dc4bc();const https=require('https'),http=require(a5_0x4208a8(0x18f)),authService=require('./auth');class ApplianceTurnCredentialsService{constructor(){const _0x93ad4e=a5_0x4208a8;this[_0x93ad4e(0x188)]=null,this[_0x93ad4e(0x1af)]=0x0,this[_0x93ad4e(0x1a6)]=0xe10*0x3e8,this[_0x93ad4e(0x178)]=null;}[a5_0x4208a8(0x198)](_0x5790f3){const _0x409b64=a5_0x4208a8;this['serverUrl']=_0x5790f3,console[_0x409b64(0x181)]('[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:',_0x5790f3);}async[a5_0x4208a8(0x199)](){const _0xa6f1f8=a5_0x4208a8;if(!this[_0xa6f1f8(0x178)])return console[_0xa6f1f8(0x182)](_0xa6f1f8(0x1a1)),this[_0xa6f1f8(0x191)]();if(!authService['isAuthenticated']()){console['log'](_0xa6f1f8(0x1ac));const _0x52bcc0=await authService['login']();if(!_0x52bcc0)return console[_0xa6f1f8(0x182)](_0xa6f1f8(0x17c)),this['getFallbackIceServers']();}try{console['log'](_0xa6f1f8(0x1ae));const _0x320e28=new URL(_0xa6f1f8(0x19c),this[_0xa6f1f8(0x178)]),_0x227055=_0x320e28[_0xa6f1f8(0x19f)]===_0xa6f1f8(0x19e),_0x596333=_0x227055?https:http,_0x3b3788=authService['getToken']();if(!_0x3b3788)return console[_0xa6f1f8(0x182)](_0xa6f1f8(0x189)),this[_0xa6f1f8(0x191)]();return new Promise((_0x54c74a,_0x2492a3)=>{const _0xe14e69=_0xa6f1f8,_0x220717={'hostname':_0x320e28[_0xe14e69(0x1a4)],'port':_0x320e28[_0xe14e69(0x1a3)]||(_0x227055?0x1bb:0x50),'path':_0x320e28[_0xe14e69(0x18a)],'method':_0xe14e69(0x17e),'headers':{'User-Agent':_0xe14e69(0x194),'Authorization':_0xe14e69(0x177)+_0x3b3788}},_0x485dd3=_0x596333[_0xe14e69(0x1aa)](_0x220717,_0x15ade4=>{const _0x248342=_0xe14e69;let _0x291af5='';_0x15ade4['on'](_0x248342(0x17d),_0x3d1b26=>{_0x291af5+=_0x3d1b26;}),_0x15ade4['on']('end',()=>{const _0x92fe27=_0x248342;try{const _0x269402=JSON[_0x92fe27(0x18c)](_0x291af5);_0x269402[_0x92fe27(0x1a9)]?(console[_0x92fe27(0x181)](_0x92fe27(0x19b)),_0x54c74a(_0x269402['iceServers'])):(console[_0x92fe27(0x19a)](_0x92fe27(0x180)),_0x54c74a(this[_0x92fe27(0x191)]()));}catch(_0x10e352){console[_0x92fe27(0x182)](_0x92fe27(0x1a5),_0x10e352),_0x54c74a(this[_0x92fe27(0x191)]());}});});_0x485dd3['on']('error',_0x5cd6f5=>{const _0x545da7=_0xe14e69;console[_0x545da7(0x182)]('[Appliance\x20TURN\x20Service]\x20Request\x20error:',_0x5cd6f5),_0x54c74a(this[_0x545da7(0x191)]());}),_0x485dd3[_0xe14e69(0x176)](0x2710,()=>{const _0x5485c3=_0xe14e69;console['error'](_0x5485c3(0x1ab)),_0x485dd3[_0x5485c3(0x17f)](),_0x54c74a(this[_0x5485c3(0x191)]());}),_0x485dd3[_0xe14e69(0x1a2)]();});}catch(_0x418c26){return console[_0xa6f1f8(0x182)](_0xa6f1f8(0x187),_0x418c26),this['getFallbackIceServers']();}}async[a5_0x4208a8(0x18e)](){const _0x395ae0=a5_0x4208a8,_0x3cb6b8=Date[_0x395ae0(0x197)]();if(this[_0x395ae0(0x188)]&&_0x3cb6b8<this['cacheExpiry'])return console[_0x395ae0(0x181)](_0x395ae0(0x193)),this[_0x395ae0(0x188)];const _0x5e2494=await this[_0x395ae0(0x199)]();return this[_0x395ae0(0x188)]=_0x5e2494,this[_0x395ae0(0x1af)]=_0x3cb6b8+this[_0x395ae0(0x1a6)],console[_0x395ae0(0x181)]('[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials'),_0x5e2494;}async[a5_0x4208a8(0x1a8)](){return await this['getCredentials']();}[a5_0x4208a8(0x191)](){const _0x4badfc=a5_0x4208a8;return console['log'](_0x4badfc(0x196)),[{'urls':'stun:stun.l.google.com:19302'},{'urls':_0x4badfc(0x1ad)}];}[a5_0x4208a8(0x183)](){const _0x305efe=a5_0x4208a8;this[_0x305efe(0x188)]=null,this[_0x305efe(0x1af)]=0x0,console['log'](_0x305efe(0x17a));}}module['exports']=new ApplianceTurnCredentialsService();function a5_0x5562(){const _0x3bb08a=['request','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','stun:stun1.l.google.com:19302','[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...','cacheExpiry','constructor','setTimeout','Bearer\x20','serverUrl','10LDSjtw','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','42DKGzLr','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','data','GET','destroy','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','log','error','clearCache','2185256YvVicB','4kSQKaO','1713201jCYpec','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','credentialsCache','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','pathname','11791714bvNRgm','parse','toString','getCredentials','http','(((.+)+)+)+$','getFallbackIceServers','77382NBCZnQ','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','OLO-Appliance/1.0','12GlhwHJ','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','now','initialize','fetchCredentials','warn','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','/webrtc/turn-credentials','5567492vhGlAd','https:','protocol','2862755stkGTF','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','end','port','hostname','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','cacheDuration','5074533mHASHy','getIceServers','iceServers'];a5_0x5562=function(){return _0x3bb08a;};return a5_0x5562();}