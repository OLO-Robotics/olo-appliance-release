function a5_0x3c7c(_0x5aa74f,_0x1ae380){const _0x353851=a5_0x31d8();return a5_0x3c7c=function(_0x4576af,_0x5dcc8d){_0x4576af=_0x4576af-0x150;let _0x31d87f=_0x353851[_0x4576af];return _0x31d87f;},a5_0x3c7c(_0x5aa74f,_0x1ae380);}const a5_0x124d0e=a5_0x3c7c;(function(_0x3ee957,_0x23c951){const _0x289fd8=a5_0x3c7c,_0x4591ca=_0x3ee957();while(!![]){try{const _0x41ea96=parseInt(_0x289fd8(0x166))/0x1*(-parseInt(_0x289fd8(0x153))/0x2)+parseInt(_0x289fd8(0x17b))/0x3+parseInt(_0x289fd8(0x156))/0x4+-parseInt(_0x289fd8(0x180))/0x5+parseInt(_0x289fd8(0x176))/0x6+parseInt(_0x289fd8(0x16a))/0x7*(parseInt(_0x289fd8(0x160))/0x8)+-parseInt(_0x289fd8(0x162))/0x9*(parseInt(_0x289fd8(0x161))/0xa);if(_0x41ea96===_0x23c951)break;else _0x4591ca['push'](_0x4591ca['shift']());}catch(_0x2f5b1e){_0x4591ca['push'](_0x4591ca['shift']());}}}(a5_0x31d8,0xbb0b5));const a5_0x5dcc8d=(function(){let _0x5ac50f=!![];return function(_0xf04a53,_0x489bef){const _0x327f65=_0x5ac50f?function(){const _0x4af187=a5_0x3c7c;if(_0x489bef){const _0xc05d3c=_0x489bef[_0x4af187(0x151)](_0xf04a53,arguments);return _0x489bef=null,_0xc05d3c;}}:function(){};return _0x5ac50f=![],_0x327f65;};}()),a5_0x4576af=a5_0x5dcc8d(this,function(){const _0x495c8e=a5_0x3c7c;return a5_0x4576af['toString']()[_0x495c8e(0x16d)](_0x495c8e(0x174))[_0x495c8e(0x15e)]()[_0x495c8e(0x168)](a5_0x4576af)[_0x495c8e(0x16d)](_0x495c8e(0x174));});a5_0x4576af();function a5_0x31d8(){const _0x573229=['warn','getToken','(((.+)+)+)+$','OLO-Appliance/1.0','3733326FzTdES','pathname','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','https:','hostname','1856904uWIvZq','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','log','https','Bearer\x20','1014865xGYkCw','iceServers','data','destroy','[Appliance\x20TURN\x20Service]\x20Request\x20error:','/webrtc/turn-credentials','http','getIceServers','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','apply','clearCache','1722224SkVrdt','serverUrl','parse','977300NBlOwH','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','login','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','cacheDuration','end','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','toString','fetchCredentials','200efUicL','10nmSKJu','8933589yunpfY','getCredentials','initialize','credentialsCache','1XAMaSa','./auth','constructor','getFallbackIceServers','374451XAkvga','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','search','protocol','error','cacheExpiry','stun:stun.l.google.com:19302'];a5_0x31d8=function(){return _0x573229;};return a5_0x31d8();}const https=require(a5_0x124d0e(0x17e)),http=require(a5_0x124d0e(0x186)),authService=require(a5_0x124d0e(0x167));class ApplianceTurnCredentialsService{constructor(){const _0x4218b7=a5_0x124d0e;this[_0x4218b7(0x165)]=null,this[_0x4218b7(0x170)]=0x0,this[_0x4218b7(0x15b)]=0xe10*0x3e8,this['serverUrl']=null;}[a5_0x124d0e(0x164)](_0x4795e6){const _0x247b57=a5_0x124d0e;this[_0x247b57(0x154)]=_0x4795e6,console[_0x247b57(0x17d)]('[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:',_0x4795e6);}async[a5_0x124d0e(0x15f)](){const _0x3a7dbc=a5_0x124d0e;if(!this[_0x3a7dbc(0x154)])return console[_0x3a7dbc(0x16f)]('[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized'),this[_0x3a7dbc(0x169)]();if(!authService['isAuthenticated']()){console['log'](_0x3a7dbc(0x178));const _0x25e5c2=await authService[_0x3a7dbc(0x159)]();if(!_0x25e5c2)return console[_0x3a7dbc(0x16f)](_0x3a7dbc(0x15a)),this['getFallbackIceServers']();}try{console[_0x3a7dbc(0x17d)]('[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...');const _0x219eed=new URL(_0x3a7dbc(0x185),this[_0x3a7dbc(0x154)]),_0x457142=_0x219eed[_0x3a7dbc(0x16e)]===_0x3a7dbc(0x179),_0x1edfc7=_0x457142?https:http,_0x477a9e=authService[_0x3a7dbc(0x173)]();if(!_0x477a9e)return console['error']('[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available'),this[_0x3a7dbc(0x169)]();return new Promise((_0x384a76,_0x1c8782)=>{const _0x47c5d9=_0x3a7dbc,_0x17896d={'hostname':_0x219eed[_0x47c5d9(0x17a)],'port':_0x219eed['port']||(_0x457142?0x1bb:0x50),'path':_0x219eed[_0x47c5d9(0x177)],'method':'GET','headers':{'User-Agent':_0x47c5d9(0x175),'Authorization':_0x47c5d9(0x17f)+_0x477a9e}},_0x250cf3=_0x1edfc7['request'](_0x17896d,_0x53f4e0=>{const _0x260a3e=_0x47c5d9;let _0x2b68fb='';_0x53f4e0['on'](_0x260a3e(0x182),_0x268299=>{_0x2b68fb+=_0x268299;}),_0x53f4e0['on'](_0x260a3e(0x15c),()=>{const _0x16c561=_0x260a3e;try{const _0x42ed71=JSON[_0x16c561(0x155)](_0x2b68fb);_0x42ed71[_0x16c561(0x181)]?(console[_0x16c561(0x17d)](_0x16c561(0x17c)),_0x384a76(_0x42ed71[_0x16c561(0x181)])):(console[_0x16c561(0x172)](_0x16c561(0x158)),_0x384a76(this[_0x16c561(0x169)]()));}catch(_0x3acc62){console[_0x16c561(0x16f)]('[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:',_0x3acc62),_0x384a76(this[_0x16c561(0x169)]());}});});_0x250cf3['on']('error',_0x353cdd=>{const _0x33e4a0=_0x47c5d9;console[_0x33e4a0(0x16f)](_0x33e4a0(0x184),_0x353cdd),_0x384a76(this[_0x33e4a0(0x169)]());}),_0x250cf3['setTimeout'](0x2710,()=>{const _0x40edaa=_0x47c5d9;console['error'](_0x40edaa(0x150)),_0x250cf3[_0x40edaa(0x183)](),_0x384a76(this[_0x40edaa(0x169)]());}),_0x250cf3[_0x47c5d9(0x15c)]();});}catch(_0x3d8383){return console[_0x3a7dbc(0x16f)](_0x3a7dbc(0x157),_0x3d8383),this[_0x3a7dbc(0x169)]();}}async[a5_0x124d0e(0x163)](){const _0x5803fd=a5_0x124d0e,_0x399446=Date['now']();if(this[_0x5803fd(0x165)]&&_0x399446<this['cacheExpiry'])return console[_0x5803fd(0x17d)](_0x5803fd(0x188)),this['credentialsCache'];const _0x2861cc=await this[_0x5803fd(0x15f)]();return this[_0x5803fd(0x165)]=_0x2861cc,this[_0x5803fd(0x170)]=_0x399446+this['cacheDuration'],console[_0x5803fd(0x17d)](_0x5803fd(0x16b)),_0x2861cc;}async[a5_0x124d0e(0x187)](){const _0x18793d=a5_0x124d0e;return await this[_0x18793d(0x163)]();}['getFallbackIceServers'](){const _0x15dfe3=a5_0x124d0e;return console[_0x15dfe3(0x17d)](_0x15dfe3(0x15d)),[{'urls':_0x15dfe3(0x171)},{'urls':'stun:stun1.l.google.com:19302'}];}[a5_0x124d0e(0x152)](){const _0x265b8d=a5_0x124d0e;this[_0x265b8d(0x165)]=null,this[_0x265b8d(0x170)]=0x0,console[_0x265b8d(0x17d)](_0x265b8d(0x16c));}}module['exports']=new ApplianceTurnCredentialsService();