const a5_0x2c391b=a5_0x46f4;(function(_0x5e1bce,_0x58eecb){const _0x345c04=a5_0x46f4,_0x1ea19e=_0x5e1bce();while(!![]){try{const _0x47ab38=-parseInt(_0x345c04(0xc9))/0x1*(parseInt(_0x345c04(0xd4))/0x2)+-parseInt(_0x345c04(0xbd))/0x3*(parseInt(_0x345c04(0xb1))/0x4)+-parseInt(_0x345c04(0xdc))/0x5*(parseInt(_0x345c04(0xe3))/0x6)+parseInt(_0x345c04(0xbf))/0x7+-parseInt(_0x345c04(0xde))/0x8+parseInt(_0x345c04(0xcc))/0x9+parseInt(_0x345c04(0xb0))/0xa*(parseInt(_0x345c04(0xd2))/0xb);if(_0x47ab38===_0x58eecb)break;else _0x1ea19e['push'](_0x1ea19e['shift']());}catch(_0x37d26f){_0x1ea19e['push'](_0x1ea19e['shift']());}}}(a5_0x24a5,0xe5065));const a5_0xce365e=(function(){let _0x15c7b5=!![];return function(_0x4b0b92,_0x4d6b11){const _0x27b528=_0x15c7b5?function(){const _0x1d096c=a5_0x46f4;if(_0x4d6b11){const _0x58a7f0=_0x4d6b11[_0x1d096c(0xaf)](_0x4b0b92,arguments);return _0x4d6b11=null,_0x58a7f0;}}:function(){};return _0x15c7b5=![],_0x27b528;};}()),a5_0x4f3b75=a5_0xce365e(this,function(){const _0x538c8d=a5_0x46f4;return a5_0x4f3b75[_0x538c8d(0xb9)]()[_0x538c8d(0xbb)](_0x538c8d(0xd6))[_0x538c8d(0xb9)]()[_0x538c8d(0xce)](a5_0x4f3b75)[_0x538c8d(0xbb)](_0x538c8d(0xd6));});function a5_0x46f4(_0x28105a,_0x53b03f){const _0x14f11c=a5_0x24a5();return a5_0x46f4=function(_0x4f3b75,_0xce365e){_0x4f3b75=_0x4f3b75-0xa8;let _0x24a5e7=_0x14f11c[_0x4f3b75];return _0x24a5e7;},a5_0x46f4(_0x28105a,_0x53b03f);}a5_0x4f3b75();function a5_0x24a5(){const _0x3fdec3=['parse','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','initialize','protocol','./auth','request','iceServers','apply','10TgAqfh','2535688salGNH','getToken','hostname','getIceServers','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','stun:stun.l.google.com:19302','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','https:','toString','[Appliance\x20TURN\x20Service]\x20Request\x20error:','search','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','3tBYYhi','pathname','11113235XnJHgU','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','port','cacheDuration','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','serverUrl','Bearer\x20','credentialsCache','exports','202496CfwQZG','getFallbackIceServers','destroy','15668496XTRalJ','fetchCredentials','constructor','now','stun:stun1.l.google.com:19302','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','951269OiaIOq','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','2IsztGz','cacheExpiry','(((.+)+)+)+$','http','error','getCredentials','setTimeout','log','16790FfMJhd','isAuthenticated','5682872szcFPM','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','end','/webrtc/turn-credentials','OLO-Appliance/1.0','1662RBdXKS'];a5_0x24a5=function(){return _0x3fdec3;};return a5_0x24a5();}const https=require('https'),http=require(a5_0x2c391b(0xd7)),authService=require(a5_0x2c391b(0xac));class ApplianceTurnCredentialsService{constructor(){const _0x2ab6fa=a5_0x2c391b;this['credentialsCache']=null,this[_0x2ab6fa(0xd5)]=0x0,this[_0x2ab6fa(0xc3)]=0xe10*0x3e8,this['serverUrl']=null;}[a5_0x2c391b(0xaa)](_0x3e7557){const _0x371179=a5_0x2c391b;this[_0x371179(0xc5)]=_0x3e7557,console[_0x371179(0xdb)](_0x371179(0xb5),_0x3e7557);}async[a5_0x2c391b(0xcd)](){const _0xaec864=a5_0x2c391b;if(!this[_0xaec864(0xc5)])return console[_0xaec864(0xd8)](_0xaec864(0xd3)),this[_0xaec864(0xca)]();if(!authService[_0xaec864(0xdd)]()){console['log']('[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...');const _0x31e27f=await authService['login']();if(!_0x31e27f)return console[_0xaec864(0xd8)]('[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate'),this[_0xaec864(0xca)]();}try{console[_0xaec864(0xdb)]('[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...');const _0x8196ba=new URL(_0xaec864(0xe1),this[_0xaec864(0xc5)]),_0x4402e4=_0x8196ba[_0xaec864(0xab)]===_0xaec864(0xb8),_0x20d554=_0x4402e4?https:http,_0x18e8ca=authService[_0xaec864(0xb2)]();if(!_0x18e8ca)return console['error'](_0xaec864(0xdf)),this[_0xaec864(0xca)]();return new Promise((_0x254b58,_0x2c05e7)=>{const _0xd7c72e=_0xaec864,_0x9e1491={'hostname':_0x8196ba[_0xd7c72e(0xb3)],'port':_0x8196ba[_0xd7c72e(0xc2)]||(_0x4402e4?0x1bb:0x50),'path':_0x8196ba[_0xd7c72e(0xbe)],'method':'GET','headers':{'User-Agent':_0xd7c72e(0xe2),'Authorization':_0xd7c72e(0xc6)+_0x18e8ca}},_0xa93940=_0x20d554[_0xd7c72e(0xad)](_0x9e1491,_0xa191e9=>{let _0x3d8e47='';_0xa191e9['on']('data',_0x2d8bb4=>{_0x3d8e47+=_0x2d8bb4;}),_0xa191e9['on']('end',()=>{const _0x45b977=a5_0x46f4;try{const _0x2f6aab=JSON[_0x45b977(0xe4)](_0x3d8e47);_0x2f6aab['iceServers']?(console[_0x45b977(0xdb)](_0x45b977(0xd1)),_0x254b58(_0x2f6aab[_0x45b977(0xae)])):(console['warn'](_0x45b977(0xbc)),_0x254b58(this[_0x45b977(0xca)]()));}catch(_0x3c4ea2){console[_0x45b977(0xd8)](_0x45b977(0xc1),_0x3c4ea2),_0x254b58(this[_0x45b977(0xca)]());}});});_0xa93940['on'](_0xd7c72e(0xd8),_0x266681=>{const _0x21f355=_0xd7c72e;console[_0x21f355(0xd8)](_0x21f355(0xba),_0x266681),_0x254b58(this[_0x21f355(0xca)]());}),_0xa93940[_0xd7c72e(0xda)](0x2710,()=>{const _0x4323d6=_0xd7c72e;console[_0x4323d6(0xd8)](_0x4323d6(0xb7)),_0xa93940[_0x4323d6(0xcb)](),_0x254b58(this['getFallbackIceServers']());}),_0xa93940[_0xd7c72e(0xe0)]();});}catch(_0x253ed9){return console[_0xaec864(0xd8)](_0xaec864(0xa9),_0x253ed9),this[_0xaec864(0xca)]();}}async[a5_0x2c391b(0xd9)](){const _0x55a7ad=a5_0x2c391b,_0x5ca276=Date[_0x55a7ad(0xcf)]();if(this[_0x55a7ad(0xc7)]&&_0x5ca276<this[_0x55a7ad(0xd5)])return console[_0x55a7ad(0xdb)](_0x55a7ad(0xa8)),this['credentialsCache'];const _0x466501=await this[_0x55a7ad(0xcd)]();return this[_0x55a7ad(0xc7)]=_0x466501,this[_0x55a7ad(0xd5)]=_0x5ca276+this[_0x55a7ad(0xc3)],console[_0x55a7ad(0xdb)](_0x55a7ad(0xc4)),_0x466501;}async[a5_0x2c391b(0xb4)](){return await this['getCredentials']();}[a5_0x2c391b(0xca)](){const _0x1f4762=a5_0x2c391b;return console['log'](_0x1f4762(0xc0)),[{'urls':_0x1f4762(0xb6)},{'urls':_0x1f4762(0xd0)}];}['clearCache'](){const _0x1335ee=a5_0x2c391b;this['credentialsCache']=null,this[_0x1335ee(0xd5)]=0x0,console[_0x1335ee(0xdb)]('[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared');}}module[a5_0x2c391b(0xc8)]=new ApplianceTurnCredentialsService();