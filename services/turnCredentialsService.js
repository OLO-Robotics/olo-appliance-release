function a5_0x59b8(_0x24f92e,_0x26a003){const _0x4c8878=a5_0xaa0f();return a5_0x59b8=function(_0x3cd9fa,_0x209a28){_0x3cd9fa=_0x3cd9fa-0x14f;let _0xaa0f1=_0x4c8878[_0x3cd9fa];return _0xaa0f1;},a5_0x59b8(_0x24f92e,_0x26a003);}const a5_0x280f1b=a5_0x59b8;(function(_0x3b91a8,_0x30a868){const _0x133684=a5_0x59b8,_0x1b59da=_0x3b91a8();while(!![]){try{const _0xc11704=-parseInt(_0x133684(0x15e))/0x1+parseInt(_0x133684(0x162))/0x2*(parseInt(_0x133684(0x165))/0x3)+parseInt(_0x133684(0x168))/0x4*(parseInt(_0x133684(0x16b))/0x5)+parseInt(_0x133684(0x184))/0x6+-parseInt(_0x133684(0x15a))/0x7+parseInt(_0x133684(0x17f))/0x8*(-parseInt(_0x133684(0x156))/0x9)+-parseInt(_0x133684(0x16e))/0xa*(-parseInt(_0x133684(0x14f))/0xb);if(_0xc11704===_0x30a868)break;else _0x1b59da['push'](_0x1b59da['shift']());}catch(_0xb1a2c0){_0x1b59da['push'](_0x1b59da['shift']());}}}(a5_0xaa0f,0x4c6cf));const a5_0x209a28=(function(){let _0x403674=!![];return function(_0x4dff66,_0x250564){const _0x1fba72=_0x403674?function(){const _0x4894ad=a5_0x59b8;if(_0x250564){const _0x21e661=_0x250564[_0x4894ad(0x18a)](_0x4dff66,arguments);return _0x250564=null,_0x21e661;}}:function(){};return _0x403674=![],_0x1fba72;};}()),a5_0x3cd9fa=a5_0x209a28(this,function(){const _0x23172c=a5_0x59b8;return a5_0x3cd9fa[_0x23172c(0x178)]()[_0x23172c(0x155)](_0x23172c(0x16f))['toString']()[_0x23172c(0x180)](a5_0x3cd9fa)[_0x23172c(0x155)](_0x23172c(0x16f));});a5_0x3cd9fa();function a5_0xaa0f(){const _0x3c2ea4=['36PnBxpm','iceServers','fetchCredentials','1705AoOFLW','exports','pathname','4136350qTFsQz','(((.+)+)+)+$','getFallbackIceServers','GET','end','destroy','stun:stun1.l.google.com:19302','getCredentials','cacheExpiry','http','toString','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','setTimeout','warn','parse','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','56CyNpwF','constructor','getIceServers','[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','2559492mryZnE','port','OLO-Appliance/1.0','data','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','/webrtc/turn-credentials','apply','[Appliance\x20TURN\x20Service]\x20Request\x20error:','clearCache','11yvaSJz','https:','protocol','now','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','search','636597NYcnML','credentialsCache','error','login','3437098XSBQGw','request','stun:stun.l.google.com:19302','cacheDuration','147973OdAxPS','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','isAuthenticated','initialize','134hjQNIY','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','getToken','27039hOiCYj','log','serverUrl'];a5_0xaa0f=function(){return _0x3c2ea4;};return a5_0xaa0f();}const https=require('https'),http=require(a5_0x280f1b(0x177)),authService=require('./auth');class ApplianceTurnCredentialsService{constructor(){const _0x435e41=a5_0x280f1b;this[_0x435e41(0x157)]=null,this[_0x435e41(0x176)]=0x0,this[_0x435e41(0x15d)]=0xe10*0x3e8,this[_0x435e41(0x167)]=null;}[a5_0x280f1b(0x161)](_0xc65d6){const _0x3a55f3=a5_0x280f1b;this[_0x3a55f3(0x167)]=_0xc65d6,console['log']('[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:',_0xc65d6);}async['fetchCredentials'](){const _0x596ce6=a5_0x280f1b;if(!this[_0x596ce6(0x167)])return console[_0x596ce6(0x158)]('[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized'),this[_0x596ce6(0x170)]();if(!authService[_0x596ce6(0x160)]()){console[_0x596ce6(0x166)]('[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...');const _0x12e5bf=await authService[_0x596ce6(0x159)]();if(!_0x12e5bf)return console[_0x596ce6(0x158)](_0x596ce6(0x17e)),this[_0x596ce6(0x170)]();}try{console[_0x596ce6(0x166)]('[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...');const _0x5a2e1a=new URL(_0x596ce6(0x189),this['serverUrl']),_0x5cd7b6=_0x5a2e1a[_0x596ce6(0x151)]===_0x596ce6(0x150),_0x38f378=_0x5cd7b6?https:http,_0x435dc1=authService[_0x596ce6(0x164)]();if(!_0x435dc1)return console[_0x596ce6(0x158)](_0x596ce6(0x17a)),this[_0x596ce6(0x170)]();return new Promise((_0x310195,_0x3a753c)=>{const _0x3b5353=_0x596ce6,_0x1f90ae={'hostname':_0x5a2e1a['hostname'],'port':_0x5a2e1a[_0x3b5353(0x185)]||(_0x5cd7b6?0x1bb:0x50),'path':_0x5a2e1a[_0x3b5353(0x16d)],'method':_0x3b5353(0x171),'headers':{'User-Agent':_0x3b5353(0x186),'Authorization':'Bearer\x20'+_0x435dc1}},_0x438c7d=_0x38f378[_0x3b5353(0x15b)](_0x1f90ae,_0x47ac46=>{const _0x4906a8=_0x3b5353;let _0x30219f='';_0x47ac46['on'](_0x4906a8(0x187),_0x4d3ee5=>{_0x30219f+=_0x4d3ee5;}),_0x47ac46['on'](_0x4906a8(0x172),()=>{const _0x4bd829=_0x4906a8;try{const _0x35a780=JSON[_0x4bd829(0x17d)](_0x30219f);_0x35a780[_0x4bd829(0x169)]?(console['log'](_0x4bd829(0x163)),_0x310195(_0x35a780['iceServers'])):(console[_0x4bd829(0x17c)](_0x4bd829(0x183)),_0x310195(this[_0x4bd829(0x170)]()));}catch(_0x4b8462){console[_0x4bd829(0x158)](_0x4bd829(0x179),_0x4b8462),_0x310195(this['getFallbackIceServers']());}});});_0x438c7d['on']('error',_0x494103=>{const _0x38c68a=_0x3b5353;console['error'](_0x38c68a(0x18b),_0x494103),_0x310195(this[_0x38c68a(0x170)]());}),_0x438c7d[_0x3b5353(0x17b)](0x2710,()=>{const _0x4c82f1=_0x3b5353;console[_0x4c82f1(0x158)](_0x4c82f1(0x15f)),_0x438c7d[_0x4c82f1(0x173)](),_0x310195(this[_0x4c82f1(0x170)]());}),_0x438c7d[_0x3b5353(0x172)]();});}catch(_0x423321){return console[_0x596ce6(0x158)]('[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:',_0x423321),this[_0x596ce6(0x170)]();}}async[a5_0x280f1b(0x175)](){const _0x590990=a5_0x280f1b,_0x472475=Date[_0x590990(0x152)]();if(this[_0x590990(0x157)]&&_0x472475<this[_0x590990(0x176)])return console[_0x590990(0x166)](_0x590990(0x188)),this[_0x590990(0x157)];const _0x57d28=await this[_0x590990(0x16a)]();return this[_0x590990(0x157)]=_0x57d28,this[_0x590990(0x176)]=_0x472475+this[_0x590990(0x15d)],console[_0x590990(0x166)](_0x590990(0x153)),_0x57d28;}async[a5_0x280f1b(0x181)](){const _0x3fc754=a5_0x280f1b;return await this[_0x3fc754(0x175)]();}[a5_0x280f1b(0x170)](){const _0x4c1aec=a5_0x280f1b;return console[_0x4c1aec(0x166)](_0x4c1aec(0x182)),[{'urls':_0x4c1aec(0x15c)},{'urls':_0x4c1aec(0x174)}];}[a5_0x280f1b(0x18c)](){const _0x39a457=a5_0x280f1b;this['credentialsCache']=null,this[_0x39a457(0x176)]=0x0,console['log'](_0x39a457(0x154));}}module[a5_0x280f1b(0x16c)]=new ApplianceTurnCredentialsService();