const a5_0x56d5a5=a5_0x55f5;(function(_0x449b0e,_0x5861c6){const _0x55bf47=a5_0x55f5,_0x13af84=_0x449b0e();while(!![]){try{const _0x49e690=-parseInt(_0x55bf47(0xd3))/0x1+parseInt(_0x55bf47(0xcf))/0x2*(-parseInt(_0x55bf47(0xe4))/0x3)+parseInt(_0x55bf47(0xb6))/0x4+parseInt(_0x55bf47(0xd7))/0x5*(parseInt(_0x55bf47(0xdb))/0x6)+-parseInt(_0x55bf47(0xb3))/0x7+parseInt(_0x55bf47(0xe5))/0x8*(-parseInt(_0x55bf47(0xd0))/0x9)+-parseInt(_0x55bf47(0xcb))/0xa*(-parseInt(_0x55bf47(0xc4))/0xb);if(_0x49e690===_0x5861c6)break;else _0x13af84['push'](_0x13af84['shift']());}catch(_0x47c508){_0x13af84['push'](_0x13af84['shift']());}}}(a5_0x4c11,0x540f3));const a5_0x3af273=(function(){let _0xdb577b=!![];return function(_0x3c9e9e,_0x39718c){const _0x1d116b=_0xdb577b?function(){if(_0x39718c){const _0x38ccec=_0x39718c['apply'](_0x3c9e9e,arguments);return _0x39718c=null,_0x38ccec;}}:function(){};return _0xdb577b=![],_0x1d116b;};}()),a5_0x30a6e3=a5_0x3af273(this,function(){const _0x8c5743=a5_0x55f5;return a5_0x30a6e3[_0x8c5743(0xc2)]()['search'](_0x8c5743(0xce))[_0x8c5743(0xc2)]()['constructor'](a5_0x30a6e3)[_0x8c5743(0xe9)](_0x8c5743(0xce));});function a5_0x4c11(){const _0x4b5b3c=['937884wPVcEf','getToken','now','getCredentials','error','credentialsCache','getIceServers','./auth','protocol','[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:','stun:stun1.l.google.com:19302','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:','toString','[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server','17876265bcmumY','getFallbackIceServers','/webrtc/turn-credentials','serverUrl','[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...','hostname','log','10usVkss','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','(((.+)+)+)+$','476NSBQeN','711eoaIbx','login','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','568427ZADYtq','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','[Appliance\x20TURN\x20Service]\x20Request\x20timeout','iceServers','65aePAPH','cacheExpiry','warn','pathname','270312iZZEob','isAuthenticated','end','initialize','port','parse','destroy','OLO-Appliance/1.0','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','7593uiYXMu','26008ASofcZ','[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...','stun:stun.l.google.com:19302','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','search','https','setTimeout','4713247BkBpkp','request','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate'];a5_0x4c11=function(){return _0x4b5b3c;};return a5_0x4c11();}a5_0x30a6e3();const https=require(a5_0x56d5a5(0xb1)),http=require('http'),authService=require(a5_0x56d5a5(0xbd));function a5_0x55f5(_0x201e9e,_0x6cc8ed){const _0x4e7aa1=a5_0x4c11();return a5_0x55f5=function(_0x30a6e3,_0x3af273){_0x30a6e3=_0x30a6e3-0xb1;let _0x4c11cd=_0x4e7aa1[_0x30a6e3];return _0x4c11cd;},a5_0x55f5(_0x201e9e,_0x6cc8ed);}class ApplianceTurnCredentialsService{constructor(){const _0x10658b=a5_0x56d5a5;this['credentialsCache']=null,this[_0x10658b(0xd8)]=0x0,this['cacheDuration']=0xe10*0x3e8,this['serverUrl']=null;}[a5_0x56d5a5(0xde)](_0x3d930e){const _0x22137f=a5_0x56d5a5;this[_0x22137f(0xc7)]=_0x3d930e,console[_0x22137f(0xca)](_0x22137f(0xc1),_0x3d930e);}async['fetchCredentials'](){const _0x59bce4=a5_0x56d5a5;if(!this[_0x59bce4(0xc7)])return console['error'](_0x59bce4(0xd2)),this[_0x59bce4(0xc5)]();if(!authService[_0x59bce4(0xdc)]()){console[_0x59bce4(0xca)](_0x59bce4(0xe6));const _0x4bb177=await authService[_0x59bce4(0xd1)]();if(!_0x4bb177)return console[_0x59bce4(0xba)](_0x59bce4(0xb5)),this[_0x59bce4(0xc5)]();}try{console['log'](_0x59bce4(0xc8));const _0x4c3aa4=new URL(_0x59bce4(0xc6),this[_0x59bce4(0xc7)]),_0x1b4fd0=_0x4c3aa4[_0x59bce4(0xbe)]==='https:',_0x16cfad=_0x1b4fd0?https:http,_0x50367a=authService[_0x59bce4(0xb7)]();if(!_0x50367a)return console['error'](_0x59bce4(0xcc)),this[_0x59bce4(0xc5)]();return new Promise((_0x51ffbd,_0x5e6c4d)=>{const _0x2195e0=_0x59bce4,_0x428116={'hostname':_0x4c3aa4[_0x2195e0(0xc9)],'port':_0x4c3aa4[_0x2195e0(0xdf)]||(_0x1b4fd0?0x1bb:0x50),'path':_0x4c3aa4[_0x2195e0(0xda)],'method':'GET','headers':{'User-Agent':_0x2195e0(0xe2),'Authorization':'Bearer\x20'+_0x50367a}},_0x196c4e=_0x16cfad[_0x2195e0(0xb4)](_0x428116,_0x3141d2=>{const _0x52eb8a=_0x2195e0;let _0xb0c3a4='';_0x3141d2['on']('data',_0x4330cd=>{_0xb0c3a4+=_0x4330cd;}),_0x3141d2['on'](_0x52eb8a(0xdd),()=>{const _0x141fe2=_0x52eb8a;try{const _0x4ad633=JSON[_0x141fe2(0xe0)](_0xb0c3a4);_0x4ad633[_0x141fe2(0xd6)]?(console['log'](_0x141fe2(0xc3)),_0x51ffbd(_0x4ad633[_0x141fe2(0xd6)])):(console[_0x141fe2(0xd9)](_0x141fe2(0xd4)),_0x51ffbd(this['getFallbackIceServers']()));}catch(_0x5c0885){console[_0x141fe2(0xba)](_0x141fe2(0xbf),_0x5c0885),_0x51ffbd(this['getFallbackIceServers']());}});});_0x196c4e['on'](_0x2195e0(0xba),_0x37b462=>{const _0x50a2ae=_0x2195e0;console['error']('[Appliance\x20TURN\x20Service]\x20Request\x20error:',_0x37b462),_0x51ffbd(this[_0x50a2ae(0xc5)]());}),_0x196c4e[_0x2195e0(0xb2)](0x2710,()=>{const _0x23b14d=_0x2195e0;console[_0x23b14d(0xba)](_0x23b14d(0xd5)),_0x196c4e[_0x23b14d(0xe1)](),_0x51ffbd(this[_0x23b14d(0xc5)]());}),_0x196c4e[_0x2195e0(0xdd)]();});}catch(_0x59af02){return console[_0x59bce4(0xba)](_0x59bce4(0xe3),_0x59af02),this[_0x59bce4(0xc5)]();}}async[a5_0x56d5a5(0xb9)](){const _0x126657=a5_0x56d5a5,_0x210e3f=Date[_0x126657(0xb8)]();if(this['credentialsCache']&&_0x210e3f<this['cacheExpiry'])return console[_0x126657(0xca)](_0x126657(0xe8)),this[_0x126657(0xbb)];const _0xe715f7=await this['fetchCredentials']();return this[_0x126657(0xbb)]=_0xe715f7,this[_0x126657(0xd8)]=_0x210e3f+this['cacheDuration'],console[_0x126657(0xca)](_0x126657(0xcd)),_0xe715f7;}async[a5_0x56d5a5(0xbc)](){const _0x21ed97=a5_0x56d5a5;return await this[_0x21ed97(0xb9)]();}['getFallbackIceServers'](){const _0x5ad2b7=a5_0x56d5a5;return console[_0x5ad2b7(0xca)]('[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers'),[{'urls':_0x5ad2b7(0xe7)},{'urls':_0x5ad2b7(0xc0)}];}['clearCache'](){const _0x42022a=a5_0x56d5a5;this[_0x42022a(0xbb)]=null,this[_0x42022a(0xd8)]=0x0,console['log']('[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared');}}module['exports']=new ApplianceTurnCredentialsService();