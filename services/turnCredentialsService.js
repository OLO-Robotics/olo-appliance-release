const a5_0x57b347=a5_0x1776;function a5_0x3b15(){const _0xc9cbd9=['serverUrl','[Appliance\x20TURN\x20Service]\x20Failed\x20to\x20authenticate','[Appliance\x20TURN\x20Service]\x20Fetching\x20TURN\x20credentials\x20from\x20server...','log','321843Ykrfsa','port','1105049vAclFr','OLO-Appliance/1.0','data','now','credentialsCache','394124AaHfLI','hostname','24RIqypB','toString','[Appliance\x20TURN\x20Service]\x20Cached\x20new\x20TURN\x20credentials','warn','getCredentials','parse','protocol','GET','constructor','[Appliance\x20TURN\x20Service]\x20No\x20iceServers\x20in\x20response,\x20using\x20fallback','[Appliance\x20TURN\x20Service]\x20No\x20authentication\x20token\x20available','fetchCredentials','getFallbackIceServers','setTimeout','login','initialize','[Appliance\x20TURN\x20Service]\x20Server\x20URL\x20not\x20initialized','28445jRGtdz','192qHNjPJ','[Appliance\x20TURN\x20Service]\x20Using\x20cached\x20TURN\x20credentials','3409763wloCJa','error','end','exports','616sylFxb','getIceServers','search','stun:stun.l.google.com:19302','(((.+)+)+)+$','Bearer\x20','cacheExpiry','pathname','./auth','https:','destroy','[Appliance\x20TURN\x20Service]\x20Request\x20error:','[Appliance\x20TURN\x20Service]\x20Error\x20fetching\x20credentials:','isAuthenticated','apply','1395790hAzrZL','getToken','13347nxQZlU','[Appliance\x20TURN\x20Service]\x20Credentials\x20cache\x20cleared','cacheDuration','4jsasZn','2DKSlVi','iceServers','https','[Appliance\x20TURN\x20Service]\x20Initialized\x20with\x20server\x20URL:'];a5_0x3b15=function(){return _0xc9cbd9;};return a5_0x3b15();}(function(_0x55dc0d,_0x3ee3ee){const _0x5a8c96=a5_0x1776,_0x5ec091=_0x55dc0d();while(!![]){try{const _0x5aea7d=parseInt(_0x5a8c96(0x1c3))/0x1*(-parseInt(_0x5a8c96(0x1d2))/0x2)+parseInt(_0x5a8c96(0x1cb))/0x3*(-parseInt(_0x5a8c96(0x1c2))/0x4)+parseInt(_0x5a8c96(0x1a7))/0x5*(-parseInt(_0x5a8c96(0x1a8))/0x6)+parseInt(_0x5a8c96(0x1aa))/0x7+parseInt(_0x5a8c96(0x1ae))/0x8*(parseInt(_0x5a8c96(0x1bf))/0x9)+parseInt(_0x5a8c96(0x1bd))/0xa+-parseInt(_0x5a8c96(0x1cd))/0xb*(-parseInt(_0x5a8c96(0x1d4))/0xc);if(_0x5aea7d===_0x3ee3ee)break;else _0x5ec091['push'](_0x5ec091['shift']());}catch(_0x30a50c){_0x5ec091['push'](_0x5ec091['shift']());}}}(a5_0x3b15,0x3f128));const a5_0x4c45f6=(function(){let _0x61090c=!![];return function(_0x4e2fc4,_0x2aa16b){const _0x26c0d8=_0x61090c?function(){const _0x169f4a=a5_0x1776;if(_0x2aa16b){const _0x5319ce=_0x2aa16b[_0x169f4a(0x1bc)](_0x4e2fc4,arguments);return _0x2aa16b=null,_0x5319ce;}}:function(){};return _0x61090c=![],_0x26c0d8;};}()),a5_0x4e82ee=a5_0x4c45f6(this,function(){const _0x52c3a0=a5_0x1776;return a5_0x4e82ee[_0x52c3a0(0x1d5)]()[_0x52c3a0(0x1b0)]('(((.+)+)+)+$')['toString']()[_0x52c3a0(0x1dc)](a5_0x4e82ee)[_0x52c3a0(0x1b0)](_0x52c3a0(0x1b2));});a5_0x4e82ee();const https=require(a5_0x57b347(0x1c5)),http=require('http'),authService=require(a5_0x57b347(0x1b6));function a5_0x1776(_0x4217ca,_0x9abd2e){const _0x191a80=a5_0x3b15();return a5_0x1776=function(_0x4e82ee,_0x4c45f6){_0x4e82ee=_0x4e82ee-0x1a2;let _0x3b15fc=_0x191a80[_0x4e82ee];return _0x3b15fc;},a5_0x1776(_0x4217ca,_0x9abd2e);}class ApplianceTurnCredentialsService{constructor(){const _0x2059b3=a5_0x57b347;this[_0x2059b3(0x1d1)]=null,this['cacheExpiry']=0x0,this[_0x2059b3(0x1c1)]=0xe10*0x3e8,this['serverUrl']=null;}[a5_0x57b347(0x1a5)](_0x1273da){const _0x3ebdb7=a5_0x57b347;this[_0x3ebdb7(0x1c7)]=_0x1273da,console[_0x3ebdb7(0x1ca)](_0x3ebdb7(0x1c6),_0x1273da);}async[a5_0x57b347(0x1df)](){const _0x24e486=a5_0x57b347;if(!this[_0x24e486(0x1c7)])return console['error'](_0x24e486(0x1a6)),this['getFallbackIceServers']();if(!authService[_0x24e486(0x1bb)]()){console[_0x24e486(0x1ca)]('[Appliance\x20TURN\x20Service]\x20Not\x20authenticated,\x20attempting\x20to\x20login...');const _0x8ec2aa=await authService[_0x24e486(0x1a4)]();if(!_0x8ec2aa)return console[_0x24e486(0x1ab)](_0x24e486(0x1c8)),this['getFallbackIceServers']();}try{console[_0x24e486(0x1ca)](_0x24e486(0x1c9));const _0xe8503d=new URL('/webrtc/turn-credentials',this['serverUrl']),_0x98eb07=_0xe8503d[_0x24e486(0x1da)]===_0x24e486(0x1b7),_0x3f2a04=_0x98eb07?https:http,_0x1aad08=authService[_0x24e486(0x1be)]();if(!_0x1aad08)return console[_0x24e486(0x1ab)](_0x24e486(0x1de)),this[_0x24e486(0x1a2)]();return new Promise((_0x3b511c,_0x42471c)=>{const _0x682468=_0x24e486,_0x2eb595={'hostname':_0xe8503d[_0x682468(0x1d3)],'port':_0xe8503d[_0x682468(0x1cc)]||(_0x98eb07?0x1bb:0x50),'path':_0xe8503d[_0x682468(0x1b5)],'method':_0x682468(0x1db),'headers':{'User-Agent':_0x682468(0x1ce),'Authorization':_0x682468(0x1b3)+_0x1aad08}},_0x3651b8=_0x3f2a04['request'](_0x2eb595,_0x12896b=>{const _0x5d2297=_0x682468;let _0x5a6029='';_0x12896b['on'](_0x5d2297(0x1cf),_0x3c8755=>{_0x5a6029+=_0x3c8755;}),_0x12896b['on']('end',()=>{const _0x45d62a=_0x5d2297;try{const _0x544137=JSON[_0x45d62a(0x1d9)](_0x5a6029);_0x544137[_0x45d62a(0x1c4)]?(console[_0x45d62a(0x1ca)]('[Appliance\x20TURN\x20Service]\x20Successfully\x20fetched\x20TURN\x20credentials\x20from\x20server'),_0x3b511c(_0x544137[_0x45d62a(0x1c4)])):(console[_0x45d62a(0x1d7)](_0x45d62a(0x1dd)),_0x3b511c(this[_0x45d62a(0x1a2)]()));}catch(_0x44c46f){console[_0x45d62a(0x1ab)]('[Appliance\x20TURN\x20Service]\x20Error\x20parsing\x20response:',_0x44c46f),_0x3b511c(this['getFallbackIceServers']());}});});_0x3651b8['on'](_0x682468(0x1ab),_0x513bbf=>{const _0x57bfdb=_0x682468;console[_0x57bfdb(0x1ab)](_0x57bfdb(0x1b9),_0x513bbf),_0x3b511c(this[_0x57bfdb(0x1a2)]());}),_0x3651b8[_0x682468(0x1a3)](0x2710,()=>{const _0xbea916=_0x682468;console[_0xbea916(0x1ab)]('[Appliance\x20TURN\x20Service]\x20Request\x20timeout'),_0x3651b8[_0xbea916(0x1b8)](),_0x3b511c(this[_0xbea916(0x1a2)]());}),_0x3651b8[_0x682468(0x1ac)]();});}catch(_0x2985ed){return console['error'](_0x24e486(0x1ba),_0x2985ed),this[_0x24e486(0x1a2)]();}}async['getCredentials'](){const _0x397749=a5_0x57b347,_0x53a130=Date[_0x397749(0x1d0)]();if(this[_0x397749(0x1d1)]&&_0x53a130<this[_0x397749(0x1b4)])return console[_0x397749(0x1ca)](_0x397749(0x1a9)),this[_0x397749(0x1d1)];const _0x2637de=await this['fetchCredentials']();return this[_0x397749(0x1d1)]=_0x2637de,this[_0x397749(0x1b4)]=_0x53a130+this[_0x397749(0x1c1)],console[_0x397749(0x1ca)](_0x397749(0x1d6)),_0x2637de;}async[a5_0x57b347(0x1af)](){const _0x586a35=a5_0x57b347;return await this[_0x586a35(0x1d8)]();}[a5_0x57b347(0x1a2)](){const _0x3fee70=a5_0x57b347;return console[_0x3fee70(0x1ca)]('[Appliance\x20TURN\x20Service]\x20Using\x20fallback\x20STUN\x20servers'),[{'urls':_0x3fee70(0x1b1)},{'urls':'stun:stun1.l.google.com:19302'}];}['clearCache'](){const _0x20fd33=a5_0x57b347;this['credentialsCache']=null,this[_0x20fd33(0x1b4)]=0x0,console[_0x20fd33(0x1ca)](_0x20fd33(0x1c0));}}module[a5_0x57b347(0x1ad)]=new ApplianceTurnCredentialsService();